/*! callibri_module_version  - v1.1.133  - 2025-12-02 */
window.callibri_module_version = "1.1.133";

function callibriWidgetStart(){if(_callibri.is_online_chat&&"function"==typeof callibriOnlineChatStart)callibriOnlineChatStart();else{var a=_callibri.widget_path;a||(a="//"+_callibri.cdn_host+"/widget_v2.min.js"),document.querySelector("[name=callibriWidget]")||callibriGetLibrary(a,function(){callibriInitWidget()},"callibriWidget")}}function callibriOnlineChatStart(){_callibri.widget_path="//"+_callibri.gudok_cdn_host+"/mc_v3/widget.min.js",document.querySelector("[name=callibriWidget]")||callibriGetLibrary(_callibri.widget_path,function(){window.online_chat=new MultiChat(_callibri)},"callibriWidget")}function callibriCallbackWidgetStart(){if(_callibri.ms_callback){var a=_callibri.callback_widget_path;a||(a="//"+_callibri.gudok_cdn_host+"/widget/widget_callibri.min.js"),document.querySelector("[name=callibriCallbackWidget]")||callibriGetLibrary(a,function(){window.callibriCallbackWidget=new CallbackWidget},"callibriCallbackWidget")}}function callibriPopupWidgetStart(){if(_callibri.popup_settings){var a=_callibri.popup_widget_path;a||(a="//"+_callibri.gudok_cdn_host+"/popup_widget/widget.min.js"),document.querySelector("[name=callibriPopUpWidget]")||callibriGetLibrary(a,function(){var a=_callibri.standalone_popup&&_callibri_popup_settings?_callibri_popup_settings:_callibri.popup_settings;window.callibriPopUpWidget=new PopUpWidget(a)},"callibriPopUpWidget")}}function callibriGetIEPolyfill(a,b,c){callibriGetLibrary("//"+_callibri.cdn_host+"/ie_polyfills.min.js",function(){callibriHandleResponse(a,b,c)})}function isObjectType(a){return"object"==typeof a&&!Array.isArray(a)&&null!==a}function callibridomain(){var a,b,c="";a=document.domain.split(".");var d=!callibriHasCallibriDomain()&&_callibri.allow_subdomains;return a.length>2?(b=a.length>3?2:1,!0===d&&(b-=1),c=(d?"":".")+a.slice(b,a.length).toString().replace(/,/g,".")):c=(d?"":".")+document.domain,c}function callibriHasCallibriDomain(){return document.domain.split(".").includes("callibri")}function callibriSetCookieDomain(a,b,c,d,e){"session"!==c?(void 0===e?c.setMinutes(c.getMinutes()+10):c.setDate(c.getDate()+100),c=";expires="+c.toUTCString()+";"):c="",document.cookie=a+"="+encodeURIComponent(b)+"; path=/; "+d+" "+c}function callibriSetCookie(a,b,c,d,e){var f=callibridomain();"session"!==e&&(e=e?new Date((new Date).getTime()+24*e*60*60*1e3):new Date);var g=!callibriHasCallibriDomain()&&_callibri.allow_subdomains,h=g?"":"domain="+f+";";d||callibriSetCookieDomain(a,b,e,h,c),(-1===document.cookie.indexOf(a)||d)&&(h="",callibriSetCookieDomain(a,b,e,h,c))}function callibriGetCookie(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),(c=c.replace(/^\s+|\s+$/g,""))==a)return unescape(d);return!1}function callibriXhrRequest(){for(var a,b=[function(){return a=callibriCheckIE8_9()?new XDomainRequest:new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++){try{a=b[c]()}catch(a){continue}break}return a}function callibriMakeRequest(a,b,c,d,e,f){try{var g,h,i,j,k;b=b||{};try{f=f||3e4}catch(a){f=3e4}if(!(i=callibriXhrRequest()))return;if(b.version=_callibri.version,b=callibri_add_roistat_mark(b),b=callibriAddTimezoneData(b,a),b=callibriGetCalltouchSessionId(b,a),b=callibriGetComagicSessionId(b,a),b.module_version=window.callibri_module_version,a.match(/contactus$/)||a.match(/contactus_front$/)){b.ymclid=callibriGetMetrikaClientID(!0),b.gaclid=callibriGetGaClientID(!0),b.clbvid=_callibri.clbvid||null,b.metrika_counter_id=callibriGetMerikaCounterID();var l=callibriSetPostDataFeedback(b);i.feedback_data=l}if(e||(e=_callibri.server_host),h=e+a,h=/^(https?:)/.test(h)?h:location.protocol+"//"+h,i.open("POST",h,!0),k=callibriCheckIE8_9(),g=setTimeout(function(){i.abort()},f),k)i.onload=function(){i.feedback_data&&callibriRemoveElementItemLocalStorage("callibri_feedbacks",i.feedback_data),c&&"function"==typeof c&&c(i.responseText,200)};else{try{d=d||"application/json"}catch(a){d="application/json"}i.setRequestHeader("Content-Type",d),j=document.characterSet?document.characterSet:document.charset,"utf-8"!==j.toString().toLowerCase()?i.setRequestHeader("Accept",d+"; charset="+j):i.setRequestHeader("Accept",d),i.onreadystatechange=function(){if((3==i.readyState||4==i.readyState)&&i.feedback_data&&[200,201,204,422].indexOf(i.status)>-1&&callibriRemoveElementItemLocalStorage("callibri_feedbacks",i.feedback_data),4==i.readyState&&(clearTimeout(g),c&&"function"==typeof c&&c(i.responseText,i.status)),4==i.readyState&&(0===i.status||500==i.status||i.status>=400)&&_callibri.server_host!==e){-1===[].indexOf(a)?callibriFailRequestModule(i,e,a,b,d,c):callibriMakeRequest(a,b,c,d,null,f)}}}var m=JSON.stringify(b);_callibri.btr||i.send(m)}catch(a){}}function callibriFailRequestModule(a,b,c,d,e,f){var g=d.request_number||0;if([0,429,503].indexOf(a.status)>-1&&g<3){d.request_number=g+1;var h=Math.ceil(500*Math.random()+500);setTimeout(callibriMakeRequest,h,c,d,f,e,b)}else console.error("Code: ",a.status,"error: ",a.responseText,{host:b,path:c},d)}function supports_callibri_storage(){if(_callibri.localStorage_off)return!1;try{return localStorage.setItem("test_localstorage","1"),localStorage.removeItem("test_localstorage"),!0}catch(a){return _callibri.localStorage_off=!0,!1}}function callibriGetItemLocalStorage(a){if(supports_callibri_storage()){var b=localStorage.getItem(a);return null===b&&(b=callibriGetCookie(a)),b}return callibriGetCookie(a)}function callibriSetItemStorage(a,b){var c=!0;try{localStorage.setItem(a,b)}catch(a){_callibri.localStorage_off=!0,c=!1}return c}function callibriSetItemLocalStorage(a,b){var c=!0;if(supports_callibri_storage())if(b){var d=callibriSetItemStorage(a,b);d&&(c=!1)}else localStorage.removeItem(a),c=!1!==callibriGetCookie(a,b);c&&callibriSetCookie(a,b)}function supports_callibri_session_storage(){if(_callibri.sessionStorage_off)return!1;try{return sessionStorage.setItem("test_sessionstorage","1"),sessionStorage.removeItem("test_sessionstorage"),!0}catch(a){return _callibri.sessionStorage_off=!0,!1}}function callibriGetItemSessionStorage(a){if(supports_callibri_session_storage()){var b=sessionStorage.getItem(a);return null===b&&(b=callibriGetCookie(a)),b}return callibriGetCookie(a)}function callibriTrySetItemSessionStorage(a,b){var c=!0;try{sessionStorage.setItem(a,b)}catch(a){c=!1}return c}function callibriSetItemSessionStorage(a,b){var c=!0;if(supports_callibri_session_storage())if(b){var d=callibriTrySetItemSessionStorage(a,b);d&&(c=!1)}else sessionStorage.removeItem(a),c=!1!==callibriGetCookie(a,b);c&&callibriSetCookie(a,b)}function callibriFlushTempStorage(){if(supports_callibri_storage()){var a=localStorage.getItem(_callibri.cookie_prefix+"timestamp_callibri");a=a?new Date(a):null;var b=new Date;if(a&&(b-a)/6e4>10)for(var c in localStorage)0==c.indexOf(_callibri.cookie_prefix)&&c.match("callibri")&&localStorage.removeItem(c);callibriSetItemStorage(_callibri.cookie_prefix+"timestamp_callibri",b.toString())}}function callibriRemoveElementItemLocalStorage(a,b){var c,d=callibriGetItemLocalStorage(a),e=[];d=d?JSON.parse(d):[];for(var f=0;f<d.length;f++)c=d[f],b!==c&&e.push(c);e=e.length>0?JSON.stringify(e):"",callibriSetItemLocalStorage(a,JSON.stringify(e))}function callibriSetPostDataFeedback(a){var b="";for(var c in a.feedback)c&&"number"!==c&&"session_id"!==c&&(b+=c+"-:-"+a.feedback[c].toString()+"-;-");var d=callibriGetItemLocalStorage("callibri_feedbacks");return d=d?JSON.parse(d):[],"object"!=typeof d&&(d=[]),-1===d.indexOf(b)&&(d.push(b),callibriSetItemLocalStorage("callibri_feedbacks",JSON.stringify(d))),b}function callibriReplacePhones(){if(_callibri.module_settings&&_callibri.module_settings.search_replace_number&&_callibri.module_settings.search_replace_number.length>0)_callibri.PhoneReplacer=new CallibriPhoneReplacer,_callibri.PhoneReplacer.addNumbers(_callibri.module_settings.search_replace_number),_callibri.PhoneReplacer.start(_callibri.number,_callibri.module_settings.search_replace_number_mask);else if(_callibri.module_settings&&_callibri.module_settings.elements&&_callibri.module_settings.elements.length>0){var a,b=_callibri.module_settings.elements,c=b.length;for(f=0;f<c;f++)a=b[f],callibriSetValueToBlocksByClass(a.element,_callibri.number,a.format)}else for(var d=_callibri.objects.callibri.format,e=_callibri.objects.callibri.block_class.split(","),f=0;f<e.length;f++){var g=e[f].replace(/\s/g,"");callibriSetValueToBlocksByClass("."+g,_callibri.number,d)}}function callibriReplaceCopiesPhones(a){a=a||_callibri.copies_phones;var b=[],c=[];if(a){var d,e,f,g,h=!1;for(d=0;d<a.length;d++)if(e=a[d],e.elements)for(f=0;f<e.elements.length;f++)g=e.elements[f],callibriSetValueToBlocksByClass(g.element,e.phone,g.format),h||(h=!0);else e.replace_phones&&(b.push([e.replace_phones,e.phone]),c=c.concat(e.replace_phones));if(c.length>0||Array.isArray(a)&&a.length>0&&!h){var i=_callibri.PhoneReplacer||(_callibri.PhoneReplacer=new CallibriPhoneReplacer),j=_callibri.module_settings.search_replace_number_mask;if(c.length>0){i.addNumbers(c);for(var k=i.extended_look_phones(i.numbers,i.number),l=document.querySelectorAll(i.included_tags),m=i.find_phones_on_page(k,l),n=0,o=b.length;n<o;n++){var p=b[n];i.addNumbers(p[0]),i.start(p[1],j,m)}}else i.addNumbers(a),i.start(_callibri.number,j)}}}function callibriPingCallback(a){4==a.readyState&&201!==a.status&&(callibri_ping_interval&&(clearInterval(callibri_ping_interval),callibri_ping_interval=void 0),_callibri.ping_attempt?_callibri.ping_attempt+=1:_callibri.ping_attempt=1,callibri_error_timeout=setTimeout(callibriPingNumber,Math.floor(Math.random()*Math.pow(2,_callibri.ping_attempt)*1e3))),4==a.readyState&&201===a.status&&"undefined"==typeof callibri_ping_interval&&(callibri_ping_interval=setInterval(callibriPingNumber,1e4),_callibri.ping_attempt=null)}function callibriDocumentHidden(){var a;void 0!==document.hidden?a="hidden":void 0!==document.msHidden?a="msHidden":void 0!==document.mozHidden?a="mozHidden":void 0!==document.webkitHidden&&(a="webkitHidden");var b="function"!=typeof document.hasFocus||document.hasFocus();return document[a]||!b}function callibriPingNumber(a){try{if(!callibriDocumentHidden()||a){var b=_callibri.number;if(_callibri.copies_phones){var c,d=_callibri.copies_phones.length;for(c=0;c<d;c++)b+="_"+_callibri.copies_phones[c].phone}var e="/visit?s="+_callibri.session_id+"&p="+b;_callibri.ping_delete&&(e+="&d=1"),callibriGetRequest("//"+_callibri.ws_server_host+e,callibriPingCallback)}}catch(a){callibriSendError(a,"callibriPingNumber")}}function callibriSetLocalCookieValue(a,b){var c=callibriGetResponse();if(c){var d=JSON.parse(c);d.data[a]=b,d=JSON.stringify(d),callibriSaveResponse(d)}}function callibriGetResponse(){var a=null;return supports_callibri_storage()&&(a=localStorage.getItem("callibri")),null==a&&(a=callibriGetCookie(_callibri.cookie_prefix+"data")),a&&a.indexOf('"unified_domain":')>-1?(!_callibri.unified_domain||_callibri.unified_domain&&-1===a.indexOf('"unified_domain":'+_callibri.unified_domain))&&(a=null):_callibri.unified_domain&&a&&(a=null),a}function callibriFlushResponse(a){if(callibriSetCookie(_callibri.cookie_prefix+"data","",void 0,!0),supports_callibri_storage())try{localStorage.removeItem("callibri"),localStorage.removeItem("callibri_module_settings")}catch(a){_callibri.localStorage_off=!0}if(!(document.referrer||"").match("https?://"+location.host)||a){callibriGetItemLocalStorage("callibri_visitor_send_event")&&callibriSetItemLocalStorage("callibri_visitor_send_event",null)}}function callibriSaveResponse(a){var b,c,d=!1,e=JSON.parse(a);if(supports_callibri_storage()&&(_callibri.unified_domain&&(b=JSON.parse(a),b.unified_domain=_callibri.unified_domain,a=JSON.stringify(b)),d=callibriSetItemStorage("callibri",a)),_callibri.old_module_settings||(_callibri.old_module_settings=e.data.module_settings),!d){b=JSON.parse(a);var c=b.data.module_settings;_callibri.unified_domain&&(b.unified_domain=_callibri.unified_domain),b.data.module_settings="",b=JSON.stringify(b),c&&supports_callibri_storage()&&(c.timestamp=(new Date).valueOf(),callibriSetItemStorage("callibri_module_settings",JSON.stringify(c))),callibriSetCookie(_callibri.cookie_prefix+"data",b,void 0,!0)}}function callibri_change_channel(){if(_callibri.init&&!_callibri.history_change)return!1;if(!(_callibri.landing_channels&&_callibri.landing_channels.length>0))return!1;var a=!1;return _callibri.landing_channels.some(function(a){return a.id==_callibri.channel_id&&(_callibri.current_channel=a,!0)}),(!_callibri.current_channel||!callibri_group_check(_callibri.current_channel))&&(!(!(a=_callibri.landing_channels.some(function(a){return a.id!=_callibri.channel_id&&callibri_group_check(a)}))&&!_callibri.current_channel)&&(_callibri.dynamic&&(_callibri.ping_delete=!0,callibriPingNumber(!0)),_callibri.stop_init=!0,_callibri.get_request=!1,callibriSetCookie("callibri_get_request","",void 0,!0,-1),(a||_callibri.pw)&&(delete _callibri.module_settings,delete _callibri.number,delete _callibri.only_widget,callibriFlushResponse(!0),_callibri.stop_init=!1,callibriInit(),_callibri.ping_delete=!1),!0))}function callibriHandleResponse(a,b,c){function d(a){var b=!("v2"!=_callibri.mv_version||!_callibri.chat_operator)&&_callibri.chat_operator;_callibri.history_change=!0,callibriInit(!1,!0),b&&(_callibri.chat_operator=b),"function"==typeof callibriWidgetPageNavigate&&callibriWidgetPageNavigate(a),_callibri.history_change=!1}function e(){d()}var f=!_callibri.init;try{var g,h,i;if(200!=b)return;if(callibriSetItemLocalStorage("callibri_request_send",""),a=callibriCheckIE8_9()?a.replace(/\\'/g,"'"):a,h=JSON.parse(a),void 0===h.data||"object"!=typeof h.data||"object"==typeof h.errors){callibriSetItemLocalStorage("callibri_nct","1"),"string"==typeof h.errors&&(h.errors=[[h.errors]]);for(var j in h.errors){var k="callibri error: "+h.errors[j].join(", ");void 0!==console?console.log(k):window.console.log(k)}return}var l=document.querySelector("#callibri-module-area");if("object"==typeof h.data&&h.data.number&&!h.data.only_widget&&"object"!=typeof h.errors){if(callibri_extend_ms(h),_callibri.stop_init||c&&callibri_change_channel())return;g=h.data.number,h.data.session_id&&callibriSetCookie(_callibri.cookie_prefix+"sessions_callibri",h.data.session_id,1);var m=callibriGetResponse();if(m||(h.expire_date=(new Date).toString(),a=JSON.stringify(h),callibriSaveResponse(a)),h.data.dynamic&&(callibriSetItemLocalStorage("callibri_phone",_callibri.number),h.data.copies_phones&&callibriSetItemLocalStorage("callibri_copies_phones",JSON.stringify(h.data.copies_phones)),_callibri.init||(supports_callibri_storage()&&(window.addEventListener("storage",function(a){_callibri.stop_init||"callibri_phone"==a.key&&a.newValue&&a.oldValue!==a.newValue&&(_callibri.number=a.newValue,callibriSetLocalCookieValue("number",a.newValue),callibriReplacePhones())}),h.data.copies_phones&&window.addEventListener("storage",function(a){_callibri.stop_init||"callibri_copies_phones"==a.key&&a.newValue&&a.oldValue!==a.newValue&&(_callibri.copies_phones=JSON.parse(a.newValue),callibriSetLocalCookieValue("copies_phones",_callibri.copies_phones),callibriReplaceCopiesPhones())})),h.data.ping&&(m&&callibriPingNumber(!0),callibri_ping_interval=setInterval(callibriPingNumber,1e4)))),_callibri.init&&l||"function"!=typeof callibriWidgetStart||callibriWidgetStart(),"function"==typeof callibriCallbackWidgetStart&&callibriCallbackWidgetStart(),"function"==typeof callibriPopupWidgetStart&&callibriPopupWidgetStart(),h.data.module_settings){if("function"==typeof callibriCheckMS&&callibriCheckMS(h),"string"==typeof h.data.module_settings.elements&&(h.data.module_settings.elements=JSON.parse(h.data.module_settings.elements)),h.data.module_settings.elements){var n,o=h.data.module_settings.elements;for(i=0;i<o.length;i++)n=o[i],callibriSetValueToBlocksByClass(n.element,g,n.format)}if(h.data.module_settings.pseudo_links){var p=h.data.module_settings.pseudo_links;for(i=0;i<p.length;i++)callibriSetPseudoLink(p[i])}}callibriReplaceCopiesPhones(h.data.copies_phones),callibriUseFeedback(),callibriChangeEmails(),callibriReplaceCopyChannelEmails()}else if(h.data.module_settings){if(callibri_extend_ms(h),_callibri.stop_init||c&&callibri_change_channel())return;h.data.session_id&&(callibriSetCookie(_callibri.cookie_prefix+"sessions_callibri",h.data.session_id,1),callibriUseFeedback(),callibriChangeEmails()),h.expire_date=(new Date).toString(),a=JSON.stringify(h),callibriSaveResponse(a),"v2"==_callibri.mv_version&&(_callibri.init&&(l||"function"!=typeof callibriWidgetStart)||callibriWidgetStart(),"function"==typeof callibriCheckMS&&callibriCheckMS(h)),"function"==typeof callibriCallbackWidgetStart&&callibriCallbackWidgetStart(),"function"==typeof callibriPopupWidgetStart&&callibriPopupWidgetStart()}else callibriSetItemLocalStorage("callibri_nct","1");if("v2"===_callibri.mv_version){var q=_callibri.internal_vars,r=q&&q.date||(new Date).getTime(),s=q&&q.diff||0,t=q&&q.expire_date||r;_callibri.timers||(_callibri.timers={}),clearTimeout(_callibri.timers.get_new_module_settings);var u=6e5-(r&&s<10?r-t:0);_callibri.timers.get_new_module_settings=setTimeout(function(){callibriInit()},u)}if(_callibri.module_settings&&_callibri.module_settings.tabs&&Object.keys(_callibri.module_settings.tabs).indexOf("stand_alone_socials")<0){var v=_callibri.module_settings.common.tabs_order?_callibri.module_settings.common.tabs_order:["chat","feedback","callback","contact"],w={};v.forEach(function(a){_callibri.module_settings.tabs[a]&&(w[a]=_callibri.module_settings.tabs[a])}),_callibri.module_settings.tabs=w}_callibri.module_settings&&_callibri.module_settings.changeable_tags&&_callibri.module_settings.changeable_tags.length>0&&"function"==typeof MutationObserver&&document.querySelectorAll(_callibri.module_settings.changeable_tags).forEach(function(a){var b=!1,c=new MutationObserver(function(a){a.forEach(function(a){b||(b=!0,c.disconnect(),callibriInit(!1,!0),"function"==typeof callibriSetOutsideActions&&_callibri.module_settings.tabs&&callibriSetOutsideActions(),!_callibri.only_widget&&_callibri.number&&(callibriReplacePhones(),callibriReplaceCopiesPhones()),"function"==typeof callibriOnlineChatInitOutsideActionsHandlers&&callibriOnlineChatInitOutsideActionsHandlers())})}),d={attributes:!0,childList:!0,characterData:!0};c.observe(a,d)})}catch(a){void 0!==console?console.log(a.stack):window.console.log(a),callibriSendError(a,"callibriHandleResponse")}_callibri.init=!0,callibriAfterResponse(),_callibri.get_request=!1,callibriSetCookie("callibri_get_request","",void 0,!0,-1),h&&h.data&&(h.data.clbvid&&(callibriSetCookie("clbvid",h.data.clbvid,void 0,!1,4e3),callibriFindSyncMarks()),h.data.required_file&&!document.querySelector("script[name=CallibriRequiredFile]")&&callibriGetLibrary(h.data.required_file,function(){},"CallibriRequiredFile"),callibriGetBeelinePixel(h.data.beeline_pixel_id)),f&&(!function(a){var b=a.pushState;a.pushState=function(c){return"function"==typeof a.onpushstate&&a.onpushstate({state:c}),setTimeout(d,1,arguments[2]),b.apply(a,arguments)}}(window.history),window.addEventListener("popstate",e))}function callibri_extend_ms(a){var b=_callibri.module_settings&&_callibri.module_settings.hooks_groups,c=_callibri.module_settings&&_callibri.module_settings.catchers_groups,d=_callibri.module_settings&&_callibri.module_settings.quiz_hook,e=_callibri.module_settings&&_callibri.module_settings.lcatcher,f=_callibri.module_settings&&_callibri.module_settings.operators,g=_callibri.chat_operator,h=_callibri.quizService;callibri_extend(_callibri,a.data);try{_callibri.init||callibriGetGuid(),b&&(_callibri.module_settings.hooks_groups=b),c&&(_callibri.module_settings.catchers_groups=c),e&&(_callibri.module_settings.lcatcher=e),d&&(_callibri.module_settings.quiz_hook=d),g&&(_callibri.chat_operator=g),h&&(_callibri.quizService=h),f&&(_callibri.module_settings.operators=f)}catch(a){callibriSendError(a,"callibri_extend_ms")}}function callibriGetBeelinePixel(a){a&&!document.querySelector("[name='CallibriBeelinePixel']")&&callibriGetLibrary("https://"+a+".ops.beeline.ru",function(){},"CallibriBeelinePixel")}function callibriFindSyncMarks(){if(_callibri.number&&!_callibri.cookie_fbc&&!_callibri.cookie_fbp&&_callibri.use_facebook_pixel||_callibri.session_id&&!_callibri.roistat&&_callibri.use_roistat){var a=function(a){for(var b=0;b<a.length;b++)if(callibriGetCookie(a[b]))return!0;return!1},b=function(a){for(var b,c=a,d="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid,e=d.slice(),f=0;f<c.length;f++){b=c[f];var g="roistat_visit"==b,h="cookie"+(g?"_":"")+b;_callibri[h]||(_callibri[h]=callibriGetCookie(b)),_callibri[h]&&(d+="&"+(g?"roistat":b.replace("_",""))+"="+_callibri[h])}var i="callibri_"+c.join("_");callibriGetItemLocalStorage(i)||d==e||(callibriGetRequest("//minimo.callibri.ru/"+d,function(){}),callibriSetItemStorage(i,d))},c=function(a){};_callibri.use_facebook_pixel&&(window.clb_fb_pixel=["_fbc","_fbp"],callibri_wait(window,"clb_fb_pixel",a,200,250,b,c)),_callibri.use_roistat&&(window.clb_roistat=["roistat_visit"],callibri_wait(window,"clb_roistat",a,200,250,b,c))}}function callibriUseFeedback(){if(_callibri.test_auto_form_parser&&(_callibri.form_parser=new CallibriAutoFormParser),_callibri.use_feedback)return _callibri.form_parser?void _callibri.form_parser.init():void(void 0!==_callibri.feedback_settings&&void 0!==_callibri.feedback_settings.feedback_settings&&Object.keys(_callibri.feedback_settings.feedback_settings||{}).length?_callibri.form_parser=new CallibriManualFormParser:_callibri.form_parser=new CallibriAutoFormParser)}function callibriCollectionHas(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}function callibriFindParentSelector(a,b){for(var c=document.querySelectorAll(b),d=a.parentNode;d&&!callibriCollectionHas(c,d);)d=d.parentNode;return d}function callibriRemoveClass(a,b){for(var c=0;c<a.length;c++)a[c].className.toString().match(b)&&(a[c].className=a[c].className.replace(b,"").trim())}function callibriSetPseudoLink(a){for(var b,c=document.querySelectorAll(a.element),d=c.length,e=0;e<d;e++)b=c[e],b.dataset.callibri_pseudo_link||(b.dataset.callibri_pseudo_link=!0,b.addEventListener("click",function(b){if(callibriChangeElement(b.target,a.format,a.element,_callibri.number),callibriReplacePhones(),"function"==typeof MutationObserver&&!b.target.dataset.callibri_obs){b.target.dataset.callibri_obs=!0;var c=new MutationObserver(function(c){c.forEach(function(c){"href"!==c.attributeName&&(callibriChangeElement(b.target,a.format,a.element,_callibri.number),callibriReplacePhones())})}),d={attributes:!0};c.observe(b.target,d)}},!1))}function callibriChangeElement(a,b,c,d,e){e||(e=callibriFormatOriginalNumber(d,b)),c.match(/\[href\*=tel\]/)||(a.innerHTML=e),"A"===a.tagName&&(a.href.match(/^tel\:/i)?a.href="tel:+"+d:a.href.match(/^callto\:/i)&&(a.href="callto:+"+d))}function callibriFormatOriginalNumber(a,b){a=a.substr(1);try{a=callibriFormatPhone(a,b)}catch(b){a=callibriFormatPhone(a,"+7 (#{XXX}) #{XXX}-#{XX}-#{XX}")}return a}function callibriSetValueToBlocksByClass(a,b,c){try{if(void 0!==b&&""!==b){b.match(/^(7800)|(7804)/)&&(c=c.replace("+7","8"));var d=b;b=callibriFormatOriginalNumber(b,c);for(var e=document.querySelectorAll(a),f=0;f<e.length;f++)"IMG"===e[f].tagName?callibriChangeImage(e[f],b,!1):callibriChangeElement(e[f],c,a,d,b)}}catch(a){}}function callibriChangeImage(a,b,c){var d=new Image,e=_callibri.site_id.toString()+"_"+_callibri.number+"_default.png",f=document.location.protocol+"//callibri.ru/system/customs_sites_imgs/"+e;d.onerror=d.onabort=function(){a.innerHTML=b},d.onload=function(){a.src=f,a.alt=b},d.src=f}function callibriFormatPhone(a,b){if("undefined"!=typeof callibri_numbers_format)for(var c in callibri_numbers_format)if(0==a.indexOf(c)){b=callibri_numbers_format[c];break}for(var d="",e=b.match(/#{(X)+}/gi),f=b,g=0;g<e.length;g++)f=f.replace(/#{(X)+}/i,"$$"+(g+1)),d+="("+e[g].slice(2,-1).replace(/(X)/gi,"\\d")+")";return d=new RegExp(d),a.replace(d,f)}function callibriBindReady(a){function b(){try{document.documentElement.doScroll("left"),a()}catch(a){setTimeout(b,10)}}if("loading"!==document.readyState)return void a();if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1);else if(document.attachEvent){var c;try{c=null!==window.frameElement}catch(a){}document.documentElement.doScroll&&!c&&b(),document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&a()})}else if(window.addEventListener)window.addEventListener("load",a,!1);else if(window.attachEvent)window.attachEvent("onload",a);else{var d=window.onload;window.onload=function(){d&&d(),a()}}}function callibri_extend(a,b){for(var c in b)a[c]=b[c],"module_settings"===c&&(a.module_settings=JSON.parse(JSON.stringify(b.module_settings)));return a}function callibriCheckIE8_9(){return!!navigator.userAgent.match(/(MSIE 9\.0)|(MSIE 8\.0)/)}function callibriCheckIE8_9_10_11(){return!!(navigator.userAgent.match(/(MSIE 10\.0)|(MSIE 9\.0)|(MSIE 8\.0)/)||navigator.userAgent.indexOf("Trident/7.0")>-1)}function callibriCheckIE8_9_10(){return!!navigator.userAgent.match(/(MSIE 10\.0)|(MSIE 9\.0)|(MSIE 8\.0)/)}function callibriCheckIE8(){return!!navigator.userAgent.match(/(MSIE 8\.0)/)}function callibriCheckOperaMini(){return!!/opera mini/i.test(navigator.userAgent)}function callibriCheckIE10_11_Edge(){return!!(navigator.userAgent.match(/(MSIE 10\.0)/)||navigator.userAgent.indexOf("Edge")>-1||navigator.userAgent.indexOf("Trident/7.0")>-1)}function callibriSendError(a,b,c,d){_callibri.debug&&window.console.log(a)}function callibriReachGoal(a,b){for(var c,d=a.length,e=0;e<d;e++)c=a[e],b.reachGoal(c.name)}function callibriGetMetrikaClientID(a){return _callibri.ya_client_id?_callibri.ya_client_id:(_callibri.use_guid&&!callibriGetCookie("callibri_ym_wait")&&callibriSetCookie("callibri_ym_wait","true",void 0,!0,10),null)}function callibriGetMerikaCounterID(){function a(a){if("function"==typeof a&&"function"==typeof a.counters){var b=a.counters();if(b.length>0)return b[0].id}return null}return"object"==typeof window.Ya?a(window.Ya.Metrika2)||a(window.Ya.Metrika):null}function callibriGetCalltouchSessionId(a,b){return["/module/messages","/module/contactus","/module/callibri_callback","/widget/catcher_message"].indexOf(b)<0?a:(_callibri.calltouch_session_id?a.calltouch=_callibri.calltouch_session_id:_callibri.calltouch_site_id&&!callibriGetCookie("callibri_calltouch_wait")&&callibriSetCookie("callibri_calltouch_wait","true",void 0,!0,10),a)}function callibriGetComagicSessionId(a,b){return["/module/messages","/module/contactus","/module/callibri_callback","/widget/catcher_message"].indexOf(b)<0?a:(_callibri.comagic_session_id?a.comagic=_callibri.comagic_session_id:_callibri.comagic_site_id&&!callibriGetCookie("callibri_comagic_wait")&&callibriSetCookie("callibri_comagic_wait","true",void 0,!0,10),a)}function callibriGetGaClientID(a){return _callibri.ga_client_id?_callibri.ga_client_id:(_callibri.use_guid&&!callibriGetCookie("callibri_ga_wait")&&callibriSetCookie("callibri_ga_wait","true",void 0,!0,10),null)}function callibri_wait(a,b,c,d,e,f,g){var h="callibri_await_";if(!a[h+b+"_completed"]){var i=function(){a[h+b+"_completed"]||(a[h+b+"_completed"]=!0,a[h+b]&&a[h+b].timer&&(clearInterval(a[h+b].timer),a[h+b]=null),f(a[b]))};a[b]&&g?c(a[b])?i():(g(i),setTimeout(function(){callibri_wait(a,b,c,d,e,f)},0)):c(a[b])?i():a[h+b]||(a[h+b]={timer:setInterval(function(){(c(a[b])||e<++a[h+b].attempt)&&i()},d),attempt:0})}}function callibriGetMerikaCanUsedCounterID(){var a=_callibri.metrika;if(_callibri.metrika){var b=callibriGetMerikaCounterID();if(_callibri.metrika.counter_id)return _callibri.metrika.counter_id;if(_callibri.metrika.counters_ids&&a.counters_ids.length>0){var c=!1;return _callibri.metrika.counters_ids.some(function(a){if(a==b)return c=b,b}),c}return c=callibriGetMerikaCounterID()}}function callibriCanGetTrackig(){return _callibri.dynamic||_callibri.is_online_chat||"v2"==_callibri.mv_version}function callibriSendYa(a){var b=function(a){if(a&&0!==a.indexOf("amp-")&&(_callibri.ya_client_id=a,(callibriCanGetTrackig()||callibriGetCookie("callibri_ym_wait"))&&!callibriGetItemLocalStorage("callibri_ya_client_id"))){var b="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;callibriGetRequest("//minimo.callibri.ru/"+b+"&yaclientid="+_callibri.ya_client_id,function(){});var c=callibriGetMerikaCounterID();c&&(b+="&key=metrika_counter_id&value="+c,callibriGetRequest("//minimo.callibri.ru/"+b,function(){})),callibriSetCookie("callibri_ym_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_ya_client_id",_callibri.ya_client_id)}},c=callibriGetMerikaCanUsedCounterID();if("function"==typeof window.ym&&c){ym(c,"getClientID",b);var d=[{callibri_session:_callibri.guid_key.toString()}];return _callibri.clbvid&&d.push({clbvid:_callibri.clbvid}),void ym(c,"params",d)}var e=a&&a.getClientID;if(e||callibriGetCookie("_ym_uid"))if(e)b(a.getClientID()),a.params("callibri_session",_callibri.guid_key.toString()),_callibri.clbvid&&a.params("clbvid",_callibri.clbvid);else{var f=callibriGetCookie("_ym_uid");f&&b(f)}}function callibriSendCalltouch(){if("function"!=typeof window.ct);else{var a=window.ct("calltracking_params");if(!a)return!0;var b=a.filter(function(a){return a.siteId==_callibri.calltouch_site_id})[0];if(current_counter_value=b?b.sessionId:null,!current_counter_value)return;if(_callibri.calltouch_session_id=current_counter_value,(callibriCanGetTrackig()||callibriGetCookie("callibri_calltouch_wait"))&&!callibriGetItemLocalStorage("callibri_calltoucht_session_id")){var c="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;c+="&calltouch="+current_counter_value,callibriGetRequest("//minimo.callibri.ru/"+c,function(){}),callibriSetCookie("callibri_calltouch_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_calltoucht_session_id",_callibri.calltouch_session_id)}}}function callibriSendComagic(){if("object"==typeof window.Comagic&&window.Comagic.getSessionId()){if(_callibri.comagic_session_id=window.Comagic.getSessionId(),(callibriCanGetTrackig()||callibriGetCookie("callibri_comagic_wait"))&&!callibriGetItemLocalStorage("callibri_comagic_session_id")){var a="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;a+="&key=comagic&value="+_callibri.comagic_session_id,callibriGetRequest("//minimo.callibri.ru/"+a),callibriSetCookie("callibri_comagic_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_comagic_session_id",_callibri.comagic_session_id)}}else;}function callibriGetGuid(){if(_callibri.metrika){var a=callibriGetMerikaCanUsedCounterID();if(a){var b=function(a){return!!("function"==typeof window.ym||a&&a.getClientID||callibriGetCookie("_ym_uid"))},c=function(b){document.addEventListener("yacounter"+a+"inited",b)};callibri_wait(window,"yaCounter"+a,b,50,250,callibriSendYa,c)}else if(!0===_callibri.metrika){var b=function(a){return!!callibriGetCookie("_ym_uid")};callibri_wait(window,"ym",b,50,250,callibriSendYa,c)}}if(_callibri.google_analytics4&&callibriGoogleV4Clientid(),_callibri.calltouch_site_id){var b=function(a){return!("function"!=typeof window.ct||!window.ct("calltracking_params"))};callibri_wait(window,"calltouch",b,50,250,callibriSendCalltouch)}if(_callibri.comagic_site_id){var b=function(a){return!("object"!=typeof window.Comagic||!window.Comagic.getSessionId())};callibri_wait(window,"comagic",b,50,250,callibriSendComagic)}if(_callibri.use_guid){_callibri.ga="ga_ckpr"==window.GoogleAnalyticsObject?"ga":window.GoogleAnalyticsObject;var d=function(a){return!!(a&&a.getAll||callibriGetCookie("_ga"))},e=function(a){try{
if(a&&a.getAll||!callibriGetCookie("_ga")?_callibri.ga_client_id=a.getAll()[0].get("clientId"):_callibri.ga_client_id=callibriGetCookie("_ga").replace(/GA\d+\.\d+\./,""),(callibriCanGetTrackig()||callibriGetCookie("callibri_ga_wait"))&&!callibriGetItemLocalStorage("callibri_ga_client_id")){var b="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;b+="&gaclientid="+_callibri.ga_client_id,callibriGetRequest("//minimo.callibri.ru/"+b,function(){}),callibriSetCookie("callibri_ga_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_ga_client_id",_callibri.ga_client_id)}if(_callibri.ga_goals&&_callibri.ga_goals.dimension){var c="dimension"+_callibri.ga_goals.dimension.toString(),d="dimension"+(_callibri.ga_goals.dimension+1).toString();a("set",c,_callibri.guid_key),a("set",d,_callibri.ga_client_id),a("set","&uid",_callibri.ga_client_id)}}catch(a){callibriSendError(a,"callibriSendGa")}},f=function(a){window[_callibri.ga](function(){a(window[_callibri.ga])})};callibri_wait(window,_callibri.ga,d,200,250,e,f)}}function callibriGoogleV4Clientid(){var a=function(a){return!("function"!=typeof a&&!callibriGetCookie("_ga"))},b=function(a){try{var b=a+"_ga",c=function(a){if(a&&(callibriCanGetTrackig()||callibriGetCookie("callibri_ga4_wait"))&&!callibriGetItemLocalStorage("callibri_ga4_client_id")){_callibri[b]=a;var c="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;c+="&gaclientid="+_callibri[b],callibriGetRequest("//minimo.callibri.ru/"+c,function(){}),callibriSetCookie("callibri_ga4_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_ga4_client_id",_callibri[b])}};if("function"==typeof a)return void a("get",_callibri.google_analytics4,"client_id",c);callibriGetCookie("_ga")&&c(callibriGetCookie("_ga").replace(/GA\d+\.\d+\./,""))}catch(a){callibriSendError(a,"callibriSendGa4")}},c=function(a){};callibri_wait(window,"gtag",a,200,250,b,c)}function callibriReplaceCopyChannelEmails(){if("object"==typeof _callibri&&_callibri.copies_emails&&_callibri.copies_phones){var a=_callibri.copies_emails&&_callibri.copies_emails[0]&&_callibri.copies_emails[0].email;if(a)for(var b=0;b<_callibri.copies_phones.length;b++){var c=_callibri.copies_phones[b],d=c.replace_emails;if(d&&Array.isArray(d))for(em=0;em<d.length;em++){var e=d[em];if(e.identificator){var f=document.querySelectorAll(e.identificator);for(j=0;j<f.length;j++){var g=f[j];callibriChangeEmailDOMElement(g,a)}}}}}}function callibriChangeEmails(){var a=[];if(_callibri.module_settings&&_callibri.module_settings.email_elements&&(a="string"==typeof _callibri.module_settings.email_elements?JSON.parse(_callibri.module_settings.email_elements):_callibri.module_settings.email_elements),0!=a.length&&_callibri.session_id){var b=_callibri.email;if(b){var c,d,e,f,g,h,i,j,k,l=a.length;for(g=0;g<l;g++)for(f=a[g],c=document.querySelectorAll(f),e=c.length,h=0;h<e;h++)d=c[h],callibriChangeEmailDOMElement(d,b)}if(_callibri.copies_emails)for(l=_callibri.copies_emails.length,i=0;i<l;i++)for(k=_callibri.copies_emails[i],j=k.elements.length,g=0;g<j;g++)for(f=k.elements[g].element,c=document.querySelectorAll(f),e=c.length,h=0;h<e;h++)d=c[h],callibriChangeEmailDOMElement(d,k.email)}}function callibriChangeEmailDOMElement(a,b){if(a.innerHTML=a.innerHTML.replace(/([а-яА-Яa-zA-Z0-9._-]+@[а-яА-Яa-zA-Z0-9._-]+\.[а-яА-Яa-zA-Z0-9._-]+)/gi,b),"A"===a.tagName&&0==a.href.indexOf("mailto")&&(a.href="mailto:"+b),b&&_callibri.dynamic&&!a.dataset.callibri_email){a.dataset.callibri_email=b;var c=_callibri.mobile.isMobile?"touchstart":"mouseup";a.addEventListener(c,function(a){callibriMakeRequest("/module/click",{session_id:_callibri.session_id,client_id:_callibri.site_id,key:a.target.dataset.callibri_email,event_type:"email",clbvid:_callibri.clbvid,metrika_counter_id:callibriGetMerikaCounterID()}),a.target.removeEventListener(a.type,arguments.callee,!0)})}return a}function callibriGetLibrary(a,b,c,d){if("CallibriLidCatcher"===c||"callibri_rating"===c)return void callibriLoadLibraryFromScript(a,b,c,d);var e="function"==typeof requirejs&&"function"==typeof define;_callibri.module_settings&&_callibri.module_settings.requirejs||"function"!=typeof requirejs||!function(a,b){for(var c,d,e=a.split("."),f=b.split("."),g=Math.max(e.length,f.length),h=0,i=0;i<g&&!h;i++)c=parseInt(e[i],10)||0,d=parseInt(f[i],10)||0,c<d&&(h=1),c>d&&(h=-1);return-1!=h}("2.1.13",requirejs.version)||(e=!1);var f=callibriGetCookie("callibri_requirejs");if(e)requirejs([a],function(a){window[c]=a,b()}),callibriSetCookie("callibri_requirejs","true");else{if(f)return void setTimeout(function(){callibriGetLibrary(a,b,c)},1e3);callibriLoadLibraryFromScript(a,b,c,d)}}function callibriLoadLibraryFromScript(a,b,c,d){var e=document.getElementsByTagName("head")[0],f=document.createElement("script");f.setAttribute("charset","utf-8"),f.setAttribute("type","text/javascript"),f.setAttribute("src",a),f.setAttribute("name",c),window["done_script_"+c]=!1,f.onload=f.onreadystatechange=function(){var a="done_script_"+this.getAttribute("name");window[a]||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(window[a]=!0,b())},"function"==typeof d&&(f.onerror=d),e.appendChild(f)}function callibriGetRequest(a,b,c){if(void 0===c&&(c=0),a=/^(https?:)/.test(a)?a:location.protocol+a,!callibriActiveRequests[a]){callibriActiveRequests[a]=!0;var d=callibriXhrRequest();if(!d)return void delete callibriActiveRequests[a];d.open("GET",a,!0),d.onreadystatechange=function(){if(4===d.readyState&&(delete callibriActiveRequests[a],0===d.status&&c<10))return void setTimeout(function(){callibriGetRequest(a,b,c+1)},1e3);"function"==typeof b&&b(d)},d.send()}}function callibriLoadContentCallback(a,b,c){if(a){callibriCheckIE8_9_10_11()||!Object.assign||!Array.from||callibriCheckOperaMini()&&"function"==typeof callibriGetIEPolyfill?callibriGetIEPolyfill(a,b,c):callibriHandleResponse(a,b,c);callibriBindReady(function(){_callibri.stop_init||(!_callibri.only_widget&&_callibri.number&&(callibriReplacePhones(),callibriReplaceCopiesPhones()),callibriUseFeedback(),callibriChangeEmails(),callibriReplaceCopyChannelEmails())})}}function callibriAfterResponse(){if(!_callibri.feedback_send){_callibri.feedback_send=!0;var a=callibriGetItemLocalStorage("callibri_feedbacks");if(callibriSetItemLocalStorage("callibri_feedbacks",""),a&&_callibri.init){a=JSON.parse(a);for(var b,c,d,e,f=0;f<a.length;f++){c=a[f].split("-;-"),b={feedback:{session_id:_callibri.session_id,number:_callibri.number}};for(var g=0;g<c.length;g++)feed=c[g].split("-:-"),feed.length>0&&(d=feed[0],e=feed[1],b.feedback[d]=e);callibriMakeRequest("/module/contactus",b,null,null,_callibri.api_server_host)}callibriSetItemLocalStorage("callibri_feedbacks","")}}}function callibriSetCookiePrefix(){"string"==typeof callibri_cookie_prefix?(_callibri.cookie_prefix=callibri_cookie_prefix+"_",_callibri.allow_subdomains=!1):(_callibri.cookie_prefix="v1_",_callibri.unified_domain&&(_callibri.cookie_prefix+=_callibri.unified_domain+"_"))}function callibriGetSessionCookie(){var a=callibriGetCookie(_callibri.cookie_prefix+"sessions_callibri")||null;return a||"v1_"==_callibri.cookie_prefix||(a=callibriGetCookie("v1_sessions_callibri")||null),a}function callibriInit(a,b){try{"function"==typeof getBeelineHost&&(_callibri.module_host=getBeelineHost(_callibri.module_host));var c=callibriGetCookie("callibri_get_request"),d=(new Date).valueOf();if(_callibri.get_request||c&&(d-Number(c))/1e3<30)return void(_callibri.get_request||(_callibri.get_request=!0,supports_callibri_storage()&&window.addEventListener("storage",function(a){_callibri.stop_init||"callibri"!=a.key&&"callibri_module_settings"!=a.key||!a.newValue||a.oldValue===a.newValue||(clearTimeout(window.callibri_get_request_timeout),callibriInit())}),callibri_get_request_timeout=setTimeout(function(){_callibri.get_request=!1,callibriInit(a,b)},3e3)));_callibri.get_request=!0,callibriSetCookie("callibri_get_request",d,void 0,!0),_callibri.mobile||(_callibri.mobile={}),_callibri.mobile.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|Mobi/i.test(navigator.userAgent)&&(_callibri.mobile.isMobile=!0,_callibri.mobile.iPhone=!!/iPhone/i.test(navigator.userAgent)),callibriSetCookiePrefix(),_callibri.version="1563955557",_callibri.server_host||(_callibri.server_host="in.callibri.ru"),_callibri.cdn_host||(_callibri.cdn_host="cdn.callibri.ru"),_callibri.gudok_cdn_host||(_callibri.gudok_cdn_host="cdn.gudok.tel"),_callibri.module_host||(_callibri.module_host="module.callibri.ru"),_callibri.ws_server_host||(_callibri.ws_server_host="ws.callibri.ru"),_callibri.api_server_host||(_callibri.api_server_host="https://api.callibri.ru"),_callibri.mapi_server_host||(_callibri.mapi_server_host="https://mapi.callibri.ru");(document.querySelector('script[src*="callibri-a.akamaihd.net"]')||document.querySelector('script[src*="gcdn.callibri.ru"]'))&&(_callibri.cdn_host="gcdn.callibri.ru",_callibri.gudok_cdn_host="gcdn.gudok.tel");var e,f,g=0;e=_callibri.objects.callibri,e.oid="callibri",e.format||(e.format="+7 (#{XXX}) #{XXX}-#{XX}-#{XX}"),e.block_class||(e.block_class="callibri_phone");var h=callibriGetSessionCookie();callibriFlushTempStorage();var i,j=callibriGetResponse(),k=new RegExp("^https?://"+document.domain),l=callibriGetCookie(_callibri.cookie_prefix+"referrer_callibri"),m=document.referrer,n=callibriGetItemLocalStorage(_callibri.cookie_prefix+"landing_callibri"),o=document.location.search&&document.location.search.match(/utm_referrer=([^&]*)(&|$)/);if(o&&o[1]&&0!==o[1].indexOf("?"))try{m=decodeURIComponent(o[1])}catch(a){m=document.referrer}var p=!1===l;!1===l&&(l=m,callibriSetCookie(_callibri.cookie_prefix+"referrer_callibri",l),callibriSetItemLocalStorage(_callibri.cookie_prefix+"search_callibri",i)),i=document.location.search||"",document.location.hash&&document.location.hash.match("=")&&(i+=document.location.hash.replace(/^#/,i?"&":"?"));var q=a?callibriLoadContentCallback:callibriHandleResponse;if(m&&m.match(k)){if(!h&&!1===p){if(callibriGetItemLocalStorage("callibri_nct"))return;if(f=callibriGetItemLocalStorage("callibri_request_send"))return f=JSON.parse(f),void callibriMakeRequest("/module/number",f,q,"application/json",_callibri.module_host,6e4);var r=m.split("?")[1];r&&(i="?"+r)}}else if(n!=window.location.href&&callibriSetItemLocalStorage(_callibri.cookie_prefix+"landing_callibri",window.location.href),!b){var r=callibriGetItemLocalStorage(_callibri.cookie_prefix+"search_callibri"),s=l==m&&i&&i!=r&&i.match(/(\?utm_)|(&utm_)|(yclid=)|(gclid=)|(_openstat=)|(city=)/);(s||l!=m||(n||"").replace(/\?.+/,"")!=window.location.href.replace(/\?.+/,""))&&(j="",l=m,n=window.location.href,callibriFlushResponse(!0),callibriSetCookie(_callibri.cookie_prefix+"referrer_callibri",l),callibriSetItemLocalStorage(_callibri.cookie_prefix+"search_callibri",i))}if(navigator.userAgent.toLowerCase().match("(StackRambler)|(googlebot)|(AdsBot-Google)|(APIs-Google)|(Mediapartners-Google)|(Google Page Speed)|(YandexBot)|(\\+https?:\\/\\/yandex.com\\/bots)|(\\+https?:\\/\\/www.google.com\\/bot.html)|(AdsBot-Google)|(AhrefsBot)|(aport)|(Slurp)|(msnbot)|(\\+https?:\\/\\/go.mail.ru\\/help\\/robots)|(yaDirectBot)|(yetibot)|(\\+https?:\\/\\/www\\.picsearch\\.com\\/bot\\.html)|(sape.bot)|(sape_context)|(gigabot)|(snapbot)|(qwartabot)|(aboutusbot)|(oozbot)|(bingbot)|(\\+https?:\\/\\/www\\.bing\\.com\\/bingbot\\.htm)|(SimplePie)|(SiteLockSpider)|(okhttp)|(ips-agent)|(BLEXBot)|(yanga.co.uk)|(scoutjet)|(similarpages)|(shrinktheweb.com)|(followsite.com)|(dataparksearch)|(feedfetcher-google)|(liveinternet.ru)|(xml-sitemaps.com)|(agama)|(metadatalabs.com)|(h1.hrn.ru)|(googlealert.com)|(seo-rus.com)|(Copyscape.com)|(domaintools.com)|(Nigma.ru)|(dotnetdotcom)|(alexa.com)|(megadownload.net)|(askpeter.info)|(igde.ru)|(ask.com)|(Questok.Ru bot)|(DnyzBot)|(SMTBot)|(PR-CY.RU)|(Baiduspider)|(Sogou web spider)|(Google-Adwords-DisplayAds-WebRender)|(Pulsepoint XT3 web scraper)|(vkShare)".toLowerCase())||i&&i.match(/(\{STYPE\})|(\{SRC\})|(\{PTYPE\})|(\{POS\})|(\{PARAM127\})|(\{PHRASE\})|(%7BSTYPE%7D)|(%7BSRC%7D)|(%7BPTYPE%7D)|(%7BPOS%7D)|(%7BPARAM127%7D)|(%7BPHRASE%7D)/))return;f={uid:_callibri.project_uid||document.domain,session_id:h,search:i,referrer:l,landing:document.location.href,exists_cookie_lid_catcher:!!callibriGetCookie("callibri_catcher_was_shown")||null,clbvid:callibriGetCookie("clbvid")||null,source:"callibri"},"function"==typeof setBeelineData&&(f=setBeelineData(f));var t=callibriGetCookie("callibri_page_segment");t&&(f.page_segment=t),_callibri.unified_domain&&(f.unified_domain=_callibri.unified_domain);for(var u,v=["_fbc","_fbp"],w=0;w<v.length;w++)u=v[w],_callibri["cookie"+u]=callibriGetCookie(u),_callibri["cookie"+u]&&(f[u]=_callibri["cookie"+u]);var x=new Date,y=0;try{if(j?(json=JSON.parse(j),y=new Date(json.expire_date),g=y.getTime?(x-y)/1e3/60:10,_callibri.load_chat_history=callibriGetCookie(_callibri.cookie_prefix+"callibri_chat_history")):_callibri.load_chat_history=null!==f.session_id,j&&g<10)if(json.data.module_settings)q(j,200,!0);else{var z;if(supports_callibri_storage()&&(z=localStorage.getItem("callibri_module_settings")),z)json.data.module_settings=JSON.parse(z),j=JSON.stringify(json),q(j,200,!0);else{var A=function(a){var b=callibriGetResponse();if(a&&b){json=JSON.parse(b),json.data.module_settings=JSON.parse(a),json.data.module_settings.timestamp=(new Date).valueOf();try{localStorage.setItem("callibri_module_settings",JSON.stringify(json.data.module_settings))}catch(a){}b=JSON.stringify(json)}if(b){("complete"!==document.readyState?callibriLoadContentCallback:callibriHandleResponse)(b,200,!0)}};callibriMakeRequest("/module/site_settings",{site_id:json.data.site_id,session_id:json.data.key},A,null,_callibri.module_host)}}else callibriFlushResponse(),callibriSetItemStorage("callibri_request_send",JSON.stringify(f)),callibriMakeRequest("/module/number",f,q,"application/json",_callibri.module_host,6e4);_callibri.internal_vars||(_callibri.internal_vars={}),"v2"===_callibri.mv_version&&(_callibri.internal_vars.date=x,_callibri.internal_vars.diff=g,_callibri.internal_vars.expire_date=y)}catch(a){callibriMakeRequest("/module/number",f,q,"application/json",_callibri.module_host,6e4)}}catch(a){void 0!==console?console.log(a.stack):window.console.log(a),console,callibriSendError(a,"callibriInit")}"function"==typeof callibriEtagiStartForm&&callibriEtagiStartForm(0),observeYandexMetrika()}function CallibriSendForm(a,b,c,d,e,f,g){var h={};h.feedback={name:"",phone:"",email:"",message:"",company:"",custom_fields:{},client_id:_callibri.site_id,number:_callibri.number,session_id:_callibri.session_id,page:document.location.protocol+"//"+document.location.host+document.location.pathname};var i=h.feedback;return a&&(i.phone=callibriSetCorrectPhone(a)),b&&(i.email=b),c&&(i.name=c),d&&(i.message=d),f&&(i.company=f),e&&(i.form_name=e),g&&(i.custom_fields=g),!(!callibriValidPhone(i.phone)&&!callibriValidEmail(b)||!_callibri.session_id)&&(callibriMakeRequest("/module/contactus_front",h,null,null,_callibri.api_server_host),!0)}function callibriValidEmail(a){return/^(([^\uE000-\uF8FF\uD83C\uDC00-\uDFFF\uD83D\uDC00-\uDFFF\u2011-\u26FF\uD83E\uDD10-\uDDFFА-Яа-я<>()\[\]\\.,;:\s@"]+(\.[^\uE000-\uF8FF\uD83C\uDC00-\uDFFF\uD83D\uDC00-\uDFFF\u2011-\u26FF\uD83E\uDD10-\uDDFFА-Яа-я<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|((([a-zA-Z\-0-9]|[А-Яа-я\-0-9])+\.)+([a-zA-Z]{2,}|[А-Яа-я]{2,})))$/.test(String(a).toLowerCase())}function callibriValidPhone(a){return!(!a||a.length<10||a.length>12||!a.substring(2).match(/^(\d)\1*(?!\1)(\d)+$/g))}function callibriSetCorrectPhone(a){return!!a&&(a=a.toString().replace(/\D/g,""),10==a.length&&(a="7"+a),a)}function callibri_group_check(a,b){function c(a){for(var b=0,c=Object.keys(a),f=0;f<c.length;f++){var g=c[f];a[g].some(function(a){var c=a?e.substring(0,a.length):"false";if(a.indexOf("*")>-1?(a=a.replace(/\*/gi,".*"),"="!=g&&"^"!=g||(a="^"+a,"="==g&&(a+="$")),g="~",a=new RegExp(a)):0===a.indexOf("?")&&(a=a.slice(1)),a="string"==typeof a?a.toLowerCase():a,">"==g&&d.href.toLowerCase().indexOf(a)>-1)b++;else if("^"==g&&c.toLowerCase()==a)b++;else if("="==g){var f=a.indexOf("?")>-1?e:e.replace(d.search,"");f="/"==f[f.length-1]?f.substring(0,f.length-1):f,a="/"==a[a.length-1]?a.substring(0,a.length-1):a,f.toLowerCase()==a&&b++}else{if("~"!=g||!e.toLowerCase().match(a))return;b++}return b})}return b==c.length}b||(b=document.location);var d=b,e=d.href.replace(b.protocol+"//","");e="www."==e.substring(0,4)?e.substring(4,e.length):e;bool_include=bool_start=!1;return!(a.no_url_conditions&&Object.keys(a.no_url_conditions).length>0&&c(a.no_url_conditions))&&(!(a.url_conditions&&Object.keys(a.url_conditions).length>0)||c(a.url_conditions))}function callibri_add_roistat_mark(a){if(!_callibri.use_roistat)return a;var b=_callibri.cookie_roistat_visit;return b||(b=callibriGetCookie("roistat_visit")),b?(a.roistat=b,a):a}function callibriAddTimezoneData(a,b){if(["/module/messages","/module/contactus","/module/callibri_callback","/widget/catcher_message"].indexOf(b)<0)return a;var c=callibriGetTimezone();return a.timezone_name=c.timezone_name,a.timezone_offset=c.timezone_offset,a}function callibriGetTimezone(){var a=60*(new Date).getTimezoneOffset()*-1,b="";try{b=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(a){}return{timezone_offset:a,timezone_name:b}}function observeYandexMetrika(){var a=new MutationObserver(function(){var b=_callibri.metrika&&_callibri.metrika.counters_ids;if(b&&b.length)for(var c=0;c<b.length;c++){var d="yaCounter"+b[c];if(void 0!==window[d])return callibriGetGuid(),void a.disconnect()}});a.observe(document,{childList:!0,subtree:!0})}if(window.callibri_module_version="1.1.133",Element.prototype.closest||(Element.prototype.closest=function(a){var b=this;do{if(b.matches(a))return b;b=b.parentElement}while(null!==b);return null}),CallibriAutoFormParser=function(){var a=this;a.CONSOLE_MODE_STYLES={system:"color: #FF9800; background: rgba(255, 152, 0, 0.1); padding: 8px; border-radius: 5px;",error:"color: #F44336; background: rgba(244, 67, 54, 0.1); padding: 4px 8px; border-radius: 5px;",success:"color: #4CAF50; background: rgba(76, 175, 80, 0.1); padding: 4px 8px; border-radius: 5px;"},a.BUTTON_KEYWORDS_REGEX=new RegExp(["ok","send","done","apply","submit","confirm","готово","оформить","заказать","сохранить","завершить","отправить","подтвердить"].join("|"),"i"),a.COLLECTED_FIELDS=[{key:"phone",keywords:["номер","телефон","мобильн","tel","phone","mobile","number","\\+7","8 \\("]},{key:"email",keywords:["почт","mail"]},{key:"message",keywords:["сообщен","коммент","заметк","вопрос","описан","msg","message","comment","textarea","question","description"]},{key:"name",keywords:["имя","имени","фио","зовут","name","fio"]},{key:"company",keywords:["компан","организац","фирм","firm","company","business","organization"]}].map(function(a){return a.regex=new RegExp(a.keywords.join("|"),"i"),a}),a.COLLECTED_FIELDS_KEYS=a.COLLECTED_FIELDS.map(function(a){return a.key}),a.ATTRIBUTE_PRIORITY=["type","id","name","autocomplete","className","placeholder"],a.AUTH_ATTRIBUTES=["id","name","class","action","placeholder"],a.AUTH_KEYWORDS=["auth","signin","signup","login","register","логин","пароль","вход","войти","регистрац","регистрир","авториз","аутентиф"],a.FORCE_PARSE_SELECTOR="[data-callibri-parse-form='true']",a.FORCE_IGNORE_SELECTOR=":not([data-callibri-parse-form='false'])",a.NOT_FIELD_SELECTOR=":not(input):not(button):not(select):not(textarea)",a.NOT_HIDDEN_SELECTOR=":not([type='hidden']):not([aria-hidden='true']):not([disabled]):not([readonly])",a.BASE_BUTTON_SELECTORS=["button[type='submit']","input[type='submit']","input[type='image']","button[id*='send']","button[id*='submit']","button[id*='save']","button[name*='save']","button[name*='send']","button[name*='submit']","button[class*='send']","button[class*='save']","button[class*='submit']","button[data-action*='send']","button[data-action*='submit']","button[data-action*='save']","input[id*='send']","input[id*='submit']","input[name*='send']","input[name*='submit']","input[class*='send']","input[class*='submit']","input[data-action*='send']","input[data-action*='submit']","a[id*='send']","a[id*='submit']","a[name*='send']","a[name*='submit']","a[class*='send']","a[class*='submit']","a[data-action*='send']","a[data-action*='submit']",".submit input[type='button']",a.FORCE_PARSE_SELECTOR],a.AUTH_FORM_SELECTOR=a.AUTH_ATTRIBUTES.map(function(b){return a.AUTH_KEYWORDS.map(function(a){return"["+b+"*='"+a+"']"}).join(", ")}).join(", "),a.BASE_FORM_SELECTORS=["form","[id*='form']","[name*='form']","[role*='form']","[class*='form']","[data-form]",a.FORCE_PARSE_SELECTOR],a.BASE_FIELD_SELECTORS=["input","textarea","select","[contenteditable='true']"],a.BUTTON_SELECTOR=a.BASE_BUTTON_SELECTORS.map(function(b){return b+a.FORCE_IGNORE_SELECTOR}).join(", "),a.FORM_SELECTOR=a.BASE_FORM_SELECTORS.map(function(b){return b+a.NOT_HIDDEN_SELECTOR+a.NOT_FIELD_SELECTOR+a.FORCE_IGNORE_SELECTOR}).join(", "),a.FIELD_SELECTOR=a.BASE_FIELD_SELECTORS.map(function(b){return b+a.NOT_HIDDEN_SELECTOR+a.FORCE_IGNORE_SELECTOR}).join(", "),a.init()},CallibriAutoFormParser.prototype={_boundOnDocumentClick:null,init:function(){window._callibri&&(this.removeListeners(),this.addListeners())},toArray:function(a){return Array.prototype.slice.call(a)},debugLog:function(a,b,c){var d=b?this.CONSOLE_MODE_STYLES.success:this.CONSOLE_MODE_STYLES.error;console.log("%c"+a,d),c&&c.html instanceof HTMLElement&&console.log("%o",c.html),c&&c.data instanceof Object&&console.log("%O",c.data)},removeListeners:function(){this._boundOnDocumentClick&&(document.removeEventListener("mousedown",this._boundOnDocumentClick,!0),document.removeEventListener("keydown",this._boundOnDocumentClick,!0),document.removeEventListener("touchend",this._boundOnDocumentClick,!0))},addListeners:function(){this._boundOnDocumentClick=this.onDocumentClick.bind(this),document.addEventListener("mousedown",this._boundOnDocumentClick,!0),document.addEventListener("keydown",this._boundOnDocumentClick,!0),document.addEventListener("touchend",this._boundOnDocumentClick,!0)},onDocumentClick:function(a){this.isDebugMode=!0===_callibri.debug_mode,"keydown"===a.type&&13!==a.keyCode||"mousedown"===a.type&&0!==a.button||(this.isDebugMode&&console.group("%c [Callibri] Отладка перехватчика форм",this.CONSOLE_MODE_STYLES.system),this.handleParseForm(a),this.isDebugMode&&console.groupEnd())},handleParseForm:function(a){var b=a.target;if(b&&b instanceof HTMLElement){var c=this.findSubmitButton(b);if(c){var d=this.findClosestForm(c);if(d){var e=this.findFormFields(d);if(e.length&&(e=this.getFieldsByPriority(e),!this.checkAuthForm(d,c,e))){var f=this.collectFieldsData(e);f&&this.checkCanSendRequest(d,f)&&this.sendForm(d,f)}}}}},findSubmitButton:function(a,b){var c=null;if(b&&(c=a.closest(b)||null),c||(c=a.closest(this.BUTTON_SELECTOR)||null),!c){var d=a.closest("a, button");if(d){var e=(d.textContent||d.value||"").trim();this.BUTTON_KEYWORDS_REGEX.test(e)&&(c=d)}}return this.isDebugMode&&(c?this.debugLog("Удалось найти кнопку",!0,{html:c}):this.debugLog("Не удалось найти кнопку",!1)),c},findClosestForm:function(a){var b=null;return b=a.form&&"FORM"===a.form.tagName?a.form:"string"==typeof a.form?document.querySelector("#"+a.form):a.closest(this.FORM_SELECTOR),this.isDebugMode&&(b?this.debugLog("Удалось найти форму",!0,{html:b}):this.debugLog("Не удалось найти форму",!1)),b},findFormFields:function(a){for(var b=this,c=b.toArray(a.querySelectorAll(this.FIELD_SELECTOR)),d=[],e=0;e<c.length;e++){var f=c[e];if(this.validateFieldElement(f)){var g=[f.id,f.name,f.type,f.className,f.placeholder,f.autocomplete].join(", ").toLowerCase();this.COLLECTED_FIELDS.forEach(function(a){a.regex.test(g)&&d.push({key:a.key,priority:b.getFieldPriority(f,a),element:f})})}}return b.isDebugMode&&d.length<=0&&b.debugLog("Не удалось найти ни одного поля",!1),d},getFieldPriority:function(a,b){for(var c=0;c<this.ATTRIBUTE_PRIORITY.length;c++){var d=this.ATTRIBUTE_PRIORITY[c],e=a.getAttribute(d)||"";if("string"==typeof e&&b.regex.test(e))return this.ATTRIBUTE_PRIORITY.length-c}return-1},getFieldsByPriority:function(a){for(var b=this,c=[],d=[],e=a.slice().sort(function(a,b){return b.priority-a.priority}),f=0;f<e.length;f++){var g=e[f];-1===c.indexOf(g.key)&&(c.push(g.key),d.push(g),b.isDebugMode&&b.debugLog("Удалось найти поле: "+g.key,!0,{html:g.element}))}return d},checkAuthForm:function(a,b,c){for(var d=c.map(function(a){return a.element}),e=[a,b].concat(d),f=0;f<e.length;f++){var g=e[f];if(g&&g.matches(this.AUTH_FORM_SELECTOR))return this.isDebugMode&&this.debugLog("Форма является формой авторизации/регистрации",!1),!0}return!1},validateFieldElement:function(a){return a instanceof HTMLElement&&(!a.disabled&&(!!String(a.value||"").trim()&&(!a.type||"password"!==a.type.toLowerCase())))},validateField:function(a,b){return!!b&&(!("phone"===a&&!callibriValidPhone(callibriSetCorrectPhone(b)))&&!("email"===a&&!callibriValidEmail(b)))},collectFieldsData:function(a){for(var b={name:"",phone:"",email:"",message:"",company:"",custom_fields:{}},c=!1,d=0;d<a.length;d++){var e=a[d].key,f=a[d].element,g=(f.value||"").trim();this.validateField(e,g)?("phone"!==e&&"email"!==e||(c=!0),this.COLLECTED_FIELDS_KEYS.includes(e)?b[e]=b[e]||g:b.custom_fields[e]=g):this.isDebugMode&&this.debugLog("Поле "+e+" заполнено неверно",!1,{html:f})}return c?(this.isDebugMode&&this.debugLog("Собрали данные",!0,{data:b}),b):(this.isDebugMode&&this.debugLog("Не указан телефон или email",!1),null)},checkCanSendRequest:function(a,b){return a.dataset.callibriFormSentData!==JSON.stringify(b)||(this.isDebugMode&&this.debugLog("Данные формы не изменились, повторная отправка заблокирована",!1,{data:b}),!1)},getFormName:function(a){var b=a.dataset.callibri_form_name;if(!b){var c=a.querySelector("*[data-callibri_form_name]");if(c)b=c.dataset.callibri_form_name;else if(!(b=a.getAttribute("id")||"")){var d=a.querySelector("form");d&&(b=d.getAttribute("id")||"")}}return b},sendForm:function(a,b){try{var c=this.getFormName(a)||"";"function"==typeof CallibriSendForm&&(CallibriSendForm(b.phone,b.email,b.name,b.message,c,b.company,b.custom_fields),a.dataset.callibriFormSentData=JSON.stringify(b)),this.isDebugMode&&this.debugLog("Запрос прошел успешно",!0)}catch(a){this.isDebugMode&&this.debugLog("Ошибка при отправке запроса",!1,{data:a})}}},CallibriManualFormParser=function(){CallibriAutoFormParser.call(this),this.init()},CallibriManualFormParser.prototype=Object.create(CallibriAutoFormParser.prototype),CallibriManualFormParser.prototype.constructor=CallibriManualFormParser,CallibriManualFormParser.prototype.init=function(){CallibriAutoFormParser.prototype.init.call(this)},CallibriManualFormParser.prototype.handleParseForm=function(a){if(a&&_callibri.use_feedback&&_callibri.feedback_settings&&_callibri.feedback_settings.feedback_settings){var b=a.target,c=_callibri.feedback_settings.feedback_settings;if(b&&b instanceof HTMLElement){var d=this.findClosestFormManual(b,c);if(d){var e=d.form,f=d.formElements;if(b.closest(f.button)||null){var g=this.findFormFieldsManual(e,f),h=this.collectFieldsData(g);h&&this.checkCanSendRequest(e,h)&&this.sendForm(e,h)}}}}},CallibriManualFormParser.prototype.getSelectorSpecificity=function(a){return[(a.match(/#[\w-]+/g)||[]).length,(a.match(/\.[\w-]+/g)||[]).length,(a.match(/(^|[\s>+~])\w+/g)||[]).length]},CallibriManualFormParser.prototype.compareSpecificity=function(a,b){for(var c=0;c<3;c++)if(a[c]!==b[c])return a[c]-b[c];return 0},CallibriManualFormParser.prototype.findClosestFormManual=function(a,b){var c=[];for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c.push({selector:d,formElements:e,specificity:this.getSelectorSpecificity(d)})}c.sort(function(a,b){return-this.compareSpecificity(a.specificity,b.specificity)}.bind(this));for(var f=0;f<c.length;f++){var d=c[f].selector,e=c[f].formElements,g=a.closest(d);if(g)return this.isDebugMode&&this.debugLog("Нажатый элемент внутри формы: ",!0,{html:g}),{form:g,formElements:e}}return null},CallibriManualFormParser.prototype.findFormFieldsManual=function(a,b){var c=[];for(var d in b)if(b.hasOwnProperty(d)&&"button"!==d){for(var e=b[d],f=a.querySelectorAll(e),g=[],h=0;h<f.length;h++){var i=f[h];this.validateFieldElement(i)&&g.push(i)}if(0!==g.length){var j=g[0];this.isDebugMode&&this.debugLog("Удалось найти поле "+d+" по селектору "+e,!0,{html:j}),c.push({key:d,priority:1,element:j})}}return this.isDebugMode&&c.length<=0&&this.debugLog("Не удалось найти ни одного поля",!1),c},CallibriPhoneReplacer=function(a){this.init(a)},CallibriPhoneReplacer.prototype={init:function(a){var b=this;b.numbers=[],b.addNumbers(a),b.number=_callibri.number,b.included_tags="*:not(script):not(noscript):not(style):not(head):not(html):not(svg):not(img):not(defs):not(g):not(path):not(desc)",b.defaultFormatMask="XXX"},addNumbers:function(a){this.numbers=a},setMask:function(a){var b=this;b.format_mask=a||b.defaultFormatMask},setNumber:function(a){this.number=a},start:function(a,b,c){var d=this;d.setNumber(a||_callibri.number),d.setMask(b);var e="object"==typeof c?c:document.querySelectorAll(c||d.included_tags),f=d.extended_look_phones(d.numbers,d.number),g=d.find_phones_on_page(f,e);d.phone_for_replace=d.number,g.length&&g.forEach(function(a){f.forEach(function(b){d.replace_inner_html(a,b),d.replace_html_attributes(a,b)})})},extended_look_phones:function(a,b){var c=[];return a.slice().forEach(function(a){var d=a,e=void 0;if(isObjectType(a)&&(d=a.phone,e=a.format),d!==b){c.push({phone:d,mask:e}),d.match(/^7[0-68-9]\d{9}$/)&&c.push({phone:d.replace(/^7/,"8"),mask:e});for(var f=d.slice(1);f.length>6;)c.push({phone:f,mask:e}),f=f.slice(1)}}),c.sort(function(a,b){return b.phone.length-a.phone.length})},find_phones_on_page:function(a,b){if(0===a.length)return[];var c=this,d=[],e=new RegExp("("+a.map(function(a){return a.phone}).join(")|(")+")","gi"),f=Array.from(b).filter(function(a){return"BODY"!==a.tagName&&(c.str_only_digits(a.textContent).match(e)||c.str_only_digits(a.outerHTML).match(e))&&!a.outerHTML.match(/(base64)|(\S+@[\d\-]+\.)|([\d+\-]+@\S+\.)/)}),g=f.length;if(g>1)for(var h=0;h<g;h++){var i=f[h],j=h+1,k=[],l=i.querySelectorAll(c.included_tags);if(0!==l.length){l=Array.from(l);var m=f.slice(j);k=m.filter(function(a){return-1!==l.indexOf(a)})}if(0===k.length||"A"==i.tagName)d.push(i);else{var n,o,p=c.match_length_number(i,e),q=0,r=0;k.forEach(function(a){a.parentElement==i&&(o=c.match_length_number(a,e),q+=o[1],o[0]>r&&(r=o[0]))}),n=p[0]>r||p[1]>q,n&&d.push(i)}}else d=f;return d.sort(function(a,b){var d=c.match_length_number(a,e),f=c.match_length_number(b,e);return d[1]-f[1]})},str_only_digits:function(a){return a.replace(/\D+/g,"")},match_length_number:function(a,b){var c=this.str_only_digits(a.textContent).match(b);if(c&&c[0].length>0){var d=c[0].length,e=c.filter(function(a){return a}).length,f="A"==a.tagName||a.dataset.phone?1:0;if(f+=a.querySelectorAll("*[data-phone]").length,!((f+=2*a.querySelectorAll("a[href^=tel]").length)>0&&f>e))return[d,e];c=null}if(!c){var g=a.outerHTML.replace(/<!--.*?-->/g,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");c=this.str_only_digits(g).match(b)}return c&&c[0].length>0?[c[0].length,c.filter(function(a){return a}).length]:[0,0]},replace_inner_html:function(a,b){var c=this,d=Boolean(b.mask),e=b.phone,f=["\\d"],g=c.is_change_plus_7(b.phone)||d,h=b.mask&&b.mask.match(/#\{(.*?)\}/);h=h?h[1]:c.format_mask,g&&"8"!==e[0]&&(f.push("\\+"),e="+"+e);var i=c.getListIdx(c.str_only(a.textContent,f),e);if(0!==i.length)if(c.is_change_code_town(a.textContent,i[0],b)&&h===c.format_mask)c.replace_inner_with_town_code(i[0],e,f,g,a,b.mask);else{var j,k,l,m,n=d?window.callibriFormatOriginalNumber(c.phone_for_replace,b.mask):c.setup_phone_for_replace(b.phone),o=a.innerHTML.slice(),p=e.length-1,q=[];i.forEach(function(a){j=0,l=-1,k=o.slice().split("");for(var b,e,f=!1,h=0;h<k.length;h++){
b=void 0;var i=k[h];if("<"===i&&(f=!0),!f)if(i.match(/\d/)||g&&"+"===i){if((++l===a||j>0)&&(m=n[j],"number"!=typeof e&&(e=h),m||q.push(h),o=c.string_replace_at(o,h,m||" "),j++,(n.length!==j||d)&&(b=h),j>p))break}else d&&i===n[j]&&(j++,p++);">"===i&&(f=!1)}if(d&&"number"==typeof b){var r=o.slice(0,e),s=o.slice(b+1);o=r+n+s}}),o=c.remove_symbols(o,q),a.innerHTML=o}},is_change_plus_7:function(a){var b=this;return!(a.length<11)&&("7"===a[0]&&(0!==a.indexOf("7800")&&0===b.phone_for_replace.indexOf("7800")))},getListIdx:function(a,b){for(var c=[],d=-1;-1!==(d=a.indexOf(b,d+1));)c.push(d);return c},str_only:function(a,b){var c=a.slice(),d=new RegExp(b.join("|"));return c.split("").filter(function(a){return a.match(d)}).join("")},is_change_code_town:function(a,b,c){var d=this;return!(!d.format_mask||c.phone.length!=d.phone_for_replace.length)&&(d.look_phone_mask=d.find_look_phone_mask(a,b),!(!d.look_phone_mask||d.look_phone_mask.length<3)&&d.format_mask.length!==d.look_phone_mask.length)},find_look_phone_mask:function(a,b){var c=a.split(/[^\d]/).filter(function(a){return a});if(!(c&&c.length>0&&c[b]&&1!==c[b].length))return c[b+1]},replace_inner_with_town_code:function(a,b,c,d,e,f){var g=this,h=g.setup_phone_for_replace(b),i=b.length-1,j=e.innerHTML.slice(),k="object"==typeof h?h.join(""):h,l=b.replace(/[^\d;]/g,"");if("7800"!=k.substring(0,4)&&"8800"!=k.substring(0,4)||"7800"===l.substring(0,4)&&"8800"===l.substring(0,4)||(h=k.replace("7","8")),a>=0){var m=g.get_phone_array(a,d,j,i);e.innerHTML=g.change_with_town_code(m,h,j,f,b,d),a=this.getListIdx(this.str_only(e.innerText,c),b)[0]||-1}},setup_phone_for_replace:function(a,b){var c=this,d=c.phone_for_replace.slice(),e=d.length-a.length;if(0===e){var f="7"===d[0]&&"8"===a[0],g=!b&&c.is_change_plus_7(a);(f||g)&&(d=c.string_replace_at(d,0,"8"),g&&(e=-1))}return 0!==e&&(d=e>0?d.slice(e,d.length):new Array(Math.abs(e)).concat(d.split(""))),d},string_replace_at:function(a,b,c){var d=b+c.length;return""===c&&(d+=2),a.substr(0,b)+c+a.substr(d)},format_phone_number:function(a,b){var c=a.match(/\d/g);if(!c||c.length<b.split("X").length-1)return null;for(var d="",e=0,f=0;f<b.length;f++)"X"===b[f]?(d+=c[e],e++):d+=b[f];var g=a.split(/\d|-/).filter(function(a){return""!==a}),h=g[0],i="";return g.length>1&&(i=g[1]),h+d+i},get_phone_array:function(a,b,c,d){index_phone=0,index_int=-1,array=c.slice().split(""),is_attribute=!1,phone_array=[];for(var e=0;e<array.length;e++){var f=array[e];if("<"===f&&(is_attribute=!0),!is_attribute&&(f.match(/\d/)||b&&"+"==f)&&(++index_int===a||index_phone>0)&&(phone_array.push(e),index_phone+=1,index_phone>d))break;">"===f&&(is_attribute=!1)}return phone_array},group_symbols_by_phone_array:function(a){for(var b,c,d,e=[[]],f=0,g=a.length;f<g;f++)d=e[e.length-1],b=a[f],d.push(b),(c=a[f+1])&&c!==b+1&&e.push([]);return e},text_content_replace:function(a,b,c,d,e){var f=this;for(i=a,x=b.length;i<x;i++)b[i].forEach(function(a){d[e]&&(c=f.string_replace_at(c,a,d[e])),e+=1});return c},format_mask_without_town_code:function(a){var b=a.indexOf("#");if(-1===b)return a;var c=a.indexOf(" ",b);-1===c&&(c=a.indexOf("#",b+1)-1)<0&&(c=a.length);var d=a.substring(c+1);return("-"===a.replace(d,"").slice(a.replace(d,"").length-1)?"-":"")+d.replace(/[#{}()]/g,"")},change_with_town_code:function(a,b,c,d,e,f){var g=this;if(d){var h=d.match(/#\{(.*?)\}/);h=h?h[1]:void 0;for(var i,j=new RegExp(/#\{(.*?)\}/g),k=[];null!==(i=j.exec(d));)k.push(i);k.splice(0,1);var l=k.map(function(a){return a[1]}).join("-"),m=g.format_mask_without_town_code(d),n=null!==d.match(/\((.*?)\)/g),o=d.includes("8")}var p,q,r=h?h.length-g.look_phone_mask.length:g.format_mask.length-g.look_phone_mask.length,s=g.group_symbols_by_phone_array(a),t=0;if("object"==typeof b&&(b=b.join("")),s[0].forEach(function(a){"+"==c[a]?(q=[a],c=g.string_replace_at(c,a,"+")):(c=g.string_replace_at(c,a,b[t]),t+=1)}),r>0)p=b.slice(t,s[1].length+r+1),c=c.slice(0,s[2][0])+c.slice(s[2][r]),c=c.slice(0,s[1][0])+p+c.slice(s[1][s[1].length-1]+1),t+=p.length,s[2].slice(r).forEach(function(a){c=g.string_replace_at(c,a,b[t]),t+=1});else{r=Math.abs(r);var u=t+s[1].length;p=d?b.slice(u-r,u+l.split("-")[0].length-1):b.slice(u-r,u+s[2].length),c=c.slice(0,s[2][0])+p+c.slice(s[2][s[2].length-1]+1);var v,w=b.slice(t,s[1].length-r+1);v=d?g.format_phone_number(c.slice(s[1][s[1].length-1]+1),m):c.slice(s[1][s[1].length-1]+1),c=n||void 0===n?c.slice(0,s[1][0])+w+v:c.slice(0,s[1][0]-1)+w+v.slice(1),t+=d?s[1].length-1+s[2].length-1:s[1].length+s[2].length}if(d){var g=this,b=g.setup_phone_for_replace(e),x=e.length-1,y=g.get_phone_array(0,f,c,x),s=g.group_symbols_by_phone_array(y);c=g.text_content_replace(2,s,c,b,t)}else c=g.text_content_replace(3,s,c,b,t);return q&&"7"!==c[q[0]+1]&&(c=g.remove_symbols(c,q)),o&&c.includes("+7")&&(c=c.replace("+7","8")),c},remove_symbols:function(a,b){if(0===b.length)return a;for(var c,d,e=a.substr(0,b[0]),f=0,g=b.length;f<g;f++)c=b[f+1],d=b[f]+1,e+=c?a.substr(d,c):a.substr(d);return e},replace_html_attributes:function(a,b){var c=this,d=b.phone;if(c.str_only_digits(a.outerHTML).match(d)){var e=c.setup_phone_for_replace(d),f=["id","class","data-callibri-tracking-click-phone"],g=a.getElementsByTagName("*");g=Array.from(g),g.push(a),g.forEach(function(a){Array.from(a.attributes||[]).forEach(function(b){if(-1===f.indexOf(b.name)&&"function"!=typeof a[b.name]){var g=a.getAttribute(b.name);if("href"!==b.name||g&&0===g.toLowerCase().indexOf("tel:")){var h=c.replace_str_on_number(g,d,e);h&&(4==h.indexOf("+ 8")&&(h=h.replace("+ 8","+7")+e[e.length-1]),a.setAttribute(b.name,h))}}})})}},replace_str_on_number:function(a,b,c){var d=this,e=d.getListIdx(this.str_only_digits(a),b);if(0!==e.length){var f,g,h,i=a.slice(),j=b.length-1;return e.forEach(function(a){f=0,h=-1,g=i.slice().split("");for(var b=0;b<g.length;b++){if(g[b].match(/\d/)&&((++h===a||f>0)&&(i=d.string_replace_at(i,b,c[f]||" "),(f+=1)>j)))break}}),i}}},!_callibri)var _callibri={objects:{callibri:{block_class:"callibri_phone",format:"+7 (#{XXX}) #{XXX}-#{XX}-#{XX}"}}};_callibri.objects||(_callibri.objects={callibri:{block_class:"callibri_phone",format:"+7 (#{XXX}) #{XXX}-#{XX}-#{XX}"}});var callibriActiveRequests=Object.create(null);callibriInit(!0);