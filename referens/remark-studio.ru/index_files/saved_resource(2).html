
<!-- saved from url=(0011)about:blank -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="google" content="notranslate"><meta http-equiv="X-UA-Compatible" content="IE=edge"><script type="text/javascript">window.onerror = function g(e,t,n,o,r){r&&r.error&&(r=r.error),r&&r instanceof Error||(r={}),r.stack=r.stack||"empty",r.message="Bundle init error: "+e+" error.message: "+r.message,r.columnNumber=o,r.lineNumber=n,r.url=t,window.parent.__jivoOnError(r)};!function(){var e,t,n,r,i,o,a={20438:function(e,t,n){"use strict";e.exports=n(12316)},12989:function(e){"use strict";var t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,o={};((e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})})(o,{Immer:()=>q,applyPatches:()=>oe,castDraft:()=>le,castImmutable:()=>ce,createDraft:()=>ae,current:()=>Y,enableMapSet:()=>X,enablePatches:()=>Q,finishDraft:()=>se,freeze:()=>D,immerable:()=>s,isDraft:()=>d,isDraftable:()=>g,nothing:()=>a,original:()=>h,produce:()=>te,produceWithPatches:()=>ne,setAutoFreeze:()=>re,setUseStrictShallowCopy:()=>ie}),e.exports=(e=>((e,o,a,s)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let l of r(o))!i.call(e,l)&&l!==a&&t(e,l,{get:()=>o[l],enumerable:!(s=n(o,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),e))(o);var a=Symbol.for("immer-nothing"),s=Symbol.for("immer-draftable"),l=Symbol.for("immer-state");function c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var u=Object.getPrototypeOf;function d(e){return!!e&&!!e[l]}function g(e){return!!e&&(f(e)||Array.isArray(e)||!!e[s]||!!e.constructor?.[s]||E(e)||b(e))}var p=Object.prototype.constructor.toString();function f(e){if(!e||"object"!=typeof e)return!1;let t=u(e);if(null===t)return!0;let n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===p}function h(e){return d(e)||c(15),e[l].t}function m(e,t){0===_(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function _(e){let t=e[l];return t?t.o:Array.isArray(e)?1:E(e)?2:b(e)?3:0}function v(e,t){return 2===_(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){return 2===_(e)?e.get(t):e[t]}function C(e,t,n){let r=_(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function E(e){return e instanceof Map}function b(e){return e instanceof Set}function S(e){return e.e||e.t}function T(e,t){if(E(e))return new Map(e);if(b(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let n=f(e);if(!0===t||"class_only"===t&&!n){let t=Object.getOwnPropertyDescriptors(e);delete t[l];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){let i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(u(e),t)}{let t=u(e);if(null!==t&&n)return{...e};let r=Object.create(t);return Object.assign(r,e)}}function D(e,t=!1){return O(e)||d(e)||!g(e)||(_(e)>1&&(e.set=e.add=e.clear=e.delete=w),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>D(t,!0))),e}function w(){c(2)}function O(e){return Object.isFrozen(e)}var A,M={};function I(e){let t=M[e];return t||c(0),t}function R(e,t){M[e]||(M[e]=t)}function k(){return A}function L(e,t){t&&(I("Patches"),e.f=[],e.h=[],e.b=t)}function P(e){x(e),e.a.forEach(F),e.a=null}function x(e){e===A&&(A=e.i)}function N(e){return A=function(e,t){return{a:[],i:e,p:t,P:!0,d:0}}(A,e)}function F(e){let t=e[l];0===t.o||1===t.o?t.x():t.m=!0}function j(e,t){t.d=t.a.length;let n=t.a[0];return void 0!==e&&e!==n?(n[l].s&&(P(t),c(4)),g(e)&&(e=B(t,e),t.i||V(t,e)),t.f&&I("Patches").T(n[l].t,e,t.f,t.h)):e=B(t,n,[]),P(t),t.f&&t.b(t.f,t.h),e!==a?e:void 0}function B(e,t,n){if(O(t))return t;let r=t[l];if(!r)return m(t,(i,o)=>U(e,r,t,i,o,n)),t;if(r.n!==e)return t;if(!r.s)return V(e,r.t,!0),r.t;if(!r.c){r.c=!0,r.n.d--;let t=r.e,i=t,o=!1;3===r.o&&(i=new Set(t),t.clear(),o=!0),m(i,(i,a)=>U(e,r,t,i,a,n,o)),V(e,t,!1),n&&e.f&&I("Patches").g(r,n,e.f,e.h)}return r.e}function U(e,t,n,r,i,o,a){if(d(i)){let a=B(e,i,o&&t&&3!==t.o&&!v(t.r,r)?o.concat(r):void 0);if(C(n,r,a),!d(a))return;e.P=!1}else a&&n.add(i);if(g(i)&&!O(i)){if(!e.p.y&&e.d<1)return;B(e,i),(!t||!t.n.i)&&"symbol"!=typeof r&&Object.prototype.propertyIsEnumerable.call(n,r)&&V(e,i)}}function V(e,t,n=!1){!e.i&&e.p.y&&e.P&&D(t,n)}var W={get(e,t){if(t===l)return e;let n=S(e);if(!v(n,t))return function(e,t,n){let r=$(t,n);return r?"value"in r?r.value:r.get?.call(e.u):void 0}(e,n,t);let r=n[t];return e.c||!g(r)?r:r===H(e.t,t)?(Z(e),e.e[t]=K(r,e)):r},has(e,t){return t in S(e)},ownKeys(e){return Reflect.ownKeys(S(e))},set(e,t,n){let r=$(S(e),t);if(r?.set)return r.set.call(e.u,n),!0;if(!e.s){let r=H(S(e),t),i=r?.[l];if(i&&i.t===n)return e.e[t]=n,e.r[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||v(e.t,t)))return!0;Z(e),z(e)}return e.e[t]===n&&(void 0!==n||t in e.e)||Number.isNaN(n)&&Number.isNaN(e.e[t])||(e.e[t]=n,e.r[t]=!0),!0},deleteProperty(e,t){return void 0!==H(e.t,t)||t in e.t?(e.r[t]=!1,Z(e),z(e)):delete e.r[t],e.e&&delete e.e[t],!0},getOwnPropertyDescriptor(e,t){let n=S(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:1!==e.o||"length"!==t,enumerable:r.enumerable,value:n[t]}},defineProperty(){c(11)},getPrototypeOf(e){return u(e.t)},setPrototypeOf(){c(12)}},G={};function H(e,t){let n=e[l];return(n?S(n):e)[t]}function $(e,t){if(!(t in e))return;let n=u(e);for(;n;){let e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=u(n)}}function z(e){e.s||(e.s=!0,e.i&&z(e.i))}function Z(e){e.e||(e.e=T(e.t,e.n.p.S))}m(W,(e,t)=>{G[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),G.deleteProperty=function(e,t){return G.set.call(this,e,t,void 0)},G.set=function(e,t,n){return W.set.call(this,e[0],t,n,e[0])};var q=class{constructor(e){this.y=!0,this.S=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){let n=t;t=e;let r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}let r;if("function"!=typeof t&&c(6),void 0!==n&&"function"!=typeof n&&c(7),g(e)){let i=N(this),o=K(e,void 0),a=!0;try{r=t(o),a=!1}finally{a?P(i):x(i)}return L(i,n),j(r,i)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===a&&(r=void 0),this.y&&D(r,!0),n){let t=[],i=[];I("Patches").T(e,r,t,i),n(t,i)}return r}c(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){g(e)||c(8),d(e)&&(e=Y(e));let t=N(this),n=K(e,void 0);return n[l].l=!0,x(t),n}finishDraft(e,t){let n=e&&e[l];(!n||!n.l)&&c(9);let{n:r}=n;return L(r,t),j(void 0,r)}setAutoFreeze(e){this.y=e}setUseStrictShallowCopy(e){this.S=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){let r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));let r=I("Patches").A;return d(e)?r(e,t):this.produce(e,e=>r(e,t))}};function K(e,t){let n=E(e)?I("MapSet").I(e,t):b(e)?I("MapSet").D(e,t):function(e,t){let n=Array.isArray(e),r={o:n?1:0,n:t?t.n:k(),s:!1,c:!1,r:{},i:t,t:e,u:null,e:null,x:null,l:!1},i=r,o=W;n&&(i=[r],o=G);let{revoke:a,proxy:s}=Proxy.revocable(i,o);return r.u=s,r.x=a,s}(e,t);return(t?t.n:k()).a.push(n),n}function Y(e){return d(e)||c(10),J(e)}function J(e){if(!g(e)||O(e))return e;let t,n=e[l];if(n){if(!n.s)return n.t;n.c=!0,t=T(e,n.n.p.S)}else t=T(e,!0);return m(t,(e,n)=>{C(t,e,J(n))}),n&&(n.c=!1),t}function Q(){let e="replace",t="add",n="remove";function r(e){if(!g(e))return e;if(Array.isArray(e))return e.map(r);if(E(e))return new Map(Array.from(e.entries()).map(([e,t])=>[e,r(t)]));if(b(e))return new Set(Array.from(e).map(r));let t=Object.create(u(e));for(let n in e)t[n]=r(e[n]);return v(e,s)&&(t[s]=e[s]),t}function i(e){return d(e)?r(e):e}R("Patches",{A:function(i,o){return o.forEach(o=>{let{path:a,op:s}=o,l=i;for(let e=0;e<a.length-1;e++){let t=_(l),n=a[e];"string"!=typeof n&&"number"!=typeof n&&(n=""+n),(0===t||1===t)&&("__proto__"===n||"constructor"===n)&&c(19),"function"==typeof l&&"prototype"===n&&c(19),l=y(l,n),"object"!=typeof l&&c(18,a.join("/"))}let u=_(l),d=r(o.value),g=a[a.length-1];switch(s){case e:switch(u){case 2:return l.set(g,d);case 3:c(16);default:return l[g]=d}case t:switch(u){case 1:return"-"===g?l.push(d):l.splice(g,0,d);case 2:return l.set(g,d);case 3:return l.add(d);default:return l[g]=d}case n:switch(u){case 1:return l.splice(g,1);case 2:return l.delete(g);case 3:return l.delete(o.value);default:return delete l[g]}default:c(17)}}),i},g:function(r,o,a,s){switch(r.o){case 0:case 2:return function(r,o,a,s){let{t:l,e:c}=r;m(r.r,(r,u)=>{let d=y(l,r),g=y(c,r),p=u?v(l,r)?e:t:n;if(d===g&&p===e)return;let f=o.concat(r);a.push(p===n?{op:p,path:f}:{op:p,path:f,value:g}),s.push(p===t?{op:n,path:f}:p===n?{op:t,path:f,value:i(d)}:{op:e,path:f,value:i(d)})})}(r,o,a,s);case 1:return function(r,o,a,s){let{t:l,r:c}=r,u=r.e;u.length<l.length&&([l,u]=[u,l],[a,s]=[s,a]);for(let t=0;t<l.length;t++)if(c[t]&&u[t]!==l[t]){let n=o.concat([t]);a.push({op:e,path:n,value:i(u[t])}),s.push({op:e,path:n,value:i(l[t])})}for(let e=l.length;e<u.length;e++){let n=o.concat([e]);a.push({op:t,path:n,value:i(u[e])})}for(let e=u.length-1;l.length<=e;--e){let t=o.concat([e]);s.push({op:n,path:t})}}(r,o,a,s);case 3:return function(e,r,i,o){let{t:a,e:s}=e,l=0;a.forEach(e=>{if(!s.has(e)){let a=r.concat([l]);i.push({op:n,path:a,value:e}),o.unshift({op:t,path:a,value:e})}l++}),l=0,s.forEach(e=>{if(!a.has(e)){let a=r.concat([l]);i.push({op:t,path:a,value:e}),o.unshift({op:n,path:a,value:e})}l++})}(r,o,a,s)}},T:function(t,n,r,i){r.push({op:e,path:[],value:n===a?void 0:n}),i.push({op:e,path:[],value:t})}})}function X(){class e extends Map{constructor(e,t){super(),this[l]={o:2,i:t,n:t?t.n:k(),s:!1,c:!1,e:void 0,r:void 0,t:e,u:this,l:!1,m:!1}}get size(){return S(this[l]).size}has(e){return S(this[l]).has(e)}set(e,n){let r=this[l];return i(r),(!S(r).has(e)||S(r).get(e)!==n)&&(t(r),z(r),r.r.set(e,!0),r.e.set(e,n),r.r.set(e,!0)),this}delete(e){if(!this.has(e))return!1;let n=this[l];return i(n),t(n),z(n),n.t.has(e)?n.r.set(e,!1):n.r.delete(e),n.e.delete(e),!0}clear(){let e=this[l];i(e),S(e).size&&(t(e),z(e),e.r=new Map,m(e.t,t=>{e.r.set(t,!1)}),e.e.clear())}forEach(e,t){S(this[l]).forEach((n,r,i)=>{e.call(t,this.get(r),r,this)})}get(e){let n=this[l];i(n);let r=S(n).get(e);if(n.c||!g(r)||r!==n.t.get(e))return r;let o=K(r,n);return t(n),n.e.set(e,o),o}keys(){return S(this[l]).keys()}values(){let e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}}entries(){let e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let n=this.get(t.value);return{done:!1,value:[t.value,n]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.e||(e.r=new Map,e.e=new Map(e.t))}class n extends Set{constructor(e,t){super(),this[l]={o:3,i:t,n:t?t.n:k(),s:!1,c:!1,e:void 0,t:e,u:this,a:new Map,m:!1,l:!1}}get size(){return S(this[l]).size}has(e){let t=this[l];return i(t),t.e?!!(t.e.has(e)||t.a.has(e)&&t.e.has(t.a.get(e))):t.t.has(e)}add(e){let t=this[l];return i(t),this.has(e)||(r(t),z(t),t.e.add(e)),this}delete(e){if(!this.has(e))return!1;let t=this[l];return i(t),r(t),z(t),t.e.delete(e)||!!t.a.has(e)&&t.e.delete(t.a.get(e))}clear(){let e=this[l];i(e),S(e).size&&(r(e),z(e),e.e.clear())}values(){let e=this[l];return i(e),r(e),e.e.values()}entries(){let e=this[l];return i(e),r(e),e.e.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){let n=this.values(),r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}}function r(e){e.e||(e.e=new Set,e.t.forEach(t=>{if(g(t)){let n=K(t,e);e.a.set(t,n),e.e.add(n)}else e.e.add(t)}))}function i(e){e.m&&c(3,JSON.stringify(S(e)))}R("MapSet",{I:function(t,n){return new e(t,n)},D:function(e,t){return new n(e,t)}})}var ee=new q,te=ee.produce,ne=ee.produceWithPatches.bind(ee),re=ee.setAutoFreeze.bind(ee),ie=ee.setUseStrictShallowCopy.bind(ee),oe=ee.applyPatches.bind(ee),ae=ee.createDraft.bind(ee),se=ee.finishDraft.bind(ee);function le(e){return e}function ce(e){return e}},53362:function(e,t,n){"use strict";e.exports=n(12989)},1451:function(e,t,n){"use strict";n.d(t,{qF:function(){return u},qM:function(){return h}});var r=n(98661),i=n(40066);function o(e,t,n,o=!0){const[a]=(0,r.useState)(()=>{return t=e,Object.assign(Object.assign({},t),{t(...e){const n=(0,i.Wz)(...e);return t.t(Object.assign(Object.assign({},n),{noWrap:!0}))}});var t}),[s,l]=(0,r.useState)(o);return(0,r.useEffect)(()=>{l(!1)},[]),(0,r.useMemo)(()=>{o&&(e.setEmitterActive(!1),e.addStaticData(n),e.changeLanguage(t),e.setEmitterActive(!0))},[t,n,e]),(0,r.useState)(()=>{if(!e.isLoaded()&&o){const n=e.getRequiredDescriptors(t),r=e.getAllRecords(),i=n.map(({namespace:e,language:t})=>e?`${e}:${t}`:t).filter(e=>!r.find(t=>(null==t?void 0:t.cacheKey)===e));console.warn(`Tolgee: Missing records in "staticData" for proper SSR functionality: ${i.map(e=>`"${e}"`).join(", ")}`)}}),s?a:e}const a={useSuspense:!1};let s;const l=()=>(s||(s=r.default.createContext(void 0)),s);let c;const u=({tolgee:e,options:t,children:n,fallback:i,ssr:s})=>{(0,r.useEffect)(()=>{(null==c?void 0:c.run)!==e.run&&(c&&c.stop(),c=e,e.run().catch(e=>{console.error(e)}).finally(()=>{f(!1)}))},[e]);let u=e;const{language:d,staticData:g}="object"!=typeof s?{}:s;u=o(e,d,g,Boolean(s));const[p,f]=(0,r.useState)(!u.isLoaded()),h=Object.assign(Object.assign({},a),t),m=l();return h.useSuspense?r.default.createElement(m.Provider,{value:{tolgee:u,options:h}},p?i:r.default.createElement(r.Suspense,{fallback:i||null},n)):r.default.createElement(m.Provider,{value:{tolgee:u,options:h}},p?i:n)};let d;const g=()=>{const e=l(),t=(0,r.useContext)(e)||d;if(!t)throw new Error("Couldn't find tolgee instance, did you forgot to use `TolgeeProvider`?");return t},p=()=>{const[e,t]=(0,r.useState)(0);return{instance:e,rerender:(0,r.useCallback)(()=>{t(e=>e+1)},[t])}},f=(e,t)=>{const{tolgee:n,options:o}=g(),a=(0,i.go)(e),s=(0,i.xk)(a).join(":"),l=Object.assign(Object.assign({},o),t),{rerender:c,instance:u}=p();(0,r.useRef)([]).current=[];const d=n.isLoaded(a);(0,r.useEffect)(()=>{const e=n.on("update",c);return()=>{e.unsubscribe()}},[s,n]),(0,r.useEffect)(()=>(n.addActiveNs(a),()=>n.removeActiveNs(a)),[s,n]);const f=(0,r.useCallback)(e=>{var t;const r=null!==(t=e.ns)&&void 0!==t?t:null==a?void 0:a[0];return n.t(Object.assign(Object.assign({},e),{ns:r}))},[n,u]);if(l.useSuspense&&!d)throw n.addActiveNs(a,!0);return{t:f,isLoading:!d}},h=(e,t)=>{const{t:n,isLoading:o}=f(e,t);return{t:(0,r.useCallback)((...e)=>{const t=(0,i.Wz)(...e);return n(t)},[n]),isLoading:o}}},50789:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.ApiProvider=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(10018)),s=n(16026),l=n(44145),c=n(95911),u=n(6693),d=n(45926);const g="1";const p=new(function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"getCustomerIoInvites",value:function(e,t){let n=s.EnvironmentManager.isDevelopment()&&a.default.mockRequests&&a.default.mockRequests.customerIO?"/configs/development/customerIO.json":this.getApiHost()+`/api/${g}/sites/${a.default.site_id}/widgets/${a.default.widget_id}/invitation/`;a.default.customerIOurl&&s.EnvironmentManager.isTesting()&&(n=a.default.customerIOurl),this.sendApiRequest(n,{user_token:e},t)}},{key:"acceptWebRTCCall",value:function(e,t){const n=(0,l.getClient)(),r=this.getTelephonyHost()+`/api/${g}/sites/${a.default.site_id}/widgets/${a.default.widget_id}/clients/${n.clientId.split(".")[0]}/telephony/widget-call/accept`;this.sendPostApiRequest(r,{call_id:e},t)}},{key:"declineWebRTCCall",value:function(e,t){const n=(0,l.getClient)(),r=this.getTelephonyHost()+`/api/${g}/sites/${a.default.site_id}/widgets/${a.default.widget_id}/clients/${n.clientId.split(".")[0]}/telephony/widget-call/decline`;this.sendPostApiRequest(r,{call_id:e},t)}},{key:"sendClientAttributes",value:async function(e,t){const n=this.getApiWidgetUrl(t)+"/attributes";return c.promisedRequest.post(n,{headers:{"Content-Type":u.CONTENT_TYPE.X_WWW_FORM,authorization:t.split(".")[1]},body:e})}},{key:"getAiProactive",value:function(e,t){const n=this.getApiWidgetUrl(t.clientId)+"/ai-invitation";return c.promisedRequest.post(n,{headers:{"Content-Type":u.CONTENT_TYPE.X_WWW_FORM,authorization:t.clientId.split(".")[1]},body:e,timeout:t.timeout})}},{key:"sendApiRequest",value:function(e,t,n){c.xhrRequest.get(e,n,{params:t})}},{key:"sendPostApiRequest",value:function(e,t,n){c.xhrRequest.post(e,n,{headers:{"Content-Type":u.CONTENT_TYPE.X_WWW_FORM},body:t})}},{key:"getApiHost",value:function(){return(0,d.getProtocol)()+"//"+a.default.api_host}},{key:"getTelephonyHost",value:function(){return(0,d.getProtocol)()+"//"+a.default.tel_host}},{key:"getApiWidgetUrl",value:function(e){return this.getApiHost()+`/api/${g}/sites/${a.default.site_id}/widgets/${a.default.widget_id}/clients/${e.split(".")[0]}`}}]),e}());t.ApiProvider=p},86961:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(10018)),s=n(16026),l=n(44145),c=n(95911),u=n(6693),d=n(45683);let g=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"getHeaders",value:function(){const e=(0,l.getClient)();return{"x-jv-client-id":e.clientId,"x-visitor-id":e.visitorId}}},{key:"getStatus",value:function(e){this.getChatServerData("status",{},e)}},{key:"getVisitorNumber",value:function(e){this.getChatServerData("visitor_number",{},e)}},{key:"getMessages",value:function(e,t){this.getChatServerData("messages",e,t)}},{key:"getChatServerData",value:function(e,t,n){const r=(0,l.getClient)(),i=r.visitorId?`/${r.visitorId}`:"",o=this.shouldMockRequest(e)?`/configs/development/${e}.json`:(0,d.getChatServerHost)()+`/widget/${e}/${a.default.site_id}/${a.default.widget_id}${i}`;this.sendChatServerRequest(o,t,n)}},{key:"getHistoryMessages",value:function(e,t,n){const r=this.shouldMockRequest("messages")?"/configs/development/messages.json":(0,d.getChatServerHost)()+`/client/${a.default.site_id}/${a.default.widget_id}/${e}`;this.sendChatServerRequest(r,t,n,this.getHeaders())}},{key:"sendChatServerRequest",value:function(e,t,n,r){c.xhrRequest.get(e,n,{headers:r,params:t})}},{key:"postClientTags",value:function(e,t){const n=(0,d.getChatServerHost)()+`/client/${a.default.site_id}/${a.default.widget_id}/attach_tags`,r=this.getHeaders(),i={tag_id:e};r["Content-Type"]=u.CONTENT_TYPE.APP_JSON,c.xhrRequest.post(n,t,{headers:r,body:i})}},{key:"postCampaignData",value:function(e,t){var n,r,i,o;const s=(0,d.getChatServerHost)()+`/client/${a.default.site_id}/${a.default.widget_id}/campaign`,l=this.getHeaders(),g={campaign_id:e.campaignId,type:e.type,answer_data:JSON.stringify(null!==(n=e.answerData)&&void 0!==n?n:{}),rate:null!==(r=e.rate)&&void 0!==r?r:0,comment:null!==(i=e.comment)&&void 0!==i?i:"",client_answer_id:null!==(o=e.clientAnswerId)&&void 0!==o?o:null};l["Content-Type"]=u.CONTENT_TYPE.APP_JSON,c.xhrRequest.post(s,t,{headers:l,body:g})}},{key:"shouldMockRequest",value:function(e){return s.EnvironmentManager.isDevelopment()&&a.default.mockRequests&&a.default.mockRequests[e]}}]),e}();t.default=g},44733:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.isJvKeyForStoreToGet=t.StorageProvider=void 0;var i=r(n(67375)),o=r(n(10018)),a=n(38632),s=n(10895),l=n(39731),c=n(38392),u=n(53401);const d=o.default.widget_id,g=e=>(e=>/^jv_/.test(e))((0,i.default)(e,1)[0]),p=e=>/^jv_store/.test(e);t.isJvKeyForStoreToGet=p;const f=(e,t)=>{const n=`jv_${e}_${d}`;return t?`${n}_${t}`:n},h=e=>{if((e=>/^store_[a-z]*$/.test(e))(e)){const t=(0,l.splitString)(e,"_"),n=(0,i.default)(t,2),r=n[0],o=n[1];return f(r,o)}return f(e)},m={get:e=>a.parentLS.get(h(e)),set:(e,t)=>a.parentLS.set(h(e),t),remove:e=>a.parentLS.remove(h(e)),migrate:(0,s.compose)(e=>e.forEach(e=>{let t=(0,i.default)(e,2),n=t[0],r=t[1];const o=p(n)?(0,l.splitString)(n,"_")[0]:n;a.parentLS.set(o,r),(0,u.deleteCookie)(n)}),e=>e.filter(g),u.splitCookieOnEntries),createKeyForStore:e=>`store_${e}`,duplicateClientStateInCookie:e=>{const t=f("store",`client_${d}`),n=(0,c.pick)(e,"client_id","jv_sess_id","user_token","visitorId");return(0,u.setCookie)(t,n)}};t.StorageProvider=m},20758:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(10018)),s=n(16016),l=n(21951),c=n(44733),u=n(69882),d=n(35333),g=n(47361),p=n(52028),f=n(45926);const h=n(89766).EventEmitter,m=1500;var _=new(function(){function e(){if((0,i.default)(this,e),this.readMessages={},this.lastBufferUpdatedTime=(new Date).getTime(),this.initBufferFn=(0,g.debounce)(this.initBuffer.bind(this),500),this.initBuffer(),this.emitter=new h,(0,u.isWixEditor)()||p.isDesignerEditor)return;const t=(0,f.getPageWindow)();(0,l.addListener)(t,"storage",e=>{(e||t.event).key==="jv_eBuffer_"+a.default.widget_id&&this.parseNewEvents()})}return(0,o.default)(e,[{key:"initBuffer",value:function(){const e=c.StorageProvider.get("eBuffer")||[],t=this.filterOldEvents(e);(0,d.each)(t,e=>{this.readMessages[e.id]}),e.length!==t.length&&c.StorageProvider.set("eBuffer",t)}},{key:"sendEvent",value:function(e,t){const n={time:(new Date).getTime(),id:(0,s.generateGUIDCount)(2),name:e,data:t||{}},r=this.filterOldEvents(c.StorageProvider.get("eBuffer")||[]);r.push(n),this.readMessages[n.id]=!0,c.StorageProvider.set("eBuffer",r),setTimeout(()=>{this.initBufferFn()},1505)}},{key:"filterOldEvents",value:function(e){var t=[];return(0,d.each)(e,e=>{(new Date).getTime()-e.time>m?delete this.readMessages[e.id]:t.push(e)}),t}},{key:"parseNewEvents",value:function(){const e=c.StorageProvider.get("eBuffer");e&&(0,d.each)(e,e=>{!this.readMessages[e.id]&&(new Date).getTime()-e.time<m&&this.triggerEvent(e)})}},{key:"triggerEvent",value:function(e){this.readMessages[e.id]=!0,this.emitter.emit("tabsEvent_"+e.name,e.data)}},{key:"on",value:function(e,t){return this.emitter.addListener("tabsEvent_"+e,t)}}]),e}());t.default=_},34973:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(44733),s=n(35333),l=r(n(20758)),c=n(52028),u=n(16026),d=n(90061),g=n(47361),p=n(17662),f=n(16016),h=r(n(6131));const m=(0,d.createLogger)("ArrayStore"),_=n(89766).EventEmitter;let v=function(){function e(t){(0,i.default)(this,e),this.settings=t,this.emitter=new _,this.store=[],this.initArrayStore(),this.protectOthersTabs(),this.triggerFn=(0,g.debounce)(this.trigger,100)}return(0,o.default)(e,[{key:"initArrayStore",value:function(){const e=a.StorageProvider.get(this.settings.name+"_items")||[];(0,s.each)(e,e=>{if(!a.StorageProvider.get(e))return;const t=new(this.settings.itemClass||h.default)({type:this.settings.type,name:e,keys:this.settings.keys});this.addTriggers(t),this.store.push(t),this.sort()})}},{key:"addTriggers",value:function(e){e.on("all",()=>{this.trigger("update",e)}),e.on("destroy",this.onRemoveItem.bind(this,e))}},{key:"push",value:function(e){const t=this.createInst(e);return this.addTriggers(t),t.set(e),this.store.push(t),this.sort(),this.backup(t),this.triggerFn("create",t),t.unStorage&&t.unStorage()||l.default.sendEvent(`${this.settings.name}_addArrayItem`,{name:t.getName()}),t}},{key:"createInst",value:function(e){let t=this.settings.type;(e.body&&e.body.unsave||c.isDesignerEditor)&&(t="memory");let n={};const r=this.settings.itemClass||h.default;for(let e=0;e<3&&(n=new r({type:t,name:(0,f.generateGUIDCount)(2),keys:this.settings.keys}),!(n instanceof r));e++);return n}},{key:"sort",value:function(){}},{key:"pushAll",value:function(e){var t=[];return(0,s.each)(e,e=>{t.push(this.push(e))}),t}},{key:"getAll",value:function(){return this.store}},{key:"toJSON",value:function(){var e=[];return(0,s.each)(this.store,t=>{e.push(t.toJSON())}),e}},{key:"each",value:function(e){(0,s.each)(this.store,t=>{e(t.toJSON(),t)})}},{key:"onRemoveItem",value:function(e){const t=this.store.findIndex(t=>t===e);this.store.splice(t,1),this.trigger("remove"),this.backup(),l.default.sendEvent(`${this.settings.name}_removeArrayItem`,{name:e.getName()})}},{key:"backup",value:function(){const e=[];(0,s.each)(this.store,t=>{t.unStorage&&t.unStorage()||e.push(t.getName())}),a.StorageProvider.set(this.settings.name+"_items",e.length?e:[])}},{key:"protectOthersTabs",value:function(){l.default.on(`${this.settings.name}_addArrayItem`,e=>{const t=new(this.settings.itemClass||h.default)({type:this.settings.type,name:e.name,keys:this.settings.keys});(0,p.isEmpty)(t)?m.warn(`${this.settings.name}_addArrayItem inst is empty!`,e,t):(this.addTriggers(t),this.store.push(t),this.sort(),this.trigger("create",t,!0))}),l.default.on(`${this.settings.name}_removeArrayItem`,e=>{const t=this.store.findIndex(t=>t.getName()===e.name);t>=0&&(this.store.splice(t,1),this.sort(),this.trigger("remove"))})}},{key:"trigger",value:function(e,t,n){setTimeout(()=>{this.emitter.emit(e,t,n)},0)}},{key:"itemTrigger",value:function(){}},{key:"on",value:function(e,t){return this.emitter.addListener(e,t)}},{key:"onItem",value:function(e){return this.emitter.addListener(`${this.settings.name}_update`,cb)}},{key:"destroy",value:function(){const e=this.store;this.store=[],e.forEach(e=>{e.destroy()}),this.backup(),this.trigger("remove")}}]),e}();t.default=v,u.EnvironmentManager.isDevelopment()&&(window.parent.ArrayStore=v)},66547:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(35333),s=r(n(73687));const l=(0,n(90061).createLogger)("SessionStore",{style:"color: grey"}),c="sess_";var u=new(function(){function e(){(0,i.default)(this,e),l.log("init session store"),this.sessionKeysList=this.initSessionKeysList(),this.startTimer()}return(0,o.default)(e,[{key:"initSessionKeysList",value:function(){return s.default.getKeysByPrefix(s.default.getPrefix()+c)}},{key:"set",value:function(e,t){-1===this.sessionKeysList.indexOf(e)&&this.sessionKeysList.push(e),s.default.set(c+e,t,43200)}},{key:"get",value:function(e){return s.default.get(c+e)}},{key:"startTimer",value:function(){setInterval(()=>{l.log("startTimer",this.sessionKeysList),(0,a.each)(this.sessionKeysList,e=>{const t=this.get(e);t&&(l.log("update session",e,t),this.set(e,t))})},6e4)}}]),e}());t.default=u},6131:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(90061),s=n(16016),l=r(n(20758)),c=n(44733),u=n(16026),d=n(60277),g=n(35333),p=n(17662),f=n(47361);const h=(0,a.createLogger)("Store"),m=n(89766).EventEmitter,_=[];let v=function(){function e(t){(0,i.default)(this,e);if(this.registrName(t.name))return h.warn("Dublicate name for Store keyName"),{};this.settings=t,this.store=this.getDefaultKeys(),this.emitter=new m,"session"===t.type?this.initSessionStore():"default"===t.type?this.initDefaultStore():"memory"===t.type&&this.initMemoryStore(),this.protectOthersTabs(),this.allKeysUpdateDebounce=(0,f.debounce)(this.allKeysUpdate,150)}return(0,o.default)(e,[{key:"registrName",value:function(e){return _.indexOf(e)>-1||(_.push(e),!1)}},{key:"initDefaultStore",value:function(){var e=c.StorageProvider.get(this.settings.name)||{};this.store=(0,d.extend)(this.store,e)}},{key:"initMemoryStore",value:function(){}},{key:"initSessionStore",value:function(){let e=c.StorageProvider.get(this.settings.name)||{};if(e){h.log("resetSession store");var t=(0,s.generateGUIDCount)(2);e=this.store,e._id=t,e._clearTime=(new Date).getTime()+5e3,c.StorageProvider.set(this.settings.name,e),l.default.sendEvent(`${this.settings.name}_resetSessionStore`)}this.store=e}},{key:"getDefaultKeys",value:function(){var e={};return(0,g.each)(this.settings.keys,(t,n)=>{"function"==typeof t?e[n]=t():null!==t&&"{}"!==JSON.stringify(t)&&(e[n]=t)}),e}},{key:"isDeepName",value:function(e){return"string"==typeof e&&e.split(".").length>1}},{key:"getDeepName",value:function(e){const t=e.split(".");return this.isDeepName(e)?t:[e]}},{key:"set",value:function(e,t){if(!(0,p.isObject)(e))return this.setKey(e,t);(0,g.each)(e,(e,t)=>{this.set(t,e)})}},{key:"setDeepKey",value:function(e,t,n){if("string"==typeof n&&(n=n.split(".")),!(n.length>1))return null===t?delete e[n[0]]:e[n[0]]=t,t;{const r=n.shift();(0,p.isObject)(e[r])||(e[r]={}),this.setDeepKey(e[r],t,n)}}},{key:"setKey",value:function(e,t,n){return void 0===this.settings.keys[this.getDeepName(e)[0]]?(h.error("Error: set not initialized key "+e),null):(this.get(e)===t||(this.isDeepName(e)?this.setDeepKey(this.store,t,e):null===t?delete this.store[e]:this.store[e]=t,this.trigger(e,t),n||this.triggerAndBackup(e)),t)}},{key:"get",value:function(e){return this.isDeepName(e)?void 0===this.settings.keys[this.getDeepName(e)[0]]?(h.error("Error: get not initialized key "+e),null):this.findObj(this.store,e):void 0===this.settings.keys[e]?(h.error("Error: get not initialized key "+e),null):this.store[e]||null}},{key:"findObj",value:function(e,t){const n=t.split(".");let r,i=e;for(r=0;r<n.length;++r){if(null==i[n[r]])return null;i=i[n[r]]}return i}},{key:"destroy",value:function(){this.trigger("destroy"),c.StorageProvider.remove(this.settings.name),this.store={},this.emitter.removeAllListeners()}},{key:"toJSON",value:function(){return this.store}},{key:"triggerAndBackup",value:function(e){"memory"!==this.settings.type&&(this.unStorage&&this.unStorage()||c.StorageProvider.set(this.settings.name,this.store),l.default.sendEvent(`${this.settings.name}_updateStore`,{name:this.settings.name,keyName:e,val:this.get(e)||null}))}},{key:"allKeysUpdate",value:function(){this.emitter.emit(`${this.settings.name}_change_all`,this.store)}},{key:"trigger",value:function(e,t){this.emitter.emit(`${this.settings.name}_change_${e}`,t),this.allKeysUpdateDebounce()}},{key:"on",value:function(e,t){return this.emitter.addListener(`${this.settings.name}_change_${e}`,t)}},{key:"protectOthersTabs",value:function(){l.default.on(`${this.settings.name}_updateStore`,e=>{e.name===this.settings.name&&this.setKey(e.keyName,e.val,!0)}),l.default.on(`${this.settings.name}_resetSessionStore`,()=>{this.store={}})}},{key:"getName",value:function(){return this.settings.name}}]),e}();var y=v;t.default=y,u.EnvironmentManager.isDevelopment()&&(window.parent.Store=v)},73687:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(35333),s=r(n(10018)),l=n(44733),c=n(38632);const u=(0,n(90061).createLogger)("TempStore",{style:"color: grey"}),d="temp_";var g=new(function(){function e(){(0,i.default)(this,e),this.cleanExpiredKeys()}return(0,o.default)(e,[{key:"set",value:function(e,t,n){if(u.log("set",e,t,n),!n)throw new Error("cant set in TempStore without seconds");if(null===t)return u.log("remove key on data",e),void l.StorageProvider.remove(d+e);t={val:t,expire:(new Date).setTime((new Date).getTime()+1e3*n)},l.StorageProvider.set(d+e,t)}},{key:"get",value:function(e){const t=l.StorageProvider.get(d+e);return t&&t.expire?t.expire<(new Date).getTime()?null:t.val:t}},{key:"cleanExpiredKeys",value:function(){const e=this.getKeysByPrefix(d);(0,a.each)(e,e=>{const t=d+e,n=l.StorageProvider.get(t);n&&n.expire&&n.expire<(new Date).getTime()&&(u.log("delete key on init expire:",t),l.StorageProvider.remove(t))})}},{key:"getKeysByPrefix",value:function(e){const t=[],n=c.parentLS;if(n)for(const r in n)if(r&&0==r.search(new RegExp("^jv_"+e))){const n=r.replace(`jv_${e}`,"").replace(`_${s.default.widget_id}`,"");t.push(n)}return t}},{key:"getPrefix",value:function(){return d}}]),e}());t.default=g},97939:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BotType=void 0;t.BotType={DEFAULT:"default",ASSISTANT:"assistant"}},34445:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatStatus=void 0;t.ChatStatus={STARTUP:"startup",STARTUP_OK:"startup_ok",STARTUP_ERROR:"startup_error",RESUME_OK:"resume_ok"}},4425:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMode=void 0;t.ChatMode={OFFLINE:"offline",ONLINE:"online"}},12494:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadError=void 0;t.FileUploadError={FILE_SIZE_EXCEEDED:"FILE_SIZE_EXCEEDED",RESTRICTED_FILE_TYPE:"RESTRICTED_FILE_TYPE",NO_EXTENSION:"NO_EXTENSION",REQUEST_FAILED:"REQUEST_FAILED",UPLOAD_CANCELED:"UPLOAD_CANCELED"}},6211:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Limits=void 0;t.Limits={STATS_CHUNK_LIMIT:40}},57930:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Locator=void 0;t.Locator={LABEL_COPYRIGHT_POPUP:"LABEL_COPYRIGHT_POPUP",HEADER_AVATAR:"HEADER_AVATAR",HEADER_AVATAR_ANON:"HEADER_AVATAR_ANON",CHAT_AVATAR:"CHAT_AVATAR",CHAT_AVATAR_ANON:"CHAT_AVATAR_ANON",CHAT_COPYRIGHT:"CHAT_COPYRIGHT",INPUT:"INPUT",INPUT_SUBMIT:"INPUT_SUBMIT",FILE_UPLOAD:"FILE_UPLOAD",CONTACTS_FORM:"CONTACTS_FORM",CONTACTS_FORM_NAME:"CONTACTS_FORM_NAME",CONTACTS_FORM_PHONE:"CONTACTS_FORM_PHONE",CONTACTS_FORM_EMAIL:"CONTACTS_FORM_EMAIL",CONTACTS_FORM_SUBMIT:"CONTACTS_FORM_SUBMIT",CONTACTS_FORM_INPUT:"CONTACTS_FORM_INPUT",CALLBACK_BUTTON:"CALLBACK_BUTTON",CALLBACK_VIDEO_BUTTON:"CALLBACK_VIDEO_BUTTON",WA_BUTTON:"WA_BUTTON",POWER_BUTTON:"POWER_BUTTON",MOBILE_POPUP_CLOSE_BUTTON:"MOBILE_POPUP_CLOSE_BUTTON",INPUT_MORE_BTN:"INPUT_MORE_BTN",INPUT_EMOJI_PANEL:"INPUT_EMOJI_PANEL",INPUT_UPLOAD_ICON:"INPUT_UPLOAD_ICON",RATE_TITLE:"RATE_TITLE",RATE_FORM_TEXT:"RATE_FORM_TEXT",RATE_COMMENT_TITLE:"RATE_COMMENT_TITLE",RATE_FORM_INPUT:"RATE_FORM_INPUT",RATE_SUBMIT_BUTTON:"RATE_SUBMIT_BUTTON",RATE_POSITIVE_SUBMIT_TEXT:"RATE_POSITIVE_SUBMIT_TEXT",RATE_NEGATIVE_SUBMIT_TEXT:"RATE_NEGATIVE_SUBMIT_TEXT",RATE_FORM_CLOSE_ICON:"RATE_FORM_CLOSE_ICON",RATE_GOOD:"RATE_GOOD",RATE_GOODNORMAL:"RATE_GOODNORMAL",RATE_NORMAL:"RATE_NORMAL",RATE_BADNORMAL:"RATE_BADNORMAL",RATE_BAD:"RATE_BAD",PRECHAT_BUTTON:"PRECHAT_BUTTON_",LABEL_TEXT:"LABEL_TEXT_"}},81152:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=t.MessageStatus=t.MessageName=t.MessageInitiator=t.MediaType=t.MediaStatus=void 0;t.MessageType={MESSAGE:"message",PROACTIVE:"proactive",MEDIA:"media",COBROWSE:"cobrowse",INVOICE:"invoice",SYSTEM:"system",PREFORM:"botsystem",FORM:"form",TEMPORARY:"temporary",SOCIAL:"social",EMAIL:"email",SEPARATOR:"separator",FOR_TEST:"fortest",PRECHAT:"prechat",BOT:"bot",INVITE:"invite",EMPTY:null,LISTPICKER:"keyboard",WEB_RTC_CALL:"webrtccall",RATE_FORM:"rateform",CALL:"call"};t.MessageStatus={SENT:"sent",SENDED:"sended",DELIVERED:"delivered",READ:"read",SEEN:"seen",NOT_DELIVERED:"notDelivered",FAILED:"failed",DELETED:"deleted",EMPTY:null};t.MessageInitiator={AGENT:"agent",AGENT_BOT:"bot",CLIENT:"client",SYSTEM:"system",FORM:"bot",BOT:"bot_agent",EMPTY:null};t.MediaStatus={UPLOADING:"uploading",COMPLETE:"complete",ERROR:"error",EXPIRED:"expired"};t.MediaType={VIDEO:"video",PHOTO:"photo",LOCATION:"location",VOICE:"voice",STICKER:"sticker",RICH_LINK:"rich_link"};t.MessageName={DELAYED_CALL_SUCCESS:"delayedCallSuccess",CALL_END:"callEnd",CALL_MESSAGE_START:"callMessageStart"}},99393:function(e,t){"use strict";t.e=void 0;t.e={LEFT:"left",RIGHT:"right",BOTTOM:"bottom"}},62168:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionStatus=t.Permission=void 0;t.PermissionStatus={UNKNOWN:0,ALLOWED:1,BLOCKED:2};t.Permission={AUDIO:"audio",VIDEO:"video"}},22271:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Regexp=void 0;t.Regexp={SERVICEZONE_DOMAIN:/^https:\/\/servicezone+\S+jivosite.com/}},83907:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UtmSource=t.RuleTypes=t.RuleType=t.RuleConditions=t.DeviceType=void 0;t.RuleTypes={PROACTIVE:"proactive",OPEN_OFFLINE:"open_offline",HIDE:"hide",SYSTEM_MESSAGE:"system_message",SYSTEM_EMAIL:"system_message_email",SHOW_CALLFORM:"show_callform",SHOW_POPUP:"show_popup"};t.RuleConditions={ONLINE:"online",PAGE_URL:"page_url",PAGE_TITLE:"page_title",HOUR:"hour",WEEK_DAY:"week_day",TIME_AFTER_CLOSE:"time_after_close",TIME_AFTER_FIRST_MSG:"time_after_first_message",TIME_AFTER_INVITAION:"time_after_invitation",TIME_ON_PAGE:"time_on_page",TIME_ON_SITE:"time_on_site",NUMBER_OF_VISITS:"number_of_visits",GOAL_CLOSE:"goal_close",GOAL_SCROLL:"goal_scroll",GOAL_CLICK:"goal_click",GOAL_CUSTOM_ATTR:"goal_custom_attr",PAGES_COUNT:"pages_count",COUNTRY:"country",CITY:"city",ONCE_A_DAY:"once_a_day",UTM_SOURCE:"utm_source",DEVICE:"device"};t.DeviceType={MOBILE:"mobile",DESKTOP:"desktop"};t.UtmSource={BING:"bing",YANDEX:"yandex",GOOGLE:"google",YAHOO:"yahoo",DIRECT:"direct"};t.RuleType={ALL:"all",ANY:"any"}},51542:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shards=void 0;t.Shards={SBER:"sber1"}},47138:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCCallStatus=t.DelayedCallStatus=t.ChatState=t.CallStatus=t.CallPopupStatus=void 0;t.ChatState={NOT_STARTED_OR_CLOSED:"NOT_STARTED_OR_CLOSED",STARTED:"STARTED",ACCEPTED:"ACCEPTED"};t.CallStatus={WAIT:"cw_wait",CONNECTING:"cw_connecting",CONNECTED:"cw_connected",ENDED:"cw_call_end",ERROR:"cw_error"};t.DelayedCallStatus={WAIT:0,SUCCESS:1,MAX_REQUESTS_LIMIT:2,NOT_WORK_TIME:3,BAD_CALLBACK_TIME:4,BLOCKED:5,BAD_DIRECTION:6};t.WebRTCCallStatus={INITIAL:0,ACCEPTED:1,DECLINED:2,ERROR:3,ENDED:4};t.CallPopupStatus={ENABLED:"enabled",DISABLED:"disabled",ONLY_TRIGGERS:"only_triggers",ONLY_BUTTON_CLICK:"only_button_click"}},71047:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TempKey=t.STORAGE_TYPE=t.STORAGE_STATUS=t.STORAGED_ID=t.CampaignsKeys=void 0;t.STORAGED_ID={APP:"app",CALLBACK:"callback",CLIENT:"client",POSITION:"position"};t.STORAGE_STATUS={AVAILABLE:"available",UNAVAILABLE:"unavailable",EXCEED:"exceed"};t.STORAGE_TYPE={LOCAL:"localStorage",SESSION:"sessionStorage"};t.CampaignsKeys={POPUP_DELAY:"popup_delay"};t.TempKey={SENDED_TAGS:"sended_tags"}},61744:function(e,t,n){"use strict";var r=n(17907);t.m=void 0;var i=r(n(23101)),o=r(n(98661)),a=r(n(45697)),s=r(n(94184)),l=n(43417),c=n(18276),u=n(10838),d=n(26034),g=r(n(40704)),p=n(81351),f=n(38669),h=n(26932),m=n(50402),_=n(97490),v=n(19934),y=n(83549),C=n(80352),E=n(38042),b=n(88263),S=r(n(308));const T=e=>{let t=e.onRetry;(0,y.useErrorCatcher)(T.displayName);const n=C.platform.isMobileOrChatpage,r=()=>{n?b.routerService.next(_.RouterEvent.CloseWindow):h.transitionDispatchers.startTransition(m.ScriptName.CLOSE_WIDGET)},a=(0,v.useGetHeaderColors)(),D=a.background,w=a.leafBackground,O=a.isDarkText,A=a.patternUrl,M=(0,s.default)({[S.default.errorWrap]:!0,[S.default.__mobile]:n,[S.default.__dark]:O});return o.default.createElement("jdiv",{className:M},o.default.createElement("jdiv",{className:S.default.header,style:{background:D}},o.default.createElement("jdiv",{className:S.default.pattern,style:{backgroundImage:A?`url(${A})`:null}},n?o.default.createElement("jdiv",(0,i.default)({className:S.default.backWrapper},(0,l.onClickHandler)(r,!0,!0)),o.default.createElement(g.default,{iconName:"icon-close",color:O?"#272433":"#fff",className:S.default.backButton})):o.default.createElement(d.CloseButton,{drag:!1,callEnabled:!1,inCall:!1,show:!0,onClick:()=>{r()},ignoreDragHeight:!1}),o.default.createElement("jdiv",{className:S.default.headerText},(0,c.l10n)("cb_loading")),o.default.createElement(u.Leaf,{orientation:"bottom",backgroundColor:w,online:!0}))),o.default.createElement("jdiv",{className:S.default.errorContent},o.default.createElement("jdiv",{className:S.default.connectContainer},o.default.createElement(p.DisconnectAlert,{onReconnect:t})),o.default.createElement(g.default,{iconName:"iconErrorLoad",className:S.default.iconError}),o.default.createElement("jdiv",{className:S.default.errorText},(0,c.l10n)("maintenanceSystemText"),o.default.createElement(f.Button,{onClick:()=>{t(),(0,E.telemetry)("retry_button_click")}},(0,c.l10n)("tryAgain")))))};t.m=T,T.propTypes={onRetry:a.default.func},T.displayName="ErrorPage"},4244:function(e,t,n){"use strict";var r=n(17907);t.Z=void 0;var i=r(n(98661)),o=n(29865),a=r(n(45697)),s=n(42932),l=n(87692),c=n(24111),u=n(75998),d=r(n(95554));const g=e=>{let t=e.isNarrow,n=e.IsIgnoreHeight;const r=(0,o.useSelector)(l.selectWidgetOrientation),a=(0,o.useSelector)(l.selectWidgetPadding),g=(0,c.useAppDispatch)();return i.default.createElement(d.default,{orientation:r,padding:a,isNarrow:t,IsIgnoreHeight:n,onSetIsInDrag:e=>g((0,s.setIsInDrag)(e)),onSetPosition:e=>u.positionDispatch.initPositionStore(e)})};g.propTypes={isNarrow:a.default.bool,IsIgnoreHeight:a.default.bool};var p=g;t.Z=p},95554:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(98661)),a=r(n(94184)),s=r(n(45697)),l=r(n(10611)),c=n(9709);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=e=>{let t=e.orientation,n=e.padding,r=e.isNarrow,s=e.IsIgnoreHeight,u=e.onSetIsInDrag,d=e.onSetPosition;const g=(0,o.useRef)(null),p=(0,o.useState)({dragStarted:!1}),f=(0,i.default)(p,2),h=f[0],m=f[1],_=(0,c.dragEvents)({orientation:t,padding:n,onSetIsInDrag:u,IsIgnoreHeight:s,onSetPosition:d}),v=_.startDrag,y=_.drag,C=_.stopDrag;return o.default.createElement("jdiv",{className:(0,a.default)({[l.default.wrap]:!0,[l.default.__short]:r,[l.default.__active]:h.dragStarted}),ref:g,onMouseDown:e=>{h.dragStarted||(m({dragStarted:!0}),v(e))},onMouseMove:e=>{h.dragStarted&&y(e)},onMouseUp:()=>{h.dragStarted&&(C(),m({dragStarted:!1}))},onMouseOut:()=>{h.dragStarted&&(m({dragStarted:!1}),C())}})};d.propTypes={orientation:s.default.string,padding:s.default.number,isNarrow:s.default.bool,IsIgnoreHeight:s.default.bool,onSetIsInDrag:s.default.func,onSetPosition:s.default.func};var g=o.default.memo(d);t.default=g},9709:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.dragEvents=void 0;var i=n(24344),o=n(97778),a=n(70859),s=n(32183),l=n(45926),c=n(80352),u=r(n(75686)),d=n(2982),g=n(97490),p=n(44145);let f,h,m,_,v,y=null;const C=e=>{y=u.default.get(a.Component.SCROLL_CONTAINER),y&&y.style&&(y.style.display=e?"block":"none")},E=e=>{let t=e.e,n=e.onSetIsInDrag,r=e.mainSide;n(!0),_=t.screenX,v=t.screenY,C(!1);const i=u.default.get(a.Component.WIDGET_CONTAINER),c=r;var g;if("right"===c&&null===(0,d.getProperty)("right",i)&&((0,d.setProperty)("right",(g=i,(0,l.getPageWindow)().document.body.clientWidth-(g.offsetLeft||40)-g.offsetWidth+"px"),i),(0,d.setProperty)("left",null,i)),"left"===c&&null!==(0,d.getProperty)("right",i)){const e=i.offsetLeft+"px";(0,d.setProperty)("left",e,i),(0,d.setProperty)("right",null,i)}if("left"===c&&""===(0,d.getProperty)("left",i)){const e=i.offsetLeft||"40px";(0,d.setProperty)("left",e,i),(0,d.setProperty)("right",null,i)}const p=(0,s.getElementPosition)(i),y=i.offsetHeight;f=parseInt((0,d.getProperty)(c,i)),h=parseInt(y),p.minLeft="left"===c?40:30,p.maxLeft=p.windowWidth-p.width-p.minLeft,p.maxLeft-=30,p.minHeight=o.MINIMAL_WIDGET_HEIGHT,p.height=y<p.minHeight?p.minHeight:y,p.maxHeight=(0,l.getPageWindow)().innerHeight-30,m=p},b=e=>{let t=e.onSetIsInDrag,n=e.onSetPosition;C(!0);const r=(()=>{const e=u.default.get(a.Component.WIDGET_CONTAINER);let t=parseInt((0,d.getProperty)("height",e));t&&t<o.MINIMAL_WIDGET_HEIGHT&&(t=o.MINIMAL_WIDGET_HEIGHT),t||(t=o.DEFAULT_WIDGET_HEIGHT);const n=(0,d.getProperty)("left",e),r=(0,d.getProperty)("right",e);return{width:o.CHAT_WIDTH+"px",height:t+"px",left:n,right:r}})(),s=r.width,l=r.height;n({height:l,left:r.left,right:r.right}),t(!1),(0,i.callUserFunction)("onResizeCallback",{width:s,height:l})},S=e=>{let t=e.e,n=e.ignoreHeight,r=e.mainSide,i=_-t.screenX;const o=v-t.screenY,s=r;"left"==s&&(i=-i);const l=m,y=f?f+i:l.minLeft+i,C=u.default.get(a.Component.WIDGET_CONTAINER);y<l.minLeft?(0,d.setProperty)(s,l.minLeft+"px",C):y>l.maxLeft?(0,d.setProperty)(s,l.maxLeft+"px",C):(0,d.setProperty)(s,y+"px",C);let E=h+o;if(E!==l.height&&(E>l.minHeight||E>l.height)&&((()=>{const e=(0,p.getApp)().route;return-1!==[g.Route.CALL,g.Route.INTRODUCE].indexOf(e)})()&&(E="auto"),E>m.maxHeight&&(E=m.maxHeight),m.height=E,n||(0,d.setProperty)("height",E+"px",C)),c.platform.isSafari&&!c.platform.isMobileOrTablet){const e=(0,d.getSavedLabelPosition)();e&&((0,d.setProperty)("labelright",e.right,C),(0,d.setProperty)("labelleft",e.left,C),(0,d.setProperty)("labelwidth",e.offsetWidth,C)),(0,d.updateKeyframes)(C,!0)}};t.dragEvents=e=>{let t=e.orientation,n=e.padding,r=e.IsIgnoreHeight,i=e.onSetIsInDrag,o=e.onSetPosition;const a="left"===t||0===n&&"bottom"===t?"left":"right";return{startDrag:e=>E({e:e,onSetIsInDrag:i,mainSide:a}),drag:e=>S({e:e,IsIgnoreHeight:r,mainSide:a}),stopDrag:()=>b({onSetIsInDrag:i,onSetPosition:o})}}},89177:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.afterEmojiInserted=function(e){e&&e.check();const t=d.default.get(g.Component.INPUT);t&&(t.focus(),R(t,t.value))},t.checkOfflineForm=function(){s.messageActions.handleContactsForm()},t.getColorTheme=function(e){switch(e?"disabled":(0,_.getUserSettings)().bubbleColor||"green"){case"disabled":return{color:"#c9cdd3",hoverColor:"#c9cdd3"};case"blue":return{color:v.colorsFromFigma.BLUE_80,hoverColor:v.colorsFromFigma.BLUE_90};case"grey":return{color:v.colorsFromFigma.STEEL_80,hoverColor:v.colorsFromFigma.STEEL_90};default:return{color:v.colorsFromFigma.GREEN_80,hoverColor:v.colorsFromFigma.GREEN_90}}},t.getDisabled=function(e){if(e)return!0;return(0,o.isOfflineCanSend)()},t.getPlaceholder=function(e,t){let n="";if(e){if(n=(0,f.l10n)("offlineBlockedInputPlaceholder"),E.EnvironmentManager.isWidgetConstructor()&&(n=(0,f.l10n)("lblMessageHere")),(0,_.getApp)().maintenance&&(n=(0,f.l10n)("maintenanceBlockedPlaceholder")),(0,_.getFeatures)().recaptcha){const e=y.default.getInstance();e&&e.isBlocked()&&(n=(0,f.l10n)("maintenanceBlockedPlaceholder"))}}else n=(w.platform.isMobileOrTablet,(0,f.l10n)("lblMessageHere"));t&&(n=(0,f.l10n)("botListPickerBlock"));return n},t.getText=I,t.isActiveElementFocused=void 0,t.isFileUploadDisabled=function(){if(i.default.bots&&!(0,_.getFeatures)().botMedia&&!a.default.agent_id)return!0;return M.log("isFileUploadDisabled",!k()),!k()},t.isFileUploadEnabled=k,t.isSocialButtonEnabled=function(){return i.default.joint&&(i.default.joint.vk||i.default.joint.fb)&&!w.platform.isMobileOrTablet&&!(0,h.isChatContactForm)()&&!w.platform.isChatPage},t.onFocus=function(){M.log("onFocus");const e=d.default.getComponent(g.Component.SCROLL_CONTAINER);e&&e.setIgnore(!1)},t.onInputSubmit=function(e){let t=e.value,n=e.repliedMsgId;s.messageActions.sendClientMessage({text:t,repliedMsgId:n}),(0,A.connectionTypingInsight)(""),(0,A.connectionClientTyping)(!1),l.default.play("outgoing_message")},t.onPaste=void 0,t.replaceEmojiValue=function(e){return e.replace(C.EMOJI_REGEX," $& ")},t.setCursorEnd=R,t.setPaddingForFocus=void 0,t.setPlaceholder=function(e){if(e=e.replace(/&quot;/g,'"').replace(/&#039;/g,"'"),c.Router.getCurrentRoute()!==u.Route.LABEL){const t=d.default.get(g.Component.INPUT);t&&t.setAttribute("placeholder",e);const n=d.default.get(g.Component.AUTORESIZER);n&&n.check()}},t.startTyping=function(e){if(e){const t=I(e);M.log("startTyping",t),(0,A.connectionClientTyping)(t),(0,A.connectionTypingInsight)(t)}},t.stopTyping=function(){M.log("stopTyping"),(0,A.connectionClientTyping)(!1)};var i=r(n(10018)),o=n(81722),a=r(n(26754)),s=n(65465),l=r(n(71277)),c=n(21476),u=n(97490),d=r(n(75686)),g=n(70859),p=n(32183),f=n(18276),h=n(68403),m=n(90061),_=n(44145),v=n(36874),y=r(n(50216)),C=n(30633),E=n(16026),b=n(81152),S=n(15698),T=n(80508),D=n(45926),w=n(80352),O=n(8717),A=n(59767);const M=(0,m.createLogger)("InputHelpers");function I(e){return i.default.disable_emoji?e:(0,T.replaceEmoji)(e)}function R(e,t){e.setSelectionRange&&e.setSelectionRange(t.length+2,t.length+2)}function k(){const e=!i.default.disable_filetransfer&&0!==i.default.options;return(0,_.getApp)().isOnline?((0,_.getFeatures)().botMedia||!a.default.bot_id)&&e:e&&(0,_.getClient)().isIntroduced}t.onPaste=(e,t,n)=>{if(k()&&!(0,O.shouldRedirectToIntroduce)()){var r;const i=e.clipboardData;if(null==i||null===(r=i.files)||void 0===r||!r.length)return;e.preventDefault();if(!(0,_.getMessages)().some(e=>{var t;return(null==e||null===(t=e.body)||void 0===t?void 0:t.status)===b.MediaStatus.UPLOADING})){const e=i.files[0];(0,S.startUploadMedia)(e,{privateId:null,repliedMsgId:t,onUploadProgress:n,onCancel:()=>{n(0)}})}}};t.isActiveElementFocused=()=>{const e=(0,D.getPageWindow)().document.activeElement;return!!e&&(0,p.isInput)(e.tagName)};t.setPaddingForFocus=e=>{const t=d.default.getComponent(g.Component.MESSAGES_CONTAINER);t&&t.style&&(t.style.paddingBottom=e?"44px":"0px")}},77294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSvgProgress=t.isVideo=t.isPreviewImage=t.isNewMedia=t.isFileGif=t.isAgentMessage=t.getUrl=t.getSize=t.getIconName=t.getIconColor=t.getCircleColor=t.getApiHost=t.formatOldMedia=t.calculateAspectRatio=void 0;var r=n(44145),i=n(97778),o=n(81152),a=n(80352),s=n(36874),l=n(45926);const c=(e,t,n,r)=>{const i=Math.min(n/e,r/t);return{width:(e*i).toFixed(),height:(t*i).toFixed()}};t.calculateAspectRatio=c;t.getIconColor=e=>{switch(e){case"blue":return s.colorsFromFigma.BLUE_80;case"grey":return s.colorsFromFigma.STEEL_80;default:return s.colorsFromFigma.GREEN_80}};t.getIconName=e=>{switch(e){case o.MediaType.VOICE:return"icon-audio";case o.MediaType.STICKER:return"icon-document";default:return`icon-${e}`}};t.getCircleColor=e=>{switch(e){case"blue":return s.colorsFromFigma.BLUE_90;case"grey":return s.colorsFromFigma.STEEL_90;default:return s.colorsFromFigma.GREEN_90}};t.getSize=e=>{const t={width:null,height:null};if(e.width&&e.width>i.MAX_IMAGE_WIDTH){const n=c(e.width,e.height,i.MAX_IMAGE_WIDTH,500);return t.width=n.width,t.height=n.height,t}return t.width=e.width,t.height=e.height,t};t.isAgentMessage=e=>e.from===o.MessageInitiator.AGENT||e.from===o.MessageInitiator.FORM||e.type===o.MessageType.PROACTIVE;t.isNewMedia=e=>!!e&&(e.includes("https://media")&&e.includes("jivosite.com"));t.getUrl=e=>a.platform.isMobileOrTablet&&a.platform.isChromeIos?null==e?void 0:e.replace(/^https?:\/\//i,"googlechrome://"):e;t.isPreviewImage=e=>{if(!e)return!1;const t=e.toLowerCase();return/\.(gif|jpg|jpeg|png|webp)$/i.test(t)};t.isVideo=e=>!!e&&/(video\/)/i.test(e.toLowerCase());t.isFileGif=e=>{if(!e)return!1;const t=e.toLowerCase();return/\.(gif)|\/(gif)$/i.test(t)};t.getApiHost=()=>{const e=(0,r.getSystemSettings)().apiHost;return(0,l.getProtocol)()+"//"+e||"https://api.jivosite.com"};t.formatOldMedia=e=>(e.name&&(e.file_name=e.name),e.icon_type&&(e.mime_type=e.type,e.type=e.icon_type),e.status||(e.status=e.error?o.MediaStatus.ERROR:o.MediaStatus.COMPLETE),e);t.setSvgProgress=(e,t,n,r)=>{if(n&&t&&t.current){let i=(r/n*100).toFixed(0);const o=t.current.getElementsByTagName("circle")[1];if(e&&(i=100),isNaN(i))o.style.strokeDashoffset=1;else if(o){const e=o.getAttribute("r"),t=(100-i)/100*(Math.PI*(2*e));o.style.strokeDashoffset=t}}}},55329:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.updatePrechatTime=t.prechatUsed=t.prechatSetUsed=t.prechatEnabled=t.getPrechatUseTime=void 0;var i=n(13077),o=r(n(14264)),a=n(81152),s=n(44145),l=n(68403);let c=!1;t.prechatUsed=()=>c;t.prechatSetUsed=e=>{e&&(0,i.setRuleLocal)("prechatUseTime",(new Date).getTime()),c=e};const u=()=>{const e=(0,s.getProactive)(),t=e.campaignId,n=e.name,r=e.prechats,i=(0,l.isPaidCustomer)();return!(t&&n&&!r)&&((i||r&&t)&&((0,s.getFeatures)().prechat||r)&&!(0,s.getApp)().maintenance&&!(0,s.getSystemSettings)().botmode)};t.prechatEnabled=u;t.getPrechatUseTime=()=>{const e=(0,i.getRuleLocal)("prechatUseTime");if(!e)return null;const t=((new Date).getTime()-e)/1e3;return(0,i.setRuleLocal)("prechatUseTime",null),parseInt(t)};t.updatePrechatTime=e=>{if(u()){const t=o.default.getMessagesByType(a.MessageType.PRECHAT);t.length&&t[0].set("created_ts",e+1)}}},31694:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.PrechatEmitter=void 0,t.useEnhanced=function(){const e=(0,o.useState)([]),t=(0,i.default)(e,2),n=t[0],r=t[1],s=(0,o.useState)(()=>S.platform.isMobileOrTablet&&!S.platform.isChatPage),O=(0,i.default)(s,2),A=O[0],M=O[1],I=(0,a.useDispatch)(),R=(0,o.useRef)(),k=(0,a.useSelector)(v.selectPrechat),L=(0,a.useSelector)(v.selectEnablePrechat),P=(0,a.useSelector)(v.selectBubbleColor),x=(0,a.useSelector)(v.selectLocale),N=(0,a.useSelector)(v.selectDisableEmoji),F=S.platform.isMobileOrTablet,j=S.platform.isIos,B=(0,a.useSelector)(E.selectProactive,a.shallowEqual),U=(0,a.useSelector)(b.selectCampaigns),V=(0,o.useCallback)(e=>{if(Array.isArray(k)&&!k.length)return[];if(U&&B.prechats&&Array.isArray(B.prechats))return B.prechats;const t=(0,u.sortBy)(null!=e?e:k,"id"),n=t.length||3,r=[];for(let e=0;e<n;e++){var i;const n=e+1,c=0===e?"":n;let u;var o,a,s,l;if(n<=3&&(u=(0,y.l10n)(`prechatText${c}`)),null!==(i=t[e])&&void 0!==i&&i.text&&(u=t[e].text),u)r.push({id:n,text:u,background:null!==(o=null===(a=t[e])||void 0===a?void 0:a.background)&&void 0!==o?o:void 0,text_color:null!==(s=null===(l=t[e])||void 0===l?void 0:l.text_color)&&void 0!==s?s:void 0})}return r},[k]);return(0,o.useEffect)(function(){r(V())},[V]),(0,o.useEffect)(function(){w.addListener("updatePrechatText",e=>{r(V(e))})},[V]),(0,o.useEffect)(function(){m.default.set(c.Component.PRECHAT,R.current)},[]),(0,o.useEffect)(function(){const e=setTimeout(()=>M(!1),500);return()=>{clearTimeout(e)}},[]),{componentRef:R,bubbleColor:P,phrases:n,isHidden:A,isDisabledEmoji:N,isMobile:F,isIos:j,enablePrechat:L,sendPhrase:(e,t)=>{(0,C.prechatSetUsed)(!0),(0,T.shouldRedirectToIntroduce)()?(I((0,f.setLastMessage)(e)),g.Router.next(p.RouterEvent.ToIntroduce)):(d.messageActions.sendClientMessage({text:e}),_.default.play("outgoing_message"),S.platform.isMobileOrTablet||(0,l.afterEmojiInserted)());M(!0),(0,D.telemetry)("prechat",{param1:t,param2:x},{once:!0}),h.analytics.trackPrechatClick(t)}}};var i=r(n(67375)),o=n(98661),a=n(29865),s=n(89766),l=n(89177),c=n(70859),u=n(938),d=n(65465),g=n(21476),p=n(97490),f=n(92056),h=n(96367),m=r(n(75686)),_=r(n(71277)),v=n(87692),y=n(18276),C=n(55329),E=n(7193),b=n(95448),S=n(80352),T=n(8717),D=n(38042);const w=new s.EventEmitter;t.PrechatEmitter=w},40704:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(61125)),o=r(n(67375)),a=r(n(98661)),s=r(n(45697)),l=r(n(30349)),c=r(n(54446)),u=r(n(34948)),d=r(n(22764)),g=r(n(85972)),p=r(n(87409)),f=r(n(92809)),h=r(n(69357)),m=r(n(43055)),_=r(n(39581)),v=r(n(28149)),y=r(n(54304)),C=r(n(28372)),E=r(n(31617)),b=r(n(36972)),S=r(n(28122)),T=r(n(66574)),D=r(n(54983)),w=r(n(21525)),O=r(n(60783));function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const I={},R={"icon-close":u.default,"logo-jivosite":l.default,"logo-jivochat":c.default,phone:d.default,"icon-emoji":g.default,callMessageStartIcon:p.default,callEndIcon:f.default,"icon-photo":h.default,"icon-video":m.default,"icon-audio":_.default,"icon-document":v.default,"icon-error":C.default,"icon-cancel":y.default,"icon-ruble":E.default,"icon-v":b.default,"icon-tube":S.default,"icon-more":T.default,iconMic:D.default,iconErrorLoad:w.default},k=e=>{let t=e.title,n=e.iconName,r=e.className,i=e.color,s=e.color2,l=e.hoverColor,c=e.style,u=e["data-qa-id"];const d=a.default.useState(!1),g=(0,o.default)(d,2),p=g[0],f=g[1],h=O.default[n+"Icon"],m=r?r+(h?" "+h:""):void 0,_=e=>{l&&f(e)};return a.default.createElement("jdiv",{onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),style:M({backgroundImage:(()=>{const e=n+p?l:i;if(I[e])return I[e];let t=encodeURIComponent(R[n]);const r=p?l:i;i&&!p&&(t=t.replace(new RegExp("_COLOR1_","ig"),r.replace("#","%23"))),l&&p&&(t=t.replace(new RegExp("_COLOR1_","ig"),r.replace("#","%23"))),s&&(t=t.replace(new RegExp("_COLOR2_","ig"),s.replace("#","%23")));const o=`url("data:image/svg+xml,${t}")`;return I[n+i+s]=o,o})()},c),className:m,"data-qa-id":u,title:t})};k.propTypes={iconName:s.default.string.isRequired,className:s.default.string,color:s.default.string,color2:s.default.string,hoverColor:s.default.string,style:s.default.any,"data-qa-id":s.default.string,title:s.default.string};var L=a.default.memo(k);t.default=L},3579:function(e,t,n){"use strict";var r=n(17907);t.Z=void 0;var i=r(n(61125)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(98661)),a=n(29865),s=r(n(94184)),l=r(n(45697)),c=n(2982),u=n(90061),d=n(13551),g=n(80797),p=r(n(75598)),f=r(n(86735));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const v=(0,u.createLogger)("NewTransition"),y=e=>{let t=e.name,n=e.scriptName,r=e.children,i=e.onClick,a=e.endCallbacks,l=void 0===a?{}:a,u=e.startCallbacks,h=void 0===u?{}:u,m=e.duration,y=void 0===m?"300ms":m,C=e.timingFunction,E=void 0===C?"cubic-bezier(0.39, 0.24, 0.21, 0.99)":C,b=e.delay,S=void 0===b?"0s":b,T=e.iterationCount,D=void 0===T?1:T,w=e.direction,O=void 0===w?"normal":w,A=e.fillMode,M=void 0===A?"both":A,I=e.playState,R=void 0===I?"running":I,k=e.customVars,L=e.style,P=e.animationPostfix,x=e.id;const N=(0,o.useRef)(null),F=(0,c.isFallbackNeeded)()?f.default.fallback:f.default[P],j=`${t}_${n}`,B=(0,d.useWidgetExtensionsContext)().isWidgetTarget,U=(0,g.useWidgetConstructorContext)().isWidgetConstructor;v.warn("render",j,P);const V=e=>e&&N.current&&e.target===N.current&&e.animationName===F[j]&&n;return(0,o.useEffect)(()=>{B&&N.current&&"jcont"===x&&N.current.style.setProperty("position","absolute","important")},[]),o.default.createElement("jdiv",{ref:N,style:_(_({},(()=>{const e={animationDuration:U?null:y,animationTimingFunction:E,animationDelay:S,animationIterationCount:D,animationDirection:O,animationFillMode:M,animationPlayState:R,animationName:n?F[j]:null};return(e=>{if(k)for(const t in k)({}).hasOwnProperty.call(k,t)&&((0,c.isFallbackNeeded)()?e[t]=k[t]:e[(0,c.jivoCustomCSSProperty)(t)]=k[t])})(e),e})()),L),onAnimationEnd:e=>{V(e)&&l[n]&&l[n]()},onAnimationStart:e=>{V(e)&&h[n]&&h[n]()},onClick:i,id:x,translate:!1,className:(0,s.default)("notranslate",{[p.default.__widgetConstructor]:U&&B})},r)};y.propTypes={scriptName:l.default.string.isRequired,children:l.default.oneOfType([l.default.arrayOf(l.default.node),l.default.node]).isRequired,name:l.default.string.isRequired,onClick:l.default.func,endCallbacks:l.default.any,startCallbacks:l.default.any,duration:l.default.string,timingFunction:l.default.string,delay:l.default.string,iterationCount:l.default.number,direction:l.default.string,fillMode:l.default.string,playState:l.default.string,customVars:l.default.any,style:l.default.any,animationPostfix:l.default.string,id:l.default.string};var C=(0,a.connect)(e=>({scriptName:e.transition.currentScript}),{})(y);t.Z=C},86735:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7949)),o=r(n(37871)),a=r(n(86052)),s=r(n(8741)),l=r(n(10193)),c=r(n(5446)),u={bottom:i.default,bottom_0:o.default,left:a.default,right:s.default,custom:l.default,fallback:c.default};t.default=u},28302:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.onDeclineButtonClick=t.onAcceptButtonClick=t.getMessageId=t.getActiveMessage=t.getAcceptLink=void 0;var i=r(n(10018)),o=n(21476),a=n(97490),s=n(26932),l=n(47138),c=n(7919),u=n(62168),d=n(16026),g=n(50789),p=n(44145),f=n(81152),h=n(90061),m=n(38042),_=r(n(51961));const v=(0,h.createLogger)("WebrtcHelpers");t.onAcceptButtonClick=(e,t,n,r)=>{const i=c.Application.getInstance().managers.permission;if(r)v.warn("onAcceptButtonClick",t.private_id),s.messagesDispatchers.updateWebRTCCallStatus(t.private_id,l.WebRTCCallStatus.ACCEPTED);else if(n!==u.PermissionStatus.ALLOWED||i.allMics.length>1)o.Router.next(a.RouterEvent.ToCallSetup);else{s.messagesDispatchers.updateWebRTCCallStatus(t.private_id,l.WebRTCCallStatus.ACCEPTED);const e=(new _.default).getInstance();e&&e.connectSdk()}(0,m.telemetry)("webrtc_accept_call")};t.onDeclineButtonClick=(e,t)=>{const n=(new _.default).getInstance();if(v.log("onDeclineButtonClick",n),n){var r;const t=n.callId||(null===(r=e.body)||void 0===r?void 0:r.callId);g.ApiProvider.declineWebRTCCall(t,e=>{v.warn("CALL DECLINE REQUEST SUCCESS",e)}),n.stopCall()}s.messagesDispatchers.updateWebRTCCallStatus(e.private_id,t?l.WebRTCCallStatus.ENDED:l.WebRTCCallStatus.DECLINED),s.callbackDispatchers.setWebRTCCallStatus(null),s.callbackDispatchers.setActiveWebRTCCallMessageId(null),(0,m.telemetry)("webrtc_deny_call")};t.getMessageId=e=>e.get("private_id");t.getAcceptLink=e=>{if(!e)return null;const t=(new _.default).getInstance();if(v.warn("getAcceptLink",t),!t)return null;const n=t.callId,r=t.voxUserLogin,o=t.voxUserPassword,a=t.voxNode,s=i.default,l=d.EnvironmentManager.isDevelopment()?"//localhost:8080":s.base_url,c=(0,p.getClient)(),u=s.tel_host;let g=`cid=${n}&vl=${r}&vp=${o}&vn=${a}&si=${s.site_id}&wi=${s.widget_id}&ci=${c.clientId}&th=${u}&bu=${s.base_url}&shard=${s.shard_id}&lang=${s.locale}&hash=fa15b64`;s.enable_webrtc_start_call&&(g+=`&sc=${s.enable_webrtc_start_call}`),s.err_host&&(g+=`&errorHost=${s.err_host}`),s.telemetry_host&&(g+=`&telemetryHost=${s.telemetry_host}`);return`https:${l}/webrtc/?${window.btoa(g)}`};t.getActiveMessage=e=>{const t=(0,p.getMessages)().filter(t=>t.type===f.MessageType.WEB_RTC_CALL&&t.body&&t.body.webRTCCallStatus===e);return t.length?t[0]:null}},19270:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.DataProvider=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(90061),s=n(50789),l=n(56348),c=r(n(4867)),u=n(87252);const d=(0,a.createLogger)("ApiInvitations.DataProvider");let g=function(){function e(t,n){(0,i.default)(this,e),this.userToken=t,this.manager=n,this.timer=new u.Timer(this.update.bind(this)),this.store=new l.InvitationsStore({type:"default",name:"api_invites",itemClass:c.default,keys:{id:null,text:null,ruleName:null,read:null,isPopup:null,isMarkdown:null,prechat:null}}),this.update()}return(0,o.default)(e,[{key:"update",value:function(){d.log("Update invitations"),this.getInvitationsFromApi();const e=Math.floor(120*Math.random()+90);this.timer.start(60*e*1e3)}},{key:"getInvitationsFromApi",value:function(){d.log("Getting invitations from Api"),s.ApiProvider.getCustomerIoInvites(this.userToken,(e,t)=>{e?d.error("Bad request",e.status,e.statusText):t.data?t.data&&t.data.ok&&(this.store.save(t.data.invitations),d.log("Invitations are up to date"),setTimeout(()=>{this.manager.addInvitationsToChat()},300)):d.warn("No response data")})}},{key:"hasInvitations",value:function(){return this.store.length()||!1}},{key:"getInvitationById",value:function(e){return this.store.findById(e)||!1}},{key:"getInvitations",value:function(){return this.store.getAll().filter(e=>!e.get("read"))}},{key:"markInvitationsRead",value:function(e){this.store.markInvitationsRead(e)}}]),e}();t.DataProvider=g},56348:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.InvitationsStore=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(84827)),s=r(n(85299)),l=r(n(55536)),c=r(n(34973)),u=n(44145),d=n(90061),g=n(38042);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}const f=(0,d.createLogger)("ApiInvitations.InvitationsStore");let h=function(e){(0,a.default)(n,e);var t=p(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,o.default)(n,[{key:"save",value:function(e){f.log("Storing invitations",e),this.store.length?this.merge(e):e.forEach(e=>{this.add(e)})}},{key:"merge",value:function(e){f.log("Merging invitations",e),e.forEach(e=>{this.findById(e.invitation_id)||this.add(e)})}},{key:"deleteUnreads",value:function(){f.log("Deleting unread invitations");this.store.filter(e=>!e.get("read")).forEach(e=>{e.destroy()})}},{key:"add",value:function(e){f.log("Adding invitation",e);const t=e.text,n=e.rule_name,r=e.invitation_id,i=e.is_popup,o=e.prechat,a=(0,u.getClient)();this.push({text:t,ruleName:n,id:r,read:!1,isPopup:i||null,prechat:o||null}),(0,g.telemetry)("receive_api_invitation",{param1:n,param2:r,param3:a.email})}},{key:"findById",value:function(e){return this.store.find(t=>t.get("id")===e)}},{key:"length",value:function(){return this.store.length}},{key:"markInvitationsRead",value:function(e){const t=this.store.find(t=>!t.get("read")&&t.get("id")===e);f.log("markInvitationRead",t,e),t&&t.set("read",!0)}}]),n}(c.default);t.InvitationsStore=h},78692:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.ApiInvitationsManager=void 0;var i=r(n(61125)),o=r(n(33119)),a=r(n(92664)),s=n(10018),l=n(40694),c=r(n(71277)),u=r(n(14264)),d=r(n(2833)),g=r(n(26754)),p=n(81152),f=n(26932),h=n(65465),m=n(88263),_=n(97490),v=n(50402),y=n(44145),C=n(44145),E=n(24344),b=n(90061),S=n(38042),T=n(62162),D=n(19270);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const A=(0,b.createLogger)("ApiInvitationsManager");const M=new(function(){function e(){(0,o.default)(this,e),this.userToken=null,this.initialized=!1,this.dataProvider=null,this.needToSendTelemetry={answer_api_invitation:!0,read_api_invitation:!0,click_link_api_invitation:!0},this.invitationsCount=0,this.needToOpenChat=!0,this.needToShowPopup=!1,this.needToShowPrechat=!1}return(0,a.default)(e,[{key:"initialize",value:function(e){this.initialized||(this.dataProvider=new D.DataProvider(e,this),this.userToken=e,this.initialized=!0)}},{key:"isInitialized",value:function(){return this.initialized}},{key:"hasInvitations",value:function(){return this.initialized&&this.dataProvider&&this.dataProvider.hasInvitations()}},{key:"saveUnreadInvitations",value:function(e){if(!this.initialized)return;u.default.getUnreadApiInvitations().forEach(t=>{const n=t.get("body");delete n.unsave;const r=Object.assign({},t.toJSON());if(r.status=p.MessageStatus.READ,f.messagesDispatchers.addMessage(r),t.destroy(),A.log("saveUnreadInvitations",r),e){const e={text:r.text,privateId:r.private_id,isMarkdown:r.body.is_markdown,agentId:r.body.agent_id,botId:r.body.bot_id,createdTs:r.created_ts};(0,T.sendUpdateProactive)(e)}f.messagesDispatchers.initMessagesStore(),this.dataProvider.markInvitationsRead(n.invitationId),this._sendInvitationsTelemetry("answer_api_invitation",n.invitationId)})}},{key:"sendUrlClickTelemetry",value:function(){this.initialized&&this._sendInvitationsTelemetry("click_link_api_invitation")}},{key:"markInvitationsAnswered",value:function(e){this.initialized&&this.saveUnreadInvitations(e)}},{key:"markInvitationsRead",value:function(e){if(!this.initialized)return;this.dataProvider.markInvitationsRead(e);const t=u.default.getUnreadApiInvitations();A.warn("markInvitationsRead",t,e),t.forEach(t=>t.get("body.invitationId")===e&&t.set("status",p.MessageStatus.READ)),this._sendInvitationsTelemetry("read_api_invitation",e)}},{key:"_sendInvitationsTelemetry",value:function(e,t){if(!this.initialized)return;const n=this.dataProvider.getInvitationById(t),r=(0,C.getClient)();n&&this.needToSendTelemetry[e]&&((0,S.telemetry)(e,{param1:n.get("ruleName"),param2:n.get("id"),param3:r.email}),this.needToSendTelemetry[e]=!1)}},{key:"addInvitationsToChat",value:function(){if(!this.initialized)return;A.log("addInvitationsToChat");const e=this.dataProvider.getInvitations(),t=(0,C.getClient)();let n,r;d.default.getActiveAgent(i=>{const o=u.default.getUnreadApiInvitations().length;if(this.invitationsCount=0,e.length&&!(0,y.getApp)().chatStarted){const o=e[0];A.log("Active agent:",i),i&&(Object.assign(g.default,i),f.agentsDispatchers.addAgent((0,l.agentToReduxFormat)(i)),i.bot_id||t.priorityAgentId&&t.priorityAgentId===i.agent_id||f.clientDispatchers.setPaId(i.agent_id),f.chatsDispatchers.setJoinedAgents([i]));const a=o.get("text");n=o.get("ruleName"),r=o.get("id");const s=O(O({},i||null),{},{customerIO:!0,is_markdown:!0,unsave:!0,invitationId:r}),c={type:p.MessageType.MESSAGE,from:p.MessageInitiator.AGENT,from_id:i&&i.agent_id,text:a,body:s};f.messagesDispatchers.addMessage(c),this.invitationsCount++,this.needToShowPopup=o.get("isPopup")||!1,this.needToShowPrechat=o.get("prechat")||!1}if(this.invitationsCount!==o){if(c.default.play("notification"),this.needToOpenChat&&this.needToShowPopup?(m.routerService.next(_.RouterEvent.ToLabelInvitation),(0,S.telemetry)("api_invitation_open_chat",{param1:n,param2:r,param3:t.email}),this.needToOpenChat=!1):(m.routerService.next(_.RouterEvent.ToChat),f.transitionDispatchers.startTransition(v.ScriptName.OPEN_WIDGET),(0,E.callUserFunction)("onMessageReceived")),this.needToShowPrechat&&this.needToShowPrechat.length){const e=this._formatInvitationPrechats(this.needToShowPrechat);h.messageActions.deletePrechatMsg(),(0,s.setConfigParam)("prechat",e),(0,s.setConfigParam)("enable_prechat",1),f.featuresDispatchers.enablePrechat(!0),f.userDispatchers.setPrechat(e),h.messageActions.pushPrechat(e)}M.markInvitationsRead(r)}})}},{key:"_formatInvitationPrechats",value:function(e){return e.map((e,t)=>({id:Number(e.id)||t,text:e.text}))}},{key:"getCurrentInvitations",value:function(){return this.initialized?this.dataProvider.getInvitations():null}}]),e}());t.ApiInvitationsManager=M},87252:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var i=r(n(33119)),o=r(n(92664));let a=function(){function e(t){(0,i.default)(this,e),this.timerId=null,this.cb=t||null}return(0,o.default)(e,[{key:"setCallback",value:function(e){this.cb=e}},{key:"start",value:function(e){clearTimeout(this.timerId),this.timerId=setTimeout(this.cb,e)}},{key:"stop",value:function(){clearTimeout(this.timerId)}}]),e}();t.Timer=a},48553:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664));var a=function(){function e(t,n){(0,i.default)(this,e),this.doc=t,this.cssURL=n,this.loaded=!1,this.failed=!1,this.loadCss()}return(0,o.default)(e,[{key:"loadCss",value:function(){const e=this.doc.head||this.doc.getElementsByTagName("head")[0];if(e&&e.querySelector(`link[href="${this.cssURL}"]`))return this.loaded=!0,void(this.onLoadCallback&&this.onLoadCallback());const t=this.doc.createElement("link");t.rel="stylesheet",t.href=this.cssURL,t.className="jv-css",window.parent.jivo_cspNonce&&t.setAttribute("nonce",window.jivo_cspNonce),t.addEventListener("load",e=>{this.loaded=!0,this.onLoadCallback&&this.onLoadCallback()}),t.addEventListener("error",e=>{this.failed=!0,this.onFailedCallback&&this.onFailedCallback()}),e.appendChild(t)}},{key:"setOnLoadedCallback",value:function(e){this.loaded?e&&e():this.onLoadCallback=e}},{key:"setOnFailedCallback",value:function(e){this.failed?e&&e():this.onFailedCallback=e}},{key:"subscribe",value:function(e,t){this.setOnLoadedCallback(e),this.setOnFailedCallback(t)}}]),e}();t.default=a},31984:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.callWidgetPing=function(e,t){if(S.warn("callWidgetPing",t),(0,l.isEmpty)(o.default.callback_settings)||(0,v.isAppCobrowse)()||s.isDesignerEditor)return void S.log("callback disabled");const n=c.default.get("callback_ping_response");if(n)e(n);else{const n=(0,u.getClient)(),r=t&&n.clientId?n.clientId.split(".")[0]:"0";_.xhrRequest.get(T("/sites/"+o.default.site_id+"/widgets/"+o.default.widget_id+"/clients/"+r+"/telephony/callback"),(t,n)=>{if(t)return S.error("in request"),e({});let r=n.data;r||(r={ok:!1});const i=r.work_time;let o;i?("cw_connected"!==(0,u.getCallback)().status&&(0,f.initDelayedCall)(i),r.ok=!0):r.ok&&(0,f.resetDelayedCall)(),o=r.ok||r.error_list&&"time_not_in_range"===r.error_list[0]?60:20,c.default.set("callback_ping_response",r,o),e(r)})}},t.checkStartCall=async function(e,t){S.warn("checkStartCall",e);const n=e.phone,r=e.invitationText,a=e.clientToken,s=e.requestGRecaptchaToken?await C.default.getInstance().getGRecaptchaToken({action:"callback"}):null;if(!a)return S.warn("checkStartcall",`client_id is ${a}`),g.callbackDispatchers.setCallbackAvailable(!0),g.callbackDispatchers.setCallbackStatus(p.CallStatus.ERROR),g.callbackDispatchers.setCallbackError((0,y.getCallDefaultError)()),void(0,m.telemetry)("cw_call_error",{param1:"startup_error_client_id"});const l=a.split(".")[0],c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({phone:n,invitation_text:null!=r?r:""},s&&{callback_token:s});_.xhrRequest.post(T("/sites/"+o.default.site_id+"/widgets/"+o.default.widget_id+"/clients/"+l+"/telephony/callback"),t,{headers:{"Content-Type":d.CONTENT_TYPE.X_WWW_FORM},body:c})},t.detectPriorityCountry=D,t.getMaskedPhone=function(e){if(!e)return e;const t=O(e);if(!t)return e;return"+"+t.phoneCode+" "+A(t.innerNumber,t.phoneFormat)},t.getMaskedValue=A,t.getPhoneInfo=w,t.getPhoneNumberInfo=O,t.telephonyUrl=T;var i=r(n(61125)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(10018)),a=n(90061),s=n(52028),l=n(17662),c=r(n(73687)),u=n(44145),d=n(6693),g=n(26932),p=n(47138),f=n(3296),h=n(53769),m=n(38042),_=n(95911),v=n(69882),y=n(41168),C=r(n(50216));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}const S=(0,a.createLogger)("CallUtils",{style:"color: grey"});function T(e){if(o.default.tel_host)return"https://"+o.default.tel_host+"/api/1"+e}function D(e){if(S.log("detectPriorityCountry",e),!e)return null;const t={UA:{codes:["38"]},KZ:{codes:["77"]},RU:{codes:["79"]},CA:{codes:["1204","1226","1236","1249","1250","1289","1306","1343","1365","1403","1416","1418","1431","1437","1438","1450","1506","1514","1519","1548","1579","1581","1587","1600","1604","1613","1639","1647","1705","1709","1778","1780","1782","1807","1819","1825","1867","1873","1902","1905"]},DO:{codes:["1809"]},PR:{codes:["1787","1939"]}};for(const n in t)if({}.hasOwnProperty.call(t,n)){const r=t[n],i=e.substr(0,r.codes[0].length);if(r.codes.indexOf(i)>=0)return S.log("codeFound",n),{code:n}}return null}function w(e,t){const n="+"===t[0]?e.phone_code.length+1:e.phone_code.length,r=t.slice(n);return{countryCode:e.code,countryName:e.name,phoneCode:e.phone_code,phoneFormat:e.phone_format,innerNumber:r,number:t}}function O(e){S.log("getPhoneNumberInfo",e);let t=e.replace(/\D+/g,"");const n=o.default.callback_settings.countries;let r,i="";const a=(0,o.getIpCountry)();if(t.length<9||t.length>15)return null;for(let e=0;e<t.length;e++)if(!r)if(i=t.slice(0,e+1),r=n.filter(e=>e.phone_code===i.toString()),r.length>0){const e=D(t);if(e)r=r.filter(t=>t.code===e.code);else{const e=r.filter(e=>e.code===a);e.length&&(r=e)}}else r=null;return r||(r=n.filter(e=>e.code===a),r&&"RU"==a&&(13==t.length&&(t=t.replace("8","+7")),10==t.length&&(t="+7"+t))),r&&r.length?(r=r[0],w(r,t)):null}function A(e,t){return(0,h.maskPattern)(e,t)}},53182:function(e,t,n){"use strict";t.W=void 0;var r=n(75998),i=n(45948);const o=window.parent||window;let a=!1;const s={updateConfig(e){r.campaignPopupDispatch.updateCampaignPopup(e)},setActiveScreen(e){r.campaignPopupDispatch.updateCampaignPopup({activeScreen:e})},setRenderTarget(e){r.campaignPopupDispatch.updateCampaignPopup({target:e,previewTargetDesktop:"",previewTargetMobile:"",isGalleryView:!1})},setRenderPreviewTarget(e,t){r.campaignPopupDispatch.updateCampaignPopup({previewTargetDesktop:e,previewTargetMobile:t,target:"",isGalleryView:!1})},setMobileView(e){r.campaignPopupDispatch.updateCampaignPopup({isMobileView:e})},showPopupGalleryPreview(e){if(a)return;a=!0,r.campaignPopupDispatch.setDisplay(!1);const t=setTimeout(()=>{Object.assign(e,{target:"",previewTargetDesktop:"",previewTargetMobile:"",isGalleryView:!0}),r.campaignPopupDispatch.updateCampaignPopup(e),r.campaignPopupDispatch.setDisplay(!0),clearTimeout(t)},300),n=setTimeout(()=>{a=!1,clearTimeout(n)},550)}};t.W=()=>{i.isPopupConstructor&&(o._popupAPI=s)}},45948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPopupConstructor=void 0;const r=n(16026).EnvironmentManager.isPopupConstructor();t.isPopupConstructor=r},48999:function(e,t,n){"use strict";var r=n(17907);t.r9=t.QF=void 0;var i=r(n(10018)),o=r(n(86961)),a=n(38042);t.QF=e=>{var t;return null===(t=i.default.campaigns)||void 0===t?void 0:t.filter(t=>t.campaign_id===e)[0]};t.r9=(e,t)=>{o.default.postCampaignData(e,(n,r)=>{var i,o;r&&(null==t||t(null===(i=r.data)||void 0===i||null===(o=i.result)||void 0===o?void 0:o.client_answer_id),(0,a.telemetry)("send_campaign_data_success",{param1:JSON.stringify(null==r?void 0:r.data)}));n&&(null==t||t(null),(0,a.telemetry)("send_campaign_data_error",{param1:JSON.stringify(e),param2:n.status}))})}},81722:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxWidgetHeightForProactive=function(){if(!g.platform.isDesktop||g.platform.isChatPage||h||a.default.getClientMessages().length)return;f.default.get(c.Component.PROACTIVE_MESSAGE)&&(h=!0);const e=(0,p.getProactive)(),t=f.default.get(c.Component.MESSAGES_CONTAINER),n=null==t?void 0:t.clientHeight,r=e.text.includes("[]("),i=!!e.prechats&&e.prechats>=3,o=r&&i?u.DEFAULT_WIDGET_HEIGHT+300:u.DEFAULT_WIDGET_HEIGHT;if(n){const e=(0,d.getPageWindow)().innerHeight-u.HEADER_HEIGHT,t=n+u.HEADER_HEIGHT+u.INPUT_HEIGHT;return t<o?`${o}px`:`${t>e?e:t}px`}return`${o}px`},t.isOfflineCanSend=function(){if((0,l.isAssistantBot)())return!1;const e=(0,s.getClient)();return!(0,p.getApp)().isOnline&&!e.isIntroduced&&!i.default.enable_bot_offline&&a.default.getClientMessages().length&&(a.default.getOfflineTmpMessage()||a.default.getFormMessage().length)},t.isValidEmail=function(){const e=(0,s.getClient)();return e.email&&o.default.email(e.email)};var i=r(n(10018)),o=r(n(98960)),a=r(n(14264)),s=n(44145),l=n(54346),c=n(70859),u=n(97778),d=n(45926),g=n(80352),p=n(44145),f=r(n(75686));let h=!1},22866:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(10018)),s=n(16026),l=n(90061),c=n(87144),u=n(7547);let d=null,g=function(){function e(t,n,r,o,a,s){(0,i.default)(this,e),this.webSocketEventsStore=null,this.viSocketEventsStore=null,this.exceptionsStore=null,this.initialized=!1,this.messagesFormatter=new u.MessagesFormatter(s),this.messageHistory={},this.appStore=t,this.widgetConfig=n,this.clientStore=r,this.agentStore=o,this.reduxStore=a,this.webSocketEventsStore=new c.EventStore,this.viSocketEventsStore=new c.EventStore,this.exceptionsStore=new c.EventStore,this.actionsStore=new c.EventStore,this.initialized=!0,d=this}return(0,o.default)(e,[{key:"isInitialized",value:function(){return this.initialized}},{key:"saveSocketEvent",value:function(e){this.webSocketEventsStore.save(e)}},{key:"saveViEvent",value:function(e){this.viSocketEventsStore.save(e)}},{key:"saveException",value:function(e){this.exceptionsStore.save(e)}},{key:"saveReduxAction",value:function(e){this.actionsStore.save(e)}},{key:"saveMessageHistory",value:function(e,t){this.messageHistory[e]=t}},{key:"pageHasErrors",value:function(){return this.exceptionsStore.length()>0}},{key:"getStore",value:function(){return this.exceptionsStore.getAll()}},{key:"exportData",value:function(){return JSON.stringify({agentStore:this.agentStore,appStore:this.appStore,clientStore:this.clientStore,config:this.widgetConfig,exceptionsStore:this.exceptionsStore.getAll(),messagesStore:this.messagesFormatter.toDebugLog(),messageHistory:this.messageHistory,reduxStore:this.reduxStore.getState(),userAgent:navigator.userAgent,version:s.EnvironmentManager.getVersion(),visitorsInsightEventsStore:this.viSocketEventsStore.getAll(),webSocketEventsStore:this.webSocketEventsStore.getAll(),actionsStore:this.actionsStore.getAll(),lastLog:l.lastLogs.join("\r\n"),configLogs:{lastStatus:a.default.lastStatus}})}}],[{key:"getInstance",value:function(){return d}}]),e}();t.default=g},87144:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.EventStore=void 0;var i=r(n(33119)),o=r(n(92664));let a=function(){function e(){(0,i.default)(this,e),this.events=[]}return(0,o.default)(e,[{key:"save",value:function(e){this.events.push(e)}},{key:"getAll",value:function(){return this.events||null}},{key:"length",value:function(){return this.events.length}}]),e}();t.EventStore=a},7547:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.MessagesFormatter=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(45926),s=n(52161),l=n(44145),c=n(90061),u=n(36874);const d=(0,c.createLogger)("MessagesFormatter");let g=function(){function e(t){(0,i.default)(this,e),this.messagesStore=t}return(0,o.default)(e,[{key:"toTxt",value:function(){d.log("toTxt")}},{key:"getMessagesAsHTML",value:function(){try{const e=this.toHTML(),t=new Blob([e],{type:"text/html"}),n=window.parent.URL.createObjectURL(t);return{url:n,fileName:`${(new Date).toISOString()}_${(0,a.getPageWindow)().location.host}_chat_log.html`}}catch(e){return{url:null,fileName:null}}}},{key:"toHTML",value:function(){d.log("toHTML");let e="";this.messagesStore.store.forEach(t=>{const n=t.store;let r;if("client"===n.from)r="you";else{if("agent"!==n.from&&"bot"!==n.from)return;{let e=n.from_id&&(0,l.getAgentById)(+n.from_id);"bot"===n.from&&(e=n.from_id&&(0,l.getBotById)(+n.from_id)),r=e?`${e.name} (${e.title})`:"agent"}}let i=n.text;if(!i||"form"===n.type||"botsystem"===n.type)return;if("media"===n.type&&n.body&&n.body.file_url){const e=n.body.name||n.body.file_name,t=n.body.file_url||n.body.file;i=`<a target="_blank" rel="nofollow noopener" href="${encodeURI(t)}">${e}</a>`}const o="cobrowse"===n.type&&n.body&&n.body.address;if(o){const e=n.body.text||"",t=`${n.body.url}#jvhs_${n.body.address}`;i=`<a target="_blank" rel="nofollow noopener" href="${encodeURI(t)}">${(0,s.escape)(e).trim()}</a>`}let a=i?(0,s.escape)(i).trim():"";o&&(a=i);const c=new Date(n.created_ts),u=c.toLocaleDateString(),d=c.toLocaleTimeString();e+=`<div class="message ${n.from}MessageWrap">\n                <span class="messageInfo">${u} ${d}, ${r}</span>\n                <br>\n                <span>${a}</span>\n            </div>\n            <br>`});return`<!DOCTYPE html>\n        <html lang="en">\n        <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <meta http-equiv="X-UA-Compatible" content="ie=edge">\n            <title>Chat log from ${(0,a.getPageWindow)().location.host}</title>\n            <style>\n                * {\n                    font-family: sans-serif;\n                }\n                a {\n                    color: #0044d3 !important;\n                }\n                h1 {\n                    display: block;\n                    margin: 15px auto;\n                    text-align: center;\n                    width: 600px;\n                }\n                .wrap {\n                    display: flex;\n                    flex-direction: column;\n                    width: 600px;\n                    margin: 0 auto;\n                }\n                .wrap .message {\n                    display: block;\n                    max-width: 100%;\n                    min-width: 40px;\n                    margin-bottom: 2px;\n                    overflow: hidden;\n                    word-wrap: break-word;\n                    text-indent: 0;\n                    user-select: text;\n                    border-radius: 5px;\n                }\n                .message a {\n                    color: inherit;\n                }\n                .messageInfo {\n                    opacity: 0.7;\n                    font-size: 14px;\n                }\n                .clientMessageWrap {\n                    background-color: ${u.colorsFromFigma.GREEN_80};\n                    color: white;\n                    padding: 12px 16px 12px 16px;\n                    max-width: 70%;\n                    overflow: hidden;\n                    word-wrap: break-word;\n                    line-height: @mainLine;\n                    text-indent: 0;\n                    user-select: text;\n                    box-sizing: border-box;\n                    margin: 0 0 0 auto;\n                }\n                .agentMessageWrap,\n                .botMessageWrap {\n                    background-color: #f1f0f0;\n                    color: #222d38;\n                    padding: 12px 16px 12px 16px;\n                    max-width: 70%;\n                    overflow: hidden;\n                    word-wrap: break-word;\n                    line-height: @mainLine;\n                    text-indent: 0;\n                    user-select: text;\n                    box-sizing: border-box;\n                    margin: 0 auto 0 0;\n                }\n                .printButton {\n                    position: fixed;\n                    top: 13px;\n                    right: 30px;\n                    background-color: ${u.colorsFromFigma.GREEN_80};\n                    color: white;\n                    width: 80px;\n                    height: 40px;\n                    border-radius: 5px;\n                    font-size: 20px;\n                    box-shadow: none;\n                    border: none;\n                }\n                .printButton:hover {\n                    background-color: ${u.colorsFromFigma.GREEN_90};\n                    cursor: pointer;\n                }\n                @media print {\n                    .printButton {\n                        display: none;\n                    }\n                }\n            </style>\n        </head>\n        <body>\n            <h1>Chat log from ${(0,a.getPageWindow)().location.host}</h1>\n            <button class="printButton" onclick="window.print()">Print</button>\n            <div class="wrap">\n                ${e}\n            </div>\n        </body>\n        </html>`}},{key:"toDebugLog",value:function(){return d.log("toDebugLog"),this.messagesStore.store}}]),e}();t.MessagesFormatter=g},74603:function(e,t,n){"use strict";var r=n(17907);t.s=function(){v.isDesignerEditor&&(b._dAPI=D)};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(10018)),o=n(42908),a=r(n(14264)),s=r(n(14762)),l=r(n(27104)),c=r(n(26754)),u=r(n(75686)),d=n(70859),g=n(26932),p=n(65465),f=n(31694),h=n(90061),m=n(81152),_=n(44145),v=n(52028),y=n(45926);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}const E=(0,h.createLogger)("DesignerApi"),b=(0,y.getPageWindow)(),S=(e,t)=>{window.parent._desingerConfig[e]=t},T=()=>{const e=u.default.getComponent(d.Component.ROOT_COMPONENT);e&&e.forceUpdate()},D={showChat(){E.log("showChat"),o.api.open()},showLabel(){E.log("closeChat"),o.api.close()},setAgent(e){E.log("setAgent",{params:e}),s.default.destroy(),s.default.push({agent_id:1,display_name:e.name,title:e.title,avatar_url:e.avatarUrl,body:{state:"join",unsave:!0}}),Object.assign(c.default,{agent_id:1,display_name:e.name,title:e.title,avatar_url:e.avatarUrl}),g.agentsDispatchers.addAgent({id:1,name:e.name,title:e.title,avatarUrl:e.avatarUrl,isBot:!1}),g.chatsDispatchers.setJoinedAgents([{agent_id:1,display_name:e.name,title:e.title,avatar_url:e.avatarUrl}]),g.chatsDispatchers.addJoinedAgent(1),T()},addMessages(e){E.log("addMessages",{messages:e});const t=[];e.forEach(e=>{t.push({from:e.from,from_id:"agent"===e.from?1:null,text:e.text,type:"message",status:"read",created_ts:(new Date).getTime(),body:{unsave:!0}})}),g.messagesDispatchers.addMessages(t)},updateAgent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;E.log("updateAgent",{params:e,id:t}),Object.assign(c.default,{agent_id:t,display_name:e.name,title:e.title,avatar_url:e.avatarUrl});const n=s.default.getAgentById(t);n&&(n.set("display_name",e.name),n.set("title",e.title),n.set("avatar_url",e.avatar_url)),g.agentsDispatchers.updateAgent({id:t,name:e.name,title:e.title,avatarUrl:e.avatarUrl})},editLastMessage(e){E.log("editLastMessage",{text:e});const t=(0,_.getAgentMessages)((0,_.getMessages)());if(t.length){const n=t[t.length-1];g.messagesDispatchers.updateMessage({privateId:n.private_id,messageId:null},{text:e})}},cleanMessages(){E.log("cleanMessages"),a.default.destroy(),a.default.trigger("update")},setWidgetColor(e,t){E.log("setWidgetColor",{color:e,color2:t}),g.userDispatchers.setWidgetColor(e),g.userDispatchers.setWidgetColor2(t),T()},setDesktopSettings(e){E.log("setDesktopSettings",e),g.userDispatchers.setPowerGradient(e)},setMobileWidgetColor(e){E.log("setMobileWidgetColor",e),g.userDispatchers.setPowerButtonColor(e)},setCallbackColor(e){E.log("setCallbackColor",{color:e}),(0,i.setConfigParam)("callback_btn_color",e),g.userDispatchers.setCallbackButtonColor(e),T()},setBubbleColor(e){E.log("setBubbleColor",{color:e}),g.userDispatchers.setBubbleColor(e),(0,i.setConfigParam)("bubble_color",e),(0,v.runBind)("setBubbleColor"),T()},setPattern(e){E.log("setPattern",{pattern:e}),g.userDispatchers.setPattern(e),(0,i.setConfigParam)("pattern",e),T()},setWidgetPosition(e,t){E.log("setWidgetPosition",{orientation:e,padding:t});const n=+t;g.userDispatchers.setWidgetOrientation(e),g.userDispatchers.setWidgetPadding(n),(0,i.setConfigParam)("widget_orientation",e),(0,i.setConfigParam)("widget_padding",n),(0,v.runBind)("setWidgetPosition",{orientation:e,padding:n}),T()},setMobileWidgetOrientation(e){E.log("setMobileWidgetOrientation",e),g.userDispatchers.setWidgetMobileOrientation(e)},setMobileBottomOffset(e){E.log("setMobileBottomOffset",e),g.userDispatchers.setMobileOffsetBottom(e||null)},setDesktopBottomOffset(e){E.log("setDesktopBottomOffset",e),g.userDispatchers.setDesktopOffsetBottom(e||null)},setFontColor(e){E.log("setFontColor",{type:e}),"auto"===e&&(e=l.default.isLightColor(i.default.widget_color)?"dark":"light"),(0,i.setConfigParam)("widget_font_color",e),g.userDispatchers.setWidgetFontColor(e),T()},setFontSize(e){E.log("setFontSize",{size:e}),g.userDispatchers.setWidgetFontSize(e),(0,i.setConfigParam)("font_size",e),T()},setFontFamily(e){E.log("setFontFamily",{family:e}),g.userDispatchers.setWidgetFontFamily(e),(0,i.setConfigParam)("font_family",e),T()},setFontType(e){E.log("setFontType",{type:e}),g.userDispatchers.setWidgetFontType(e),(0,i.setConfigParam)("font_type",e),T()},setLabelBubble(e){E.log("setLabelBubble",{bool:e});const t=e?1:0;g.userDispatchers.setWidgetLabelBubble(t),(0,i.setConfigParam)("label_bubble",t)},setOnlineText(e){E.log("setOnlineText",{text:e}),g.userDispatchers.setOnlineLabel(e),(0,i.setConfigParam)("online_widget_label",e),(0,v.runBind)("setOnlineText",e)},setLabelText(e){E.log("setLabelText",{text:e}),"online"===i.default.chat_mode?(g.userDispatchers.setOnlineLabel(e),(0,i.setConfigParam)("online_widget_label",e)):(g.userDispatchers.setOfflineLabel(e),(0,i.setConfigParam)("offline_widget_label",e)),(0,v.runBind)("setLabelText",e)},setOfflineFormText(e){E.log("setOfflineFormText",{text:e});const t=(0,_.getLastMessageByType)(m.MessageType.FOR_TEST);t&&(g.messagesDispatchers.updateMessage({privateId:t.private_id},{text:e}),g.userDispatchers.setOfflineFormText(e),(0,i.setConfigParam)("offline_form_text",e),(0,v.runBind)("setOfflineFormText",e))},setChatOnline(){E.log("setChatOnline"),S("chat_mode","online"),(0,i.setConfigParam)("chat_mode","online"),(0,v.runBind)("setChatOnline"),T()},setChatOffline(){E.log("setChatOffline"),S("chat_mode","offline"),(0,i.setConfigParam)("chat_mode","offline"),(0,v.runBind)("setChatOffline"),T()},addPrechat(e){D.cleanPrechat(),E.log("addPrechat",{prechats:e}),(0,i.setConfigParam)("prechat",e),(0,i.setConfigParam)("enable_prechat",1),p.messageActions.pushPrechat(),g.featuresDispatchers.enablePrechat(!0),g.userDispatchers.setPrechat(e)},updatePrechats(e){if(E.log("updatePrechats",{prechats:e}),!e)return;u.default.getComponent(d.Component.PRECHAT)&&f.PrechatEmitter.emit("updatePrechatText",e)},cleanPrechat(){E.log("cleanPrechat"),p.messageActions.deletePrechatMsg(),a.default.trigger("update")},setMobileView(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).target;e?g.designerDispatchers.updateDesignerSettings({isMobileView:e,mobileRenderTarget:t}):g.designerDispatchers.updateDesignerSettings({isMobileView:!1,mobileRenderTarget:""})}}},52028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.designerBind=function(e,t){if(!o)return;void 0!==i[e]||(i[e]=[]),i[e].push(t)},t.isDesignerEditor=void 0,t.runBind=function(e,t){void 0!==i[e]&&i[e].forEach(e=>{e(t)})};var r=n(16026);const i={},o=r.EnvironmentManager.isDesignerEditor();t.isDesignerEditor=o},2439:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(10018)),s=n(12494),l=n(97778),c=n(21434),u=n(16026);let d=function(){function e(t){(0,i.default)(this,e),this.file=t,this.fileExtension=(0,c.fileName)(t.name).ext,this.fileMimeType=t.type,this.fileSize=t.size,this.reason=null,this.isExtendedEnabled=Boolean(a.default.enable_extended_file_transfer)}return(0,o.default)(e,[{key:"isValid",value:function(){return this.isAllowedFileSize()&&this.isAllowedExtensionAndMime()}},{key:"getReason",value:function(){return this.reason}},{key:"isAllowedExtensionAndMime",value:function(){if(!this.fileExtension)return this.reason=s.FileUploadError.NO_EXTENSION,!1;const e=u.EnvironmentManager.getAllowedFileTypes();for(let t=0;t<e.length;t++){const n=e[t];if(n.extension===this.fileExtension.toLowerCase()&&n.mimeType===this.fileMimeType)return!0}return this.reason=s.FileUploadError.RESTRICTED_FILE_TYPE,!1}},{key:"isAllowedFileSize",value:function(){return!(this.fileSize>(this.isExtendedEnabled?l.MAX_EXTENDED_FILE_SIZE:l.MAX_FILE_SIZE))||(this.reason=s.FileUploadError.FILE_SIZE_EXCEEDED,!1)}}]),e}();t.default=d},69625:function(e,t,n){"use strict";var r=n(17907);t.b=void 0;var i=r(n(61125)),o=r(n(33119)),a=r(n(92664)),s=r(n(10018)),l=n(97778),c=n(44145),u=r(n(2439)),d=n(12494),g=n(75141),p=n(54091),f=n(53489),h=n(21434),m=n(18276),_=n(77294),v=n(81152),y=n(26932),C=n(95911),E=n(90061),b=n(38042);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const D=(0,E.createLogger)("MediaUploader");const w=new(function(){function e(){(0,o.default)(this,e),this.mediaMessage=null,this.sign=null,this.file_name=null,this.client_id=(0,c.getClient)().clientId?(0,c.getClient)().clientId.split(".")[0]:0,this.site_id=(0,c.getSystemSettings)().siteId,this.public_id=(0,c.getSystemSettings)().widgetId,this.currentQuery=null}return(0,a.default)(e,[{key:"getSignUrl",value:function(){return(0,_.getApiHost)().replace("code","auth")+"/api/1.0/auth/media/sign/put"}},{key:"getSign",value:async function(){D.warn("getSign");return await C.promisedRequest.get(this.getSignUrl(),{timeout:3e4,params:{file_name:this.file_name,client_id:(0,c.getClient)().clientId?(0,c.getClient)().clientId.split(".")[0]:0,site_id:this.site_id,public_id:this.public_id}}).then(e=>{const t=e.data;return this.metadata=t.metadata,this.sign=t.sign,this.ts=t.ts,this.media_server_url=t.url,(0,b.telemetry)("media_get_sign_success",{param1:JSON.stringify(T(T({},t),{},{sign:t.sign[0]})),param2:this.file_name||"none"}),t}).catch(e=>{D.error("Upload file error",e),(0,b.telemetry)("media_get_sign_error"),this.setMessageError(d.FileUploadError.REQUEST_FAILED)})}},{key:"onUploadProgress",value:function(){const e=this.mediaMessage;var t;e&&(e.body.status===v.MediaStatus.ERROR&&(null===(t=this.currentQuery)||void 0===t||t.call(this)))}},{key:"uploadFile",value:async function(e,t){var n;D.warn("uploadFile");const r=(0,p.bytesToMB)(null!==(n=this.file.size)&&void 0!==n?n:5),i=3e4*Math.ceil(r),o=C.xhrRequest.put(`${this.media_server_url}/${this.file_name}?ts=${this.ts}&sign=${this.sign}&public`,(n,r)=>{if(D.warn("onLoad",n,r),n)return null==t||t(),void this.setMessageError(d.FileUploadError.REQUEST_FAILED);const i=r.headers.location||r.headers.Location,o=this.mediaMessage;if(y.messagesDispatchers.updateMessage({privateId:o.private_id},{body:T(T({},o.body),{},{unsave:null})}),!i)return e(0),y.messagesDispatchers.updateMessage({privateId:o.private_id},{body:T(T({},o.body),{},{status:v.MediaStatus.ERROR,error:(0,m.l10n)("file_upl_error")})}),void(0,b.telemetry)("file_upload_no_location",{param1:this.file_name,param2:JSON.stringify(r.headers),param3:r.status});this.onSuccess({fullUrl:this.media_server_url+r.headers.location})},{timeout:i,headers:{"Content-Type":this.file.type,"X-Metadata":this.metadata},body:this.file,onUpload:t=>{D.warn("onUpload",t.loaded),e&&e(t.loaded),this.onUploadProgress()}});this.currentQuery=()=>{null==o||o.abort(),null==t||t()}}},{key:"getError",value:function(e){if(e){let t=(0,m.l10n)("file_upl_error"),n=null;switch(e){case d.FileUploadError.FILE_SIZE_EXCEEDED:t=(0,m.l10n)("file_upl_error_max_size",{size:(0,p.fileSize)(s.default.enable_extended_file_transfer?l.MAX_EXTENDED_FILE_SIZE:l.MAX_FILE_SIZE)}),n={param1:d.FileUploadError.FILE_SIZE_EXCEEDED};break;case d.FileUploadError.UPLOAD_CANCELED:t=(0,m.l10n)("file_upl_cancel"),n={param1:d.FileUploadError.UPLOAD_CANCELED};break;case d.FileUploadError.NO_EXTENSION:t=(0,m.l10n)("file_upl_error_no_ext"),n={param1:d.FileUploadError.NO_EXTENSION};break;case d.FileUploadError.RESTRICTED_FILE_TYPE:t=(0,m.l10n)("file_upl_error"),n={param1:(0,h.fileName)(this.file.name).ext,param2:d.FileUploadError.RESTRICTED_FILE_TYPE};break;case d.FileUploadError.REQUEST_FAILED:n={param1:d.FileUploadError.REQUEST_FAILED}}return n&&(0,b.telemetry)("file_upload_error",n),t}}},{key:"setMessageError",value:function(e){const t=this.getError(e),n=this.mediaMessage;n&&y.messagesDispatchers.updateMessage({privateId:n.private_id},{body:T(T({},n.body),{},{status:v.MediaStatus.ERROR},t&&{error:t}),status:v.MessageStatus.DELIVERED})}},{key:"checkIfFileReadIsNeeded",value:function(e){if(D.warn("checkIfFileReadIsNeeded",e.type),"photo"===(0,g.detectType)(e.type)&&"FileReader"in window)try{return this.readFileContent(e),!0}catch(e){return this.setMessageError(),!1}}},{key:"checkFileInfo",value:function(e){const t=new u.default(e);if(t.isValid())return this.checkIfFileReadIsNeeded(e),!0;{const e=t.getReason();return this.setMessageError(e),!1}}},{key:"readFileContent",value:function(e){const t=new FileReader;t.onload=function(){const n=new Image;n.onload=function(){e.width=n.width,e.height=n.height,D.warn("readFileContent",e)},n.onerror=e=>{D.log("FileReader error",e),(0,b.telemetry)("file_upload_error",{param1:"image_generate_failed"})},n.src=t.result},t.onprogress=function(){},t.readAsDataURL(e)}},{key:"startUpload",value:async function(e,t,n,r,i){if(!t)return!1;if(this.file=t,this.file_name=(0,f.sanitize)(t.name),this.onSuccess=n,this.mediaMessage=e,this.checkFileInfo(t)){await this.getSign()&&await this.uploadFile(r,i)}}}]),e}());t.b=w},99012:function(e,t,n){"use strict";var r=n(17907);t.z=function(){if(i.default.enable_calltouch){const e=(0,o.getPageWindow)(),t=(0,a.getClient)();if("function"==typeof e.ct){s.log("init");try{const n=e.ct("calltracking_params");n&&n.length&&n.forEach(n=>{const r=`{"site_id": ${i.default.site_id}, "widget_id": "${i.default.widget_id}", "visitor_id": "${t.visitorId}"}`;s.log("set attr:",r),e.ct(n.modId,"set_attrs",r)})}catch(e){s.error("Fail to sync with calltouch",e)}}}};var i=r(n(10018)),o=n(45926),a=n(44145);const s=(0,n(90061).createLogger)("CallTouch",{style:"color: grey"})},22618:function(e,t,n){"use strict";var r=n(17907);t.r=function(){const e=i.default.integrations;if(e&&e.videoforce){const t="https://widget.videoforce.io/";try{const n=document.createElement("script");n.src=t+e.videoforce,n.crossorigin="anonymous",n.async="true";const r=(0,o.getPageWindow)().jivo_cspNonce;r&&n.setAttribute("nonce",r);const i=(0,o.getPageWindow)().document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}catch(e){a.Monitoring.reportException(e)}}};var i=r(n(10018)),o=n(45926),a=n(54415)},45493:function(e,t,n){"use strict";var r=n(17907);t.Z=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(80352);let s=null;var l=function(){function e(t,n){if((0,i.default)(this,e),s)return s;this.appStore=n,this.appStore.addListener(()=>{this.updateChatStarted()}),this.storeName="jv_loader_info_"+t,this.store={},a.platform.supports.localStorage&&(this.store=JSON.parse(localStorage.getItem(this.storeName))||{}),s=this}return(0,o.default)(e,[{key:"setInStore",value:function(e,t){this.store[e]=t,this.saveStore()}},{key:"saveStore",value:function(){a.platform.supports.localStorage&&localStorage.setItem(this.storeName,JSON.stringify(this.store))}},{key:"updateChatStarted",value:function(){this.store.isChatStarted!==this.appStore.chat_started&&(this.store.isChatStarted=this.appStore.chat_started,this.saveStore())}}],[{key:"getInstance",value:function(){return s}}]),e}();t.Z=l},74619:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(45926),s=n(90061),l=n(21951);const c=(0,s.createLogger)("ObserverManager");let u=function(){function e(t){(0,i.default)(this,e),"function"==typeof MutationObserver&&(this.currentTitle=this.getTitle(),this.currentHref=this.getHref(),this.currentPath=this.getPathName(),this.observer=new MutationObserver(()=>{var e,n;this.getTitle()!==this.currentTitle&&(this.currentTitle=this.getTitle(),c.log("title changed",this.currentTitle),null===(e=t.onTitleChange)||void 0===e||e.call(t));this.getPathName()!==this.currentPath&&(this.currentHref=this.getHref(),this.currentPath=this.getPathName(),c.log("location also changed",this.currentHref,this.currentPath),null===(n=t.onUrlChange)||void 0===n||n.call(t))}),this.observer.observe((0,a.getPageWindow)().document,{subtree:!0,childList:!0}),(0,l.addListener)(window,"beforeunload",this.disconnect),(0,l.addListener)(window,"jBeforeunload",this.disconnect))}return(0,o.default)(e,[{key:"getTitle",value:function(){return(0,a.getDocumentTitle)()}},{key:"getHref",value:function(){return(0,a.getPageWindow)().location.href}},{key:"getPathName",value:function(){return(0,a.getPageWindow)().location.pathname}},{key:"disconnect",value:function(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}}]),e}();t.Observer=u},16500:function(e,t,n){"use strict";var r=n(17907);t.Z=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(21951),s=n(32183);const l=(0,n(90061).createLogger)("PageVisibilityManager");var c=new(function(){function e(){(0,i.default)(this,e),this.pageVisible=(0,s.pageVisible)(),this.subscribers=[],(0,a.listenVisibility)(()=>{this.pageVisible=(0,s.pageVisible)(),l.log("Page visibility changed to:",this.pageVisible),this.fireSubscriptions(this.pageVisible)})}return(0,o.default)(e,[{key:"fireSubscriptions",value:function(e){this.subscribers.forEach(t=>{t(e)})}},{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter(t=>{if(t!==e)return t})}}]),e}());t.Z=c},50216:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(10018),s=n(90061),l=n(26932),c=n(64123),u=n(95911),d=n(45926),g=n(62096),p=n(49963),f=n(38042);const h=(0,s.createLogger)("RecaptchaManager");let m=null,_=function(){function e(t){(0,i.default)(this,e),this.token=t,this.recaptchaWidgetIndex=null,this.grecaptcha=null,this.blocked=null,m=this}return(0,o.default)(e,[{key:"isBlocked",value:function(){return this.blocked}},{key:"addRecaptchaToPage",value:function(){h.log("Insertion of reCaptcha code",this.token);const e=(0,d.getPageWindow)(),t=e.document.head,n=e.document.createElement("script");n.async=!0,n.src="//google.com/recaptcha/api.js?render=explicit&onload=jivo_onRecaptchaLoadCallback",e.jivo_onRecaptchaLoadCallback=this.onLoadCallback.bind(this),t.appendChild(n)}},{key:"onLoadCallback",value:function(){h.log("onLoadCallback"),this.grecaptcha=(0,d.getPageWindow)().grecaptcha,this.recaptchaWidgetIndex=this.grecaptcha.render({sitekey:this.token,badge:"bottomleft"}),p.connectionAdapter.openConnect()}},{key:"getGRecaptchaToken",value:function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).action;return h.log("getGRecaptchaToken: request token"),this.grecaptcha.execute(this.recaptchaWidgetIndex,{action:e})}},{key:"getJivoAntispamToken",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"startup";h.log("getJivoAntispamToken",n),this.grecaptcha.ready(()=>{h.log("GRECAPTCHA READY: Request token"),this.getGRecaptchaToken({action:n}).catch(e=>{this.onTokenFailure(e,t)}).then(n=>{this.onTokenSuccess(n,e,t)})})}},{key:"getRecaptchaHandleUrl",value:function(e){const t=g.reduxStore.getState(),n=(0,a.getConfig)(),r=n.base_url,i=n.widget_id;return(0,d.getProtocol)()+r+`/script/recaptcha-token/${encodeURIComponent(i)}?visitor_id=${encodeURIComponent(t.client.visitorId)}&token=${encodeURIComponent(e)}`}},{key:"onTokenSuccess",value:function(e,t,n){e&&(h.log("JivoAntispamToken REQUEST SUCCESS: GRecaptcha token received",e),u.xhrRequest.get(this.getRecaptchaHandleUrl(e),(e,r)=>{if(e)return(0,f.telemetry)("recaptcha_error",{param1:"Server error: "+JSON.stringify(e)});const i=r.data;return i.ok&&i.token?(l.clientDispatchers.setCaptchaToken(i.token),(0,f.telemetry)("recaptcha_success",{param1:i.score}),h.log("Recaptcha request is successful"),t&&t()):i.ok?void 0:((0,f.telemetry)("recaptcha_failure",{param1:i.score,param2:null===(o=i.reason)||void 0===o?void 0:o.join(",")}),h.log("Recaptcha request is unsuccessful"),this.block(),setTimeout(()=>{(0,c.enableRecaptchaAntispam)()},1500),n&&n());var o}))}},{key:"onTokenFailure",value:function(e,t){h.log("Execution error",e),(0,f.telemetry)("recaptcha_error",{param1:"Client error: "+JSON.stringify(e)}),t&&t(e)}},{key:"block",value:function(){this.blocked=!0}}],[{key:"getInstance",value:function(){return m}}]),e}();var v=_;t.default=v},75686:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664));var a=new(function(){function e(){(0,i.default)(this,e),this.refs={},this.observers={}}return(0,o.default)(e,[{key:"set",value:function(e,t){e&&t&&(this.refs[e]=t,this._fire(e))}},{key:"get",value:function(e){if(e&&this.refs[e])return this.refs[e].base?this.refs[e].base:this.refs[e]}},{key:"getComponent",value:function(e){return this.refs[e]}},{key:"subscribe",value:function(e,t){this.observers[e]||(this.observers[e]=[]),this.observers[e].push(t)}},{key:"unsubscribe",value:function(e,t){this.observers[e]=this.observers[e].filter(e=>{if(e!==t)return e})}},{key:"_fire",value:function(e){this.observers[e]||(this.observers[e]=[]),this.observers[e].forEach(e=>{e()})}}]),e}());t.default=a},46902:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBufferStore=void 0;var i=r(n(33119)),o=r(n(92664));const a=new(function(){function e(){(0,i.default)(this,e),this.audioBuffers={},this.mp3BuffersLengths={notification:5808,agent_message:3760,outgoing_message:5014},this.oggBufferLengths={notification:6140,agent_message:6464,outgoing_message:7165}}return(0,o.default)(e,[{key:"set",value:function(e,t){this.audioBuffers[e]=t}},{key:"get",value:function(e){return this.audioBuffers[e]||null}},{key:"getReadyAudioBuffersCount",value:function(){return Object.keys(this.audioBuffers).length}},{key:"getReferenceBufferLength",value:function(e,t){switch(t){case"mp3":return this.mp3BuffersLengths[e];case"ogg":return this.oggBufferLengths[e]}}}]),e}());t.AudioBufferStore=a},39933:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLAudioSoundManager=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(7819)),s=r(n(84827)),l=r(n(85299)),c=r(n(55536)),u=n(14433),d=n(21951),g=n(54415),p=n(80352),f=r(n(75686));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}const m=(0,n(90061).createLogger)("HTMLAudioSoundManager");let _=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var r;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,i.default)(this,n),(r=t.call(this,e,o)).touchListenerTimeout=null,r._windowOnClicked,r._mobileHackHandler=r._mobileHackHandler.bind((0,a.default)(r)),r}return(0,o.default)(n,[{key:"getSound",value:function(e){return f.default.get(`sound_${e}`.toUpperCase())}},{key:"initSoundPlayer",value:function(){m.log("Initialization started"),this.disabled||p.platform.isMobileOrTablet&&this._addHackListeners([window.parent,window],"click",this._mobileHackHandler)}},{key:"play",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.disabled)return void m.log(`Cannot play sound "${e}". SoundManager is disabled.`);const n=this.getSound(e);if(n&&void 0!==n.play)try{(p.platform.isIos||p.platform.isSafari)&&n.load();const r=n.play();this._promisesSupported(r)?t?r.then(()=>{this._pause(e)}):r.catch(t=>{this.touchListenerTimeout||(this._windowOnClicked=this._windowOnClicked.bind(this,e),p.platform.isMobileOrTablet&&this._removeHackListeners([window.parent,window],"click",this._mobileHackHandler),this._addHackListeners([window.parent,window],"click",this._windowOnClicked),this.touchListenerTimeout=setTimeout(()=>{this._removeHackListeners([window.parent,window],"click",this._windowOnClicked)},3e3))}).then():t&&this._pause(e)}catch(e){g.Monitoring.reportException(e)}}},{key:"_pause",value:function(e){if(this.disabled)return;const t=this.getSound(e);t&&void 0!==t.pause&&t.pause()}},{key:"_promisesSupported",value:function(e){return("object"==typeof e||"function"==typeof e)&&e.then&&"function"==typeof e.then}},{key:"_windowOnClicked",value:function(e){this.play(e),clearTimeout(this.touchListenerTimeout),this._removeHackListeners([window.parent,window],"click",this._windowOnClicked),this.touchListenerTimeout=null}},{key:"_mobileHackHandler",value:function(){this._mobileHack(),this._removeHackListeners([window.parent,window],"click",this._mobileHackHandler)}},{key:"_mobileHack",value:function(){this.play(this.sounds[1],!0)}},{key:"_addHackListeners",value:function(e,t,n){e.forEach(e=>(0,d.addListener)(e,t,n))}},{key:"_removeHackListeners",value:function(e,t,n){e.forEach(e=>(0,d.removeEvent)(e,t,n))}}]),n}(u.SoundManagerBase);t.HTMLAudioSoundManager=_},21201:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.SoundDownloader=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(54415),s=n(16026),l=n(95911),c=n(69479),u=n(46902),d=n(90061),g=n(45683),p=n(38042);const f=(0,d.createLogger)("SoundDownloader");let h=function(){function e(t){(0,i.default)(this,e),this.audioContext=t,this.soundValidator=new c.SoundValidator,this.exceptionReported=!1}return(0,o.default)(e,[{key:"downloadSounds",value:function(e,t){e.forEach(e=>{this.download(e,t)})}},{key:"download",value:function(e,t){l.xhrRequest.get(this._getUrl(e,t),(n,r)=>{if(n)return this._handleDownloadError(n,e,t);const i=this.soundValidator.validate(e,t,r.data);if(i.success)this._decodeBuffer(r.data,e,t);else if(i.error){this._fallback(e,t)||((0,p.telemetry)("sound_fallback",{param1:e,param2:t,param3:"validation"},{probability:"low"}),f.warn(i.error))}},{responseType:"arraybuffer"})}},{key:"_getUrl",value:function(e,t){const n=(s.EnvironmentManager.isDevelopment()?"/public":"")+`/sounds/${e}.`;return(0,g.getStaticURL)(n+t)}},{key:"_decodeBuffer",value:function(e,t,n){this.audioContext.decodeAudioData(e,e=>{u.AudioBufferStore.set(t,e)},e=>{this._handleDecodeBufferError(e,t,n)})}},{key:"_handleDownloadError",value:function(e,t,n){this._fallback(t,n)||((0,p.telemetry)("sound_fallback",{param1:t,param2:n,param3:"download"},{probability:"low"}),f.warn(`Error downloading arrayBuffer for sound "${t}.${n}". Reason: ${e.code} ${e.text}`))}},{key:"_handleDecodeBufferError",value:function(e,t,n){this._fallback(t,n)||((0,p.telemetry)("sound_fallback",{param1:t,param2:n,param3:"decode"},{probability:"low"}),f.warn(`Error decoding arrayBuffer for sound "${t}.${n}". Reason: ${e}`))}},{key:"_fallback",value:function(e,t){const n=this._getFallbackExtension(t);return!!n&&((0,p.telemetry)("sound_fallback",{param1:e,param2:t,param3:"fallback"},{probability:"low"}),this.download(e,n),!0)}},{key:"_getFallbackExtension",value:function(e){return"mp3"===e?"ogg":null}},{key:"_reportErrorMessageOnce",value:function(e){this.exceptionReported||(a.Monitoring.reportException(e),this.exceptionReported=!0)}}]),e}();t.SoundDownloader=h},14433:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.SoundManagerBase=void 0;var i=r(n(33119)),o=r(n(92664));const a=(0,n(90061).createLogger)("SoundManagerBase");let s=function(){function e(t,n){(0,i.default)(this,e),this.disabled=n,this.sounds=t}return(0,o.default)(e,[{key:"initSoundPlayer",value:function(){a.log("initSoundPlayer method is NOT implemented!")}},{key:"enableSoundPlayer",value:function(){this.disabled=!1}},{key:"disableSoundPlayer",value:function(){this.disabled=!0}},{key:"play",value:function(e){a.log("play method is NOT implemented!")}}]),e}();t.SoundManagerBase=s},69479:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.SoundValidator=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(46902);let s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"validate",value:function(e,t,n){let r;return n?n instanceof ArrayBuffer?this._isValidBufferLength(e,t,n)?{success:!0,error:null}:(r=new Error(`ArrayBuffer byteLength for sound "${e}.${t}" is ${n.byteLength}, should be ${a.AudioBufferStore.getReferenceBufferLength(e,t)}.`),{success:!1,error:r}):(r=new Error(`ArrayBuffer for sound "${e}.${t}" is not an instance of ArrayBuffer.`),{success:!1,error:r}):(r=new Error(`No arrayBuffer for sound "${e}.${t}"`),{success:!1,error:r})}},{key:"_isValidBufferLength",value:function(e,t,n){return n.byteLength===a.AudioBufferStore.getReferenceBufferLength(e,t)}}]),e}();t.SoundValidator=s},50725:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.WebAudioSoundManager=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(84827)),s=r(n(85299)),l=r(n(55536)),c=n(14433),u=n(54415),d=n(80352),g=n(90061),p=n(21201),f=n(46902);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}const m=(0,g.createLogger)("WebAudioSoundManager");let _=function(e){(0,a.default)(n,e);var t=h(n);function n(e){var r;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,i.default)(this,n),(r=t.call(this,e,o)).audioContext=null,r.soundDownloader=null,r}return(0,o.default)(n,[{key:"initSoundPlayer",value:function(){if(m.log("Initialization started"),this.disabled||this._checkIfIsInitialized())return;const e=d.platform.isFirefox?"ogg":"mp3";this.audioContext=this._createAudioContext(),this.soundDownloader=new p.SoundDownloader(this.audioContext),this.soundDownloader.downloadSounds(this.sounds,e)}},{key:"play",value:function(e){!this.disabled&&this._checkIfIsInitialized()?(this.audioContext||(m.log("AudioContext was created on play"),this.audioContext=this._createAudioContext()),"suspended"===this.audioContext.state?this.audioContext.resume().then(()=>{m.log("AudioContext was resumed"),this._startBufferAudio(e)}):this._startBufferAudio(e)):m.log(`Cannot play sound "${e}". SoundManager is either disabled or is not initialized.`)}},{key:"_createAudioContext",value:function(){m.log("Creating AudioContext");try{let e=window.AudioContext||window.webkitAudioContext;if(e){return new e}}catch(e){let t=new Error(`Exception during the creation of audio context. ${e.message}`);return u.Monitoring.reportException(t),this.disableSoundPlayer(),null}}},{key:"_startBufferAudio",value:function(e){let t=f.AudioBufferStore.get(e);if(t){let n=this.audioContext.createBufferSource();if(n)n.buffer=t,n.connect(this.audioContext.destination),n.start();else{let t=new Error(`Error creating buffer source for sound "${e}".`);u.Monitoring.reportException(t),this.disableSoundPlayer()}}else{let t=new Error(`Error there is no audiobuffer for sound "${e}".`);u.Monitoring.reportException(t),this.disableSoundPlayer()}}},{key:"_checkIfIsInitialized",value:function(){return this.sounds.length===f.AudioBufferStore.getReadyAudioBuffersCount()&&(this.soundDownloader=null,!0)}}]),n}(c.SoundManagerBase);t.WebAudioSoundManager=_},25528:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.isSoundPlayerDisabled=void 0;var i=r(n(73687)),o=n(97490),a=n(80352),s=n(44145),l=n(16026);t.isSoundPlayerDisabled=()=>a.platform.isOperaMini||(0,s.getApp)().route===o.Route.HIDDEN||i.default.get("is_blacklisted")||l.EnvironmentManager.isWidgetConstructor()||(0,s.getFeatures)().disableSounds},71277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSoundDisabled=t.default=t.WebAudioDisabled=t.Sounds=void 0;var r=n(80352),i=n(50725),o=n(39933),a=n(25528);const s=["agent_message","notification","outgoing_message"];t.Sounds=s;const l=!function(){if(!r.platform.isMobileOrTablet||!window.AudioContext&&!window.webkitAudioContext||r.platform.isEdge)return!1;{const e=window.AudioContext||window.webkitAudioContext;try{return(new e).close(),!0}catch(e){return!1}}}();t.WebAudioDisabled=l;const c=(0,a.isSoundPlayerDisabled)();t.isSoundDisabled=c;var u=l?new o.HTMLAudioSoundManager(s,c):new i.WebAudioSoundManager(s,c);t.default=u},51961:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(61125)),o=r(n(33119)),a=r(n(92664)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(63417)),l=n(50789),c=r(n(21993));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const p=(0,n(90061).createLogger)("WebRTCCallManager"),f=["SDKReady","IncomingCall","ConnectionEstablished","ConnectionClosed","ConnectionFailed","ACDStatusUpdated","AuthResult","PlaybackFinished","RefreshTokenResult","MicAccessResult"],h={rtcStatsCollectionInterval:500,micRequired:!0,showWarnings:!1,showDebugInfo:!1},m={echoCancellation:!1,noiseSuppression:!1};let _;var v=function(){function e(t,n,r,i){if((0,o.default)(this,e),_)return _;this.callId=t,this.voxUserLogin=n,this.voxUserPassword=r,this.voxNode=i,this.sdk=null,this.call=null,_=this}return(0,a.default)(e,[{key:"getInstance",value:function(){return _}},{key:"connectSdk",value:async function(){p.warn("connectSdk",this.sdkInitialized);await this.loginSdk()&&l.ApiProvider.acceptWebRTCCall(this.callId,()=>{p.warn("POST REQUEST SUCCESS!!!")})}},{key:"stopCall",value:function(){this.call&&(this.call.stop(),this.call=null),this.sdk&&(this.sdk.disconnect(),this.sdk=null)}},{key:"setupSdk",value:async function(){p.warn("setup VOXSDK: set vox listeners"),this.sdk=s.getInstance(),f.forEach(e=>{this.sdk.on(s.Events[e],t=>{this.handleVoxEvent(e,t)})});try{var e;await this.sdk.init(g(g({},h),{},{node:null!==(e=s.ConnectionNode[`NODE_${this.voxNode}`])&&void 0!==e?e:null})),p.log("VOXSDK: SDK init success")}catch(e){p.warn("VOXSDK: SDK init failure",e)}if(![s.ClientState.CONNECTED,s.ClientState.LOGGED_IN].includes(this.sdk.getClientState())){try{await this.sdk.connect(!1)}catch(e){p.error("VOXSDK: connect to vox cloud failure",e)}p.log("VOXSDK: connect to vox cloud success")}}},{key:"loginSdk",value:async function(){try{return await this.sdk.login(this.voxUserLogin,this.voxUserPassword),p.warn("VOXSDK: authorization success"),!0}catch(e){return p.error("VOXSDK: authorization failure",e),!1}}},{key:"handleVoxEvent",value:async function(e,t){if(p.warn("handleVoxEvent",e,t),"IncomingCall"===e)if(p.warn("VOXSDK: sdk event IncomingCall"),t.call){const e=new c.default(this,t.call);this.callId===e.getCallId()&&(this.call=e,this.call.start())}}},{key:"setAudio",value:function(e,t){p.warn("setAudio",e,t);const n=s.Hardware.AudioDeviceManager.get(),r=n.getDefaultAudioSettings();p.warn({defaultSets:r});const i=e||"default",o=t||"default",a=g(g(g({},r),m),{},{inputId:i,outputId:o});n.setDefaultAudioSettings(a),this.call&&n.setCallAudioSettings(this.call.getInstance(),a)}}]),e}();t.default=v},49594:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteMessagesFromHistory=E,t.updateEditedMessages=b,t.updateHistory=function(e){const t=(0,_.getApp)(),n=t.lastMsgId,r=t.started,i=!!e.jv_client_id,o=e.last_msg_id&&n!==e.last_msg_id;y.log("updateHistory",e),i&&o&&function(e,t){y.log("getMsgHistory",e);const n=(new Date).getTime();l.default.getHistoryMessages("messages",{},(r,i)=>{if(r)return function(e,t,n){y.log("handleError",e),t();const r=Math.round(((new Date).getTime()-n)/1e3);(0,h.telemetry)("api_get_messages_error",{param1:r,param2:(0,_.getSystemSettings)().chatHost}),r>=3&&(0,h.telemetry)("api_get_messages_error_timeout",{param1:r,param2:(0,_.getSystemSettings)().chatHost})}(r,t,n);const o=i.data;if(y.log("receive new history",o),v.default.getInstance().saveMessageHistory("lastMessageHistoryRequest",i),o.result){const n=o.result;l=n.chat_opened,y.log("setWidgetStatus",l),u.appDispatchers.setChatStarted(l||!1),l||(s.default.closeChat(),u.appDispatchers.setChatAccepted(!1),(0,f.needShowDepartments)()),function(e,t,n){if(y.log("handleMessages",e),e&&e.length){const r=function(e){y.log("getLastMessageId",e);let t=e?e.get("msg_id"):null;e||(e=s.default.getLastProactive())&&(t=e.get("msg_id"));return t}(function(){y.log("getLastMessage");const e=s.default.filter(e=>{const t=e.get("from");return(t===c.MessageInitiator.CLIENT||t===c.MessageInitiator.AGENT)&&e.get("msg_id")});return e[e.length-1]}()),i=e.filter(e=>(0,a.filterMessage)(e)&&r!==e.msg_id);if(i.forEach(e=>{if(e.deleted)e.status=c.MessageStatus.DELETED;else{y.log("add item from history",e);const t=1e3*e.created_ts,n=1e3*e.updated_ts;e.created_ts=t,e.updated_ts&&(e.updated_ts=n),e.status=e.status?e.status:c.MessageStatus.DELIVERED,e.status===c.MessageStatus.SEEN&&(e.status=c.MessageStatus.READ),e.type===c.MessageType.EMAIL&&(e.type=c.MessageType.MESSAGE),e.media&&(e.media.status=c.MediaStatus.COMPLETE),e.private_id||(e.private_id=(0,m.generateGUID)())}}),"resume_ok"===n&&!g.platform.isMobileOrTablet&&i.length&&(0,p.openChatOnMessage)({fromHistory:!0}),u.messagesDispatchers.addMessages(i),t){const t=!!i.length;let n=(t?i:e).slice(-1)[0],r=n.chat_id,o=n.created_ts;t||(o*=1e3),(0,p.needToRateForm)(r,o)}(0,h.telemetry)("api_get_messages_received",{param1:(0,_.getSystemSettings)().chatHost})}}(n.messages,n.chat_rate_requested,e.name),E(n.messages),b(n.messages),e&&u.appDispatchers.setLastMsgId(e.last_msg_id),t(n)}else y.error("Empty history data"),t();var l})}(e,()=>{});r||C()};var i=n(33180),o=n(90061),a=n(96879),s=r(n(14264)),l=r(n(86961)),c=n(81152),u=n(26932),d=n(7919),g=n(80352),p=n(15787),f=n(59767),h=n(38042),m=n(16016),_=n(44145),v=r(n(22866));const y=(0,o.createLogger)("MessageHistory"),C=()=>{i.cssLoader.subscribe(()=>{d.Application.getInstance().start()},()=>{d.Application.getInstance().stop()})};function E(e){const t=e.filter(e=>e.deleted);t.length&&t.forEach(e=>{const t=s.default.getMessageById(e.msg_id);t&&t.set({status:c.MessageStatus.DELETED,type:c.MessageType.MESSAGE,body:null})})}function b(e){const t=e.filter(e=>!e.deleted);t.length&&t.forEach(e=>{const t=s.default.getMessageById(e.msg_id);t&&e.updated_ts&&(y.warn("message edited: ",t.toJSON()),t.set({updated_ts:1e3*e.updated_ts,text:e.text}))})}},54415:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Monitoring=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(75048),s=n(16026),l=n(67597),c=n(44733),u=n(38042),d=n(40300),g=n(44145);let p=function(){function e(){(0,i.default)(this,e),this.provider=new a.MonitoringProvider}return(0,o.default)(e,[{key:"init",value:function(){window.onerror=(e,t,n,r,i)=>{if(!i&&(i={}),!window&&!arguments&&"function"!=typeof this.reportException)return;const o=(0,g.getClient)(),a=o.clientId,c=o.visitorId;this.reportException({client_id:a?a.split(".")[0]:c,message:e,lineNumber:n,fileName:(0,l.getBundleSrc)()+"&v="+s.EnvironmentManager.getVersion(),columnNumber:r,stack:JSON.stringify(i.stack||i.stacktrace||i)})};const e=t=>{const n=(0,d.getTelemetryState)().reportedEvents,r=n.chat_invite||n.offline_invite;t.persisted||!r||c.StorageProvider.get("hide_reported")||(c.StorageProvider.set("hide_reported",!0),(0,u.telemetry)("page_hide",{param1:"has_proactive"},{once:!0})),window.removeEventListener("pagehide",e)};window.addEventListener("pagehide",e,!1)}},{key:"reportException",value:function(e,t){this.provider.reportException(e,t)}},{key:"reportStats",value:function(e,t){this.provider.reportStats(e,t)}}]),e}();const f=new p;t.Monitoring=f},75048:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.MonitoringProvider=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(10018)),s=n(90061),l=n(80352),c=r(n(22866)),u=n(16026),d=n(44145),g=n(6693),p=n(95911),f=n(45926),h=n(17662),m=n(96367),_=n(58345),v=n(6211),y=n(40300);const C=(0,s.createLogger)("MonitoringProvider");let E=function(){function e(){(0,i.default)(this,e),this.errorSentCnt=0}return(0,o.default)(e,[{key:"isNotSearchSpider",value:function(){const e=navigator.userAgent.toLowerCase();return-1==e.search(/google/gi)&&-1==e.search(/\+http:\/\/yandex\.com\/bots/gi)&&-1==e.search(/\+http:\/\/www\.cloudflare\.com\/always-online/gi)&&-1==e.search(/linespider\//gi)}},{key:"reportException",value:function(e,t){if(c.default.getInstance()&&c.default.getInstance().saveException(e),!a.default.disable_error_reporting&&this.isNotSearchSpider()){if(++this.errorSentCnt>3)return;try{this.reportError(e,3,t)}catch(e){C.error(e.message)}}else C.warn("REPORT",e)}},{key:"reportError",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2?arguments[2]:void 0;const r=`${(0,f.getProtocol)()}//${a.default.err_host}/widget`,i=(0,d.getClient)(),o=i.clientId,s=i.visitorId,c={body:{widget:"true",widget_id:a.default.widget_id,widget_version:u.EnvironmentManager.getVersion(),level:t,url:this.getUrl(),client_id:o?o.split(".")[0]:s,lineNumber:e.lineNumber,fileName:e.fileName,column:e.columnNumber,full_message:n+"\r\n"+this.getStack(e.message,e.stack),short_message:e.message,device:l.platform.device,shard:this.getShard()},headers:{"Content-Type":g.CONTENT_TYPE.APP_JSON},responseType:"json",monitoring:!0};this.ignoreMessage(c.body.full_message,["chrome://internal","chrome-extension://"])||p.xhrRequest.post(r,(e,t)=>{C.warn("Error reported:",e,t)},c)}},{key:"ignoreMessage",value:function(e,t){return Boolean(t.filter(t=>e.includes(t)).length)}},{key:"getUrl",value:function(){const e=(0,f.getPageWindow)().location;return e.protocol+"//"+e.host+e.pathname}},{key:"getStack",value:function(e,t){const n=s.lastLogs.join("\r\n"),r=(0,y.getTelemetryState)().lastEvents;return"Script error."==e||'setting getter-only property "message" (in MessagesContainer component)'==e?`errCount: ${this.errorSentCnt}\r\n${t} \r\n ${n}`:"{}"!=t&&""!=t&&t?t.replace(/(?:\\[n])+/,"\r\n"):`Custom stack: \r\n${n}\r\n\r\n${r.join("\r\n")}`}},{key:"getShard",value:function(){return a.default.shard_id||"main"}},{key:"getStatsUrl",value:function(e,t,n){const r=(0,d.getSystemSettings)(),i=r.siteId,o=r.widgetId,a=r.baseUrl,s=n?"":`${t}/`;return`${(0,f.getProtocol)()}${a}/script/stat/campaign/${e}/${i}/${s}${o}`}},{key:"reportStats",value:function(e,t){if(e&&(0,h.isString)(e)){if(this.isNotSearchSpider()){C.log("stats",e,t);try{const n=["visit"].includes(e),r=this.getStatsUrl(e,t,n);if(n&&Array.isArray(t)){const n=t;(0,_.chunkArray)(n,v.Limits.STATS_CHUNK_LIMIT).forEach(e=>{this.postCampaignStats(r,e)}),"visit"===e&&n.forEach(t=>{m.analytics.reportCampaign(e,t)})}else this.postCampaignStats(r,t),m.analytics.reportCampaign(e,t)}catch(e){C.warn(e)}}}else C.warn("EventName is empty")}},{key:"postCampaignStats",value:function(e,t){Array.isArray(t)&&(e+="?",t.forEach((n,r)=>{e+=`ids[]=${n}`,t.length!==r+1&&(e+="&")})),p.xhrRequest.get(e,()=>{},{responseType:"json"})}}]),e}();t.MonitoringProvider=E},74890:function(e,t){"use strict";t.Z=void 0;var n={init:function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(window.document||window.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null})}};t.Z=n},2833:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(90061),s=r(n(86961)),l=n(44145),c=n(35967),u=n(17662),d=n(38042);const g=(0,a.createLogger)("Proactive");var p=new(function(){function e(){(0,i.default)(this,e),this.agents=null,this.departments=null,this.proactiveDepartmentId=null}return(0,o.default)(e,[{key:"getActiveAgent",value:function(e,t){g.log("getActiveAgent"),t&&(this.proactiveDepartmentId=t),s.default.getStatus((t,n)=>{this.parseStatus(t,n,e)})}},{key:"parseStatus",value:function(e,t,n){if(e)return(0,d.telemetry)("widget_status",{param1:e.code}),this.agents=null,this.departments=null,n(!1);const r=(0,l.getClient)(),i=r.assignedAgentId||r.priorityAgentId;n(this.getAgent(t.data,i,this.proactiveDepartmentId))}},{key:"getAgent",value:function(e,t,n){const r=e.departments;if(g.log("parseStatus",e,t,n),e.bots)return e.bots[0];if(this.agents=e.bots||e.agents,this.departments=r,this.agents.length){if(n&&(0,u.isObject)(r)&&n in r){const e=this.departments[n],r=this.getOnlineAgentInDep(t,e.agents);if(r)return r;const i=this.getRandomOnlineAgentFromDep(e.agents);return i||(g.log("no online agents from proactive department."),!1)}const e=this.getAgentById(t);if(e)return e;const i=this.getRandomAgent(this.agents.length-1);return i||!1}return!1}},{key:"getRandomAgent",value:function(e){return this.agents[this.randomInt(0,e)]}},{key:"randomInt",value:function(e,t){const n=e+Math.random()*(t+1-e);return Math.floor(n)}},{key:"getAgentById",value:function(e){return this.agents.find(t=>t.agent_id===e)}},{key:"getRandomAgentIdByArray",value:function(e){return e[1===e.length?0:this.randomInt(0,e.length-1)]}},{key:"getOnlineIds",value:function(){return this.agents.map(e=>e.agent_id)}},{key:"getOnlineInDep",value:function(e){const t=this.getOnlineIds();return(0,c.intersection)(t,e)}},{key:"getOnlineAgentInDep",value:function(e,t){const n=this.getOnlineInDep(t);if(n.length&&-1!==n.indexOf(e))return this.getAgentById(e)}},{key:"getRandomOnlineAgentFromDep",value:function(e){const t=this.getOnlineInDep(e);if(t.length){const e=this.getRandomAgentIdByArray(t);return this.getAgentById(e)}return!1}}]),e}());t.default=p},21476:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var i=r(n(84633)),o=r(n(95003)),a=n(97490),s=n(26932),l=r(n(75686)),c=n(2982),u=n(70859),d=n(47138),g=n(90061),p=n(44145),f=n(80352),h=r(n(61811)),m=n(8717),_=n(24344),v=n(38042),y=n(85074);const C=(0,g.createLogger)("Router"),E=new i.default({namespace:"ROUTER",initialState:(0,p.getApp)().route||o.default.route||a.Route.LABEL,debugClicks:0,clickTimer:null,getCurrentRoute:function(){return this.state},getPrevRoute:function(){return this.priorState},setNext:function(e){C.warn("setNext route:",e),this.transition(e)},getPrevEvent:function(){return this._priorAction},next:function(e,t){C.warn("next",e,"from",this.state),e&&this.handle(e,t)},_navToChat:function(){(0,p.getCallback)().status==d.CallStatus.WAIT?this.transition(a.Route.CHAT_CALL):(0,y.needShowPrechats)()&&(0,m.shouldRedirectToIntroduce)()?this.transition(a.Route.CHAT):(0,m.shouldRedirectToIntroduce)()?this.transition(a.Route.INTRODUCE):(0,y.showDepartmentsIfPossible)()?this.transition(a.Route.DEPARTMENTS):this.transition(a.Route.CHAT)},_navToChatFromChatMin:function(){this.transition(a.Route.CHAT)},_debugClicked:function(){clearTimeout(this.clickTimer),this.debugClicks++,this.debugClicks>7&&(this.debugClicks=0,this.transition(a.Route.DEBUG),(0,v.telemetry)("debug_panel_opened",void 0,{once:!0})),this.clickTimer=setTimeout(()=>{this.debugClicks=0},1e3)},states:{[a.Route.HIDDEN]:{_onEnter:function(){this.trigger("route_change",a.Route.HIDDEN);const e=h.default.getInstance();e&&e.destroy()}},[a.Route.LABEL]:{_onEnter:function(){this.trigger("route_change",a.Route.LABEL)},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToCall]:function(){this.transition(a.Route.CALL)},[a.RouterEvent.ToChat]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.ApiOpen]:function(){this._navToChat()},[a.RouterEvent.Navigate]:function(){this._navToChat()},[a.RouterEvent.ToLabelInvitation]:function(){this.transition(a.Route.LABEL_INVITATION)},[a.RouterEvent.ToCallPopup]:function(){this.transition(a.Route.CALL_POPUP)},[a.RouterEvent.ToSocial]:function(){this.transition(a.Route.CHAT_SOCIAL)}},[a.Route.LABEL_INVITATION]:{_onEnter:function(){this.trigger("route_change",a.Route.LABEL_INVITATION)},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToCall]:function(){this.transition(a.Route.CALL)},[a.RouterEvent.ApiOpen]:function(){this._navToChat()},[a.RouterEvent.Navigate]:function(){this._navToChat()},[a.RouterEvent.CloseWindow]:function(){this.transition(a.Route.LABEL)}},[a.Route.DEPARTMENTS]:{_onEnter:function(){this.trigger("route_change",a.Route.DEPARTMENTS)},[a.RouterEvent.CloseWindow]:function(){this.transition(a.Route.LABEL)},[a.RouterEvent.ToCall]:function(){f.platform.isMobileOrTablet?this.transition(a.Route.CALL):this.transition(a.Route.CHAT_CALL),(0,v.telemetry)("cw_online_header_button")},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.Navigate]:function(){this._navToChat()},[a.RouterEvent.ToDebug]:function(){this._debugClicked()}},[a.Route.INTRODUCE]:{_onEnter:function(){this.trigger("route_change",a.Route.INTRODUCE)},[a.RouterEvent.Submit]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.ToCall]:function(){f.platform.isChatPage?this.transition(a.Route.CHAT_CALL):this.transition(a.Route.CALL)},[a.RouterEvent.CloseWindow]:function(){this.transition((0,y.getRouteChatMin)())},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToDebug]:function(){this._debugClicked()}},[a.Route.MOBILE_MENU]:{_onEnter:function(){this.trigger("route_change",a.Route.MOBILE_MENU)},[a.RouterEvent.ToCall]:function(){this.transition(a.Route.CALL)},[a.RouterEvent.CloseWindow]:function(){this.transition(a.Route.LABEL)},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToChat]:function(){this._navToChat()},[a.RouterEvent.Navigate]:function(){this._navToChat()}},[a.Route.CHAT]:{_onEnter:function(){this.trigger("route_change",a.Route.CHAT)},[a.RouterEvent.Submit]:function(e){e&&e.from&&e.from!==this.state||this.trigger("submit_success")},[a.RouterEvent.ToCall]:function(){f.platform.isMobileOrTablet?this.transition(a.Route.CALL):this.transition(a.Route.CHAT_CALL),(0,v.telemetry)("cw_online_header_button")},[a.RouterEvent.ToIntroduce]:function(){(0,m.shouldRedirectToIntroduce)()&&this.transition(a.Route.INTRODUCE)},[a.RouterEvent.ToSocial]:function(){this.transition(a.Route.CHAT_SOCIAL)},[a.RouterEvent.CloseWindow]:function(){this.transition((0,y.getRouteChatMin)())},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToDebug]:function(){this._debugClicked()},[a.RouterEvent.ToCallSetup]:function(){this.transition(a.Route.CHAT_SETUP_CALL)}},[a.Route.CHAT_MIN]:{_onEnter:function(){this.trigger("route_change",a.Route.CHAT_MIN)},[a.RouterEvent.ToChat]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.ToCall]:function(){this.transition(a.Route.CHAT_CALL)},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ApiOpen]:function(){this._navToChatFromChatMin()},[a.RouterEvent.Navigate]:function(){this._navToChat()}},[a.Route.CHAT_SOCIAL]:{_onEnter:function(){this.trigger("route_change",a.Route.CHAT_SOCIAL)},[a.RouterEvent.Submit]:function(){this.transition(a.Route.LABEL)},[a.RouterEvent.ToChat]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.ToCall]:function(){this.transition(a.Route.CALL)},[a.RouterEvent.Cancel]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.CloseWindow]:function(){this.transition((0,y.getRouteChatMin)())},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToDebug]:function(){this._debugClicked()}},[a.Route.CHAT_CALL]:{_onEnter:function(){this.trigger("route_change",a.Route.CHAT_CALL)},[a.RouterEvent.Submit]:function(){this.trigger("submit_success")},[a.RouterEvent.ToCall]:function(){const e=E.getPrevRoute();e&&this.transition(-1===[a.Route.CHAT_MIN].indexOf(e)?e:a.Route.CHAT)},[a.RouterEvent.ToSocial]:function(){this.transition(a.Route.CHAT_SOCIAL)},[a.RouterEvent.Cancel]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.CloseWindow]:function(){this.transition((0,y.getRouteChatMin)())},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToChat]:function(){this._navToChat()},[a.RouterEvent.ToIntroduce]:function(){(0,m.shouldRedirectToIntroduce)()&&this.transition(a.Route.INTRODUCE)},[a.RouterEvent.ToDebug]:function(){this._debugClicked()}},[a.Route.CHAT_SETUP_CALL]:{_onEnter:function(){this.trigger("route_change",a.Route.CHAT_SETUP_CALL)},[a.RouterEvent.Cancel]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.Submit]:function(){this.transition(a.Route.CHAT)},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToDebug]:function(){this._debugClicked()},[a.RouterEvent.CloseWindow]:function(){(0,y.isChatMinAvailable)()?this.transition(a.Route.CHAT_MIN):this.transition(a.Route.LABEL)}},[a.Route.CALL]:{_onEnter:function(){this.trigger("route_change",a.Route.CALL)},[a.RouterEvent.Submit]:function(){this.trigger("submit_success")},[a.RouterEvent.CloseWindow]:function(){(0,y.isChatMinAvailable)()?this.transition(a.Route.CHAT_MIN):this.transition(a.Route.LABEL)},[a.RouterEvent.Hide]:function(){this.transition(a.Route.HIDDEN)},[a.RouterEvent.ToChat]:function(){this._navToChat()},[a.RouterEvent.ToDebug]:function(){this._debugClicked()}},[a.Route.CALL_POPUP]:{_onEnter:function(){this.trigger("route_change",a.Route.CALL_POPUP)},[a.RouterEvent.Submit]:function(){this.transition(a.Route.CALL)},[a.RouterEvent.CloseWindow]:function(){(0,y.isChatMinAvailable)()?this.transition(a.Route.CHAT_MIN):this.transition(a.Route.LABEL)}},[a.Route.DEBUG]:{_onEnter:function(){this.trigger("route_change",a.Route.DEBUG)},[a.RouterEvent.CloseWindow]:function(){this.transition((0,y.getRouteChatMin)())},[a.RouterEvent.ToChat]:function(){this._navToChat()},[a.RouterEvent.ToCall]:function(){f.platform.isMobileOrTablet?this.transition(a.Route.CALL):this.transition(a.Route.CHAT_CALL),(0,v.telemetry)("cw_online_header_button")}}}});t.Router=E,E.on("route_change",e=>{if(s.appDispatchers.setAppRoute(e),(0,_.callUserFunction)("onChangeState",e),f.platform.isSafari&&!f.platform.isMobileOrTablet){const t=E.getPrevRoute();(e===a.Route.DEBUG&&t===a.Route.INTRODUCE||e===a.Route.INTRODUCE&&t===a.Route.DEBUG||e==a.Route.INTRODUCE&&t===a.Route.CHAT)&&setTimeout(()=>{const e=l.default.get(u.Component.WIDGET_CONTAINER);(0,c.updateKeyframes)(e,!0)},50)}})},13077:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.addPageView=function(){const e=a.default.get("pages_count");e?a.default.set("pages_count",parseInt(e)+1):a.default.set("pages_count",1)},t.checkCondition=A,t.checkTimeConditions=function(e,t,n){let r=!1;for(let i=0;i<e.length;i++)if(A(e[i],n))r=!0;else if("all"===t)return!1;return r},t.getCustomValue=t.getCondNames=void 0,t.getGoalValue=D,t.getPageUrlValue=O,t.getRuleLocal=b,t.getValue=T,t.hasOnceCondition=function(e){let t=!1;for(let n=0;n<e.length;n++){const r=e[n];if("once_a_day"==r.condition){t=r;break}}return t},t.initGoalClick=function(e){const t=(0,g.getPageWindow)().document;try{const n=t.querySelector(e);C.warn("initGoalClick",n);const r=()=>{const t=b("goalElementClick");C.warn("onGoalClick",t),t[window.btoa(e)]=e,S("goalElementClick",t)},i=l.platform.isMobileOrTablet&&l.platform.supports.touch?"touchstart":"click";n?(0,y.addListener)(n,i,r,!0):C.info(`Element with selector: "${e}" is not found on page.`)}catch(e){C.info("Error click element",e)}},t.isAllStaticChecked=function(e,t){const n=e.filter(e=>e.isChecked),r=e.filter(e=>e.isStatic);return t===d.RuleType.ALL?r.length===n.length:Boolean(n.length)},t.isGoalCondition=w,t.isPopupCommand=function(e){return-1!==[d.RuleTypes.PROACTIVE,d.RuleTypes.OPEN_OFFLINE,d.RuleTypes.SHOW_CALLFORM].indexOf(e)},t.isTimeCondition=function(e){return null==e?void 0:e.includes("time")},t.isYandexMarketClient=function(e){const t=1==s.default.get("visits_count"),n=a.default.get("pages_count")<10;return!l.platform.isMobileOrTablet&&t&&n&&-1!==["market","YM"].indexOf(e.source)&&"cpc"==e.medium},t.setInvitationTime=function(){a.default.set("invitation_time",(new Date).getTime())},t.setRuleLocal=S;var i=n(10018),o=n(4425),a=r(n(66547)),s=r(n(73687)),l=n(80352),c=n(90061),u=n(69882),d=n(83907),g=n(45926),p=n(17662),f=n(82024),h=n(26683),m=n(25467),_=n(66139),v=n(44145),y=n(21951);const C=(0,c.createLogger)("RuleManagerUtils"),E={scrollPosition:!1,movedToCloseButton:!1,firstMessageTime:null,pageEnterTime:(new Date).getTime(),prechatUseTime:null,lastUpdateProactiveEvent:null,lastContactApiData:null,sendStartupTime:null,isVisitorInvite:null,goalElementClick:{}};function b(e){if(e in E)return E[e]}function S(e,t){e in E&&(E[e]=t)}function T(e){var t,n;const r=(0,u.getCurrentPage)().url,c=(new Date).getDay(),g=a.default.get("close_time"),p=a.default.get("invitation_time"),f=(0,v.getUserSettings)().chatMode,h=(0,v.getSystemSettings)().geoIp;switch(e){case d.RuleConditions.ONLINE:return f===o.ChatMode.ONLINE;case d.RuleConditions.PAGE_URL:return r.replace(/^http(s?):\/\//i,"");case d.RuleConditions.PAGE_TITLE:return(0,u.getCurrentPage)().title;case d.RuleConditions.HOUR:return(new Date).getHours();case d.RuleConditions.WEEK_DAY:return 0===c?7:c;case d.RuleConditions.TIME_AFTER_CLOSE:return g?(0,m.getSecondsDiff)(g):Number.MAX_VALUE;case d.RuleConditions.TIME_AFTER_FIRST_MSG:return E.firstMessageTime?(0,m.getSecondsDiff)(E.firstMessageTime.getTime()):NaN;case d.RuleConditions.TIME_AFTER_INVITAION:return null===p||""===p?Number.MAX_VALUE:(0,m.getSecondsDiff)(p);case d.RuleConditions.TIME_ON_PAGE:return(0,m.getSecondsDiff)(E.pageEnterTime);case d.RuleConditions.TIME_ON_SITE:return(0,m.getSecondsDiff)(a.default.get("enter_ts"));case d.RuleConditions.NUMBER_OF_VISITS:return s.default.get("visits_count");case d.RuleConditions.PAGES_COUNT:return parseInt(a.default.get("pages_count"));case d.RuleConditions.COUNTRY:return(0,i.getIpCountry)();case d.RuleConditions.CITY:return(null==h?void 0:h.split(";")[2])||null;case d.RuleConditions.ONCE_A_DAY:return!0;case d.RuleConditions.UTM_SOURCE:return(null===(t=(0,v.getClient)().utm)||void 0===t||null===(n=t.source)||void 0===n?void 0:n.toLowerCase().trim().replace("/(|)/i",""))||d.UtmSource.DIRECT;case d.RuleConditions.DEVICE:return l.platform.isMobileOrTablet?d.DeviceType.MOBILE:d.DeviceType.DESKTOP;default:return a.default.get(e)}}function D(e){const t=e.condition,n=e.value,r=e.attr;switch(t){case d.RuleConditions.GOAL_CLOSE:return E.movedToCloseButton;case d.RuleConditions.GOAL_SCROLL:return E.scrollPosition;case d.RuleConditions.GOAL_CLICK:return!!n&&E.goalElementClick[window.btoa(n)];case d.RuleConditions.GOAL_CUSTOM_ATTR:return!!n&&M(r)}}function w(e){return null==e?void 0:e.includes("goal")}function O(e){const t=e.match(/^(?:https?:)?(?:\/\/)?([^\/\?]+)/gi);if(t&&t.length){const n={href:e,hostname:t[0]};e=(0,u.getUnicodeHref)(n).replace(/http(|s):\/\//,"")}else e=e.replace(/http(|s):\/\//,"");return e}function A(e,t){const n=w(e.condition)?D(e):(0,f.isExternalDataCondition)(e)?(0,h.getExternalDataValue)(e):T(e.condition);e.condition===d.RuleConditions.PAGE_URL&&(e.value=O(e.value)),e.condition===d.RuleConditions.PAGES_COUNT&&(e.value=parseInt(e.value));const r=(0,_.compareCondition)(n,e.value,e.comparator);let i=`${t||""}; ${r?"success":"failed"}`;return i+=` condition ${e.condition}; comparator=${e.comparator}`,C.info(`${i}; expected=${e.value}; actual=${n}`),"once_a_day"==e.condition||r}const M=e=>{const t=(0,v.getClient)().customData;if(!t)return;const n=t.find(t=>t.key===e);return null==n?void 0:n.content};t.getCustomValue=M;t.getCondNames=e=>(0,p.isArray)(e)?e.map(e=>e.condition).join(","):e},79868:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(10018)),o=n(90061),a=n(26932),s=r(n(73687)),l=n(80352),c=n(16026),u=n(44145),d=n(21951),g=n(45683),p=n(38042);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const h=n(89766).EventEmitter,m=(0,o.createLogger)("Social"),_=new h;let v={vk:!1,fb:!1,mode:!1},y=null,C=!1;const E={getSocial(){return y||v},setPopupMode(e){y=e,v.mode=y,a.socialDispatchers.initializeSocialStore(v),_.emit("update",v)},getPopupMode(){return y},setSocial(e){return v=e,v},isLoginned(){return v.vk||v.fb},startSocials(){m.log("startSocials"),C||l.platform.isMobileOrTablet||!i.default.joint||!i.default.joint.vk&&!i.default.joint.fb||s.default.get("is_blacklisted")||(C=!0,this.initSocial(),(0,d.addListener)(window,"message",this.checkLogin.bind(this),!1))},initSocial(){const e=this.checkSocial();if(m.log("initSocial",e),e){const t=`${this.genSocialIframeUrl(e)}#rand=${(new Date).getMilliseconds()},lang=${i.default.locale},geo=${(0,i.getIpCountry)()}`,n=document.createElement("iframe");n.src=t,n.className="iframe-social",n.title="JivoSocial",document.body.appendChild(n)}},checkSocial(){if(!i.default.joint)return;let e="check";i.default.joint.vk&&!i.default.joint.fb&&(e="checkvk"),i.default.joint.fb&&!i.default.joint.vk&&(e="checkfb");const t=document.getElementsByClassName("check-iframe");return!(t&&t.length>0)&&(!(!i.default.joint.vk&&!i.default.joint.fb)&&e)},genSocialIframeUrl(e){m.log("getnSocialIframeUrl",e);const t=["mode="+e],n=(0,u.getClient)();i.default.joint.vk&&(t.push("vk_app_id="+i.default.joint.vk.app_id),t.push("vk_joint_id="+i.default.joint.vk.joint_id),t.push("vk_key="+this.genVkRandomKey())),i.default.joint.fb&&(t.push("fb_app_id="+i.default.joint.fb.app_id),t.push("fb_joint_id="+i.default.joint.fb.joint_id),t.push("fb_key="+n.clientId+"_"+i.default.widget_id)),t.push("logs="+(i.default.logs||0));const r=c.EnvironmentManager.isDevelopment()?"/public/social.html?":"/social.min.html?";return(0,g.getStaticURL)(r+t.join("&"))},genVkRandomKey(){return((0,u.getClient)().clientId+"="+i.default.widget_id).replace(/./g,function(e){return e.charCodeAt(0).toString(16)})},getIframeUrl(e){return this.genSocialIframeUrl(e)+"#rand="+(new Date).getMilliseconds()+",lang="+i.default.locale},checkLogin(e,t){if(m.log("checkLogin",e,t),e&&"object"==typeof e){if(t&&(e={data:{social:t}}),e.data&&e.data.social){const t={},n=e.data.social;return n.fb&&(t.fb=!0,t.vk=!1,t.mode="fb",(0,p.telemetry)("social_show_facebook",void 0,{once:!0})),n.vk&&(t.vk=!0,t.fb=!1,t.mode="vk",(0,p.telemetry)("social_show_vk",void 0,{once:!0})),n.fb||n.vk||(t.vk=!1,t.fb=!1,t.mode="email"),v={vk:t.vk,fb:t.fb,mode:t.mode},_.emit("update",v),a.socialDispatchers.initializeSocialStore(v),t}}else m.log("postMessage from social failed: ",e)}};var b=Object.assign(_,E);t.default=b},44145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAgentById=l,t.getAgentIdsByStatus=function(e){return a().reduce((t,n)=>(n.state===e&&t.push(n.id),t),[])},t.getAgentMessages=g,t.getAgents=a,t.getApp=function(){return r.reduxStore.getState().app},t.getBotById=function(e){return s().find(t=>t.id===e&&t.isBot)},t.getBots=s,t.getCallback=function(){return r.reduxStore.getState().callback},t.getCallbackSettings=function(){return r.reduxStore.getState().settings.user.callback},t.getCampaignWidgetSettings=function(){return r.reduxStore.getState().settings.campaignWidget},t.getChatById=function(e){return c().find(t=>t.id===e)},t.getChats=c,t.getClient=function(){return r.reduxStore.getState().client},t.getClientMessages=d,t.getFeatures=function(){return r.reduxStore.getState().settings.features},t.getJoinedAgents=function(){const e=[],t=c();if(t&&t.length>0){t[t.length-1].joinedAgents.forEach(t=>{e.push(l(t))})}return e},t.getLastChatId=function(){const e=g(u()),t=d(u()),n=e.length?e[e.length-1].chat_id:null,r=t.length?t[t.length-1].chat_id:null;return r>n?r:n},t.getLastClientMessage=function(){const e=d(u());return e[e.length-1]},t.getLastMessageByName=function(e){const t=f(u(),e);return t[t.length-1]},t.getLastMessageByType=function(e){const t=p(u(),e);return t[t.length-1]},t.getMessageById=function(e){return u().find(t=>t.msg_id===e)},t.getMessageByPrivateId=function(e){return u().find(t=>t.private_id===e)},t.getMessages=u,t.getMessagesByName=f,t.getMessagesByType=p,t.getPageStore=function(){return r.reduxStore.getState().pageStore},t.getPosition=function(){return r.reduxStore.getState().position},t.getProactive=function(){return r.reduxStore.getState().proactive},t.getSettings=function(){return r.reduxStore.getState().settings},t.getState=function(){return r.reduxStore.getState()},t.getSystemSettings=function(){return r.reduxStore.getState().settings.system},t.getSystemUnread=function(){return u().filter(e=>e.from===i.MessageInitiator.AGENT&&e.status!==i.MessageStatus.READ&&(0,o.isAgentSystemMessage)(e.type))},t.getTemporaryMessages=void 0,t.getTransition=function(){return r.reduxStore.getState().transition},t.getUnreadMessages=function(){return u().filter(e=>[i.MessageInitiator.AGENT,i.MessageInitiator.AGENT_BOT].includes(e.from)&&![i.MessageStatus.READ,i.MessageStatus.SEEN,i.MessageStatus.DELETED].includes(e.status)&&e.type!==i.MessageType.FOR_TEST&&!(0,o.isAgentSystemMessage)(e.type))},t.getUserSettings=function(){return r.reduxStore.getState().settings.user},t.getZoom=function(){return r.reduxStore.getState().zoom};var r=n(62096),i=n(81152),o=n(79814);function a(){return r.reduxStore.getState().agents}function s(){return r.reduxStore.getState().bots}function l(e){return a().find(t=>t.id===+e)}function c(){return r.reduxStore.getState().chats}function u(){return r.reduxStore.getState().messages}function d(e){return e.filter(e=>e.from===i.MessageInitiator.CLIENT)}function g(e){return e.filter(e=>e.from===i.MessageInitiator.AGENT)}function p(e,t){return e.filter(e=>e.type===t)}function f(e,t){return e.filter(e=>{var n;return(null===(n=e.body)||void 0===n?void 0:n.name)===t})}t.getTemporaryMessages=()=>u().filter(e=>e.type===i.MessageType.TEMPORARY&&e.from===i.MessageInitiator.CLIENT)},2982:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.updateKeyframes=t.setProperty=t.saveLabelPosition=t.jivoCustomCSSProperty=t.isFallbackNeeded=t.getSavedLabelPosition=t.getProperty=void 0;var i=r(n(61125)),o=n(90061),a=n(80352),s=n(17662);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}const c=(0,o.createLogger)("TransitionUtils"),u=e=>`--j${e}`;t.jivoCustomCSSProperty=u;const d=(e,t)=>t&&t.style?g()?t.style[e]:t.style.getPropertyValue(u(e)):null;t.getProperty=d;t.setProperty=(e,t,n)=>{g()?n.style[e]=t:n.style.setProperty(u(e),t)};t.updateKeyframes=(e,t)=>{if(a.platform.supports.webAnimationsAPI){const n=d("height",e),r=d("left",e),i=d("right",e),o=e&&e.getAnimations()[0];if(a.platform.isSafari&&(a.platform.os.safariVersion>="15.4"||!o.effect.composite)&&!t)return;const s=o&&o.effect.getKeyframes(),l=s&&s[s.length-1];c.log("updateKeyframes",o),l&&(l.height=n,l.left=r,l.right=i,o.effect.setKeyframes(s),o.currentTime=300)}};const g=()=>!a.platform.supports.cssVariables||a.platform.isEdge||a.platform.isSafari&&(!a.platform.supports.webAnimationsAPI||a.platform.os.version<"15"&&!a.platform.isMobileOrTablet);t.isFallbackNeeded=g;let p={};t.saveLabelPosition=e=>{p={right:e.right?e.right+"px":null,left:e.left?e.left+"px":null,offsetWidth:e.offsetWidth?e.offsetWidth+"px":null},(0,s.isString)(e.right)&&e.right.includes("%")&&(p.right=e.right)};t.getSavedLabelPosition=()=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},p)},56026:function(e,t,n){"use strict";var r=n(17907);t.Z=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(54415),s=r(n(8117));let l=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"decode",value:function(e){try{return s.default.decodeString(e)}catch(e){e.message+=" UTMDecoder",a.Monitoring.reportException(e)}return e}}]),e}();t.Z=l},66139:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareCondition=function(e,t,r){switch(r){case"contain":return n(e,t);case"greater":return e>t;case"greater_equal":return e>=t;case"lower":return e<t;case"lower_equal":return e<=t;case"not_contain":return!n(e,t);case"not_equal":return t!=e;case"regexp":return new RegExp(t,"i").test(e);case"empty":return null===e;default:return t==e}};const n=(e,t)=>!(!e||!t)&&-1!==(null==e?void 0:e.toLowerCase().indexOf(null==t?void 0:t.toLowerCase()))},625:function(e,t,n){"use strict";t.a=void 0;var r=n(80352),i=n(69882);t.a=e=>r.platform.isChatPage?"none":(0,i.isWixContext)()?1:e},41168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCallDefaultError=void 0;var r=n(18276);t.getCallDefaultError=()=>`${(0,r.l10n)("cw_unableToConnect")}\n${(0,r.l10n)("cw_errInfoText")}`},91763:function(e,t,n){"use strict";var r=n(17907);t.zF=void 0;var i=r(n(23101)),o=r(n(67375)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(98661));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const l=(0,n(90061).createLogger)("Lazy loader");t.zF=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};function r(r){const s=(0,a.useState)(!0),c=(0,o.default)(s,2),u=c[0],d=c[1],g=(0,a.useCallback)(()=>d(!0),[]),p=r.lazyErrorProps||{},f=r.lazyLoaderProps||{},h=(0,a.useMemo)(()=>a.default.lazy(()=>e().catch(e=>(l.error("Lazy error:",e),d(!1),()=>a.default.createElement(n,(0,i.default)({},p,{onRetry:g}))))),[u,g]);return h.displayName="LazyLoader",a.default.createElement(a.Suspense,{fallback:a.default.createElement(t,f)},a.default.createElement(h,r))}return r.displayName="LazyLoader",r}},21951:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addListener=void 0,t.listenVisibility=function(e){const t=(0,r.debounce)(e,50);let n,i;void 0!==document.hidden?(i="visibilitychange",n="visibilityState"):void 0!==document.mozHidden?(i="mozvisibilitychange",n="mozVisibilityState"):void 0!==document.msHidden?(i="msvisibilitychange",n="msVisibilityState"):void 0!==document.webkitHidden&&(i="webkitvisibilitychange",n="webkitVisibilityState");"addEventListener"in document&&void 0!==i&&(document.addEventListener(i,t.bind(this,n),!1),parent.document.addEventListener(i,t.bind(this,n),!1),parent.document.addEventListener("focus",t.bind(this,n),!1),parent.document.addEventListener("blur",t.bind(this,n),!1),parent.window.addEventListener("focus",t.bind(this,n),!1),parent.window.addEventListener("blur",t.bind(this,n),!1))},t.removeEvent=void 0;var r=n(47361),i=n(80352);t.addListener=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var o;e.addEventListener?e.addEventListener(t,n,!!i.platform.supports.passive&&{passive:r}):e.attachEvent&&(e.attachEvent("on"+t,(o=e,function(){n.call(o,window.event)})),e=null)};t.removeEvent=(e,t,n)=>{if(window.removeEventListener)e.removeEventListener(t,n,!1);else{if(!window.detachEvent)return!1;{const r=function(){n.call(e)};e.detachEvent("on"+t,r)}}}},68403:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.isPaidCustomer=t.isJivoSite=t.isChatContactForm=t.isAnalyticsDisabled=t.hasIntegration=void 0;var i=r(n(10018)),o=n(9550);t.isPaidCustomer=()=>Boolean(16&i.default.options);t.hasIntegration=e=>-1!==["vk","fb","sb"].indexOf(e);t.isChatContactForm=()=>-1!==[o.ContactsType.DURING_CHAT,o.ContactsType.DURING_CHAT_NO_CLOSE].indexOf(i.default.contacts_ask);t.isAnalyticsDisabled=()=>!!i.default.disable_analytics;t.isJivoSite=()=>1===i.default.site_id},16016:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSubstrTitle=t.getRandomString=t.generateGUIDCount=t.generateGUID=t.formatTextLen=void 0;const n=()=>{const e=Math.floor(65536*Math.random()).toString(16);return 4===e.length?e:n()};t.getRandomString=n;t.generateGUID=()=>{const e=n;return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};t.generateGUIDCount=e=>{let t="";for(;e--;)t+=n();return t};t.setSubstrTitle=e=>e.substring(0,255);t.formatTextLen=(e,t)=>e.length>t?e.substr(0,t)+"...":e},80598:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.getThemeColor=t.getTextSize=t.getTextColor=t.getPowerButtonDesktopPosition=t.getMobileBackgroundColor=t.getLineHeight=t.getBackground=void 0;var i=n(80352),o=n(69882),a=r(n(27104)),s=n(36874);t.getTextSize=e=>{if(i.platform.isIos&&(0,o.isWixContext)())return"normal";let t=null;return i.platform.isIos?(1!==e&&(t=100*e+"%"),t||"none"):t};t.getLineHeight=(e,t)=>{let n=null;return 1!==t&&(n=(e||1.25)/t+"em"),n};t.getTextColor=e=>"dark"==e?"#222222":"#F0F1F1";t.getThemeColor=e=>{switch(e){case"grey":return s.colorsFromFigma.STEEL_80;case"blue":return s.colorsFromFigma.BLUE_90;default:return s.colorsFromFigma.GREEN_90}};t.getBackground=(e,t,n,r,i)=>{let o=a.default.getGradientBg(e,t);return i&&(o=l(n,r,o)),o};const l=function(e){return e?arguments.length>2?arguments[2]:void 0:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#44BB6E"};t.getMobileBackgroundColor=l;t.getPowerButtonDesktopPosition=(e,t)=>{const n=+t;return"right"!==e&&"bottom"!==e||50!==n&&100!==n?"left":"right"}},67597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCustomDataLink=t.replaceServicezoneURL=t.replaceServicezoneTitle=t.isServicezoneURL=t.getTgLink=t.getBundleSrc=t.fixUrl=t.fixTitle=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(10018)),i=n(16026),o=n(22271),a=n(51542),s=n(2491),l=n(68403);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}t.validateCustomDataLink=(e,t)=>(0,s.isValidHttpURL)(e,e=>{const n=(0,s.getURL)(t);return n&&e.origin.includes(n.origin)});t.getBundleSrc=()=>(i.EnvironmentManager.isDevelopment()?"/public/js/bundle":r.default.base_url+"/js/bundle")+".js?rand="+r.default.build_number;t.fixUrl=e=>{const t=r.default.shard_id;return(0,l.isJivoSite)()||!u(e)?e:t===a.Shards.SBER?d(e,"https://jivo.ru"):d(e,"https://jivochat.com")};t.fixTitle=(e,t)=>{const n=r.default.shard_id;return(0,l.isJivoSite)()||!u(t)?e:n===a.Shards.SBER?g(e,"Jivo"):g(e,"JivoChat")};const u=e=>o.Regexp.SERVICEZONE_DOMAIN.test(e);t.isServicezoneURL=u;const d=(e,t)=>e.replace(e,t);t.replaceServicezoneURL=d;const g=(e,t)=>e.replace(e,t);t.replaceServicezoneTitle=g;t.getTgLink=e=>e&&"RU"===(0,r.getIpCountry)()?"tg://resolve/?domain=":"https://t.me/"},84727:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.validateCustomData=t.validateClientAnswer=void 0;var i=r(n(15687)),o=n(90061),a=n(2491),s=r(n(98960)),l=n(67597);const c=(0,o.createLogger)("validators",{style:"color: grey",parentContext:!0});t.validateCustomData=(e,t)=>{if(!Array.isArray(e))return"Data must be array.";if(0===e.length)return"Data limit error, data length must be 1 to 10.";e.length>10&&(e.splice(10),c.warn("Data limit warning, data length must be 1 to 10."));const n=(e,t)=>{c.warn(`Item ${t} in setCustomData: ${e}.`)};return e.reduce((e,r,o)=>{if("string"!=typeof r.content)return n("Property content must be string",o),e;r.link&&(t&&(0,a.isValidHttpURL)(r.link)?(0,l.validateCustomDataLink)(r.link,t)||(n("Such link is not allowed",o),delete r.link):(n("Safe url is not indicated",o),delete r.link));const s=((e,t)=>(r,i)=>{const o=e[r];return"string"==typeof o&&o.length>i?(n(`Max length for ${r} property is ${i}`,t),o.slice(0,i)):o})(r,o);return r.content=s("content",255),r.title=s("title",255),r.key=s("key",1e3),[].concat((0,i.default)(e),[r])},[])};t.validateClientAnswer=(e,t)=>{if(!t||!e)return!1;const n=String(t).trim();return"email"==e?s.default.emailBot(n):"phone"==e?s.default.phone(n):"name"==e?s.default.name(n):void 0}},69882:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.isWixIframe=t.isWixEditor=t.isWixContext=t.isTextEmojiDisabled=t.isAppCobrowse=t.getUnicodeHref=t.getCurrentPage=t.deleteNonce=void 0;var i=n(45926),o=r(n(50754)),a=n(67597);t.isAppCobrowse=()=>"cobrowser-iframe"===(0,i.getPageWindow)().name;t.deleteNonce=()=>{(0,i.getPageWindow)().jivo_cspNonce&&delete(0,i.getPageWindow)().jivo_cspNonce};t.isWixIframe=()=>void 0!==(0,i.getPageWindow)().jivo_in_wix_iframe;const s=()=>{const e=(0,i.getPageWindow)().wix_context;return e&&e.Utils&&e.Utils.getViewMode()};t.isWixContext=s;t.isWixEditor=()=>{const e=s();return!!e&&-1!==["preview","editor"].indexOf(e)};const l=e=>{try{const t=e.hostname;return e.href.replace(t,o.default.toUnicode(t))}catch(t){return e.href}};t.getUnicodeHref=l;t.getCurrentPage=()=>{const e=(0,i.getPageWindow)();let t=e.location.href,n=(0,i.getDocumentTitle)();const r=-1!==t.indexOf("about:");return""==n&&r&&(n=e.parent.document.title),t=l(r?e.parent.location:e.location),s()&&(t=e.wix_url||t,n=e.wix_title||n),{url:(0,a.fixUrl)(t),title:(0,a.fixTitle)(n.substring(0,255),t)}};t.isTextEmojiDisabled=()=>{const e=(0,i.getPageWindow)();return e._wpemojiSettings||e.twemoji}},21993:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664));var a=function(){function e(t,n){(0,i.default)(this,e),this.manager=t,this.call=n}return(0,o.default)(e,[{key:"getCallId",value:function(){return this.call.settings.extraHeaders&&this.call.settings.extraHeaders["X-callId"]}},{key:"start",value:function(){this.call&&this.call.answer("",{},{receiveVideo:!0,sendVideo:!1})}},{key:"stop",value:function(){this.call&&this.call.hangup()}},{key:"mute",value:function(){this.call&&this.call.muteMicrophone()}},{key:"unMute",value:function(){this.call&&this.call.unmuteMicrophone()}},{key:"getInstance",value:function(){return this.call}}]),e}();t.default=a},95911:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xhrRequest=t.promisedRequest=void 0;var r=n(6693),i=n(54415),o=n(80210),a=n(82956),s=n(17662);const l={body:null,headers:{},responseType:"json",timeout:1e4,withCredentials:!1,validateStatus:e=>e>=200&&e<300,onTimeout:null,onUpload:null,onDownload:null},c=(e,t)=>t&&(0,s.isObject)(t.params)?e+=`?${o.querystring.create(t.params)}`:e,u=(e,t)=>((e=Object.assign({},l,e)).body&&(e.headers["Content-Type"]===r.CONTENT_TYPE.X_WWW_FORM?e.body=(0,s.isObject)(e.body)?o.querystring.create(e.body):JSON.stringify(e.body):e.headers["Content-Type"]===r.CONTENT_TYPE.APP_JSON&&t!==r.METHODS.PUT&&(e.body=JSON.stringify(e.body))),e),d=(e,t,n)=>(r,o)=>{!r||"SyntaxError"!==r.name||null!=t&&t.monitoring||i.Monitoring.reportException(`Error parsing response from ${e}. ${r.message}`),n(r,o)},g=(e,t,n,r)=>({url:c(e,t),options:u(t,r),callback:n&&d(e,t,n)}),p=e=>(t,n,r)=>{const i=g(t,r,n,e);return(0,a.xhr)(i.url,e,i.options,i.callback)},f=e=>(t,n)=>{const r=g(t,n,e);return(0,a.xhrPromised)(r.url,e,r.options)},h={get:p(r.METHODS.GET),post:p(r.METHODS.POST),head:p(r.METHODS.HEAD),put:p(r.METHODS.PUT)};t.xhrRequest=h;const m={get:f(r.METHODS.GET),post:f(r.METHODS.POST),put:f(r.METHODS.PUT),head:f(r.METHODS.HEAD)};t.promisedRequest=m},98960:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={phone:e=>e.length>0&&e.trim().replace(/\D+/g,"").length>=5&&/^\+?[0-9() -]+$/i.test(e),client_name:e=>{const t=e.trim();return t.length>0&&t.length<100},name:e=>{const t=e.trim();return t.length>0&&t.length<100},email:e=>e.length>=4&&new RegExp(/^([a-zA-Z\d-_]+([+.][a-zA-Z\d-_]+)*)@(([a-zA-Z\d][a-zA-Z\d-_.]*[a-zA-Z\d])|([a-zA-Z\d]))\.([a-zA-Z\d]{2,})$/i).test(e),emailBot:e=>e.length>=4&&new RegExp(/^([a-zA-Z\d\-_+!]+(\.[a-zA-Z\d\-_+!]+)*)@(([a-zA-Z\d-]+\.)+[a-zA-Z\d]{2,})$/i).test(e),message:e=>e.trim().length>0,description:e=>e.trim().length>0,textarea:e=>e.trim().length>0};t.default=n},74379:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=n(35333),s=n(32183),l=n(97778),c=n(90061),u=n(73262),d=n(21951),g=n(69882),p=n(75998),f=n(80352),h=n(45926),m=n(16393);const _=(0,c.createLogger)("SiteConnector");var v=new(function(){function e(){(0,i.default)(this,e),this.window=(0,h.getPageWindow)(),this.screen=this.window.screen?this.window.screen:window.screen,this.document=this.window.document,this.bodyEl=this.document.body,this.documentEl=this.document.documentElement,this.scrollEl=this.document.scrollingElement||this.documentEl,this.pageZoom=null,this.userZoom=null,this.appZoom=null,this.isSiteOptimizedForMobile=!1,this.isWidgetOnWix=!1,this.changeZoomSubscription=[],this.checkZoomsFn=(0,u.throttle)(()=>{this.checkZooms()},200,{trailing:!0}),!f.platform.isMobileOrTablet||(0,g.isWixContext)()&&!f.platform.isAndroid||(this.checkViewport(),this.initListenChangeZooms())}return(0,o.default)(e,[{key:"initListenChangeZooms",value:function(){(0,d.addListener)(this.window,"scroll",this.checkZoomsFn,!0),(0,d.addListener)(this.window,"resize",this.checkZoomsFn,!0),(0,d.addListener)(this.window,"orientationchange",this.checkZoomsFn),this.window.visualViewport&&this.window.visualViewport.addEventListener&&((0,d.addListener)(this.window.visualViewport,"scroll",this.checkZoomsFn,!0),(0,d.addListener)(this.window.visualViewport,"resize",this.checkZoomsFn,!0))}},{key:"setZoomChangeIterval",value:function(e){e!==this.intervalTime&&(clearInterval(this.intervalId),this.intervalTime=e,this.intervalId=setInterval(this.checkZoomsFn,e))}},{key:"checkZooms",value:function(){const e=this.getUserZoom(),t=this.getPageZoom(),n=this.getAppZoom();e===this.userZoom&&t===this.pageZoom&&n===this.appZoom||(_.log("zoom:",e,t,n),this.userZoom=e,this.pageZoom=t,this.appZoom=n,p.zoomDispatch.setZoomSettings({user:this.userZoom,page:this.pageZoom,app:this.appZoom}),this.triggerChangeZoom())}},{key:"checkViewport",value:function(){const e=this.document.querySelector("meta[name=viewport]");if(e&&e.content){const t=e.getAttribute("content").toLowerCase().split(","),n=e.getAttribute("id");for(let e=0;e<t.length;e++){t[e]=t[e].replace(/^\s+/,"");const r=t[e].split("=");"width"==r[0]&&"device-width"===r[1]&&(this.isSiteOptimizedForMobile=!0),"width"!=r[0]||"device-width"===r[1]||"wixMobileViewport"!=n||this.window.isWixIframe||(this.isWidgetOnWix=!0)}}}},{key:"triggerChangeZoom",value:function(){(0,a.each)(this.changeZoomSubscription,e=>{e({userZoom:this.userZoom,pageZoom:this.pageZoom,appZoom:this.appZoom})})}},{key:"blockScroll",value:function(){(0,s.addClass)(this.bodyEl,"jivo-block-scroll"),(0,d.addListener)(this.window,"scroll",this.preventDefault),(0,d.addListener)(this.document,"touchmove",this.preventDefault),this.window.visualViewport&&this.window.visualViewport.addEventListener&&(this.window.visualViewport.addEventListener("scroll",this.preventDefault),this.window.visualViewport.addEventListener("resize",this.preventDefault))}},{key:"unblockScroll",value:function(){(0,s.removeClass)(this.bodyEl,"jivo-block-scroll"),(0,d.removeEvent)(this.window,"scroll",this.preventDefault),(0,d.removeEvent)(this.document,"touchmove",this.preventDefault),this.window.visualViewport&&this.window.visualViewport.removeEventListener&&(this.window.visualViewport.removeEventListener("scroll",this.preventDefault),this.window.visualViewport.removeEventListener("resize",this.preventDefault))}},{key:"addOverlay",value:function(){(0,s.addClass)(this.documentEl,"jivo-mobile-overlay")}},{key:"removeOverlay",value:function(){(0,s.removeClass)(this.documentEl,"jivo-mobile-overlay")}},{key:"blockSite",value:function(){if(void 0!==this.blockState)return;const e=this.scrollEl.scrollTop;this.resetScrollPositions(),(0,s.addClass)(this.documentEl,"jivo-site-full-block"),this.scrollEl.scrollTop=e,f.platform.isTablet&&setTimeout(()=>{(0,s.addClass)(this.bodyEl,"jivo-tablet-overlay")},300),this.blockState=!0}},{key:"unblockSite",value:function(){(0,s.removeClass)(this.documentEl,"jivo-site-full-block"),(0,s.removeClass)(this.bodyEl,"jivo-tablet-overlay"),this.restoreScrollPositions(),delete this.blockState}},{key:"resetScrollPositions",value:function(){this.scrollEl&&(this.originalScrollTop=this.scrollEl.scrollTop,this.originalScrollLeft=this.scrollEl.scrollLeft,this.scrollEl.scrollTop=0,this.scrollEl.scrollLeft=0)}},{key:"restoreScrollPositions",value:function(){this.scrollEl&&(this.originalScrollTop&&(this.scrollEl.scrollTop=this.originalScrollTop),this.originalScrollLeft&&(this.scrollEl.scrollLeft=this.originalScrollLeft),delete this.originalScrollTop,delete this.originalScrollLeft)}},{key:"preventDefault",value:function(e){return e.preventDefault(),e.stopPropagation(),!1}},{key:"getUserZoom",value:function(){let e=this.documentEl.clientWidth/this.window.innerWidth;const t=this.window.visualViewport;if(t&&1!==t.scale){const n=this.getPseudo().clientWidth;e=this.documentEl.clientWidth<n?n/t.width:this.documentEl.clientWidth/t.width}return!this.isSiteOptimizedForMobile&&e>=.97&&e<=l.MAX_ALLOWED_USER_ZOOM&&(e=1),(0,m.round)(e,2)}},{key:"getPageZoom",value:function(){if(!this.screen)return 1;const e=this.window.visualViewport?"landscape"===this.getOrientation()?this.screen.height/this.window.visualViewport.width:this.screen.width/this.window.visualViewport.width:"landscape"===this.getOrientation()?this.screen.height/this.window.innerWidth:this.screen.width/this.window.innerWidth;return(0,m.round)(e,2)}},{key:"getAppZoom",value:function(){if(!this.screen)return 1;const e=this.window.visualViewport?"landscape"===this.getOrientation()&&f.platform.isIos?this.window.visualViewport.width/this.screen.height:this.window.visualViewport.width/this.screen.width:"landscape"===this.getOrientation()?this.window.innerWidth/this.screen.height:this.window.innerWidth/this.screen.width;return(0,m.round)(e,2)}},{key:"getTextSize",value:function(){if(f.platform.isIos&&(0,g.isWixContext)())return"normal";let e=null;if(!f.platform.isIos)return e;const t=this.getAppZoom();return 1!==t&&(e=100*t+"%"),e||"none"}},{key:"getLineHeight",value:function(e){let t=null;const n=this.getAppZoom();return 1!==n&&(t=(e||1.25)/n+"em"),t}},{key:"getOrientation",value:function(){let e,t=0;switch("number"==typeof this.window.orientation?t=this.window.orientation:this.window.screen&&this.window.screen.orientation&&(t=this.window.screen.orientation.angle),t){case-90:case 90:e="landscape";break;default:e="portrait"}return e}},{key:"getBodyOffset",value:function(){const e=this.getBodyPosition(),t=this.bodyEl.getBoundingClientRect(),n=this.documentEl.getBoundingClientRect();return{top:"static"===e?0:t.top-n.top,left:"static"===e?0:t.left-n.left}}},{key:"getBodyPosition",value:function(){return this.window.getComputedStyle(this.bodyEl).position}},{key:"getPseudo",value:function(){if(this.documentEl.querySelector){const e=this.documentEl.querySelector(".jv-pseudo-height");return e||0}return 0}},{key:"listenChangeZoom",value:function(e){this.changeZoomSubscription.push(e)}}]),e}());t.default=v},14762:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(44775)),s=r(n(84827)),l=r(n(85299)),c=r(n(55536)),u=n(35333),d=n(42687);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}let p=function(e){(0,s.default)(n,e);var t=g(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"getAgentById",value:function(e){return e?this.store.find(t=>t.get("agent_id")===parseInt(e)):null}},{key:"getBotById",value:function(e){return e?this.store.find(t=>t.get("bot_id")===parseInt(e)):null}},{key:"getAgentsByStatus",value:function(e){return e?this.store.filter(t=>t.get("body.state")===e):null}},{key:"cleanBotsUpdate",value:function(){const e="body.is_update_from_bot";return this.store.forEach(t=>{t.get("bot_id")&&t.get(e)&&(t.set(e,!1),t.set("body.state","left"))})}},{key:"getAgentIdsByStatus",value:function(e){return e?this.store.reduce((t,n)=>(n.get("body.state")===e&&t.push(n.get("agent_id")||n.get("bot_id")),t),[]):null}},{key:"getOnlyAgentIdsByStatus",value:function(e){return e?this.store.reduce((t,n)=>(n.get("body.state")===e&&n.get("agent_id")&&t.push(n.get("agent_id")),t),[]):null}},{key:"closeChat",value:function(){(0,u.each)(this.store,e=>{e.set("body.state","left")})}},{key:"updateAgentList",value:function(e,t){e&&e.length&&(1==e.length&&this.closeChat(),(0,u.each)(e,e=>{let r;r=e.bot_id?this.getBotById(e.bot_id):this.getAgentById(e.agent_id),e.body={state:"join"},e=(0,d.omit)(e,["state","vox_name","disable_contact_form"]),null!=t&&t.is_update_from_bot&&(e.body.is_update_from_bot=!0),e.avatar_url||(e.avatar_url=null),delete e.disable_contact_form,r?r.set(e):(0,a.default)((0,c.default)(n.prototype),"push",this).call(this,e)}))}},{key:"toReduxFormat",value:function(){const e=[];return(0,u.each)(this.store,t=>{var n,r;const i=t.toJSON(),o={avatarUrl:i.avatar_url||null,id:i.agent_id||i.bot_id,name:i.display_name||null,title:i.title||null,isBot:!!i.bot_id,state:(null==i||null===(n=i.body)||void 0===n?void 0:n.state)||null,type:i.type||null,isUpdateFromBot:(null===(r=i.body)||void 0===r?void 0:r.is_update_from_bot)||null};e.push(o)}),e}}]),n}(r(n(34973)).default);var f=new p({type:"default",name:"agents",keys:{type:null,agent_id:null,bot_id:null,display_name:null,title:null,avatar_url:null,body:{state:"join",is_update_from_bot:null}}});t.default=f},4867:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(84827)),s=r(n(85299)),l=r(n(55536)),c=r(n(6131)),u=n(81152);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}let g=function(e){(0,a.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"isAgentMessage",value:function(){const e=this.store;return e.from===u.MessageInitiator.AGENT||"bot"===e.from}},{key:"unStorage",value:function(){var e,t,n,r,i;if(null!==(e=window)&&void 0!==e&&null!==(t=e.parent)&&void 0!==t&&t.window&&null!==(n=window)&&void 0!==n&&null!==(r=n.parent)&&void 0!==r&&null!==(i=r.window)&&void 0!==i&&i.isWixPreview)return!0;const o=this.store;return[u.MessageType.EMAIL,u.MessageType.SOCIAL,u.MessageType.PRECHAT].includes(o.type)||o.body&&o.body.unsave||!1}}]),n}(c.default);t.default=g},14264:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(15687)),o=r(n(33119)),a=r(n(92664)),s=r(n(44775)),l=r(n(84827)),c=r(n(85299)),u=r(n(55536)),d=n(90061),g=n(44145),p=n(16016),f=n(35333),h=n(38392),m=n(938),_=r(n(34973)),v=n(81152),y=r(n(4867));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}const E=(0,d.createLogger)("MessagesStore");var b=new(function(e){(0,l.default)(n,e);var t=C(n);function n(e){var r;return(0,o.default)(this,n),(r=t.call(this,e)).destroyDeletedMessages(),r.destroyErrorMediaMessages(),r.setTempMessagesForInit(),r}return(0,a.default)(n,[{key:"push",value:function(e){const t=this.formatMessage(e);return(0,s.default)((0,u.default)(n.prototype),"push",this).call(this,t)}},{key:"pushAll",value:function(e){(0,s.default)((0,u.default)(n.prototype),"pushAll",this).call(this,e)}},{key:"sort",value:function(){this.store=(0,m.sortBy)(this.store,e=>e.get("created_ts"))}},{key:"formatMessage",value:function(e){var t=h.pick.apply(void 0,[e].concat(["private_id","msg_id","chat_id","created_ts","updated_ts","from","from_id","text","type","status","body","replied_message"]));const n=e.meta||e.body;if(void 0!==n&&"tinkoffInvoice"===n.type&&"SUCCESS"===n.status){const e=this.store.filter(function(e){return(e.get("body")?e.get("body").invoice_id:e.invoice_id)===n.invoice_id});if(e.length){const t=e[0].get("body");t&&(t.status="SUCCESS",e[0].set("body",t))}}return e.type==v.MessageType.MESSAGE&&e.media&&(t.type=v.MessageType.MEDIA,t.body=e.media),e.private_id||(t.private_id=(0,p.generateGUID)()),t}},{key:"getLastMessage",value:function(){return this.store[this.store.length-1]||null}},{key:"getFirstMessage",value:function(){return this.store.length?this.store[0]:null}},{key:"getClientMessages",value:function(){return this.store.filter(e=>e.get("from")===v.MessageInitiator.CLIENT)}},{key:"getAgentMessages",value:function(){return this.store.filter(e=>e.get("from")===v.MessageInitiator.AGENT)}},{key:"getAgentTextMessages",value:function(){const e=this.getChatId();return e?this.store.filter(t=>t.get("chat_id")===e&&t.get("from")===v.MessageInitiator.AGENT&&t.get("type")===v.MessageType.MESSAGE):[]}},{key:"getMessagesByType",value:function(e){return this.store.filter(t=>t.get("type")===e)}},{key:"getMessageById",value:function(e){return e?this.store.find(t=>t.get("msg_id")===e):null}},{key:"getListpickerById",value:function(e){return e?this.store.find(t=>t.get("msg_id")===e&&t.get("type")===v.MessageType.LISTPICKER):null}},{key:"getMessageByPrivateId",value:function(e){return e?this.store.find(t=>t.get("private_id")===e):null}},{key:"closeChat",value:function(){const e=this.getLastMessage(),t=this.getLastProactive();t&&t.set("chat_id",e.get("chat_id"))}},{key:"getCurrentProactive",value:function(){const e=this.getLastProactive();let t=null;return(0,g.getApp)().chatStarted&&e&&!e.get("chat_id")&&(t=e),E.log("getCurrentProactive",t),t}},{key:"getLastProactive",value:function(){const e=this.store.filter(e=>e.get("type")===v.MessageType.PROACTIVE);return E.log("getLastProactive",e),e.length?e[e.length-1]:null}},{key:"getTmpProactive",value:function(){const e=this.store.filter(e=>e.get("type")===v.MessageType.PROACTIVE&&e.get("body")&&e.get("body").unsave);return E.log("getTmpProactive",e),e.length?e[e.length-1]:null}},{key:"destroyDeletedMessages",value:function(){const e=this.getDeletedMessages();(0,f.each)(e,e=>{e.destroy()})}},{key:"getDeletedMessages",value:function(){return this.store.filter(e=>e.get("status")==v.MessageStatus.DELETED)}},{key:"destroyErrorMediaMessages",value:function(){const e=this.getMediaErrors();(0,f.each)(e,e=>{e.destroy()})}},{key:"getMediaErrors",value:function(){return this.store.filter(e=>{if(!e)return!1;const t=e.toJSON();return t.type==v.MessageType.MEDIA&&t.body&&t.body.status&&t.body.status!==v.MediaStatus.COMPLETE&&t.body.status!==v.MediaStatus.EXPIRED})}},{key:"getChatCounts",value:function(){let e,t=0;return(0,f.each)(this.store,n=>{const r=n.get("chat_id");null!==r&&r!==e&&(e=r,t+=1)}),t}},{key:"getAllChatIds",value:function(){const e=[];return(0,f.each)(this.store,t=>{t.get("chat_id")&&e.push(t.get("chat_id"))}),(0,i.default)(new Set(e))}},{key:"getChatId",value:function(){const e=this.getAgentMessages(),t=this.filter(e=>e.get("chat_id")&&e.get("from")===v.MessageInitiator.CLIENT);let n=e.length?e[e.length-1].get("chat_id"):null;const r=t.length?t[t.length-1].get("chat_id"):null;return r>n&&(n=r),n}},{key:"getChatMessages",value:function(e){return this.store.filter(t=>t.get("chat_id")===e&&t.get("type")!==v.MessageType.SYSTEM&&"bot"!==t.get("from"))}},{key:"getChatMessagesAfterId",value:function(e,t){return this.store.filter(n=>n.get("chat_id")===e&&n.get("type")!==v.MessageType.SYSTEM&&"bot"!==n.get("from")&&n.get("msg_id")>t)}},{key:"getCurrentChatMessages",value:function(){const e=this.getChatId();return e?this.getChatMessages(e):[]}},{key:"getAgentChatMessages",value:function(e){return this.store.filter(t=>{const n=[v.MessageInitiator.AGENT,v.MessageInitiator.AGENT_BOT],r=[v.MessageType.PROACTIVE,v.MessageType.FOR_TEST,v.MessageType.FORM,v.MessageType.PRECHAT];return t.get("chat_id")===e&&n.includes(t.get("from"))&&!r.includes(t.get("type"))})}},{key:"getCurrentChatAgentMessages",value:function(){const e=this.getChatId();return this.getAgentChatMessages(e)}},{key:"getCurrentClientMessages",value:function(){return this.getChatMessages(this.getChatId()).filter(e=>e.get("from")===v.MessageInitiator.CLIENT)}},{key:"find",value:function(e){return this.store.find(t=>e(t))}},{key:"filter",value:function(e){return this.store.filter(t=>e(t))}},{key:"setTempMessagesForInit",value:function(){return(0,f.each)(this.store,e=>{if(e&&e.get("from")===v.MessageInitiator.CLIENT&&e.get("status")===v.MessageStatus.SENT&&!e.get("chat_id")){((new Date).getTime()-e.get("created_ts"))/1e3>604800&&e.get("type")===v.MessageType.TEMPORARY&&(e.set("status",v.MessageStatus.NOT_DELIVERED),e.set("type",v.MessageType.MESSAGE)),e.get("type")===v.MessageType.MESSAGE&&e.set("status",v.MessageStatus.NOT_DELIVERED)}})}},{key:"getClientSendedMessages",value:function(){return this.store.filter(e=>e.get("from")===v.MessageInitiator.CLIENT&&e.get("status")===v.MessageStatus.SENT&&!e.get("msg_id")&&e.get("type")===v.MessageType.MESSAGE)}},{key:"getFormMessage",value:function(){return this.store.filter(e=>e.get("type")===v.MessageType.FORM)}},{key:"getFormIntroduceText",value:function(){return this.store.filter(e=>e.get("type")===v.MessageType.PREFORM&&e.get("from")===v.MessageInitiator.FORM)}},{key:"getBotMessages",value:function(e){return this.store.filter(t=>t.get("chat_id")===e&&t.get("type")===v.MessageType.MESSAGE&&"bot"===t.get("from"))}},{key:"getTemporaryMessageWithText",value:function(e){const t=this.store.filter(t=>t.get("type")===v.MessageType.TEMPORARY&&t.get("text")===e);return t.length?t[t.length-1]:null}},{key:"getOfflineTmpMessage",value:function(){const e=this.store.filter(e=>e.get("type")===v.MessageType.TEMPORARY&&e.get("from")===v.MessageInitiator.CLIENT);return e.length?e[e.length-1]:null}},{key:"getUnreadApiInvitations",value:function(){return this.store.filter(e=>e.get("type")===v.MessageType.MESSAGE&&e.get("body")&&e.get("body").customerIO&&e.get("body").unsave)}},{key:"getSystemMessageByText",value:function(e){return this.store.filter(t=>t.get("type")===v.MessageType.SYSTEM&&t.get("text")===e)}},{key:"hasMessages",value:function(){return this.store.length>0}},{key:"getCobrowseByHash",value:function(e){if(e)return this.store.find(t=>{const n=t.toJSON();return n.type===v.MessageType.COBROWSE&&n.body&&n.body.type===v.MessageType.COBROWSE&&n.body.address===e})}}]),n}(_.default))({type:"default",name:"messages",itemClass:y.default,keys:{private_id:function(){return(0,p.generateGUID)()},msg_id:null,chat_id:null,created_ts:function(){return(new Date).getTime()},updated_ts:null,from:v.MessageInitiator.EMPTY,from_id:null,text:null,type:v.MessageType.EMPTY,status:v.MessageStatus.SENT,body:{},replied_message:null}});t.default=b},23116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(62096),i=n(90061),o=n(80352),a=n(21951),s=n(73262),l=n(32183),c=n(8717),u=n(35233);const d=n(89766).EventEmitter;let g=(new Date).getTime();const p=(0,i.createLogger)("TabActiveManager"),f=Object.assign(new d,{isActive:null});let h;const m=(0,s.throttle)(()=>{g=(new Date).getTime(),(0,c.isChatRoute)(h)&&(0,l.pageVisible)()&&!0!==f.isActive&&(p.log("setActive"),f.isActive=!0,f.emit("update"))},500),_=()=>{p.log("setNotActive"),f.isActive=!1,f.emit("update")};setInterval(()=>{!1!==f.isActive&&(new Date).getTime()-g>3e4&&_()},15e3),o.platform.isDesktop?((0,a.addListener)(window.parent,"scroll",m,!0),(0,a.addListener)(window.parent,"mousemove",m,!0)):((0,a.addListener)(window.parent,"touchmove",m,!0),(0,a.addListener)(window.parent,"touchend",m,!0)),(0,a.listenVisibility)(()=>{(0,l.pageVisible)()?m():_()}),r.reduxStore.subscribe(()=>{const e=h;h=(0,u.selectRoute)(r.reduxStore.getState()),e!==h&&((0,c.isChatRoute)(h)?m():_())});var v=f;t.default=v},11281:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(61125)),o=r(n(10018)),a=n(16016),s=r(n(26754)),l=r(n(14264)),c=r(n(14762)),u=n(28723),d=n(68403),g=n(18276),p=r(n(91275)),f=n(96879),h=n(81152),m=n(65465),_=n(90061),v=n(47138),y=n(86383),C=r(n(73687)),E=n(28302),b=n(44145),S=r(n(71277)),T=n(96367),D=n(97490),w=n(49594),O=n(26932),A=n(7410),M=n(9550),I=n(97939),R=n(41168),k=n(64123),L=n(13077),P=n(34445),x=n(49963),N=n(54346),F=n(12398),j=n(12822),B=n(17662),U=n(80352),V=n(59767),W=n(499),G=n(8717),H=n(3296),$=n(24344),z=n(42634),Z=n(38042),q=n(88263),K=n(81073),Y=n(97778),J=n(15787),Q=n(54346),X=n(24578);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const ne=(0,_.createLogger)("actions/connection");var re={accept:e=>{const n=e.agent_info.bot_id,r=(0,b.getApp)(),i=(0,b.getClient)(),o=(0,b.getChats)(),a=o[o.length?o.length-1:0],u=(0,b.getUserSettings)();if(O.appDispatchers.setChatStarted(!0),O.appDispatchers.setChatAccepted(!0),O.appDispatchers.setLastChatOpened(!0),O.appDispatchers.setHiddenByRules(!1),O.chatsDispatchers.setChatEvaluated(!1),!r.isOnline){if(n||(t.default.setOnline(),m.messageActions.systemMessageOnce((0,g.l10n)("offlineAgentConnected"))),m.messageActions.deleteUnansweredOfflineSystemInvite(),(0,G.shouldRedirectToIntroduce)()){const e=l.default.getOfflineTmpMessage();e&&e.destroy(),q.routerService.next(D.RouterEvent.ToIntroduce)}(0,Z.telemetry)("offline_agent_accept")}var d;n?(s.default.agent_id=0,s.default.type=e.agent_info.type||null,s.default.isUpdateFromBot=!(null===(d=e.state)||void 0===d||!d.is_update_from_bot)):(s.default.bot_id&&t.default.setOnline(),s.default.bot_id=0);O.chatsDispatchers.setNoJoinedAgents(),s.default.agent_id=e.agent_info.agent_id||null,s.default.bot_id=e.agent_info.bot_id||null,s.default.display_name=e.agent_info.display_name||null,s.default.title=e.agent_info.title||null,s.default.avatar_url=e.agent_info.avatar_url||null,s.default.typing=e.agent_info.typing||null,s.default.state="join";const p=s.default.toReduxFormat();n?(O.botsDispatchers.addBot(p),O.chatsDispatchers.setJoinedBots([s.default.bot_id]),c.default.updateAgentList([e.agent_info],e.state)):(O.agentsDispatchers.addAgent(p),O.chatsDispatchers.setJoinedAgents([e.agent_info]),O.chatsDispatchers.setJoinedBots([]),O.appDispatchers.setIsInputDisabled(!1)),n?O.messagesDispatchers.destroyByType(h.MessageType.RATE_FORM):(!i.isIntroduced&&r.isOnline&&m.messageActions.checkContactsForm(),O.clientDispatchers.setPaId(s.default.agent_id)),T.analytics.trackChatConnected(n),(0,$.callUserFunction)("onAccept"),(0,z.saveLastProactive)(),(0,J.openChatOnMessage)({isNoMessage:!0});const f=n?h.MessageType.BOT:h.MessageInitiator.AGENT;var _;(u.contactsAsk===M.ContactsType.BEFORE_CHAT&&(0,Z.telemetry)("chat_accepted_contacts",{param1:f,param2:JSON.stringify({chat_id:a.id,department_id:i.departmentId,display_name:Boolean(i.displayName),name:Boolean(i.name),email:Boolean(i.email),is_introduced:i.isIntroduced,phone:Boolean(i.phone)})}),n)?(0,Z.telemetry)("chat_bot_accepted",{param1:(0,Q.isAssistantBot)()?I.BotType.ASSISTANT:I.BotType.DEFAULT,param2:null!==(_=e.state)&&void 0!==_&&_.is_update_from_bot?"is_update_from_bot":"is_accept"}):(0,Z.telemetry)("chat_accepted",te({param1:f},T.analytics.getCountersTelemetry()))},transferred:e=>{(0,b.getApp)().isOnline||t.default.setOnline(),Object.assign(s.default,e.agent_info);const n=e.agent_info.bot_id,r=s.default.toReduxFormat();n?(O.botsDispatchers.addBot(r),O.chatsDispatchers.setJoinedBots([n])):(O.agentsDispatchers.addAgent(r),O.chatsDispatchers.setJoinedAgents([e.agent_info]),O.chatsDispatchers.setJoinedBots([])),O.messagesDispatchers.addMessage({text:(0,g.l10n)("lblTransferred",{agent:e.agent_info.display_name}),type:h.MessageType.SYSTEM,from:h.MessageType.SYSTEM}),O.clientDispatchers.setPaId(s.default.agent_id)},startup_ok:e=>{const t=(0,b.getApp)(),n=(0,b.getClient)();ne.log("startup_ok",e),(0,X.reloadStories)(),c.default.closeChat(),O.appDispatchers.setMaintenance(!1),O.appDispatchers.setIsInputDisabled(!1),O.appDispatchers.setLastChatStatus(P.ChatStatus.STARTUP_OK),O.callbackDispatchers.setCallbackStatus(!1),t.route===D.Route.CHAT_MIN&&q.routerService.setNext(D.Route.LABEL),!n.isExist&&e.last_msg_id&&O.clientDispatchers.setIsExist(!0),O.clientDispatchers.updateClient({clientId:e.jv_client_id,sessionId:e.jv_sess_id}),(0,K.sendClientAttributes)(),(0,W.syncCSClientInfo)(e.client_info),m.messageActions.deleteMaintenanceMessage(),(0,w.updateHistory)(e),(n.isIntroduced&&!t.isOnline||t.isOnline)&&x.connectionAdapter.flushBuffer(),(0,F.sendTagsIfNeed)(),(0,Z.telemetry)("startup_ok",{param1:(0,k.getStarupTime)(),param2:(0,b.getSystemSettings)().chatHost,param3:n.userToken?"has_user_token":null}),(0,L.setRuleLocal)("sendStartupTime",null)},startup_error:e=>{switch(ne.log("startup_error: ",null==e?void 0:e.err_code),O.appDispatchers.setLastChatStatus(P.ChatStatus.STARTUP_ERROR),e.err_code){case"deleted":O.clientDispatchers.resetClient(),O.appDispatchers.setLastChatStatus(null),l.default.destroy();break;case"blacklisted":O.appDispatchers.setChatStarted(!1),O.appDispatchers.setChatAccepted(!1),(0,V.banClient)(e.ts),q.routerService.next(D.RouterEvent.Hide),S.default.disableSoundPlayer();break;case"moved":(0,j.getNewConfig)();break;case"maintenance":(0,j.enableMaintenance)()}(0,Z.telemetry)("startup_error",{param1:(0,k.getStarupTime)(),param2:e.err_code||"no_err_code",param3:(0,b.getSystemSettings)().chatHost}),(0,L.setRuleLocal)("isVisitorInvite",!1),(0,L.setRuleLocal)("sendStartupTime",null)},maintenance:()=>{ne.log("maintenance: save maintenance_time"),C.default.set("maintenance_time",Date.now(),Y.ONE_DAY_DELAY)},resume_ok:e=>{ne.log("resume_ok",e);const n=(0,b.getApp)(),r=(0,b.getClient)(),i=(0,b.getCallback)(),o=te({clientId:e.jv_client_id},e.jv_sess_id?{sessionId:e.jv_sess_id}:null);if(!r.isExist&&e.last_msg_id&&O.clientDispatchers.setIsExist(!0),(0,K.sendClientAttributes)(),O.clientDispatchers.updateClient(o),O.appDispatchers.setMaintenance(!1),O.appDispatchers.setIsInputDisabled(!1),O.appDispatchers.setLastChatStatus(P.ChatStatus.RESUME_OK),(0,X.reloadStories)(),u.HistoryStore.destroy(),(r.isIntroduced&&!n.isOnline||n.isOnline)&&((0,G.shouldRedirectToIntroduce)()||x.connectionAdapter.flushBuffer()),e.agents&&e.agents.length>0){let n=!1;if(e.agents.forEach(e=>{e.bot_id&&(n=e)}),n){const t=c.default.getBotById(n.bot_id);null!=t&&t.get("body.is_update_from_bot")?(O.appDispatchers.setChatAccepted(!0),O.appDispatchers.setAppIsOnline(!0)):(c.default.updateAgentList([n],e.state),O.botsDispatchers.addBot({avatarUrl:n.avatar_url||null,id:n.bot_id,name:n.display_name||null,title:n.title||null,type:n.type,isBot:!0})),O.chatsDispatchers.setJoinedBots([n.bot_id])}else O.chatsDispatchers.setJoinedAgents(e.agents);t.default.updateAgentInfo(e.agents),c.default.getAgentsByStatus("join").length&&(O.appDispatchers.setChatAccepted(!0),O.appDispatchers.setAppIsOnline(!0),O.appDispatchers.setLastChatOpened(!0))}else O.chatsDispatchers.setNoJoinedAgents(),O.appDispatchers.setLastChatOpened(!1),O.appDispatchers.setChatAccepted(!1),c.default.cleanBotsUpdate();const a=n.route;U.platform.isMobileOrTablet||U.platform.isChatPage||n.chatStarted||l.default.getCurrentChatMessages().length||!n.isOnline||a===D.Route.CALL||a===D.Route.CHAT_CALL||a===D.Route.CALL_POPUP||a===D.Route.LABEL||(0,b.getProactive)().text||q.routerService.next(D.RouterEvent.CloseWindow);const s=e.client_info.cw_call;(0,k.setCallbackStatus)(s),s===v.CallStatus.WAIT&&p.default.startCallTimeout(),s&&(Object.assign(i,s),[D.Route.CHAT_CALL,D.Route.CHAT_MIN].includes(a)||U.platform.isMobileOrTablet||q.routerService.next(D.RouterEvent.ToCall),s.status!=v.CallStatus.CONNECTED&&s.status!=v.CallStatus.CONNECTING||(0,H.resetDelayedCall)()),e.client_info.has_integration&&O.clientDispatchers.setHasIntegration(e.client_info.has_integration),e.assigned_agent_id&&O.clientDispatchers.setAssignedAgentId(e.assigned_agent_id),O.appDispatchers.setLastChatOpened(e.chat_started),(0,W.syncCSClientInfo)(e.client_info),m.messageActions.checkContactsForm(),m.messageActions.deleteMaintenanceMessage(),e.chat_started&&(0,z.deleteProactiveMessage)(),(0,w.updateHistory)(e),!(0,B.isNumber)(r.departmentId)||n.chatStarted||n.chatAccepted||(0,V.needShowDepartments)(),(0,Z.telemetry)("resume_ok",{param1:(0,k.getStarupTime)(),param2:e.chat_started?"chat_started":"chat_not_started",param3:r.userToken?"has_user_token":"no_user_token",param4:e.last_msg_id}),(0,L.setRuleLocal)("sendStartupTime",null)},cw_wait:()=>{},cw_call_end:()=>{const e=(0,b.getCallback)().webRTCCallStatus;if(ne.log("cw_call_end"),e){const e=(0,E.getActiveMessage)(v.WebRTCCallStatus.ACCEPTED);e&&O.messagesDispatchers.updateWebRTCCallStatus(e.private_id,v.WebRTCCallStatus.ENDED),O.callbackDispatchers.setActiveWebRTCCallMessageId(null),O.callbackDispatchers.setWebRTCCallStatus(null),O.callbackDispatchers.setCallbackStatus(v.CallStatus.ENDED),(0,Z.telemetry)("cw_call_end",{param1:"webrtc"})}else p.default.clearCallTimeout(),m.messageActions.systemCallMessage((0,g.l10n)("c_callDisconnected"),h.MessageName.CALL_END),O.callbackDispatchers.setCallbackStatus(v.CallStatus.ENDED),U.platform.isMobileOrTablet||(0,b.getApp)().route===D.Route.CHAT||(0,J.openChatOnMessage)(),(0,Z.telemetry)("cw_call_end");(0,$.callUserFunction)("onCallEnd",{result:"ok"})},cw_connecting:()=>{(0,b.getCallback)().webRTCCallStatus?O.callbackDispatchers.setWebRTCCallStatus(v.CallStatus.CONNECTING):O.callbackDispatchers.setCallbackStatus(v.CallStatus.CONNECTING),(0,H.resetDelayedCall)()},cw_connected:()=>{const e=(0,b.getCallback)();if(ne.warn("cw_connected",e.webRTCCallStatus,e.activeWebRTCCallMessageId),!e.activeWebRTCCallMessageId){const e=(0,E.getActiveMessage)(v.WebRTCCallStatus.INITIAL);e&&O.messagesDispatchers.updateWebRTCCallStatus(e.private_id,v.WebRTCCallStatus.ACCEPTED)}e.webRTCCallStatus?(O.callbackDispatchers.setWebRTCCallStatus(v.CallStatus.CONNECTED),O.messagesDispatchers.updateWebRTCCallStatus(e.activeWebRTCCallMessageId,v.WebRTCCallStatus.ACCEPTED)):O.callbackDispatchers.setCallbackStatus(v.CallStatus.CONNECTED),(0,H.resetDelayedCall)()},cw_error:e=>{const t=(0,g.l10n)(`cw_reason_${e.reason}`);let n=t;n&&n!=t||(n=(0,R.getCallDefaultError)());const r=(0,b.getCallback)();if(r.webRTCCallStatus){if(r.webRTCCallStatus!==v.CallStatus.ENDED){O.callbackDispatchers.setWebRTCCallStatus(v.CallStatus.ERROR);let e=r.activeWebRTCCallMessageId;if(!e){const t=(0,E.getActiveMessage)(v.WebRTCCallStatus.INITIAL);e=t&&t.private_id}O.messagesDispatchers.updateWebRTCCallStatus(e,v.WebRTCCallStatus.ERROR)}O.callbackDispatchers.setCallbackStatus(v.CallStatus.ERROR),O.callbackDispatchers.setActiveWebRTCCallMessageId(null),O.callbackDispatchers.setWebRTCCallStatus(null),q.routerService.getCurrentRoute()===D.Route.CHAT_SETUP_CALL&&q.routerService.next(D.RouterEvent.Cancel)}else p.default.clearCallTimeout(),O.messagesDispatchers.addMessage({text:n,type:h.MessageType.SYSTEM,from:h.MessageInitiator.SYSTEM,body:{type:h.MessageType.CALL,name:h.MessageName.CALL_END}}),O.callbackDispatchers.setCallbackStatus(v.CallStatus.ERROR),O.callbackDispatchers.setCallbackError(n),U.platform.isMobileOrTablet||q.routerService.next(D.RouterEvent.ToCall);(0,$.callUserFunction)("onCallEnd",{result:"fail",reason:n}),(0,Z.telemetry)("cw_call_error",{param1:e.reason})},cw_call_requested:async e=>{if(!o.default.enable_webrtc_calls)return;const t=e.call_id,r=e.vox_user_login,i=e.vox_user_password,a=e.vox_node;O.callbackDispatchers.setWebRTCCallStatus(v.CallStatus.WAIT);const s=new(0,(await n.e(772).then(n.bind(n,51961))).default)(t,r,i,a);o.default.enable_webrtc_separate_window||await s.setupSdk();const l=(0,b.getFeatures)().webRTCSeparateWindow,c=(0,E.getAcceptLink)(l);(0,N.addWebRTCCallMessage)(c,t),(0,J.openChatOnMessage)()},agentMessage:(e,n)=>{var r;ne.log("agentMessage",e),(0,b.getApp)().isOnline||t.default.setOnline(),m.messageActions.saveLastSystemMessage(),e.media&&(e.media.status=h.MediaStatus.COMPLETE);const i={text:e.message||e.text,type:e.media?h.MessageType.MEDIA:h.MessageType.MESSAGE,from:e.from,from_id:e.from_id,private_id:e.private_id||(0,a.generateGUID)(),msg_id:e.msg_id,chat_id:e.chat_id,meta:e.meta,body:e.media||{},replied_message:e.replied_message};var s;n&&(0,Q.isAssistantBot)()&&(i.body.bot_message_type=null===(s=e.body)||void 0===s?void 0:s.type);const l=e.type==h.MessageType.LISTPICKER;if(n){var u;if(l)i.text=(e.body.text||e.body.title).trim(),null!==(u=e.body)&&void 0!==u&&u.is_markdown&&(i.body.is_markdown=!0);e.is_markdown&&(i.body.is_markdown=!0);const t=c.default.getBotById(e.from_id);if(null!=t&&t.get("body.is_update_from_bot")&&(i.body.agent_info=t.toJSON()),e.type==h.MessageType.INVITE){if((0,Q.isAssistantBot)())return;if(i.type=h.MessageType.SYSTEM,i.text=(0,g.l10n)("botTransferChat"),i.status=h.MessageStatus.READ,(0,Z.telemetry)("bot_transfer_chat"),(0,J.isNeedShowBotForm)(o.default))return void m.messageActions.handleBotContactsForm()}else(0,Z.telemetry)("client_message_bot")}O.messagesDispatchers.addMessage(i),l&&(i.type=h.MessageType.LISTPICKER,i.body=e.body,i.msg_id=e.msg_id+.1,i.body&&O.appDispatchers.setIsInputDisabled(i.body.force_reply),O.messagesDispatchers.addMessage(i)),(0,J.agentMessageAck)([e.msg_id],e.chat_id),O.clientDispatchers.setLastMessage(""),(0,V.agentTyping)(!1),O.appDispatchers.setLastMsgTime((new Date).getTime()),(0,J.openChatOnMessage)(),(0,J.sendAgentMessageTelemetry)((0,Q.isAssistantBot)()?null===(r=i.body)||void 0===r?void 0:r.bot_message_type:null)},update_agent_info:e=>{(0,b.getApp)().isOnline||t.default.setOnline();const n=e.agent_info,r=c.default.getAgentsByStatus("join").map(e=>{const t=e.store;return t.agent_id===n.agent_id?n:t});t.default.updateAgentInfo([n]),O.chatsDispatchers.setJoinedAgents(r)},invoice:e=>{ne.log("invoice",e),O.messagesDispatchers.addMessage({type:"invoice",msg_id:e.invoice.msg_id,from:"agent",body:{type:e.invoice.gateway_system+"Invoice",comment:e.invoice.comment,amount:e.invoice.amount,invoice_id:e.invoice.invoice_id,payment_url:e.invoice.payment_url,status:e.status,currency:e.invoice.currency}})},agent_chat_close:()=>{O.appDispatchers.setChatStarted(!1),O.appDispatchers.setChatAccepted(!1),O.appDispatchers.setIsInputDisabled(!1),l.default.closeChat(),O.chatsDispatchers.setNoJoinedAgents(),O.appDispatchers.setLastChatOpened(!1),O.chatsDispatchers.setChatEvaluated(!1),(0,V.needShowDepartments)(),s.default.reset(),c.default.cleanBotsUpdate(),(0,b.getApp)().route===D.Route.CHAT_MIN&&(q.routerService.setNext(D.Route.LABEL),(0,X.reloadTransitionStore)(D.Route.LABEL)),(0,Z.telemetry)("agent_chat_close")},agent_service_message:e=>{ne.warn("unhandled agent_service_message",e)},agent_typing:e=>{(0,b.getApp)().isOnline||t.default.setOnline(),(0,V.agentTyping)(Boolean(e.typing),Boolean(e.bot_id))},update_client_info:e=>{ne.warn("update_client_info",e);const t={};e.avatar_url&&(t.avatarUrl=e.avatar_url),e.display_name&&(t.displayName=e.display_name),e.assigned_agent_id&&(t.assignedAgentId=e.assigned_agent_id),e.email&&(t.email=e.email),e.phone&&(t.phone=e.phone),o.default.bots&&(e.email||e.phone)&&(t.isIntroduced=!0),e.custom_data&&e.custom_data.length>0&&O.clientDispatchers.setCustomData(e.custom_data),O.clientDispatchers.setClientContacts(t)},update_client_id:e=>{ne.log("update_client_id",e);const t=(0,b.getClient)();!t.isExist&&e.jv_client_id&&O.clientDispatchers.setIsExist(!0),t.clientId!==e.jv_client_id&&(O.clientDispatchers.setClientId(e.jv_client_id),(0,w.updateHistory)(e),(0,Z.telemetry)("update_client_id"))},message_state:e=>{(0,V.messageState)(e)},blacklist:e=>{(0,V.banClient)(null==e?void 0:e.ts),O.appDispatchers.setChatStarted(!1),O.appDispatchers.setChatAccepted(!1),q.routerService.next(D.RouterEvent.Hide),S.default.disableSoundPlayer()},disconnecting:()=>{y.TitleManager.cancelBlink()},offline:()=>{const e=x.connectionAdapter.findInBuffer("name","client_message_campaign");if(e)return x.connectionAdapter.removeFromBuffer(e),void ne.log("Skip offline action after campaign reaction");const t=!(0,b.getBots)().length&&!o.default.enable_bot_offline&&!((0,Q.isAssistantBot)()||(0,N.isDisableFormBot)());(0,b.getApp)().isOnline&&t&&(O.appDispatchers.setAppIsOnline(!1),m.messageActions.sendNoAgentsOnline()),(0,A.fixClientIsIntroduced)()&&t&&(O.appDispatchers.setIsInputDisabled(!0),m.messageActions.handleContactsForm(!0)),(0,Z.telemetry)("force_offline",void 0,{once:!0})},update_client:e=>{e.has_integration&&(0,d.hasIntegration)(e.has_integration)&&(O.clientDispatchers.setHasIntegration(e.has_integration),O.messagesDispatchers.addMessage({text:(0,g.l10n)("social_success_"+e.has_integration),type:h.MessageType.SYSTEM,body:{type:h.MessageType.SOCIAL}}),(0,J.openChatOnMessage)(),(0,Z.telemetry)(`social_receive_has_integration_${e.has_integration}`),(0,d.isChatContactForm)()&&(0,Z.telemetry)("chat_introduce_social",{param1:"connect_"+e.has_integration}))},connect_failed:()=>{ne.log("connect_failed")},offline_ack:e=>{m.messageActions.offlineAck(e)},agent_message:e=>{(0,b.getApp)().isOnline||t.default.setOnline(),e.meta&&t.default.agentMessage(e)},chat_message:e=>{var n;ne.log("chat_message",e);const r=(0,b.getApp)(),i=(0,b.getClient)(),o=e.params;if(r.isOnline||t.default.setOnline(),i.isExist||O.clientDispatchers.setIsExist(!0),(0,K.sendClientAttributes)(),o.from!==h.MessageInitiator.CLIENT||null===(n=o.media)||void 0===n||!n.address)if(["join","left"].includes(o.type))setTimeout(()=>{(0,V.updateChatAgent)(e)},100);else{const e=o.from===h.MessageType.BOT;if((o.from===h.MessageInitiator.AGENT||e)&&t.default.agentMessage(o,e),o.from===h.MessageInitiator.CLIENT){const e=(0,f.filterMessage)(o),t=(0,b.getMessageByPrivateId)(o.private_id);if(o.private_id&&t&&O.messagesDispatchers.updateMessage({privateId:t.private_id},{chat_id:o.chat_id,msg_id:o.msg_id}),e&&!t){const e=o.private_id?o.private_id:(0,a.generateGUID)();O.messagesDispatchers.addMessage(te(te(te({from:h.MessageInitiator.CLIENT,text:o.text,type:h.MessageType.MESSAGE,private_id:e,status:h.MessageStatus.DELIVERED},o.chat_id?{chat_id:o.chat_id}:null),o.msg_id?{msg_id:o.msg_id}:null),o.media?{media:o.media}:null))}e&&(0,J.openChatOnMessage)()}}},chat_message_update:e=>{const t=e.params,n=t.msg_id,r=(0,b.getMessageById)(n);if(ne.log("chat_message_update",e,n,r),r)if(t.deleted){O.messagesDispatchers.updateMessage({messageId:r.msg_id},{status:h.MessageStatus.DELETED,type:h.MessageType.MESSAGE,body:null});n===(0,b.getApp)().quoteMsgId&&O.appDispatchers.setQuoteMsgId(null)}else t.updated_ts&&O.messagesDispatchers.updateMessage({messageId:r.msg_id},{updated_ts:1e3*t.updated_ts,text:t.text})},agents_list_updated:e=>{if(ne.log("agents_list_updated"),(0,b.getApp)().isOnline||t.default.setOnline(),e.params.length){if(1===e.params.length){const t=e.params[0];Object.assign(s.default,t),t.bot_id||O.clientDispatchers.setPaId(t.agent_id)}t.default.updateAgentInfo(e.params),O.chatsDispatchers.setJoinedAgents(e.params),O.agentsDispatchers.initAgentStore(c.default.toReduxFormat())}(0,Z.telemetry)("agents_list_updated",{param1:e.params.length+1})},rate:e=>{const t=e.chat_id;(0,J.needToRateForm)(t)},updateAgentInfo:e=>{if(ne.log("updateAgentInfo",e),1===e.length){const t=e[0];Object.assign(s.default,{agent_id:t.agent_id||0,bot_id:t.bot_id||0,display_name:t.display_name,title:t.title||null,avatar_url:t.avatar_url||null,state:(0,b.getApp)().chatAccepted?"join":"left"}),t.bot_id||(O.agentsDispatchers.updateAgent({id:t.agent_id||t.bot_id,name:t.display_name,title:t.title,avatarUrl:t.avatar_url||null,isBot:!!t.bot_id}),O.clientDispatchers.setPaId(t.agent_id))}},setOnline(){O.appDispatchers.setAppIsOnline(!0)},client_message_error:e=>{(0,Z.telemetry)("client_message_error",{param1:(null==e?void 0:e.error)||"empty"})},client_message_ack:()=>{}};t.default=re},15787:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.sendIntroduceAndMessage=t.sendClientAnswerTelemetry=t.sendApiIntroduce=t.sendAgentMessageTelemetry=t.openChatOnMessage=t.needToRateForm=t.isNeedShowBotForm=t.connectionReadyForMessages=t.checkCustomData=t.agentMessageRead=t.agentMessageAck=void 0;var i=r(n(61125)),o=n(29865),a=r(n(10018)),s=n(50402),l=n(21476),c=n(97490),u=n(86383),d=r(n(71277)),g=n(65465),p=r(n(23116)),f=n(90061),h=r(n(14264)),m=n(26932),_=n(55329),v=n(24344),y=n(44145),C=n(92089),E=n(41504),b=n(13077),S=n(81152),T=n(84727),D=n(34445),w=n(8717),O=n(49963),A=n(79523),M=n(32183),I=n(45926),R=n(42634),k=n(91920),L=n(80352),P=n(38042);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const F=(0,f.createLogger)("ConnectionHelpers");t.openChatOnMessage=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fromHistory,n=void 0!==t&&t,r=e.isNoMessage;if(void 0!==r&&r||(0,v.callUserFunction)("onMessageReceived"),!n)if((0,M.pageVisible)()||u.TitleManager.blink(),d.default.play("agent_message"),(0,y.getUserSettings)().labelBubble&&a.default.enable_spa_navigate)F.warn("Ignore openChatOnMessage show counter.");else if(L.platform.isDesktop&&(!(0,k.hasCustomLabel)()||"function"!=typeof(0,I.getPageWindow)().jivo_onMessageReceived)){(0,w.isChatInputRoute)((0,y.getApp)().route)||l.Router.next(c.RouterEvent.ToChat),l.Router.getPrevRoute()===c.Route.CHAT_MIN?m.transitionDispatchers.startTransition(s.ScriptName.MAXIMIZE_WIDGET):m.transitionDispatchers.startTransition(s.ScriptName.OPEN_WIDGET);const e=setInterval(()=>{(0,C.fixSafariKeyframes)()},50);setTimeout(()=>{clearInterval(e)},300)}};t.sendAgentMessageTelemetry=e=>{(0,P.telemetry)("agent_message",{param1:(0,_.getPrechatUseTime)(),param2:p.default.isActive&&(0,w.isChatInputRoute)((0,y.getApp)().route)?"visible":"hide",param3:e||S.MessageType.MESSAGE})};t.sendClientAnswerTelemetry=e=>{F.warn("sendClientAnswerTelemetry",e);const t=h.default.getLastMessage();if(t){const n=t.get("body.bot_message_type"),r=(0,T.validateClientAnswer)(n,e.text);(0,P.telemetry)("client_message_assistant",{param1:n,param2:r?"valid":"not_valid",param3:e.text})}};t.isNeedShowBotForm=e=>{const t=e.lastStatus;return!((t&&t.agents?t.agents.length:0)>0&&2==e.contacts_ask)&&(e.bots&&e.enable_bot_offline&&!e.disable_contact_form)};t.checkCustomData=e=>{e&&(O.connectionAdapter.sendEventIfConnected(new E.UpdateCustomData(e)),e&&m.clientDispatchers.setCustomData(e))};t.sendApiIntroduce=e=>{const t=(0,b.getRuleLocal)("lastContactApiData"),n={client_name:e.name||e.client_name,phone:e.phone,email:e.email,description:e.description};return(0,o.shallowEqual)(N(N({},n),{},{message:e.message}),t)?(F.error("setContactInfo same client contacts",t),!1):(e.message&&g.messageActions.sendClientMessage({text:e.message}),A.introduceActions.setClientContactInfo(n,!0),e.message&&(n.message=e.message),(0,b.setRuleLocal)("lastContactApiData",n),!0)};t.sendIntroduceAndMessage=(e,t)=>{t&&g.messageActions.sendClientMessage({text:t}),m.clientDispatchers.setLastMessage(""),A.introduceActions.setClientContactInfo(e,!1,!0)};t.needToRateForm=(e,t)=>{F.warn("needToRateForm",e,t);const n=h.default.getMessagesByType(S.MessageType.RATE_FORM);if(n.length&&n[0]&&n[0].get("chat_id")==e)return;const r=(0,y.getUserSettings)().rateSettings;e&&r&&(0,R.pushRateForm)(e,r.conditionName,t)};t.agentMessageRead=(e,t)=>{u.TitleManager.cancelBlink(),O.connectionAdapter.sendEvent(new E.AgentMessagesRead(e,t))};t.agentMessageAck=(e,t)=>{O.connectionAdapter.sendEvent(new E.AgentMessagesAck(e,t))};t.connectionReadyForMessages=()=>O.connectionAdapter.isConnected()&&[D.ChatStatus.STARTUP_OK,D.ChatStatus.RESUME_OK].includes((0,y.getApp)().lastChatStatus)},91275:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(69882),o=n(16016),a=n(80352),s=n(96367),l=r(n(14264)),c=n(18276),u=n(90061),d=n(21476),g=n(97490),p=n(81152),f=n(65465),h=n(24344),m=n(26932),_=n(31984),v=n(47138),y=n(50402),C=r(n(79868)),E=n(44145),b=r(n(73687)),S=n(41504),T=n(41168),D=n(15787),w=n(49963),O=n(79523),A=n(44145),M=n(3296),I=n(24578),R=n(38042),k=n(16217);const L=(0,u.createLogger)("Actions");let P=null,x=!1;const N={startCallDebounce:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(L.warn("startCallDebounce",e,n),t.default.startCallTimeout(),(0,k.isCallActive)())return void L.log("already calling");const i=(0,_.getPhoneNumberInfo)(e);i?m.clientDispatchers.setClientPhone("+"+i.phoneCode+i.innerNumber):m.clientDispatchers.setClientPhone(e);const o=(0,E.getClient)(),l=(0,E.getApp)(),u=(0,A.getFeatures)();O.introduceActions.sendIntroduction({name:o.name,phone:o.phone,email:o.email,description:o.description}),(0,_.checkStartCall)({phone:e,invitationText:r,clientToken:o.clientId,requestGRecaptchaToken:Boolean(u.recaptcha)},(r,i)=>r?(t.default.setCallError(),(0,R.telemetry)("cw_call_error",{param1:"in request"})):((i=i.data)||(L.log("Wrong response from telephony"),i={ok:!1,error_list:["wrong_response"]}),i.only_forward?(m.callbackDispatchers.setCallbackStatus(v.CallStatus.ERROR),void m.callbackDispatchers.setCallbackError((0,c.l10n)("cw_call_forward"))):void(i.ok?(m.appDispatchers.setChatStarted(!0),m.appDispatchers.setChatAccepted(!0),m.callbackDispatchers.setCallbackStatus(v.CallStatus.WAIT),f.messageActions.handleContactsForm(),f.messageActions.systemCallMessage(`${(0,c.l10n)("cw_call_to")} ${(0,_.getMaskedPhone)(e)}`,p.MessageName.CALL_MESSAGE_START),(0,h.callUserFunction)("onCallStart"),s.analytics.trackCallWidgetRequested(),(0,R.telemetry)("cw_start_call",{param1:n}),(0,I.reloadTransitionStore)()):(t.default.setCallError(),(0,R.telemetry)("cw_call_error",{param1:i.error_list.join(" ")}),i.work_time&&i.work_time.schedule&&((0,M.initDelayedCall)(i.work_time),d.Router.next(g.RouterEvent.ToCall),(0,R.telemetry)("cw_start_call",{param1:n})),a.platform.isMobileOrTablet||l.route!==g.Route.LABEL||d.Router.next(g.RouterEvent.Navigate)))))},requestCWAvailable:e=>{const t=(0,E.getApp)();b.default.get("is_blacklisted")||t.route==g.Route.HIDDEN||(t.maintenance?m.callbackDispatchers.setCallbackAvailable(!1):(L.warn("requestCWAvailable"),(0,_.callWidgetPing)(t=>{m.callbackDispatchers.setCallbackAvailable(t.ok),t.work_time&&(0,M.initDelayedCall)(t.work_time),(0,E.getCallback)().available&&"function"==typeof e&&e()},t.chatStarted)))},requestApiCWAvailable:e=>{(0,_.callWidgetPing)(t=>{if(m.callbackDispatchers.setCallbackAvailable(t.ok),(0,E.getCallback)().available&&"function"==typeof e)e({result:"ok"});else{const n=t.error_list?t.error_list.join(" "):"Call request error";e({result:"fail",reason:n})}},(0,E.getApp)().chatStarted)},pingAndOpenCall:()=>{L.info("pingAndOpenCall"),w.connectionAdapter.checkConnection(()=>{const e=(0,E.getApp)();(0,_.callWidgetPing)(e=>{m.callbackDispatchers.setCallbackAvailable(e.ok),e.ok&&(0,E.getApp)().route===g.Route.LABEL&&(m.userDispatchers.setCallHeaderText(null),[v.CallPopupStatus.ENABLED,v.CallPopupStatus.ONLY_BUTTON_CLICK].includes((0,E.getCallback)().separateForm)&&a.platform.isDesktop?d.Router.next(g.RouterEvent.ToCallPopup):(d.Router.next(g.RouterEvent.ToCall),a.platform.isDesktop&&m.transitionDispatchers.startTransition(y.ScriptName.OPEN_WIDGET)),(0,R.telemetry)("cw_api_call_open",void 0,{once:!0}))},e.chatStarted)})},startCall:(e,n,r)=>{L.log("startCall from chat",e),w.connectionAdapter.checkConnection(()=>{t.default.startCallDebounce(e.replace(/\D+/g,""),n,r)})},updateTitle:(e,t)=>{if(L.log("updateTitle",e),!window||!window.location)return void L.log("no window");if(a.platform.isMobileOrTablet&&(0,E.getApp)().route!==g.Route.LABEL)return;const n=t||(0,i.getCurrentPage)().url;L.log("updateTitle url",n),(0,D.connectionReadyForMessages)()&&w.connectionAdapter.sendEvent(new S.UrlChange(n,(0,o.setSubstrTitle)(e)))},clearCallTimeout:()=>{P&&clearTimeout(P)},startCallTimeout:()=>{t.default.clearCallTimeout(),P=setTimeout(()=>{["cw_wait","cw_connecting"].includes((0,E.getCallback)().status)&&t.default.setCallError()},24e4)},setCallError:()=>{const e=(0,T.getCallDefaultError)();m.callbackDispatchers.setCallbackStatus(v.CallStatus.ERROR),m.callbackDispatchers.setCallbackError(e),m.messagesDispatchers.addMessage({text:e,type:p.MessageType.SYSTEM,from:p.MessageInitiator.SYSTEM,body:{type:p.MessageType.CALL,name:p.MessageName.CALL_END}})},getCurrentChatStatus(){return(0,E.getApp)().chatAccepted?v.ChatState.ACCEPTED:(0,E.getApp)().chatStarted?v.ChatState.STARTED:v.ChatState.NOT_STARTED_OR_CLOSED},checkChatStarted(e){(0,E.getApp)().isOnline||(L.log("checkChatStarted for offline."),m.appDispatchers.setLastChatOpened(e),l.default.store.length||e||m.appDispatchers.setChatStarted(!1))},initSocial(){x||(C.default.startSocials(),x=!0)}};var F=N;t.default=F},54346:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.reportVisitorSentTelemetry=t.isDisableFormBot=t.isAssistantBot=t.checkTrackClientAnswer=t.callInitiateChat=t.addWebRTCCallMessage=t.addSocialTelemetry=void 0;var i=n(96367),o=r(n(14264)),a=n(55329),s=n(44145),l=n(97939),c=n(24344),u=n(16016),d=n(81152),g=n(47138),p=n(26932),f=n(25886),h=n(38042);const m=()=>{const e=(0,s.getApp)().isOnline,t=(0,s.getClient)().isIntroduced;(e||t)&&(i.analytics.trackClientInitChat(),(0,c.callUserFunction)("onClientStartChat"))};t.callInitiateChat=m;t.checkTrackClientAnswer=()=>{(0,s.getApp)().chatStarted||m();const e=o.default.getCurrentChatAgentMessages(),t=o.default.getCurrentClientMessages();t&&!t.length&&e&&e.length&&i.analytics.trackClientAnswerAgentChatRequest()};t.reportVisitorSentTelemetry=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=o.default.getChatCounts();(0,h.telemetry)("visitor_msg_sent",{param1:t>0?"old":"new",param2:(0,a.prechatUsed)()?"prechat_used":"from_input",param3:(0,s.getUserSettings)().locale,param4:e?"media":"text"})};t.isAssistantBot=()=>{const e=(0,s.getBots)();return e.length&&e[0].type===l.BotType.ASSISTANT};t.isDisableFormBot=()=>{const e=(0,s.getBots)();return(null==e?void 0:e.length)&&e[0].disable_contact_form};t.addWebRTCCallMessage=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;const n=(0,s.getChats)(),r=n[n.length?n.length-1:0],i=r&&r.joinedAgents[0],o=(0,u.generateGUID)(),a={webRTCCallStatus:g.WebRTCCallStatus.INITIAL,callId:t};e&&(a.callUrl=e);const l={from:d.MessageInitiator.AGENT,type:d.MessageType.WEB_RTC_CALL,status:d.MessageStatus.DELIVERED,from_id:i,private_id:o,body:a};p.messagesDispatchers.addMessage(l),p.callbackDispatchers.setActiveWebRTCCallMessageId(o),p.messagesDispatchers.updateWebRTCCallStatus(o,g.WebRTCCallStatus.INITIAL)};t.addSocialTelemetry=()=>{const e=(0,f.getJoints)().links;let t="";e.vkUrl&&e.fbUrl&&(t="show_vkfb"),e.vkUrl&&!e.fbUrl&&(t="show_vk"),!e.vkUrl&&e.fbUrl&&(t="show_fb"),(e.vkUrl||e.fbUrl)&&(0,h.telemetry)("chat_introduce_social",{param1:t})}},65465:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.messageActions=void 0;var i=r(n(33119)),o=r(n(92664)),a=r(n(26754)),s=n(44145),l=n(80352),c=r(n(14264)),u=r(n(79868)),d=n(90061),g=n(52028),p=n(13077),f=n(81722),h=n(18276),m=n(26932),_=r(n(10018)),v=n(69882),y=n(16016),C=n(24344),E=n(81152),b=n(97490),S=n(55329),T=n(16026),D=n(9550),w=n(42634),O=n(15787),A=n(54346),M=n(49963),I=n(6693),R=n(50188),k=n(17662),L=n(44145),P=n(5895),x=n(8717),N=n(38042),F=n(85074),j=n(88263),B=n(96367),U=n(54346);const V=(0,d.createLogger)("MessageActions");let W=function(){function e(){(0,i.default)(this,e),this.cacheOfflineMsg={},this.formTimeout=null,this.clientSendingFirstMessage=!1}return(0,o.default)(e,[{key:"systemMessage",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];V.log("systemMessage",e,t);const r={type:"text"!==t?"call":t,name:t};n||(r.unsave=!0),m.messagesDispatchers.addMessage({text:e,type:E.MessageType.SYSTEM,body:r})}},{key:"testMessage",value:function(e){m.messagesDispatchers.addMessage({text:e,type:E.MessageType.FOR_TEST,from:E.MessageInitiator.AGENT})}},{key:"botMessage",value:function(e){V.log("botMessage",e),m.messagesDispatchers.addMessage({type:E.MessageType.PREFORM,text:e,from:E.MessageInitiator.FORM})}},{key:"messageOnce",value:function(e,t,n,r){const i=this.checkIfMessageExists(e,t);if(V.log("messageOnce",i),!i)switch(e){case E.MessageType.SYSTEM:this.systemMessage(t,n,r);break;case E.MessageType.PREFORM:this.botMessage(t);break;case E.MessageType.FOR_TEST:this.testMessage(t)}}},{key:"systemMessageOnce",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.messageOnce(E.MessageType.SYSTEM,e,t,n)}},{key:"botMessageOnce",value:function(e){this.messageOnce(E.MessageType.PREFORM,e)}},{key:"checkIfMessageExists",value:function(e,t){const n=(0,s.getMessages)();if(!n.length)return!1;const r=n.find(n=>{const r=n.type===e,i=!t||n.text===t;return r&&i});return r||!1}},{key:"_sendClientMessageBase",value:async function(e){let t=e.text,n=e.privateId,r=e.repliedMsgId,i=e.buttonId;V.warn("_sendClientMessageBase",t,n);const o=n||(0,y.generateGUID)();(0,F.showDepartmentsIfPossible)()&&m.clientDispatchers.setDepartmentId(0),(0,w.markInvitationAnswered)(),(0,w.saveLastProactive)(),this.saveLastSystemMessage();const a={name:"client_message",message:t,private_id:o},l=(0,s.getApp)(),d=(0,s.getClient)();(0,k.isNumber)(d.departmentId)&&0!==d.departmentId&&(a.widget_department_id=d.departmentId),r&&(a.replied_msg_id=r),i&&(a.button_id=i);const f=!(0,U.isAssistantBot)()&&!d.isIntroduced&&!l.isOnline;if((0,x.shouldRedirectToIntroduce)())return void j.routerService.next(b.RouterEvent.ToIntroduce);let h=null;if(!n){const e={from:E.MessageInitiator.CLIENT,text:t,type:f?E.MessageType.TEMPORARY:E.MessageType.MESSAGE,private_id:o,status:E.MessageStatus.SENT};(0,S.prechatUsed)()&&(e.body={is_prechat:!0}),r&&(e.replied_message=c.default.getMessageById(r).toJSON()),(0,U.isAssistantBot)()&&(0,O.sendClientAnswerTelemetry)(e),h=c.default.push(e),m.messagesDispatchers.addMessage(e,!0)}if(1!==c.default.getClientMessages().length||this.clientSendingFirstMessage||(this.clientSendingFirstMessage=!0,(0,C.callUserFunction)("onMessageSent")),(0,v.isWixEditor)()||g.isDesignerEditor)V.warn("send message disabled.");else if(!h&&n&&(h=c.default.getMessageByPrivateId(n)),(0,S.prechatEnabled)()&&((0,S.prechatUsed)()&&(a.is_prechat_btn=!0),this.deletePrechatMsg()),3==_.default.contacts_ask&&u.default.isLoginned()&&this.initSocial(),this.startContactFormIfNeed(),(0,x.shouldRedirectToIntroduce)())j.routerService.next(b.RouterEvent.ToIntroduce);else{if((0,p.getRuleLocal)("firstMessageTime")||(0,p.setRuleLocal)("firstMessageTime",new Date),h){if(f)return void B.analytics.trackOfflineMessageSent();setTimeout(()=>{(0,P.checkForDelivered)(h.get("private_id"))},I.Timeouts.MESSAGE_SEND_ERROR_TIMEOUT)}m.appDispatchers.setChatStarted(!0),m.appDispatchers.setLastMsgTime((new Date).getTime()),m.clientDispatchers.setLastMessage(""),M.connectionAdapter.isConnected()||await M.connectionAdapter.openConnect(null,!0),(0,O.connectionReadyForMessages)()&&M.connectionAdapter.sendEvent(a),(0,A.reportVisitorSentTelemetry)(),r&&(0,N.telemetry)("visitor_reply_button_send")}}},{key:"startContactFormIfNeed",value:function(){this.needToShowContactsForm()&&!_.default.bots&&this.startFormSequence((0,s.getApp)().isOnline?"lblIntroduceRequest":"offlineIntroductionText")}},{key:"needToShowContactsForm",value:function(){if(V.warn("needToShowContactsForm"),(0,U.isAssistantBot)()||(0,A.isDisableFormBot)())return!1;const e=(0,s.getApp)(),t=(0,s.getClient)(),n=(0,s.getUserSettings)();return!t.isIntroduced&&!a.default.bot_id&&(-1!==[D.ContactsType.DURING_CHAT,D.ContactsType.DURING_CHAT_NO_CLOSE].indexOf(n.contactsAsk)||!e.isOnline)&&!c.default.getFormMessage().length&&c.default.getClientMessages().length}},{key:"checkContactsForm",value:function(){if(this.needToShowContactsForm()){const e="lblIntroduceRequest",t=this.checkIfMessageExists(E.MessageType.PREFORM,e);if(t||this.botMessage(e),t){const e=c.default.getMessageByPrivateId(t.private_id);e&&e.set("created_ts",(new Date).getTime())}this.addContactsForm()}}},{key:"addContactsForm",value:function(){V.warn("addContactsForm");const e=this.checkIfMessageExists(E.MessageType.FORM);if(e){const t=c.default.getMessageByPrivateId(e.private_id);t&&t.set("created_ts",(new Date).getTime()+1)}else m.messagesDispatchers.addMessage({type:E.MessageType.FORM,from:E.MessageInitiator.FORM}),(0,A.addSocialTelemetry)()}},{key:"saveLastSystemMessage",value:function(){const e=c.default.getLastMessage();e&&"system"==e.get("type")&&e.get("body")&&e.get("body").unsave&&e.set("body",null)}},{key:"initSocial",value:function(){if(V.log("initSocial",u.default.isLoginned()),!c.default.getMessagesByType(E.MessageType.SOCIAL).length&&!l.platform.isMobileOrTablet){const e=(0,s.getClient)();setTimeout(()=>{1!==c.default.getCurrentClientMessages().length||e.hasIntegration||(a.default.bot_id||m.messagesDispatchers.addMessage({text:(0,h.l10n)("social_online_text"),type:E.MessageType.SYSTEM,body:{type:E.MessageType.SOCIAL}}),setTimeout(()=>{this.addSocialMessage()},2e3))},2e3)}}},{key:"addSocialMessage",value:function(){const e=(0,s.getClient)();V.log("addSocialMessage"),_.default.joint&&!e.email&&!e.hasIntegration&&!l.platform.isMobileOrTablet&&!c.default.getMessagesByType(E.MessageType.SOCIAL).length&&c.default.getCurrentClientMessages().length>0&&m.messagesDispatchers.addMessage({text:"",type:E.MessageType.SOCIAL})}},{key:"getOfflineSuccessText",value:function(){return(0,h.l10n)("offlineSuccessContactsSubmit")}},{key:"offlineSystemInvite",value:function(){if(!(0,s.getApp)().maintenance&&!(0,s.getApp)().isOnline&&!(0,s.getApp)().chatStarted){const e=(0,s.getUserSettings)().offlineFormText;V.log("offlineSystemInvite",e),this.messageOnce(E.MessageType.FOR_TEST,e)}}},{key:"startFormSequence",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700;V.log("startFormSequence",e,t),(0,s.getApp)().isOnline&&a.default.bot_id&&!_.default.enable_bot_offline||((0,U.isAssistantBot)()||(0,A.isDisableFormBot)()?V.log("Disable form for assistant bot / disable contact form enabled"):(this.formTimeout&&clearTimeout(this.formTimeout),(0,s.getApp)().isOnline||this.setInputDisabled(!0),t?this.formTimeout=setTimeout(()=>{0===c.default.getFormMessage().length&&(e&&this.botMessageOnce(e),setTimeout(()=>{this.addContactsForm()},t),(0,N.telemetry)("chat_introduce",{param1:"show"}))},t):0===c.default.getFormMessage().length&&(e&&this.botMessageOnce(e),this.addContactsForm(),(0,N.telemetry)("chat_introduce",{param1:"show"}))))}},{key:"deleteUnansweredOfflineSystemInvite",value:function(){if(V.warn("deleteUnansweredOfflineSystemInvite"),!(0,L.getTemporaryMessages)().length){this.deleteOfflineSystemInvites();const e=(0,s.getClient)();(0,f.isValidEmail)()||e.isIntroduced||this.deleteOfflineTmpMessage(),m.messagesDispatchers.initMessagesStore()}}},{key:"deleteOfflineTmpMessage",value:function(){V.warn("deleteOfflineTmpMessage"),this.destroyByType(E.MessageType.FOR_TEST),this.destroyByType(E.MessageType.TEMPORARY),(0,s.getApp)().isOnline&&0==_.default.contacts_ask||(this.destroyByType(E.MessageType.PREFORM),this.destroyByType(E.MessageType.FORM))}},{key:"addPrechatMessage",value:function(e){if(!(0,S.prechatEnabled)())return;const t=(0,L.getLastMessageByType)(E.MessageType.PRECHAT);(0,F.needShowPrechats)()&&!t?this.pushPrechat(e):t&&(m.messagesDispatchers.updateMessage({privateId:t.private_id},{created_ts:(new Date).getTime()}),(0,S.updatePrechatTime)((new Date).getTime()),c.default.sort(),c.default.trigger("update"))}},{key:"pushPrechat",value:function(e){m.messagesDispatchers.addMessage({body:{unsave:!0,prechats:e||_.default.prechat||null},type:E.MessageType.PRECHAT,from:E.MessageInitiator.FORM})}},{key:"deletePrechatMsg",value:function(){const e=c.default.getMessagesByType(E.MessageType.PRECHAT);e&&e.forEach(e=>{e&&e.destroy()})}},{key:"deleteOfflineSystemInvites",value:function(){const e=c.default.getMessagesByType(E.MessageType.FOR_TEST);V.log("deleteOfflineSystemInvites",e),e.forEach(e=>{e&&e.destroy()})}},{key:"addMaintenanceMessage",value:function(){this.systemMessageOnce((0,h.l10n)("maintenanceSystemText"),"text",!1)}},{key:"deleteMaintenanceMessage",value:function(){V.log("deleteMaintenanceMessage");c.default.getSystemMessageByText((0,h.l10n)("maintenanceSystemText")).forEach(e=>{e&&e.destroy()}),c.default.trigger("update")}},{key:"destroyByType",value:function(e){c.default.getMessagesByType(e).forEach(e=>{e&&e.destroy()})}},{key:"markdownMessage",value:function(e){V.log("markdownMessage",e),m.messagesDispatchers.addMessage({type:E.MessageType.MESSAGE,text:e,from:E.MessageInitiator.AGENT,body:{customerIO:!0,unsave:!0}})}},{key:"systemCallMessage",value:function(e,t){const n=c.default.getLastMessage();(!n||n&&n.get("text")!==e)&&this.systemMessage(e.replace("<br />","\n"),t)}},{key:"sendClientMessage",value:function(e){let t=e.text,n=e.privateId,r=e.repliedMsgId,i=e.buttonId;0!==c.default.getClientMessages().length||T.EnvironmentManager.isDesignerEditor()||T.EnvironmentManager.isRegPage()?this.sendClientMessageCheck({text:t,privateId:n,repliedMsgId:r,buttonId:i}):R.WidgetStatus.getStatus(()=>{this.sendClientMessageCheck({text:t,privateId:n,repliedMsgId:r,buttonId:i})})}},{key:"sendClientMessageCheck",value:function(e){let t=e.text,n=e.privateId,r=e.repliedMsgId,i=e.buttonId;if(n&&M.connectionAdapter.setLastError(null),_.default.bots)return this._sendClientMessageBase({text:t,privateId:n,repliedMsgId:r,buttonId:i}),void(_.default.enable_bot_offline||this.handleContactsForm());(0,s.getApp)().isOnline||this.handleContactsForm(),this._sendClientMessageBase({text:t,privateId:n,repliedMsgId:r})}},{key:"offlineAck",value:function(e){V.log("offlineAck"),(0,k.isEmpty)(this.cacheOfflineMsg)&&!e||(j.routerService.getCurrentRoute()===b.Route.CHAT||l.platform.isMobileOrTablet||j.routerService.next(b.RouterEvent.ToChat),this.cacheOfflineMsg=e)}},{key:"sendNoAgentsOnline",value:function(){this.systemMessageOnce((0,h.l10n)("offlineForceOfflineMessage"))}},{key:"handleContactsForm",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(0,s.getClient)(),n=!(0,s.getApp)().isOnline&&!t.isIntroduced&&c.default.getClientMessages().length&&(c.default.getOfflineTmpMessage()||e),r=!(0,s.getApp)().isOnline&&t.isIntroduced&&!(t.email||t.phone)&&c.default.getClientMessages().length;if(n||r){V.warn("handleContactsForm");const e=c.default.getFormMessage();if(0===e.length)this.startFormSequence((0,h.l10n)("offlineIntroductionText")),(0,N.telemetry)("offline_first_message",void 0,{once:!0});else{const t=c.default.getFormIntroduceText();t.length&&m.messagesDispatchers.updateMessage({privateId:t[0].get("private_id")},{text:(0,h.l10n)("offlineIntroductionText"),created_ts:(new Date).getTime()}),e[0].set("created_ts",(new Date).getTime()+1),c.default.sort(),setTimeout(()=>{c.default.trigger("update")},200),this.setInputDisabled(!0)}}}},{key:"handleBotContactsForm",value:function(){const e=(0,s.getClient)();V.log("handleBotContactsForm"),!e.isIntroduced&&_.default.bots&&_.default.enable_bot_offline&&!_.default.disable_contact_form&&0===c.default.getFormMessage().length&&(this.startFormSequence(),(0,N.telemetry)("offline_first_message",void 0,{once:!0}))}},{key:"setInputDisabled",value:function(e){V.log("setInputDisabled",e),m.appDispatchers.setIsInputDisabled(e)}},{key:"checkMessageStatus",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.Timeouts.MESSAGE_SEND_ERROR_TIMEOUT;return V.log("checkMessageStatus"),new Promise(n=>{setTimeout(()=>{const t=(0,s.getMessageByPrivateId)(e);let r=!1;t?(t.msg_id||(m.messagesDispatchers.updateMessage({privateId:t.private_id},{status:E.MessageStatus.NOT_DELIVERED}),r=!0,n({isNotDelivered:r,isDeleted:t.status===E.MessageStatus.DELETED})),n({isNotDelivered:r,isDeleted:t.status===E.MessageStatus.DELETED})):(r=!0,n({isNotDelivered:r,isDeleted:!1}))},t)})}},{key:"setListpickerAnswer",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=c.default.getListpickerById(e);if(r){if(V.log("setListpickerAnswer",e,t,r),r.get("body.force_reply")&&r.set("body.force_reply",!1),!n){r.set("body.answer_id",parseInt(t));const e=r.get("body.keyboard")[t];r.set("body.keyboard",[e]),r.destroy()}this.setInputDisabled(!1)}}},{key:"hideEmailForm",value:function(){const e=c.default.getMessagesByType("email");e.length&&e[e.length-1].destroy()}},{key:"addMessagesOnOpen",value:function(e){this.deleteUnansweredOfflineSystemInvite(),e?this.addPrechatMessage():this.offlineSystemInvite()}}]),e}();const G=new W;t.messageActions=G},62162:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.sendUpdateProactive=t.getCurrentProactiveData=t.addProactiveAgentToChat=t.addProactiveAgent=void 0;var i=n(81152),o=n(16016),a=n(26932),s=n(44145),l=n(13077),c=n(90061),u=r(n(14762)),d=n(49963),g=n(40694);const p=(0,c.createLogger)("proactiveHelpers"),f=(e,t)=>{e.isBot?a.botsDispatchers.addBot({avatarUrl:e.avatarUrl,id:e.id,name:e.name,title:e.title,isBot:!0}):a.agentsDispatchers.addAgent(e),t&&h(e)};t.addProactiveAgent=f;const h=e=>{e.isBot?a.chatsDispatchers.setJoinedBots([e.id]):a.chatsDispatchers.addJoinedAgent(e.id)};t.addProactiveAgentToChat=h;t.getCurrentProactiveData=(e,t,n,r,a,s)=>{const l=(0,g.agentToReduxFormat)(s);return f(l,!1),u.default.updateAgentList([s]),{text:e,name:t,createdTs:(new Date).getTime(),privateId:(0,o.generateGUID)(),status:i.MessageStatus.EMPTY,agentId:l.isBot?null:l.id,botId:l.isBot?l.id:null,isMarkdown:!!n,prechats:r,campaignId:a}};t.sendUpdateProactive=e=>{const t=(0,s.getClient)().sessionId;if(!t)return void p.log("updateProactive no session.");const n={name:"update_client",jv_sess_id:t};e&&(n.proactive_rule={invitation_text:e.text,private_id:e.privateId,created_ts:Math.floor(e.createdTs/1e3)},e.isMarkdown&&(n.proactive_rule.is_markdown=!0),e.agentId&&(n.proactive_rule.agent_id=e.agentId),e.botId&&(n.proactive_rule.bot_id=e.botId));const r=JSON.stringify(n);(0,l.getRuleLocal)("lastUpdateProactiveEvent")!=r&&((0,l.setRuleLocal)("lastUpdateProactiveEvent",r),p.log("sendUpdateProactive",n),n.proactive_rule&&d.connectionAdapter.sendEventIfConnected(n))}},92443:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(26754)),o=r(n(14264)),a=r(n(91275)),s=n(80352),l=n(21476),c=n(97490),u=n(65465),d=n(81152),g=n(26932),p=n(50402),f=n(44145),h=n(47138),m=n(44733),_=n(13077),v=n(90061),y=n(96367),C=n(55329),E=n(42359),b=n(75998),S=n(91920),T=n(42634),D=n(38042),w=n(25467),O=n(10396),A=n(62162);const M=(0,v.createLogger)("ruleActions"),I=()=>{(0,f.getApp)().isOnline&&u.messageActions.deleteUnansweredOfflineSystemInvite(),l.Router.getCurrentRoute()!==c.Route.LABEL||s.platform.isMobileOrTablet||(l.Router.next(c.RouterEvent.ToChat),g.transitionDispatchers.startTransition(p.ScriptName.OPEN_WIDGET),(0,T.readProactive)())},R=e=>{m.StorageProvider.set("hide_reported",e)};var k={proactive:e=>{let t=e.message,n=e.agentInfo,r=e.name,o=e.isMarkdown,a=e.prechats,s=e.campaignId,l=e.conditionList,c=e.extra;Object.assign(i.default,n);const u=(0,A.getCurrentProactiveData)(t,r,o,a,s,n);g.proactiveDispatchers.addProactive(u);const p={is_markdown:o,unsave:!0,agent_info:n};s&&(p.campaign_id=s),c&&(p.extra=c);const f={from:d.MessageInitiator.AGENT,from_id:n.agent_id,status:d.MessageStatus.READ,private_id:u.privateId,text:u.text,created_ts:u.createdTs,type:d.MessageType.PROACTIVE,body:p};n.bot_id&&(f.from_id=n.bot_id,f.from=d.MessageType.BOT),g.messagesDispatchers.addMessage(f),g.userDispatchers.setCallHeaderText(null),I(),(0,A.sendUpdateProactive)(u),(0,C.updatePrechatTime)(u.createdTs),R(!1),s&&E.StatsManager.send({campaignId:s},"shown");const h=s?"campaign"+s:(0,O.isDefaultProactive)(r)?"default":"custom";(0,D.telemetry)("chat_invite",{param1:h,param2:(0,w.getSecondsDiff)((0,_.getRuleLocal)("pageEnterTime")),param3:(0,S.hasCustomLabel)()?"customlabel":"label",param4:l})},showCallForm:(e,t)=>{a.default.requestCWAvailable(()=>{if(M.log("requestCWAvailable: ",(0,f.getCallback)().available),(0,D.telemetry)("cwp_show_on_proactive"),!s.platform.isMobileOrTablet&&[h.CallPopupStatus.ENABLED,h.CallPopupStatus.ONLY_TRIGGERS].includes((0,f.getCallback)().separateForm))return g.userDispatchers.setCallHeaderText(e),l.Router.next(c.RouterEvent.ToCallPopup),"function"==typeof t&&t(),void R(!1);(0,f.getCallback)().available&&(0,f.getApp)().route==c.Route.LABEL&&(g.userDispatchers.setCallHeaderText(e),!s.platform.isMobileOrTablet&&l.Router.next(c.RouterEvent.ToCall),g.transitionDispatchers.startTransition(p.ScriptName.OPEN_WIDGET),"function"==typeof t&&t(),R(!1))})},systemMessage:e=>{if(i.default.bot_id)return;const t=o.default.getLastMessage();t&&t.get("type")===d.MessageType.SYSTEM&&t.get("text")===e&&t.destroy();const n={type:d.MessageType.SYSTEM,text:e};(0,f.getApp)().chatStarted||(n.body={unsave:!0}),g.messagesDispatchers.addMessage(n),I(),R(!1)},systemMessageEmail:e=>{g.messagesDispatchers.addMessage({type:"email",text:e,body:{unsave:!0}}),I(),y.analytics.trackSystemMessageEmailShown(),R(!1)},openOffline:()=>{u.messageActions.offlineSystemInvite(),I(),R(!1),(0,D.telemetry)("offline_invite")},showPopup:e=>{M.log("ruleActions: showCampaignPopup",e),b.campaignPopupDispatch.updateCampaignPopup(e),b.campaignPopupDispatch.setDisplay(!0)}};t.default=k},50350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendUrlChange=void 0;var r=n(97490),i=n(80352),o=n(44145),a=n(69882),s=n(41504),l=n(16016),c=n(49963),u=n(90061),d=n(15787);const g=(0,u.createLogger)("sendUrlChange");t.sendUrlChange=(e,t)=>{if(!window||!window.location)return void g.log("no window");if(i.platform.isMobileOrTablet&&(0,o.getApp)().route!==r.Route.LABEL)return;const n=t||(0,a.getCurrentPage)().url;g.log("updateTitle url",n),(0,d.connectionReadyForMessages)()&&c.connectionAdapter.sendEvent(new s.UrlChange(n,(0,l.setSubstrTitle)(e)))}},64123:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.setCallbackStatus=t.getStarupTime=t.enableRecaptchaAntispam=void 0;var i=n(90061),o=n(26932),a=n(65465),s=n(13077),l=n(18276),c=r(n(5735));const u=(0,i.createLogger)("Action utils",{style:"color: grey;"});t.setCallbackStatus=e=>{u.log("setCallbackStatus",e),o.callbackDispatchers.setCallbackStatus(!(null==e||!e.status)&&e.status)};t.getStarupTime=()=>(((new Date).getTime()-(0,s.getRuleLocal)("sendStartupTime")||0)/1e3).toFixed(1);t.enableRecaptchaAntispam=()=>{u.log("Enable antispam"),o.callbackDispatchers.setCallbackAvailable(!1),a.messageActions.systemMessageOnce((0,l.l10n)("maintenanceSystemText"),"text",!1),o.appDispatchers.setIsInputDisabled(!0),c.default.allRulesCancel()}},42908:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.api=void 0;var i=r(n(61125)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=W(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(10018)),a=r(n(95003)),s=r(n(27104)),l=n(96367),c=r(n(91275)),u=n(21476),d=n(65465),g=r(n(86961)),p=r(n(14264)),f=r(n(98960)),h=n(31984),m=n(26932),_=n(50402),v=n(13077),y=r(n(73687)),C=n(97490),E=n(78692),b=r(n(5735)),S=n(41504),T=n(84727),D=n(16026),w=n(44145),O=n(90061),A=n(49963),M=n(90970),I=n(91920),R=n(17662),k=n(32915),L=n(34930),P=n(80352),x=n(12437),N=n(25886),F=n(38042),j=n(75998),B=n(15787),U=n(83907),V=n(50350);function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const $=(0,O.createLogger)("api",{style:"color: grey"}),z={open:e=>{const t=(0,w.getApp)();if((0,F.telemetry)("api_open",{param1:e,param2:(0,I.hasCustomLabel)()},{probability:"medium"}),y.default.get("is_blacklisted"))return{result:"fail"};P.platform.isMobileOrTablet&&(0,I.showCustomLabel)(!0);const n=(0,R.isObject)(e);return n&&"call"===e.start?o.default.callback_settings.time?t.route===C.Route.CHAT?(m.appDispatchers.setAppRoute(C.Route.CHAT_CALL),{result:"ok",opened:!0}):(t.route===C.Route.CALL||(b.default.allRulesCancel(),c.default.pingAndOpenCall()),{result:"ok"}):($.info("Callback is disabled."),{result:"fail",reason:"Callback is disabled"}):(m.appDispatchers.setAppIsFocused(!0),n&&"menu"===e.start?P.platform.isMobile&&(0,N.getJoints)().count>0?(m.appDispatchers.setChatOpenByClient(!1),j.pageStoreDispatch.setShowMobileMenu(!0)):(m.transitionDispatchers.startTransition(_.ScriptName.OPEN_WIDGET),u.Router.next(C.RouterEvent.ApiOpen)):(P.platform.isDesktop&&m.transitionDispatchers.startTransition(_.ScriptName.OPEN_WIDGET),u.Router.next(C.RouterEvent.ApiOpen)),d.messageActions.offlineSystemInvite(),d.messageActions.addPrechatMessage(),(0,I.hasCustomLabel)()&&P.platform.isMobileOrTablet&&((0,w.getApp)().isOnline?l.analytics.trackChatOpenedByClick():l.analytics.trackOfflineFormOpenedByClick()),{result:"ok"})},close:()=>{if((0,F.telemetry)("api_close",void 0,{probability:"medium"}),y.default.get("is_blacklisted"))return{result:"fail"};if((0,w.getPageStore)().showMobileMenu&&j.pageStoreDispatch.setShowMobileMenu(!1),[C.Route.LABEL,C.Route.CHAT_MIN].indexOf((0,w.getApp)().route)>=0)return{result:"ok",closed:!0};if((0,L.closeWidget)(),P.platform.isMobileOrTablet)u.Router.next(C.RouterEvent.CloseWindow);else{const e=(0,w.getApp)().chatAccepted?_.ScriptName.MINIMIZE_WIDGET:_.ScriptName.CLOSE_WIDGET;m.transitionDispatchers.startTransition(e)}return{result:"ok"}},getContactInfo:()=>{if(!(0,k.isApiEnabled)())return k.paidRequired;(0,F.telemetry)("api_getcontactinfo",void 0,{probability:"one"});const e=(0,w.getClient)();return{client_name:e.name,email:e.email,phone:e.phone,description:e.description}},getVisitorNumber:e=>{if(!(0,k.isApiEnabled)())return k.paidRequired;$.log("getVisitorNumber",e);const t=(0,w.getClient)().clientId;if(t&&t.indexOf(".")>0&&(0,R.isFunction)(e))return e(null,t.split(".")[0]);(0,R.isFunction)(e)?((0,F.telemetry)("api_getvisitornumber",void 0,{probability:"one"}),g.default.getVisitorNumber((n,r)=>{if($.log(n,r),n)$.log("Error fetch visitor number.");else if((0,R.isObject)(r.data)&&r.data.client_id&&r.data.result){const n=r.data.client_id;t||(m.clientDispatchers.updateClient({clientId:n}),m.clientDispatchers.setIsExist(!0)),(0,R.isFunction)(e)&&(0,R.isString)(n)&&e(null,n.split(".")[0])}else $.error("Error fetching visitor number")})):$.error("Please provide callback function in jivo_api.getVisitorNumber(callback)")},setUserToken:e=>{if(!(0,k.isApiEnabled)())return k.paidRequired;if($.log("setUserToken",e),(0,F.telemetry)("api_setusertoken",void 0,{probability:"medium"}),"string"==typeof e||e instanceof String){const t=(0,w.getClient)(),n=e!==t.userToken;if(n&&m.clientDispatchers.setUserToken(e),n&&A.connectionAdapter.isConnected())A.connectionAdapter.sendEvent(new S.UpdateUserToken(e)),$.log(`WIDGET: Token updated, token: ${e}`);else{$.log("WIDGET: Token set, but was not sent to the server");const n=(0,w.getFeatures)().userToken&&e&&(!t.clientId||!t.sessionId);!A.connectionAdapter.isConnected()&&n&&A.connectionAdapter.openConnect(!1,!0)}return!o.default.enable_api_invitation&&D.EnvironmentManager.isProduction()||(0,w.getApp)().chatStarted||E.ApiInvitationsManager.initialize(e),{result:"ok",token:e||!1}}return $.error("WIDGET: Bad token. The token must be type of string"),{result:"fail",token:e||!1}},setCustomData:e=>{var t;if(!((0,k.isApiEnabled)()||null!==(t=o.default.modules)&&void 0!==t&&t.jivo_marketing))return k.paidRequired;if((0,w.getFeatures)().disableCustomData)return delete k.paidRequired.reason,$.info("Set custom data is disabled."),k.paidRequired;(0,F.telemetry)("api_setcustomdata",void 0,{probability:"one"});const n=(0,w.getSystemSettings)().apiDomain,r=(0,T.validateCustomData)(e,n),i=(0,w.getClient)().customData;return(0,R.isArray)(r)?i&&(0,M.isArrayEqual)(r,(0,w.getClient)().customData)?{result:"fail",reason:"Cannot send the same data"}:((0,B.checkCustomData)(r),{result:"ok"}):($.error("Invalid custom data.",r),{result:"fail",reason:r})},sendMessage:e=>{if(!(0,k.isApiEnabled)())return k.paidRequired;if("string"!=typeof e||"[object Object]"===Object.prototype.toString.call(e))return{result:"fail",error:"First argument must be text to send message."};const t=p.default.getClientMessages();return t.length&&e==t[t.length-1].get("text")?{result:"fail",error:"You cannot send 2 messages in a row"}:(d.messageActions.sendClientMessage({text:e}),(0,F.telemetry)("api_sendmessage",void 0,{once:!0}),{result:"ok"})},setContactInfo:e=>{if(!(0,k.isApiEnabled)())return k.paidRequired;if((0,F.telemetry)("api_setcontactinfo",void 0,{probability:"one"}),e&&(0,R.isObject)(e)){$.log("setContactInfo",e);const t={};let n=!1,r="";for(const i in e)if({}.hasOwnProperty.call(e,i)){const o=e[i];let a=i;"name"==a&&(a="client_name"),o&&f.default[a]&&f.default[a](o)?(t[i]=o,n=!0):($.error(a+" not valid."),r+=a+" not valid.")}if(n){return(0,B.sendApiIntroduce)(t)?{result:"ok",data:t}:{result:"false",data:t,error:"Cant send same client contacts twice."}}return(0,F.telemetry)("api_setcontactinfo_bad_data",void 0,{probability:"medium"}),$.error("setContactInfo bad data",e),{result:"fail",error:r}}},showProactiveInvitation:(e,t,n)=>{const r=(0,w.getClient)();(0,v.isYandexMarketClient)(r.utm)?$.log("Disabled for YM clients"):(0,k.isApiEnabled)()?((0,F.telemetry)("api_showproactiveinvitation",void 0,{once:!0}),b.default.showProactive(e,t?+t:void 0,"jivo_api.showProactiveInvitation",n),b.default.cancelRule(U.RuleTypes.PROACTIVE)):$.log("Proactive disabled for free users.")},highlightCobrowse:(e,t,n)=>{if(!e)return!1},sendOfflineMessage:e=>{if(!(0,k.isApiEnabled)())return k.paidRequired;if((0,F.telemetry)("api_sendofflinemessage",void 0,{once:!0}),$.log("sendOfflineMessage",e),(0,w.getApp)().isOnline)return{result:"fail",error:"Error send offline message when chat is online."};if((0,R.isObject)(e)){$.log("sendOfflineMessage",e);let t="";for(const n in e)if({}.hasOwnProperty.call(e,n)){const r=e[n];let i=n;"name"==i&&(i="client_name"),r&&f.default[i]&&f.default[i](r)||($.error(i+" not valid."),t+=i+" not valid. ")}if(""==t){return(0,B.sendApiIntroduce)(e)?{result:"ok"}:{result:"fail",error:"Cant send same message and contacts twice."}}return $.warn("sendOfflineMessage bad data",e),(0,F.telemetry)("api_sendofflinemessage_bad_data",void 0,{once:!0}),{result:"fail",error:t}}return{result:"fail",error:"Invalid params for offline message"}},setRules:e=>(0,k.isApiEnabled)()?((0,F.telemetry)("api_setrules",void 0,{once:!0}),(0,R.isArray)(e)?(b.default.allRulesCancel(),b.default.rules=[],(0,o.setConfigParam)("rules",e),b.default.init(),{result:"ok"}):($.error("Invalid type of rules, must be object."),{result:"fail"})):k.paidRequired,chatMode:()=>(0,k.isApiEnabled)()?((0,F.telemetry)("api_chatmode",void 0,{probability:"one"}),o.default.chat_mode):k.paidRequired,setWidgetColor:(e,t)=>{(0,F.telemetry)("api_setwidgetcolor",void 0,{once:!0});const n=s.default.isLightColor(e)?"dark":"light";m.userDispatchers.setWidgetColor(e),m.userDispatchers.setWidgetColor2(t||null),m.userDispatchers.setWidgetFontColor(n)},sendPageTitle:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,k.isApiEnabled)()?e&&"string"==typeof e?((0,V.sendUrlChange)(e,n),t&&(0,F.telemetry)("api_sendpagetitle",void 0,{once:!0}),{result:"ok"}):{result:"fail",reason:"Invalid title"}:k.paidRequired},isCallbackEnabled:e=>{if(!(0,k.isApiEnabled)())return k.paidRequired;"function"==typeof e&&((0,F.telemetry)("api_iscallbackenabled",void 0,{probability:"medium"}),(0,R.isEmpty)(o.default.callback_settings)?e({result:"fail",reason:"Callback disabled"}):c.default.requestApiCWAvailable(e))},startCall:e=>{if(!(0,k.isApiEnabled)())return k.paidRequired;const t=(0,w.getCallback)();if($.log("api startCall",e),!t.available||(0,R.isEmpty)(o.default.callback_settings))return{result:"fail",reason:"Callback disabled"};if(e){const t=(0,h.getPhoneNumberInfo)(e);return t?(e="+"+t.number,u.Router.next(C.RouterEvent.ToCall),c.default.startCall(e,"from_api"),{result:"ok"}):{result:"fail",reason:"Invalid phone"}}return{result:"fail",reason:"Invalid phone"}},getUtm:()=>{if(!(0,k.isApiEnabled)())return k.paidRequired;(0,F.telemetry)("api_getutm",void 0,{probability:"medium"});const e=(0,w.getClient)().utm;return{term:e.term||e.keyword||null,campaign:e.campaign||null,content:e.content||null,medium:e.medium||null,source:e.source||null}},getUnreadMessagesCount:()=>{const e=(0,w.getUnreadMessages)();$.log("getUnreadMessagesCount",e);const t=(0,w.getLastChatId)();return e.filter(e=>e.chat_id===t).length},clearHistory:()=>{if(!(0,k.isApiEnabled)())return k.paidRequired;m.clientDispatchers.resetClient(),a.default.reset(),p.default.destroy(),$.log("Client info deleted, history cleared.")},showCampaignPopup:(e,t,n,r)=>{if(!D.EnvironmentManager.isTesting()&&!D.EnvironmentManager.isApp())return;const i=o.default.campaigns.find(t=>t.campaign_id===e);i&&b.default.showCampaignPopup(H(H({},i.content.popup_settings),{},{campaignId:e,answerData:t,onSubmitActionCallback:n}),r)},setTelegramLink:e=>(0,k.setJointLink)(e,"tg"),setWhatsAppLink:e=>(0,k.setJointLink)(e,"wa"),setVKLink:e=>(0,k.setJointLink)(e,"vk")};t.api=z,o.default.enable_client_attributes&&(z.setClientAttributes=x.setClientAttributes),D.EnvironmentManager.isProduction()&&1!==o.default.site_id||(z.setExternalData=e=>{m.clientDispatchers.setExternalData(e)})},85948:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.addSyncExclude=void 0;var i=r(n(61125)),o=n(44733),a=n(35333),s=n(47361),l=n(90061),c=n(17662),u=n(32183),d=n(80352);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}const p=n(89766).EventEmitter,f=(0,l.createLogger)("createStore"),h=["pa_id"],m=["widget_color","widget_color2","widget_font_color","show_container","started"];function _(e,t){for(var n in t)if(t[n]&&t[n].constructor&&t[n].constructor===Object)e[n]=e[n]||{},_(e[n],t[n]);else{var r,i,o,a,s,l,c;if(null!==(r=window)&&void 0!==r&&null!==(i=r.parent)&&void 0!==i&&i.window&&null!==(o=window)&&void 0!==o&&null!==(a=o.parent)&&void 0!==a&&null!==(s=a.window)&&void 0!==s&&s.isWixPreview)return!0;"route"===n&&d.platform.isMobileOrTablet||"cobrowser-iframe"===(null===(l=window)||void 0===l||null===(c=l.parent)||void 0===c?void 0:c.name)||-1!==m.indexOf(n)||(e[n]=t[n])}return e}t.addSyncExclude=e=>{h.push(e),m.push(e)};var v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("JivoStore"==e.__type)return e;var n=JSON.stringify(e),r=d.platform.supports.localStorage,l=new p,v=(0,s.debounce)(()=>{l.emit("update",e)},10),y=()=>{const n=t=>{let n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t);return t?_(n,e):n=e,n};if(r){const e=n(o.StorageProvider.get(t));o.StorageProvider.set(t,e)}},C=e=>{(0,a.each)(e,(n,r)=>{"function"!=typeof n&&(n&&(0,c.isObject)(n)?C(n):((e,n)=>{var r=e[n];Object.defineProperty(e,n,{set:e=>{if(r!=e&&(r=e,v(),t)){if(!(0,u.pageVisible)()&&h.indexOf(n)>-1)return;if(m.indexOf(n)>-1)return;if(window.parent&&"cobrowser-iframe"===window.parent.name)return;y()}},get:()=>r})})(e,r))})},E=()=>{if(t)try{const n=o.StorageProvider.get(t);_(e,n)}catch(e){f.error(e)}};return C(e),E(),Object.defineProperty(e,"__type",{enumerable:!1,configurable:!1,writable:!1,value:"JivoStore"}),Object.defineProperty(e,"addListener",{enumerable:!1,configurable:!1,writable:!1,value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update",t=arguments.length>1?arguments[1]:void 0;return"function"==typeof e&&(t=e,e="update"),l.addListener(e,t)}}),Object.defineProperty(e,"dispatch",{enumerable:!1,configurable:!1,writable:!1,value:()=>{v()}}),Object.defineProperty(e,"reload",{enumerable:!1,configurable:!1,writable:!1,value:()=>{E()}}),Object.defineProperty(e,"reset",{enumerable:!1,configurable:!1,writable:!1,value:()=>{e=JSON.parse(n),C(e),y(),v()}}),e};t.default=v},33180:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.cssLoader=void 0;var i=r(n(10018)),o=r(n(48553));(0,n(18276).setDefaultLocale)(i.default.locale),window.parent.__jivoBundleInit&&window.parent.__jivoBundleInit(window);const a=(()=>{let e=window.parent.location.protocol;return-1===["http","https","http:","https:"].indexOf(e)&&(e="https:"),e})()+i.default.base_url+"/css/fa15b64/widget.css",s=new o.default(window.parent.document,a);t.cssLoader=s},49862:function(e,t,n){"use strict";t.l=function(e,t){const n=(0,r.useRef)(!1);(0,r.useEffect)(()=>{n.current?e():n.current=!0},t)};var r=n(98661)},88319:function(e,t){"use strict";t.Z=void 0,function(e){var t={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},n={1e3:"Normal Closure",1001:"Going away",1002:"Protocol error",1003:"Unsupported data",1004:"reserved",1005:null,1006:null,1007:"Invalid frame payload data",1008:"Policy violation",1009:"Message Too Big",1010:"Mandatory Ext.",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1014:"Unassigned",1015:"TLS handshake",3001:"Attempts have Ended",3333:"Spam detected",4e3:"Application Closure",4999:"Last Code"},r=function(){},i=function(){throw new Error("Not implemented")},o=Date,a=function(e,t){this.name="NetworkError",this.code=t|0,this.message=String(e)};a.prototype.toString=function(){return this.name+":"+(this.code|0||"")+" "+this.message};var s,l=function(e,t,n){if(e&&"function"==typeof e[t])try{e[t](n)}catch(n){if("onerror"===String(t))throw n;try{l(e,"onerror",n)}catch(e){}}},c={};if(window&&("function"==typeof window.WebSocket||"object"==typeof window.WebSocket)){var u=window.WebSocket;for(var d in s=function(e,r){var i,o,a,s,c=this;this.url=e,this.readyState=t.CONNECTING;var d=function(){if(i){i.onclose=null,i.onerror=null,i.onmessage=null,i.onopen=null;try{i.close()}catch(e){}}c.readyState=t.CLOSED,l(c,"onclose",{wasClean:!1,code:1006,reason:"Timeout"})},g=function(){try{this.send(".")}catch(e){}s=setTimeout(d,1e4)}.bind(this);this.close=function(e,n){if(clearTimeout(a),this.readyState===t.CONNECTING)this.readyState=t.CLOSING,clearTimeout(o),o=setTimeout(function(){c.readyState=t.CLOSED,l(c,"onclose",{wasClean:!1,code:1006,reason:""})},20);else if(this.readyState===t.OPEN){this.readyState=t.CLOSING;try{n?i.close(e,n):e?i.close(e):i.close(1e3)}catch(e){l(c,"onerror",e),l(c,"onclose",{wasClean:!1,code:1006,reason:""})}}},this.send=function(e){if(!i||i.OPEN!==i.readyState)throw new Error("Socket is not open");clearTimeout(a),clearTimeout(s),i.send(e),a=setTimeout(g,2e4)},o=setTimeout(function(){try{(i=r?new u(e,r):new u(e)).onclose=function(e){if(clearTimeout(a),clearTimeout(o),c.readyState=t.CLOSED,/MSIE|Trident|Edge|Lumia/.test(window.navigator.userAgent)&&e.wasClean&&(1e3===e.code||1005===e.code)&&e.reason)for(var r in n)if(e.reason===n[r])return void l(c,"onclose",{wasClean:!0,code:r|0,reason:e.reason});l(c,"onclose",e)},i.onerror=function(e){e.name||e.message||(e.name="WebSocketError",e.message="Unknown"),l(c,"onerror",e)},i.onmessage=function(e){clearTimeout(s),e&&e.data&&1<e.data.length&&l(c,"onmessage",e)},i.onopen=function(e){clearTimeout(a),a=setTimeout(g,2e4),c.readyState=t.OPEN,c.protocol=i.protocol,l(c,"onopen",e)}}catch(e){l(c,"onerror",e)}},20)},t)s.prototype[d]=t[d]}if(window&&window.navigator){var g;if(/iP(hone|od|ad)/.test(window.navigator.platform))(g=/OS (\d+)_(\d+)_?(\d+)?/.exec(window.navigator.appVersion))&&6>g[1]&&(s=i);if(/apple/i.test(window.navigator.vendor))(g=/\bVersion\/(\d+)\./.exec(window.navigator.userAgent))&&6>g[1]&&(s=i)}c.ws=c.wss=s;var p=function(){var e,t,n,i,o=window.document.getElementsByTagName("head")[0],a=this;this.withCredentials=!1,this.readyState=0,this.responseText="",this.status=0,this.statusText="",this.timeout=void 0;var s=function(){if(e){clearTimeout(i),e.onreadystatechange=r,e.onload=r,e.onerror=r,e.parentNode.removeChild(e),e=null,t=null,n=null,a.responseText="",a.status=0,a.statusText="",a.timeout=void 0,a.withCredentials=!1;try{delete window[n]}catch(e){window[n]=void 0}l(a,"onloadend")}},c=function(){e&&(l(a,"onerror"),s())};this.open=function(e,r){!t&&r&&(a.readyState=1,t=String(r).replace(/#.*$/,""),n="_jivo"+p._count++,t+=(-1===t.indexOf("?")?"?":"&")+"cb="+n)},this.send=function(r){t&&(r=r?"&msg="+encodeURIComponent(r):"",window[n]=function(e){a.readyState=4,p._statusBody.test(e)?(a.status=p._statusBody.exec(e)[1]|0,a.statusText="",a.responseText="",l(a,"onerror"),s()):(a.status=200,a.statusText="OK",a.responseText=e,l(a,"onload"),s())},(e=document.createElement("script")).charset="utf-8",e.type="text/javascript",e.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||setTimeout(c,0)},e.readyState||(e.onload=e.onerror=c),e.src=t+r,o.appendChild(e),a.timeout<<=0,0<a.timeout&&(i=setTimeout(function(){l(a,"ontimeout"),s()},a.timeout)))},this.abort=function(){l(a,"onabort"),s()},this.setRequestHeader=r};p._statusBody=/^(\d{3})\n$/m,p._count=0,p.prototype={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var f=function(){if(f._stack.length)return f._stack.pop();var e;try{"withCredentials"in(e=new XMLHttpRequest)||(e=null)}catch(e){}return(e=e||new p).release=function(){f._stack.push(e)},e};f._stack=[];var h=function(e){for(var t,n,i,o=3e3,s=r,l=1;l<arguments.length;l++)if(arguments[l])switch(typeof arguments[l]){case"object":n=arguments[l];break;case"string":i=arguments[l];break;case"number":o=arguments[l];break;case"function":s=arguments[l]}if("string"!=typeof e)return s(TypeError("Bad URL")),null;try{(t=f()).open(i?"POST":"GET",e,!0),i&&t.setRequestHeader("Content-Type","text/plain")}catch(e){return s(e),t.release(),null}if(0<(o<<=0))try{t.timeout=o}catch(e){}if(t.onloadend=function(){t.release()},t.onload=function(){200===t.status?s(null,t.responseText):s(new a(t.statusText,t.status))},t.onabort=function(){s(new a("Aborted"))},t.ontimeout=function(){s(new a("Timeout"))},t.onerror=function(){s(new a("Unknown"))},n)for(var l in n)t.setRequestHeader(l,n[l]);try{t.send(i||null)}catch(e){return s(e),t.release(),null}return function(){s=r}};e.request=h;var m=/([^\n]*)\n/gm,_=function(e,i){var a=/^([^\?]*)(?:\?+(.*))?$/.exec(e);e=a[1]||"/";var s=a[2]?"&"+a[2]:"";/[^\/]$/.test(e)&&(e+="/");var c,u,d,g,p=this,f=r,_="open",v=2e4,y=0;this.readyState=t.CONNECTING;var C=function(e,r,i){t.CLOSED!==p.readyState&&(clearTimeout(d),p.readyState=t.CLOSED,l(p,"onclose",{wasClean:!!i,code:r||1006,reason:n[r]||e||""}))},E=function(t,n){f(),f=h(e+_+(t?"/"+t:"")+"?"+(new o).getTime()+s,v,n,b)},b=function(e,n){var r=function(e){if("string"!=typeof e)return e;var t,n,r={};for(m.lastIndex=0;null!==(t=m.exec(e));){if(!t[1]){r.message=e.substring(t.index+1);break}(n=(t=t[1].split(/\t/))[0])&&(t.shift(),r[n]=t)}return r}(n);switch(p.readyState){case t.CONNECTING:if(e){l(p,"onerror",e),C("Open error");break}if(!(r&&r.open&&r.open[0])){C("No response in state open");break}_=r.open[0],p.protocol=r.open[1],p.readyState=t.OPEN,l(p,"onopen");case t.OPEN:var i="";if(r){if(r.timeout&&0<r.timeout[0]&&(v=Math.ceil(r.timeout[0])),r.etag&&r.etag[0]){var o=r.etag[0]|0,a=o-y;y=o,0<a&&(1!==a&&l(p,"onerror",new Error("Missing "+a+" etags")),r.message&&setTimeout(function(){l(p,"onmessage",{data:r.message})},20)),i="etag/"+o}r.close&&(p.readyState=t.CLOSING,i="close/"+(r.close[0]||"")+"/"+(r.close[1]||""))}else if(e&&204!==e.code&&(l(p,"onerror",e),!e.code||404===e.code))return void C();E(i);break;case t.CLOSING:if(r&&r.close){var s=r.close[0]|0;C(r.close[1],s,!c||c===s)}else C(u,c,!1)}};this.close=function(e,n){t.CONNECTING===this.readyState?(clearTimeout(g),f(),d=setTimeout(C,20)):t.OPEN===this.readyState&&(c=e|0||1e3,u=n||"",this.readyState=t.CLOSING,E("close/"+c+"/"+u))},this.send=function(e){if(t.OPEN!==this.readyState)throw new Error("Socket is not open");if(!e||"string"!=typeof e)throw new TypeError("Bad data type");E("send",e)};var S=[];if(i)if("string"==typeof i)S.push(i);else if(i instanceof Array)for(var T=0;T<i.length;T++)S.push(String(i[T]));g=setTimeout(function(){E(S.join("/"))},20)};for(var d in t)_.prototype[d]=t[d];c.http=c.https=_;var v,y=/^\s*(?:([^\;\/\?\:\@\&\=\+\$\,\#\n\r\s]{1,8})\:\/\/)([^\s\n\r]+)\s*$/,C=function(e,t){if(t||((t=[]).index=0,t.add=function(e){t.unshift({value:String(e),health:0}),t.index=0}),e)if("string"==typeof e||e instanceof String)t.push({value:String(e),health:0});else if(0<e.length)for(var n=0;n<e.length;n++)C(e[n],t);return t},E=function(e,t,n){var r=e[t]=n;return function(n){return arguments.length&&(r=e[t]=n),r}},b=(v=0,setInterval(function(){0<v&&(0<=(v-=2)||(v=0))},1e3),function(){return 60<++v}),S=function(e){var i=C(e),o=null,a=r,s={connecting:r,open:r,close:r,error:r,message:r},l=E(this,"state",t.CLOSED),u=E(this,"url",void 0),d=E(this,"health",void 0),g=function(e,t){clearTimeout(g.value),e&&(g.value=setTimeout(e,t))},p=function(e){if(o){o.onclose=null,o.onerror=null,o.onmessage=null,o.onopen=null;try{e?o.close(e):o.close()}catch(e){}}},f=function(e){p(),o=null,a(),a=r,g(),l(t.CLOSED);try{s.close(e)}catch(e){_(e)}u(void 0),d(void 0)},h=function(){if(b()){if(a(),a=r,o){p(3333);for(var e=0;e<i.length;e++)i[e].health=-1}return!0}return!1},m=function(e){if(a(),a=r,g(),e||(e={wasClean:!1,code:1005,reason:"No Status Rcvd"}),e.wasClean||d(--i[i.index].health),1012===e.code){l(t.CONNECTING);try{s.connecting(i[i.index].health)}finally{return g(D,1e4+(2e4*Math.random()|0))}}else 1013===e.code||1005===e.code||1e3===e.code||4e3<=e.code&&5e3>e.code?f(e):D()},_=function(e){try{s.error(e)}catch(e){throw e}},v=function(e){if(t.OPEN===l())try{s.message(e.data)}catch(e){_(e)}},S=function(){var e,n,r,o,c;g(),l(t.OPEN),e=i[i.index],n=d,o=1e3,c=function(){e&&0<=e.health&&(n(++e.health),o<<=1,r=setTimeout(c,o))},r=setTimeout(c,o),a=function(){clearTimeout(r)};try{s.open()}catch(e){_(e)}},T=function(){var e=i[i.index];try{o=function(e){if("string"!=typeof e)throw new TypeError("Bad URL type");var t=y.exec(e);if(null===t)throw new Error("Bad URL");if(!c[t[1]])throw new Error("Not supported URL scheme: "+t[1]);return new c[t[1]](e)}(e.value)}catch(t){return e.health=-1,++i.index,_(t),D()}o.onclose=m,o.onerror=_,o.onmessage=v,o.onopen=S},D=function(e){if(g(),i.index>=i.length)u(void 0),d(void 0),f({wasClean:!1,code:3001,reason:n[3001]});else if(0>i[i.index].health)_(new Error("Sick URL")),++i.index,D();else{p(),l(t.CONNECTING);var r=i[i.index];u()!==r.value&&(u(r.value),d(r.health));try{s.connecting(r.health)}catch(e){}e||0===i[i.index].health?T():g(T,3e3)}};this.open=function(e){if(h())return f({wasClean:!1,code:3333,reason:n[3333]});if(t.CONNECTING!==l()&&t.OPEN!==l()){if(e){e=String(e);for(var r=0;r<i.length;r++)if(e===i[r].value)return i.index=r,D(!0);i.add(e)}D(!0)}},this.close=function(e,r){g(),t.CLOSING!==l()&&t.CLOSED!==l()&&(!o||o.CONNECTING!==o.readyState&&o.OPEN!==o.readyState?f({wasClean:!1,code:1011,reason:n[1011]}):(4e3>(e<<=0)||5e3<=e?o.close():r?o.close(e,String(r)):o.close(e),o.onclose=f,l(t.CLOSING)))},this.send=function(e){if(t.OPEN!==l())return new Error("Connection is not open");if(h())return f({wasClean:!1,code:3333,reason:n[3333]}),new Error("Spam detected");try{o.send(e)}catch(e){return e}return null};var w=function(e,t){return function(){t.apply(e,arguments)}};this.on=function(e,t){if(e&&"object"==typeof e)for(var n in e)this.on(n,w(e,e[n]));else s[e]&&"function"==typeof t&&(s[e]=t)},this.off=function(){for(var e in s)s[e]=r},this.getHealthyURLs=function(){for(var e=[],t=0;t<i.length;t++)0<=i[t].health&&e.push(i[t]);e.sort(function(e,t){return t.health-e.health});for(t=0;t<e.length;t++)e[t]=e[t].value;return e}};for(var d in S.prototype={valueOf:function(){return this.toString()},toString:function(){return t.OPEN===this.state?this.url:""},toJSON:function(e){switch(e){case"url":return'"'+this.url+'"';case"state":return this.state;case"health":return this.health}return arguments.length?"":'{"state":'+this.state+', "health":'+this.health+', "url":"'+this.url+'"}'}},t)S.prototype[d]=t[d];e.Connection=S}(window);var n=Connection;t.Z=n},84633:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(90061),o=r(n(17987));const a=(0,i.createLogger)("TimeMachina");o.default.on("newfsm",function(e){e.on("handling",function(e){a.log(this.namespace+": handling "+e.inputType+" in state "+this.state)}),e.on("nohandler",function(e){a.log(this.namespace+": unhandled "+e.inputType+" in state "+this.state)}),e.on("transition",function(e){a.log([this.namespace+":","transition from:",e.fromState,"to:",e.toState,"action:",e.action].join(" "))})});var s=o.default.Fsm.extend({_fireEvent:function(e){delete this._scheduled_events[e],this.handle(e)},_scheduleEvent:function(e,t){e in this._scheduled_events?a.log(this.namespace+": attempt to re-schedule event"+e):(a.log(this.namespace+": scheduling "+e+" for "+t),this._scheduled_events[e]=setTimeout(this._fireEvent.bind(this,e),t))},_cancelEvent:function(e){e in this._scheduled_events?(clearTimeout(this._scheduled_events[e]),delete this._scheduled_events[e]):a.log(this.namespace+": attempt to cancel not scheduled event",e)},constructor:function(){this._scheduled_events={},o.default.Fsm.apply(this,arguments)}});t.default=s},27104:function(e,t){"use strict";function n(e){return parseInt(o(e).substring(0,2),16)}function r(e){return parseInt(o(e).substring(2,4),16)}function i(e){return parseInt(o(e).substring(4,6),16)}function o(e){return function(e){return 3==e.length&&(e=e.split("").map(function(e){return e.toString()+e.toString()}).join("")),e}(e="#"==(e=e||"").charAt(0)?e.substring(1,7):e)}function a(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))}function s(e,t,o){var s=n(e),l=r(e),u=i(e),g=d.toHSV(new c(s,l,u));g.v>0?g.v=g.v*t:g.v=100*(t-1),g.s=g.s*o;var p,f,h,m=d.toRGB(g);return"#"+(p=m.r,f=m.g,h=m.b,a(p)+a(f)+a(h))}function l(e,t,n){e<=0&&(e=0),t<=0&&(t=0),n<=0&&(n=0),e>360&&(e=360),t>100&&(t=100),n>100&&(n=100),this.h=e,this.s=t,this.v=n}function c(e,t,n){e<=0&&(e=0),t<=0&&(t=0),n<=0&&(n=0),e>255&&(e=255),t>255&&(t=255),n>255&&(n=255),this.r=e,this.g=t,this.b=n}function u(e,t,n,r){e<=0&&(e=0),t<=0&&(t=0),n<=0&&(n=0),r<=0&&(r=0),e>100&&(e=100),t>100&&(t=100),n>100&&(n=100),r>100&&(r=100),this.c=e,this.m=t,this.y=n,this.k=r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d={isLightColor:function(e){return function(e){var t=n(e),o=r(e),a=i(e),s=d.toHSV(new c(t,o,a));return s.v+-.5*s.s}(e)>58},getContrast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;var o;return(299*n(o=e)+587*r(o)+114*i(o))/1e3>=t?"black":"white"},_RGBtoHSV:function(e){var t=new l(0,0,0),n=e.r/255,r=e.g/255,i=e.b/255,o=Math.min(n,r,i),a=Math.max(n,r,i),s=a-o;if(t.v=a,0==s)t.h=0,t.s=0;else{t.s=s/a;var c=((a-n)/6+s/2)/s,u=((a-r)/6+s/2)/s,d=((a-i)/6+s/2)/s;n==a?t.h=d-u:r==a?t.h=1/3+c-d:i==a&&(t.h=2/3+u-c),t.h<0&&(t.h+=1),t.h>1&&(t.h-=1)}return t.h=Math.round(360*t.h),t.s=Math.round(100*t.s),t.v=Math.round(100*t.v),t},_HSVtoRGB:function(e){var t=new c(0,0,0),n=e.h/360,r=e.s/100,i=e.v/100;if(0==r)t.r=255*i,t.g=255*i,t.b=255*i;else{var o,a,s,l=6*n,u=Math.floor(l),d=i*(1-r),g=i*(1-r*(l-u)),p=i*(1-r*(1-(l-u)));0==u?(o=i,a=p,s=d):1==u?(o=g,a=i,s=d):2==u?(o=d,a=i,s=p):3==u?(o=d,a=g,s=i):4==u?(o=p,a=d,s=i):(o=i,a=d,s=g),t.r=255*o,t.g=255*a,t.b=255*s,t.r=Math.round(t.r),t.g=Math.round(t.g),t.b=Math.round(t.b)}return t},_CMYKtoRGB:function(e){var t=new c(0,0,0),n=e.c/100,r=e.m/100,i=e.y/100,o=e.k/100;return t.r=1-Math.min(1,n*(1-o)+o),t.g=1-Math.min(1,r*(1-o)+o),t.b=1-Math.min(1,i*(1-o)+o),t.r=Math.round(255*t.r),t.g=Math.round(255*t.g),t.b=Math.round(255*t.b),t},_RGBtoCMYK:function(e){var t=new u(0,0,0,0),n=e.r/255,r=e.g/255,i=e.b/255;return t.k=Math.min(1-n,1-r,1-i),t.c=(1-n-t.k)/(1-t.k),t.m=(1-r-t.k)/(1-t.k),t.y=(1-i-t.k)/(1-t.k),t.c=Math.round(100*t.c),t.m=Math.round(100*t.m),t.y=Math.round(100*t.y),t.k=Math.round(100*t.k),t},toRGB:function(e){return e instanceof c?e:e instanceof l?this._HSVtoRGB(e):e instanceof u?this._CMYKtoRGB(e):void 0},toHSV:function(e){return e instanceof l?e:e instanceof c?this._RGBtoHSV(e):e instanceof u?this._RGBtoHSV(this._CMYKtoRGB(e)):void 0},toCMYK:function(e){return e instanceof u?e:e instanceof c?this._RGBtoCMYK(e):e instanceof l?this._RGBtoCMYK(this._HSVtoRGB(e)):void 0},genGradientBg:function(e){return"linear-gradient(95deg, "+e+" 20%, "+this.getRightColor(e)+" 80%)"},getRightColor:function(e){return s(e,.9,.9)},getGradientBg:function(e,t){return"linear-gradient(95deg, "+e+" 20%, "+(t||e)+" 80%)"}},g=d;t.default=g},96879:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.filterMessage=void 0;var i=n(81152),o=n(17662),a=r(n(14264));t.filterMessage=e=>{var t;const n=/^\/service/.test(e.text),r=(0,o.isObject)(e.media),s=r&&(null===(t=e.media)||void 0===t?void 0:t.address),l=e.msg_id;let c=!n&&!s;if("number"==typeof l){const e=!!a.default.getMessageById(l);c=c&&!e}if(r){const t=e.from===i.MessageInitiator.CLIENT&&e.type!==i.MessageType.MEDIA&&r&&"error"===e.media.type;c=c&&!t}return e.deleted&&(c=!1),e.type==i.MessageType.INVOICE&&(c=!1),c}},17987:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(60277),i=n(35333),o=n(15201),a=n(31484),s=n(54415),l=n(16026),c=n(58345),u=n(17662),d=function(){var e,t=[].slice,n="transition",d="handler",g="deferred",p={makeFsmNamespace:(e=0,function(){return"fsm."+e++}),getDefaultOptions:function(){return{initialState:"uninitialized",eventListeners:{"*":[]},states:{},eventQueue:[],namespace:p.makeFsmNamespace(),targetReplayState:"",state:void 0,priorState:void 0,_priorAction:"",_currentAction:""}}},f={"*":function(e,t,n){e[t]=n},object:function(e,t,n){e[t]=m({},e[t]||{},n)},array:function(e,t,n){e[t]=[],(0,i.each)(n,function(n,r){f[h(n)](e[t],r,n)},this)}},h=function(e){var t=function(e){return(0,u.isArray)(e)?"array":(0,u.isDate)(e)?"date":(0,u.isRegExp)(e)?"regex":typeof e}(e);return f[t]?t:"*"},m=function(e){return(0,i.each)(t.call(arguments,1),function(t){(0,i.each)(t,function(t,n){f[h(t)](e,n,t)})}),e},_=function(e){(0,r.extend)(this,e),(0,a.defaults)(this,p.getDefaultOptions()),this.initialize.apply(this,arguments),y.emit("newfsm",this),this.initialState&&this.transition(this.initialState)};(0,r.extend)(_.prototype,{initialize:function(){},emit:function(e){var n=arguments;this.eventListeners["*"]&&(0,i.each)(this.eventListeners["*"],function(r){if(l.EnvironmentManager.isProduction())try{r.apply(this,t.call(n,0))}catch(t){t.message+=` machina.js * [${this.namespace}] ${e}`,s.Monitoring.reportException(t)}else r.apply(this,t.call(n,0))},this),this.eventListeners[e]&&(0,i.each)(this.eventListeners[e],function(r){if(l.EnvironmentManager.isProduction())try{r.apply(this,t.call(n,1))}catch(t){t.message+=` machina.js ev [${this.namespace}] ${e}`,s.Monitoring.reportException(t)}else r.apply(this,t.call(n,1))},this)},handle:function(e){if(!this.inExitHandler){var n,r,i,o,a=this.states,s=this.state,l=t.call(arguments,0);this.currentActionArgs=l,a[s][e]||a[s]["*"]||this["*"]?(i="*"===(n=a[s][e]?e:"*"),a[s][n]?(r=a[s][n],o=s+"."+n):(r=this["*"],o="*"),this._currentAction||(this._currentAction=o),this.emit.call(this,"handling",{inputType:e,args:l.slice(1)}),(0,u.isFunction)(r)&&(r=r.apply(this,i?l:l.slice(1))),(0,u.isString)(r)&&this.transition(r),this.emit.call(this,"handled",{inputType:e,args:l.slice(1)}),this._priorAction=this._currentAction,this._currentAction="",this.processQueue(d)):this.emit.call(this,"nohandler",{inputType:e,args:l.slice(1)}),this.currentActionArgs=void 0}},transition:function(e){if(!this.inExitHandler&&e!==this.state){var t;if(this.states[e]){if(this.targetReplayState=e,this.priorState=this.state,this.state=e,t=this.priorState,this.states[t]&&this.states[t]._onExit&&(this.inExitHandler=!0,this.states[t]._onExit.call(this),this.inExitHandler=!1),this.emit.call(this,"transition",{fromState:t,action:this._currentAction,toState:e}),this.states[e]._onEnter)if(l.EnvironmentManager.isProduction())try{this.states[e]._onEnter.call(this)}catch(t){t.message+=` machina.js [${this.namespace}] ${e}`,s.Monitoring.reportException(t)}else this.states[e]._onEnter.call(this);return void(this.targetReplayState===e&&this.processQueue(n))}this.emit.call(this,"invalidstate",{state:this.state,attemptedState:e})}},processQueue:function(e){var t=e===n?function(e){return e.type===n&&(!e.untilState||e.untilState===this.state)}:function(e){return e.type===d},r=this.eventQueue.filter(t);this.eventQueue=(0,c.difference)(this.eventQueue,r),(0,i.each)(r,function(e){this.handle.apply(this,e.args)},this)},clearQueue:function(e,t){var r;e?(e===n?r=function(e){return e.type===n&&(!t||e.untilState===t)}:e===d&&(r=function(e){return e.type===d}),this.eventQueue=this.eventQueue.filter(r)):this.eventQueue=[]},deferUntilTransition:function(e){if(this.currentActionArgs){var t={type:n,untilState:e,args:this.currentActionArgs};this.eventQueue.push(t),this.emit.call(this,g,{state:this.state,queuedArgs:t})}},deferUntilNextHandler:function(){if(this.currentActionArgs){var e={type:n,args:this.currentActionArgs};this.eventQueue.push(e),this.emit.call(this,g,{state:this.state,queuedArgs:e})}},on:function(e,t){var n=this;return n.eventListeners[e]||(n.eventListeners[e]=[]),n.eventListeners[e].push(t),{eventName:e,callback:t,off:function(){n.off(e,t)}}},off:function(e,t){e?this.eventListeners[e]&&(this.eventListeners[e]=t?(0,o.without)(this.eventListeners[e],t):[]):this.eventListeners={}}}),_.prototype.trigger=_.prototype.emit;var v=function(){};_.extend=function(e,t){var n=function(e,t,n){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},m(r,e),v.prototype=e.prototype,r.prototype=new v,t&&m(r.prototype,t),n&&m(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r}(this,e,t);return n.extend=this.extend,n};var y={Fsm:_,utils:p,on:function(e,t){return this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t),t},off:function(e,t){this.eventListeners[e]&&(this.eventListeners[e]=(0,o.without)(this.eventListeners[e],t))},trigger:function(e){var n=arguments,r=this.eventListeners[e]||[];r&&r.length&&(0,i.each)(r,function(e){e.apply(null,t.call(n,1))})},eventListeners:{newFsm:[]}};return y.emit=y.trigger,y}(),g=d;t.default=g},50754:function(e,t,n){"use strict";var r=n(17907)(n(15687));const i=2147483647,o=36,a=/^xn--/,s=/[^\0-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,d=String.fromCharCode;function g(e){throw new RangeError(c[e])}function p(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]);const i=function(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}((e=e.replace(l,".")).split("."),t).join(".");return r+i}function f(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}const h=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:o},m=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,n){let r=0;for(e=n?u(e/700):e>>1,e+=u(e/t);e>455;r+=o)e=u(e/35);return u(r+36*e/(e+38))},v=function(e){const t=[],n=e.length;let r=0,a=128,s=72,l=e.lastIndexOf("-");l<0&&(l=0);for(let n=0;n<l;++n)e.charCodeAt(n)>=128&&g("not-basic"),t.push(e.charCodeAt(n));for(let c=l>0?l+1:0;c<n;){let l=r;for(let t=1,a=o;;a+=o){c>=n&&g("invalid-input");const l=h(e.charCodeAt(c++));(l>=o||l>u((i-r)/t))&&g("overflow"),r+=l*t;const d=a<=s?1:a>=s+26?26:a-s;if(l<d)break;const p=o-d;t>u(i/p)&&g("overflow"),t*=p}const d=t.length+1;s=_(r-l,d,0==l),u(r/d)>i-a&&g("overflow"),a+=u(r/d),r%=d,t.splice(r++,0,a)}return String.fromCodePoint.apply(String,t)},y=function(e){const t=[];let n=(e=f(e)).length,r=128,a=0,s=72;for(const n of e)n<128&&t.push(d(n));let l=t.length,c=l;for(l&&t.push("-");c<n;){let n=i;for(const t of e)t>=r&&t<n&&(n=t);const p=c+1;n-r>u((i-a)/p)&&g("overflow"),a+=(n-r)*p,r=n;for(const n of e)if(n<r&&++a>i&&g("overflow"),n==r){let e=a;for(let n=o;;n+=o){const r=n<=s?1:n>=s+26?26:n-s;if(e<r)break;const i=e-r,a=o-r;t.push(d(m(r+i%a,0))),e=u(i/a)}t.push(d(m(e,0))),s=_(a,p,c==l),a=0,++c}++a,++r}return t.join("")},C={version:"2.1.0",ucs2:{decode:f,encode:e=>String.fromCodePoint.apply(String,(0,r.default)(e))},decode:v,encode:y,toASCII:function(e){return p(e,function(e){return s.test(e)?"xn--"+y(e):e})},toUnicode:function(e){return p(e,function(e){return a.test(e)?v(e.slice(4).toLowerCase()):e})}};e.exports=C},69759:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(67375)),o=r(n(61691)),a=n(60277),s=n(80210);const l=function(e){const t=[];for(const n in e){const r=e[n];for(const e in r){const o=r[e];if(Array.isArray(o)){const r=(0,i.default)(o,2),a=r[0],s=r[1];Array.isArray(a)&&a.forEach(function(r){var i={domain:r,medium:n,name:e};s&&(i.params=s),t.push(i)})}}}return t}(o.default),c=function(e,t,n){this.known=!1,this.referer=null,this.medium="unknown",this.search_parameter=null,this.search_term=null,this.referers=n||l;const r=new URL(e),i=r.hostname;if(this.known=Boolean(~["http:","https:"].indexOf(r.protocol)),this.uri=r,!this.known)return;if(t){if(new URL(t).hostname===i)return void(this.medium="internal")}let o=this._lookup_referer(i,r.pathname,!0);if(o||(o=this._lookup_referer(i,r.pathname,!1),o)){if(this.referer=o.name,this.medium=o.medium,"search"===o.medium){if(!o.params)return;const e=(0,a.extend)(s.querystring.parse(r.hash),s.querystring.parse(r.search));for(const t in e){const n=e[t];-1!==o.params.indexOf(t.toLowerCase())&&(this.search_parameter=t,this.search_term=n)}}}else this.medium="unknown"};c.prototype.searchReferer=function(e){return this.referers.find(t=>t.domain instanceof RegExp&&e.search(t.domain)>-1||(t.domain===e||void 0))},c.prototype._lookup_referer=function(e,t,n){let r=null;if(r=n?this.searchReferer(e+t):this.searchReferer(e),!r&&n){const n=t.split("/");if(n.length>1)try{r=this.searchReferer(e+"/"+n[1])}catch(e){}}if(r)return r;try{const r=e.indexOf(".");if(-1===r)return null;const i=e.slice(r+1);return this._lookup_referer(i,t,n)}catch(e){return null}};var u=c;t.default=u},61691:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={unknown:{Google:[["support.google.com","developers.google.com","maps.google.com","accounts.google.com","drive.google.com","sites.google.com","groups.google.com","groups.google.co.uk","news.google.co.uk"]],"Yahoo!":[["finance.yahoo.com","news.yahoo.com","eurosport.yahoo.com","sports.yahoo.com","astrology.yahoo.com","travel.yahoo.com","answers.yahoo.com","screen.yahoo.com","weather.yahoo.com","messenger.yahoo.com","games.yahoo.com","shopping.yahoo.net","movies.yahoo.com","cars.yahoo.com","lifestyle.yahoo.com","omg.yahoo.com","match.yahoo.net"]]},search:{"360.cn":[[/so.(com|360.cn)$/gi],["q"]],AOL:[[/\.aol.\w{2,4}(\w{2,4})?/gi,"aolsearch.com"],["q","query"]],Yandex:[["yandex.ru","yandex.ua","yandex.com","www.yandex.ru","www.yandex.ua","www.yandex.com","yandex.by","yandex.kz","www.yandex.by","www.yandex.kz"],["text"]],DuckDuckGoL:[["duckduckgo.com"],["q"]],Picsearch:[["www.picsearch.com"],["q"]],"Mail.ru":[["go.mail.ru"],["q"]],Rambler:[["nova.rambler.ru"],["query","words"]],MySearch:[[/(.mysearch)|(.myway).com$/gi,"search.mywebsearch.com"],["searchfor","searchFor"]],Baidu:[[/.baidu.com$/gi,"web.gougou.com"],["wd","word","kw","k"]],Ecosia:[["ecosia.org"],["q"]],Bing:[["bing.com","www.bing.com","msnbc.msn.com","dizionario.it.msn.com","cc.bingj.com","m.bing.com"],["q"]],Seznam:[["search.seznam.cz"],["q"]],"Yahoo!":[[/.?yahoo./gi,"www.cercato.it","search.offerbox.com","ys.mirostart.com"],["q","p"]],Ask:[[/.ask.com$/gi,"ask.reference.com","www.askkids.com","www.ask.co.uk","search-results.com","uk.search-results.com","www.search-results.com","int.search-results.com"]],"uol.com.br":[["busca.uol.com.br"],["q"]],Google:[[/^(www.)?google.\w{2,4}(.\w{2,4})?$/gi,/^.incredimail.com$/gi,/.googleearth./gi,"isearch.avg.com","www.cnn.com","darkoogle.com","search.darkoogle.com","search.foxtab.com","www.gooofullsearch.com","search.hiyo.com","search.sweetim.com","www.fastweb.it","search.juno.com","find.tdc.dk","searchresults.verizon.com","search.walla.co.il","search.alot.com","webcache.googleusercontent.com","encrypted.google.com","googlesyndicatedsearch.com"],["q","query","keywords"]],"2GIS":[["link.2gis.ru"]]},email:{Gmail:[["mail.google.com"]],Rambler:[["mail.rambler.ru"]]},social:{Odnoklassniki:[["odnoklassniki.ru","ok.ru"]],GitHub:[["github.com"]],Instagram:[["instagram.com"]],Vkontakte:[["vk.com","vkontakte.ru"]],Twitter:[["twitter.com","t.co"]],"Mail.ru":[["my.mail.ru"]],Pinterest:[["pinterest.com"]],LinkedIn:[["linkedin.com"]],Facebook:[["facebook.com","fb.me"]],Youtube:[["youtube.com","youtu.be"]]}}},8117:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(61125)),o=r(n(69759)),a=n(90061),s=n(37578),l=n(80210),c=r(n(50754)),u=n(17662);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}const g=(0,a.createLogger)("utm"),p={utmccn:"campaign",utmcsr:"source",utmcmd:"medium",utmctr:"keyword",utmcct:"content"},f={parseUtmz:function(e){const t={};if(e){const n=decodeURI(e).replace(/^[0-9\.]*/g,"");let r;if(n){const e=n.split("|");for(let n=0;n<e.length;n++)r=e[n].substr(0,6),r in p&&(t[p[r]]=e[n].substr(7))}}return t},parseUTM:function(e,t,n){const r={};let a=!1,f=null;if(g.log("parseUTM",n),n){const e=n.split("|");let t;const i=Object.values(p);for(let n=0;n<e.length;n++)t=e[n].split("="),2===t.length&&(t[0]=t[0].toLowerCase(),i.indexOf(t[0])>=0?(r[t[0]]=t[1],a=!0):"term"===t[0]&&(r.keyword=t[1],r.term=t[1]))}if(f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r),g.log("finish utmz, utmparams",r),!a)if("string"==typeof t&&""!==t){const n=new o.default(t,e);if(g.log("processing_refer",n,t,e),n.known)if("internal"===n.medium){const e=n.uri.search;if(e&&e.length){const t=this.decodeString(e);let n={};try{n=l.querystring.parse(t)}catch(e){const r=this.getUTMParamsFromUrl(t);for(const e in r)if(r[e]){const t=r[e].split("=");t.length&&(n[t[0]]=t[1])}}for(const e in p)n["utm_"+p[e]]&&(r[p[e]]=n["utm_"+p[e]]);n.utm_term&&(r.keyword=n.utm_term,r.term=n.utm_term),g.log("query params:",r)}(0,u.isEmpty)(r)&&Object.assign(r,{campaign:"(direct)",source:"(direct)"})}else"unknown"===n.medium?Object.assign(r,{campaign:"(referral)",medium:"referral",source:c.default.toUnicode(n.uri.hostname),content:`${n.uri.pathname}${n.uri.search}`}):Object.assign(r,{campaign:"(organic)",source:n.referer,medium:n.medium,keyword:n.search_term,content:""});else g.warn("unknown_refer")}else(0,u.isEmpty)(r)&&Object.assign(r,{campaign:"(direct)",source:"(direct)"});if(r.keyword&&(r.keyword=this.decodeString(r.keyword)),r.term&&(r.term=this.decodeString(r.term)),r.content&&(r.content=this.decodeString(r.content)),r.campaign&&(r.campaign=this.decodeString(r.campaign)),t&&this.isLid(e,t)&&(r.medium="cpc","(organic)"==r.campaign&&(r.campaign=null)),!r.source&&"string"==typeof t&&""!==t){const n=new o.default(t,e);n.referer&&(r.source=n.referer)}return f.medium&&(r.medium=this.decodeString(f.medium)),t&&f.source&&(r.source=this.decodeString(f.source)),g.log("FINISH UTM",n,r),(0,s.filterObj)(r,e=>!(0,u.isEmpty)(e))},isLid(e,t){return["yclid=","gclid=","fbclid="].some(t=>e.includes(t))&&["yandex","google","facebook"].some(e=>t.includes(e))},decodeString(e){try{e=decodeURIComponent(e)}catch(t){return g.log(t),this.decode(e)}return e},decode(e){return(e=(e=(e=e.replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/gi,function(e,t,n,r){const i=parseInt(t,16)-224,o=parseInt(n,16)-128;if(0==i&&o<32)return e;const a=(i<<12)+(o<<6)+(parseInt(r,16)-128);return a>65535?e:String.fromCharCode(a)})).replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/gi,function(e,t,n){const r=parseInt(t,16)-192;if(r<2)return e;const i=parseInt(n,16)-128;return String.fromCharCode((r<<6)+i)})).replace(/%([0-7][0-9A-F])/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})).replace(/%[A-Z0-9]{2}/gi,"")},getUTMParamsFromUrl:function(e){let t=e.indexOf("?"),n=null;for(;-1!=n;)n=e.indexOf("?",t+1),n>0&&(t=n);const r=e.substr(t+1).split("&");let i,o,a="";for(o=r.length;o--;)if(i=r[o].split("="),i[0].indexOf("utm_")>=0){i=r[o],i=i.replace(/\|/gi,"%7C");const e=i.split("=");e.length>1&&(i=e[0]+"="+e.slice(1).join("%3D")),a+=(a.length>0?"|":"")+i.substr(i.indexOf("utm_")+4)}return a},setUTM:function(e){let t=e.href,n=e.refer,r=e.setterFn;const i=f.getUTMParamsFromUrl(t),o=f.parseUTM(t,n,i);return r({campaign:o&&o.campaign||null,source:o&&o.source||null,medium:o&&o.medium||null,keyword:o&&o.keyword||null,term:o&&o.term||null,content:o&&o.content||null})}};var h=f;t.default=h},95020:function(e,t,n){"use strict";!function(){"undefined"==typeof window&&(window=n.g);var e,t=2e4,r=2e3,i=32e3,o=3e4,a=function(t,n){if("function"==typeof e[t])try{return e[t](n)}catch(n){if("onerror"!==t)try{e.onerror(n)}catch(e){}}},s=function(e){return void 0===e?"":("string"!=typeof e&&(e=String(e)),e.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/[\x00-\x19]/g," "))},l=function(e){return Math.random()*e|0},c=/^-?[a-zA-Z0-9]{1,16}$/,u=/^[_a-zA-Z][_a-zA-Z0-9]{0,7}$/,d=/^[a-zA-Z0-9]{10}$/;window.ClientSocket=function(){if(e)return e;e=this;var n,g,p,f,h=r,m=0,_=function(){try{g.send(".")}catch(e){}p=setTimeout(_,t)},v=function(){g.onclose=null,g.onerror=null,g.onmessage=null,g.onopen=null,g.CLOSING>g.readyState&&g.close()},y=function(){g&&(v(),i<(h<<=1)&&(h=i)),g=new WebSocket(n),e.readyState=g.readyState,g.onclose=function(t){if(e.readyState=g.readyState,a("onclose",t.reason),p){if(clearTimeout(p),clearTimeout(f),t.reason){var n=-1;switch(t.reason){case"Protocol Error":case"Unsupported Data":case"Invalid Data":case"Message Too Big":case"Mandatory Ext.":case"Invalid Response":case"Normal Closure":case"Void Time":n=0;break;case"Service Restart":n=6e4+l(6e5);break;case"Try Again Later":n=6e5+l(6e5);break;case"Internal Error":n=18e5+l(6e5);break;case"Going Away":n=36e5+l(6e5);break;case"Policy Violation":n=72e5;break;case"Blacklisted":n=864e5}if(-1!==n)return v(),p=null,void a("ondrop",n)}else a("onerror",new Error("close-is-not-clean"));if(3<=++m)return v(),p=null,a("ondrop",6e5+l(6e5)),void a("onfail","Network Unreachable");p=setTimeout(y,h+l(r)),i<(h<<=1)&&(h=i)}},g.onerror=function(e){},g.onmessage=function(e){if(m=0,clearTimeout(f),f=setTimeout(y,o),!(1>=e.data.length)){for(var t,n="",r={},i=e.data.split("\n"),l=0;l<i.length;l++)if(i[l]){var c=i[l].split("\t");if(4>c.length)i[l]&&a("onerror","uncomplete-message: "+JSON.stringify(i[l]));else switch(c[3]){case"+":c[0]&&(r.from=c[0]),c[1]&&(r.room=c[1]),c[4]&&(r.ip=c[4]),c[5]&&(r.port=c[5]),r.geoip={},c[6]&&(r.geoip.region=c[6]),c[7]&&(r.geoip.city_country_code=c[7]),c[8]&&(r.geoip.city_country_name=c[8]),c[9]&&(r.geoip.region_name=c[9]),c[10]&&(r.geoip.city=c[10]),c[11]&&(r.geoip.latitude=c[11]),c[12]&&(r.geoip.longitude=c[12]),c[13]&&(r.geoip.org=c[13]),a("onadd",r);break;case"-":c[0]&&(r.from=c[0]),c[1]&&(r.room=c[1]),c[4]&&(r.code=c[4]),a("ondel",r);break;default:if(4<c.length)r.key=c[3],c[0]&&(r.from=c[0]),c[1]&&(r.room=c[1]),r.value=5<c.length?c.slice(4):c[4],a("onset",r);else if(c[0]&&(r.from=c[0],r.room=c[1]),r.key=c[3]||"*",t=a("onget",r)){if(n+="\t"+c[1]+"\t"+c[0]+"\t"+c[3],t instanceof Array)for(var u=0;u<t.length;u++)n+="\t"+s(t);else n+="\t"+s(t);n+="\n"}}}n&&C(n)}},g.onopen=function(n){e.readyState=g.readyState,e.url=g.url,e.protocol=g.protocol,h=r,clearTimeout(f),f=setTimeout(y,o),clearTimeout(p),p=setTimeout(_,t),a("onopen")},clearTimeout(p),p=setTimeout(y,h)};this.open=function(e){if("string"!=typeof e)throw new TypeError("invalid-URL");n=e,y()},this.close=function(){g&&(clearTimeout(p),clearTimeout(f),m=0,p=null,g.close(1e3,"Normal Closure"),e.readyState=g.readyState)};var C=function(e){if(e){var n=(e=String(e)).length;if("function"==typeof Blob&&(n=new Blob([e]).size),!(8192>=n))throw new RangeError("message-too-big");clearTimeout(f),f=setTimeout(y,o),clearTimeout(p),p=setTimeout(_,t),g.send(e)}},E=function(e,t){var n="";if(e.to){if(!c.test(e.to))throw new Error("invalid-TO");if(!e.room||!d.test(e.room))throw new Error("invalid-ROOM");n+="\t"+e.room+"\t"+e.to}else{if("get"===t)throw new Error("get-require-TO-and-ROOM");n+="\t\t"}if("*"===e.key)e.key="";else if(!u.test(e.key))throw new Error("invalid-KEY");return n+="\t"+e.key};this.get=function(e){if(e)try{C(E(e,"get")+"\n")}catch(e){return e}},this.set=function(e){if(e)try{var t=E(e,"set");if(e.value instanceof Array){if(0===e.value.length)return;for(var n=0;n<e.value.length;n++)t+="\t"+s(e.value[n])}else t+="\t"+s(e.value);C(t+"\n")}catch(e){return e}}}}()},53139:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.updateAgent=t.setAllAgentsLeft=t.initAgentStore=t.dispatchers=t.addAgent=void 0;var i=n(2036),o=n(62096),a=n(20438),s=r(n(14762));const l=(0,n(90061).createLogger)("AgentsActions"),c=e=>({type:i.ActionType.INIT_AGENTS_STORE,payload:e});t.initAgentStore=c;const u=e=>({type:i.ActionType.ADD_AGENT,payload:e});t.addAgent=u;const d=e=>{const t=s.default.getAgentById(e.id);return l.log("redux_try_to_update_agent",e,t),t&&(t.set("display_name",e.name),t.set("title",e.title),t.set("avatar_url",e.avatarUrl),l.log("redux_update_agent",s.default)),{type:i.ActionType.UPDATE_AGENT,payload:e}};t.updateAgent=d;const g=()=>({type:i.ActionType.SET_ALL_AGENTS_LEFT});t.setAllAgentsLeft=g;const p=(0,a.bindActionCreators)({initAgentStore:c,addAgent:u,updateAgent:d,setAllAgentsLeft:g},o.reduxStore.dispatch);t.dispatchers=p},42932:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.setVIReconnectTime=t.setQuoteMsgId=t.setMaintenance=t.setLastMsgTime=t.setLastMsgId=t.setLastChatStatus=t.setLastChatOpened=t.setIsInputDisabled=t.setIsInDrag=t.setHiddenByRules=t.setDidFreezeData=t.setChatStarted=t.setChatOpenByClient=t.setChatAccepted=t.setAppStarted=t.setAppRoute=t.setAppIsOnline=t.setAppIsFocused=t.initAppStore=t.dispatchers=void 0;var i=n(20438),o=n(10018),a=n(2036),s=n(62096),l=r(n(95003));const c=e=>{let t=e.isFocused,n=e.isOnline,r=e.route,i=e.lastChatOpened,o=e.isInputDisabled,s=e.maintenance,l=e.chatStarted,c=e.chatAccepted,u=e.lastMsgId,d=e.lastMsgTime,g=e.started,p=e.chatOpenByClient,f=e.viReconnectTime,h=e.didFreezeData,m=e.lastChatStatus,_=e.quoteMsgId,v=e.hiddenByRules;return{type:a.ActionType.INIT_APP_STORE,payload:{isFocused:t,isOnline:n,route:r,lastChatOpened:i,isInputDisabled:o,maintenance:s,chatOpenByClient:p,chatStarted:l,chatAccepted:c,lastMsgId:u,lastMsgTime:d,started:g,viReconnectTime:f,didFreezeData:h,lastChatStatus:m,quoteMsgId:_,hiddenByRules:v}}};t.initAppStore=c;const u=e=>(l.default.is_online=e?1:0,{type:a.ActionType.SET_APP_IS_ONLINE,payload:{isOnline:e}});t.setAppIsOnline=u;const d=e=>(l.default.is_focused=e,{type:a.ActionType.SET_APP_IS_FOCUSED,payload:{isFocused:e}});t.setAppIsFocused=d;const g=e=>({type:a.ActionType.SET_CHAT_OPEN_BY_CLIENT,payload:{chatOpenByClient:e}});t.setChatOpenByClient=g;const p=e=>(l.default.route=e,{type:a.ActionType.SET_APP_ROUTE,payload:{route:e}});t.setAppRoute=p;const f=e=>(l.default.lastChatOpened=e,{type:a.ActionType.SET_LAST_CHAT_OPENED,payload:{lastChatOpened:e}});t.setLastChatOpened=f;const h=e=>({type:a.ActionType.SET_IS_IN_DRAG,payload:{isInDrag:e}});t.setIsInDrag=h;const m=e=>({type:a.ActionType.SET_IS_INPUT_DISABLED,payload:{isInputDisabled:e}});t.setIsInputDisabled=m;const _=e=>(l.default.maintenance=e,(0,o.setConfigParam)("maintenance",e),{type:a.ActionType.SET_MAINTENANCE,payload:{maintenance:e}});t.setMaintenance=_;const v=e=>(l.default.chat_started=e,{type:a.ActionType.UPDATE_APP_STORE,payload:{chatStarted:e}});t.setChatStarted=v;const y=e=>(l.default.chat_accepted=e,{type:a.ActionType.UPDATE_APP_STORE,payload:{chatAccepted:e}});t.setChatAccepted=y;const C=e=>(l.default.lastMsgTime=e,{type:a.ActionType.UPDATE_APP_STORE,payload:{lastMsgTime:e}});t.setLastMsgTime=C;const E=e=>(l.default.lastMsgId=e,{type:a.ActionType.UPDATE_APP_STORE,payload:{lastMsgId:e}});t.setLastMsgId=E;const b=e=>(l.default.started=e,{type:a.ActionType.UPDATE_APP_STORE,payload:{started:e}});t.setAppStarted=b;const S=e=>(l.default.viReconnectTime=e,{type:a.ActionType.UPDATE_APP_STORE,payload:{viReconnectTime:e}});t.setVIReconnectTime=S;const T=e=>(l.default.didFreezeData=e,{type:a.ActionType.UPDATE_APP_STORE,payload:{didFreezeData:e}});t.setDidFreezeData=T;const D=e=>(l.default.lastChatStatus=e,{type:a.ActionType.SET_LAST_CHAT_STATUS,payload:{lastChatStatus:e}});t.setLastChatStatus=D;const w=e=>(l.default.quoteMsgId=e,{type:a.ActionType.SET_QUOTE_MSG_ID,payload:{quoteMsgId:e}});t.setQuoteMsgId=w;const O=e=>(l.default.hiddenByRules=e,{type:a.ActionType.SET_HIDDEN_BY_RULES,payload:{hiddenByRules:e}});t.setHiddenByRules=O;const A=(0,i.bindActionCreators)({initAppStore:c,setAppIsOnline:u,setAppIsFocused:d,setAppRoute:p,setLastChatOpened:f,setIsInDrag:h,setIsInputDisabled:m,setMaintenance:_,setChatOpenByClient:g,setChatAccepted:y,setChatStarted:v,setLastMsgTime:C,setAppStarted:b,setLastMsgId:E,setVIReconnectTime:S,setDidFreezeData:T,setLastChatStatus:D,setQuoteMsgId:w,setHiddenByRules:O},s.reduxStore.dispatch);t.dispatchers=A},13532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initBotsStore=t.dispatchers=t.addBot=void 0;var r=n(2036),i=n(62096),o=n(20438);const a=e=>({type:r.ActionType.INIT_BOTS_STORE,payload:e});t.initBotsStore=a;const s=e=>({type:r.ActionType.ADD_BOT,payload:e});t.addBot=s;const l={initBotsStore:(0,o.bindActionCreators)(a,i.reduxStore.dispatch),addBot:(0,o.bindActionCreators)(s,i.reduxStore.dispatch)};t.dispatchers=l},45689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setWebRTCCallStatus=t.setSeparateForm=t.setDelayedTimezone=t.setDelayedPeriods=t.setDelayedCallbackStatus=t.setCallbackStatus=t.setCallbackIsDelayed=t.setCallbackError=t.setCallbackAvailable=t.setActiveWebRTCCallMessageId=t.initializeCallbackStore=t.dispatchers=void 0;var r=n(20438),i=n(2036),o=n(62096);const a=e=>({type:i.ActionType.INIT_CALLBACK_STORE,payload:e});t.initializeCallbackStore=a;const s=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{available:e}});t.setCallbackAvailable=s;const l=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{delayedStatus:e}});t.setDelayedCallbackStatus=l;const c=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{isDelayed:e}});t.setCallbackIsDelayed=c;const u=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{status:e}});t.setCallbackStatus=u;const d=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{error:e}});t.setCallbackError=d;const g=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{delayedTimezone:e}});t.setDelayedTimezone=g;const p=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{delayedPeriods:e}});t.setDelayedPeriods=p;const f=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{activeWebRTCCallMessageId:e}});t.setActiveWebRTCCallMessageId=f;const h=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{webRTCCallStatus:e}});t.setWebRTCCallStatus=h;const m=e=>({type:i.ActionType.UPDATE_CALLBACK_STORE,payload:{separateForm:e}});t.setSeparateForm=m;const _={initializeCallbackStore:(0,r.bindActionCreators)(a,o.reduxStore.dispatch),setCallbackAvailable:(0,r.bindActionCreators)(s,o.reduxStore.dispatch),setDelayedCallbackStatus:(0,r.bindActionCreators)(l,o.reduxStore.dispatch),setCallbackIsDelayed:(0,r.bindActionCreators)(c,o.reduxStore.dispatch),setCallbackStatus:(0,r.bindActionCreators)(u,o.reduxStore.dispatch),setCallbackError:(0,r.bindActionCreators)(d,o.reduxStore.dispatch),setDelayedTimezone:(0,r.bindActionCreators)(g,o.reduxStore.dispatch),setDelayedPeriods:(0,r.bindActionCreators)(p,o.reduxStore.dispatch),setActiveWebRTCCallMessageId:(0,r.bindActionCreators)(f,o.reduxStore.dispatch),setWebRTCCallStatus:(0,r.bindActionCreators)(h,o.reduxStore.dispatch),setSeparateForm:(0,r.bindActionCreators)(m,o.reduxStore.dispatch)};t.dispatchers=_},93141:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.setNoJoinedAgents=t.setJoinedBots=t.setJoinedAgents=t.setCurrentChatId=t.setChatEvaluated=t.setAgentTyping=t.initChatsStore=t.dispatchers=t.createChats=t.addJoinedAgent=void 0;var i=r(n(61125)),o=n(29865),a=n(20438),s=n(2036),l=n(99131),c=n(62096),u=n(55623),d=n(45959),g=n(53139),p=r(n(26754)),f=r(n(14762)),h=n(92056),m=n(90189);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const y=e=>{const t=(0,u.selectChatsIds)(e),n=(0,m.selectAgentJoinedIds)(e),r=(0,m.selectBotJoinedIds)(e),i=(0,d.selectClientEvaluate)(e),o=(0,d.selectDepartmentId)(e);return t.length?t.reduce((e,t,a,s)=>(e.push(v(v(v({},l.chatTemplate),a===s.length-1&&{joinedAgents:n,joinedBots:r}),{},{departmentId:o,evaluated:i,id:t})),e),[]):[v(v({},l.chatTemplate),{},{departmentId:o,evaluated:i,joinedAgents:n,joinedBots:r})]};t.createChats=y;const C=()=>(e,t)=>{const n=y(t());return e({type:s.ActionType.INIT_CHATS_STORE,payload:n})};t.initChatsStore=C;const E=e=>({type:s.ActionType.SET_AGENT_TYPING,payload:{agentTyping:!!e}});t.setAgentTyping=E;const b=e=>t=>(0,o.batch)(()=>{t({type:s.ActionType.SET_CURRENT_CHAT_EVALUATED,payload:{evaluated:e}}),t((0,h.setEvaluate)(e))});t.setChatEvaluated=b;const S=e=>{f.default.updateAgentList(e);const t=f.default.getAgentIdsByStatus("join");return{type:s.ActionType.SET_JOINED_AGENTS_IN_CURRENT_CHAT,payload:{joinedAgents:t}}};t.setJoinedAgents=S;const T=()=>e=>{f.default.closeChat(),p.default.agent_id=0,p.default.state="left",(0,o.batch)(()=>{e({type:s.ActionType.CLOSE_CHAT,payload:{joinedAgents:[],joinedBots:[]}}),e((0,g.setAllAgentsLeft)())})};t.setNoJoinedAgents=T;const D=e=>({type:s.ActionType.ADD_JOINED_AGENT_TO_CURRENT_CHAT,payload:{agentId:e}});t.addJoinedAgent=D;const w=e=>({type:s.ActionType.SET_CURRENT_CHAT_ID,payload:{id:e}});t.setCurrentChatId=w;const O=e=>({type:s.ActionType.SET_JOINED_BOTS,payload:{joinedBots:null!=e?e:[]}});t.setJoinedBots=O;const A=(0,a.bindActionCreators)({initChatsStore:C,setAgentTyping:E,setChatEvaluated:b,setJoinedAgents:S,setNoJoinedAgents:T,addJoinedAgent:D,setJoinedBots:O,setCurrentChatId:w},c.reduxStore.dispatch);t.dispatchers=A},92056:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateClient=t.setVisitorId=t.setUserToken=t.setUTM=t.setPaId=t.setMailing=t.setLastMessage=t.setIsIntroduced=t.setIsExist=t.setInputText=t.setHasIntegration=t.setExternalData=t.setEvaluate=t.setEulaAccepted=t.setDepartmentId=t.setCustomData=t.setClientTags=t.setClientSessionId=t.setClientPhone=t.setClientName=t.setClientId=t.setClientEmail=t.setClientDescription=t.setClientContacts=t.setClientAttributes=t.setCaptchaToken=t.setAssignedAgentId=t.resetClient=t.dispatchers=void 0;var r=n(20438),i=n(2036),o=n(62096);const a=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{hasIntegration:e}});t.setHasIntegration=a;const s=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{lastMessage:e}});t.setLastMessage=s;const l=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{isIntroduced:e}});t.setIsIntroduced=l;const c=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{isExist:e}});t.setIsExist=c;const u=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{inputText:e}});t.setInputText=u;const d=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{userToken:e}});t.setUserToken=d;const g=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{customData:e}});t.setCustomData=g;const p=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{captchaToken:e}});t.setCaptchaToken=p;const f=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{priorityAgentId:e}});t.setPaId=f;const h=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{email:e}});t.setClientEmail=h;const m=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{eulaAccepted:e}});t.setEulaAccepted=m;const _=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{mailing:e}});t.setMailing=_;const v=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{phone:e}});t.setClientPhone=v;const y=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{name:e}});t.setClientName=y;const C=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{description:e}});t.setClientDescription=C;const E=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{clientId:e}});t.setClientId=E;const b=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{sessionId:e}});t.setClientSessionId=b;const S=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{assignedAgentId:e}});t.setAssignedAgentId=S;const T=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{departmentId:e}});t.setDepartmentId=T;t.setEvaluate=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{evaluate:e}});const D=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{utm:e}});t.setUTM=D;const w=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:e});t.setClientContacts=w;const O=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{visitorId:e}});t.setVisitorId=O;const A=e=>({type:i.ActionType.UPDATE_CLIENT_STORE_MANUALLY,payload:e});t.updateClient=A;const M=()=>({type:i.ActionType.RESET_CLIENT_STORE});t.resetClient=M;const I=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{tags:e}});t.setClientTags=I;const R=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{attributes:e}});t.setClientAttributes=R;const k=e=>({type:i.ActionType.UPDATE_CLIENT_STORE,payload:{externalData:e}});t.setExternalData=k;const L=(0,r.bindActionCreators)({setHasIntegration:a,setLastMessage:s,setIsIntroduced:l,setIsExist:c,setInputText:u,setUserToken:d,setCustomData:g,setCaptchaToken:p,setPaId:f,setEulaAccepted:m,setMailing:_,setClientEmail:h,setClientPhone:v,setClientName:y,setClientDescription:C,setClientId:E,setClientSessionId:b,setClientContacts:w,setAssignedAgentId:S,setDepartmentId:T,setVisitorId:O,setUTM:D,updateClient:A,resetClient:M,setClientTags:I,setClientAttributes:R,setExternalData:k},o.reduxStore.dispatch);t.dispatchers=L},84219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDesignerSettings=t.dispatchers=void 0;var r=n(20438),i=n(2036),o=n(62096);const a=e=>({type:i.ActionType.UPDATE_DESIGNER_SETTINGS,payload:e});t.updateDesignerSettings=a;const s=(0,r.bindActionCreators)({updateDesignerSettings:a},o.reduxStore.dispatch);t.dispatchers=s},66031:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.setJoint=t.enablePrechat=t.dispatchers=t.disableFiletransfer=void 0;var i=n(20438),o=n(2036),a=n(62096),s=r(n(10018));const l=e=>(s.default.disable_filetranser=e,{type:o.ActionType.SET_DISABLE_FILETRANSFER,payload:{disableFiletransfer:e?1:0}});t.disableFiletransfer=l;const c=e=>(s.default.enable_prechat=e?1:0,{type:o.ActionType.SET_ENABLE_PRECHAT,payload:{prechat:e?1:0}});t.enablePrechat=c;const u=e=>(s.default.joint=e,{type:o.ActionType.SET_JOINT,payload:{joint:e}});t.setJoint=u;const d=(0,i.bindActionCreators)({disableFiletransfer:l,enablePrechat:c,setJoint:u},a.reduxStore.dispatch);t.dispatchers=d},26932:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userDispatchers=t.user=t.transitionDispatchers=t.transition=t.socialDispatchers=t.social=t.proactiveDispatchers=t.proactive=t.permissionsDispatchers=t.permissions=t.messagesDispatchers=t.messages=t.featuresDispatchers=t.features=t.designerDispatchers=t.designer=t.clientDispatchers=t.client=t.chatsDispatchers=t.chats=t.callbackDispatchers=t.callback=t.botsDispatchers=t.bots=t.appDispatchers=t.app=t.agentsDispatchers=t.agents=void 0;var r=v(n(42932));t.app=r;var i=v(n(45689));t.callback=i;var o=v(n(27591));t.social=o;var a=v(n(50307));t.user=a;var s=v(n(53139));t.agents=s;var l=v(n(93141));t.chats=l;var c=v(n(5452));t.transition=c;var u=v(n(40099));t.messages=u;var d=v(n(92056));t.client=d;var g=v(n(66031));t.features=g;var p=v(n(13532));t.bots=p;var f=v(n(25925));t.proactive=f;var h=v(n(94539));t.permissions=h;var m=v(n(84219));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}t.designer=m;const y=r.dispatchers;t.appDispatchers=y;const C=i.dispatchers;t.callbackDispatchers=C;const E=o.dispatchers;t.socialDispatchers=E;const b=a.dispatchers;t.userDispatchers=b;const S=s.dispatchers;t.agentsDispatchers=S;const T=l.dispatchers;t.chatsDispatchers=T;const D=c.dispatchers;t.transitionDispatchers=D;const w=u.dispatchers;t.messagesDispatchers=w;const O=d.dispatchers;t.clientDispatchers=O;const A=g.dispatchers;t.featuresDispatchers=A;const M=p.dispatchers;t.botsDispatchers=M;const I=f.dispatchers;t.proactiveDispatchers=I;const R=h.dispatchers;t.permissionsDispatchers=R;const k=m.dispatchers;t.designerDispatchers=k},40099:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.updateWebRTCCallStatus=t.updateMessages=t.updateMessageBody=t.updateMessage=t.initMessagesStore=t.editMessage=t.dispatchers=t.destroyByType=t.deleteMessageByPrivateId=t.addMessages=t.addMessage=void 0;var i=r(n(61125)),o=n(2036),a=n(62096),s=n(20438),l=r(n(14264));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=()=>{const e=l.default.getAll().map(e=>e.store);return l.default.trigger("update"),{type:o.ActionType.INIT_MESSAGES_STORE,payload:{messages:e}}};t.initMessagesStore=d;const g=(e,t)=>{let n=e;return t||(n=l.default.push(n).store),{type:o.ActionType.ADD_MESSAGE,payload:{message:n}}};t.addMessage=g;const p=e=>(l.default.pushAll(e),{type:o.ActionType.ADD_MESSAGES,payload:{messages:e}});t.addMessages=p;const f=e=>({type:o.ActionType.EDIT_MESSAGE,payload:e});t.editMessage=f;const h=(e,t)=>{const n=l.default.getMessageByPrivateId(e);return n&&n.set("body",t),{type:o.ActionType.UPDATE_MESSAGE_BODY,payload:{privateId:e,body:t}}};t.updateMessageBody=h;const m=(e,t)=>{let n=e.privateId,r=e.messageId;const i=n?l.default.getMessageByPrivateId(n):l.default.getMessageById(r);return i&&i.set(t),{type:o.ActionType.UPDATE_MESSAGE,payload:{privateId:n,messageId:r,newMessage:t}}};t.updateMessage=m;const _=(e,t)=>{let n=e.privateIds,r=e.messageIds;return l.default.getAll().forEach(e=>{const i=e.toJSON(),o=i.msg_id,a=i.private_id;n&&n.includes(a)&&e.set(t),r&&r.includes(o)&&e.set(t)}),{type:o.ActionType.UPDATE_MESSAGES,payload:{privateIds:n,messageIds:r,update:t}}};t.updateMessages=_;const v=e=>{const t=l.default.getMessageByPrivateId(e);return t&&(t.destroy(),l.default.trigger("update")),{type:o.ActionType.DELETE_MESSAGE,payload:{privateId:e}}};t.deleteMessageByPrivateId=v;const y=e=>{const t=l.default.getMessagesByType(e);return t.length&&t.forEach(e=>{e&&e.destroy()}),{type:o.ActionType.DELETE_MESSAGE,payload:{type:e}}};t.destroyByType=y;const C=(e,t)=>{const n=l.default.getMessageByPrivateId(e);return n&&n.set("body",u(u({},n.get("body")),{},{webRTCCallStatus:t})),{type:o.ActionType.UPDATE_WEBRTCCALL_STATUS,payload:{privateId:e||null,webRTCCallStatus:t}}};t.updateWebRTCCallStatus=C;const E={initMessagesStore:(0,s.bindActionCreators)(d,a.reduxStore.dispatch),addMessage:(0,s.bindActionCreators)(g,a.reduxStore.dispatch),addMessages:(0,s.bindActionCreators)(p,a.reduxStore.dispatch),editMessage:(0,s.bindActionCreators)(f,a.reduxStore.dispatch),updateMessageBody:(0,s.bindActionCreators)(h,a.reduxStore.dispatch),deleteMessageByPrivateId:(0,s.bindActionCreators)(v,a.reduxStore.dispatch),destroyByType:(0,s.bindActionCreators)(y,a.reduxStore.dispatch),updateWebRTCCallStatus:(0,s.bindActionCreators)(C,a.reduxStore.dispatch),updateMessage:(0,s.bindActionCreators)(m,a.reduxStore.dispatch),updateMessages:(0,s.bindActionCreators)(_,a.reduxStore.dispatch)};t.dispatchers=E},94539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePermission=t.dispatchers=void 0;var r=n(2036),i=n(62096),o=n(20438);const a=(e,t)=>({type:r.ActionType.UPDATE_PERMISSION,payload:{permission:e,value:t}});t.updatePermission=a;const s={updatePermission:(0,o.bindActionCreators)(a,i.reduxStore.dispatch)};t.dispatchers=s},25925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStatus=t.setPrechats=t.setName=t.resetProactive=t.dispatchers=t.addProactive=void 0;var r=n(2036),i=n(62096),o=n(20438);const a=e=>{let t=e.createdTs,n=e.name,i=e.privateId,o=e.status,a=e.text,s=e.agentId,l=e.botId,c=e.isMarkdown,u=e.prechats,d=e.campaignId;return{type:r.ActionType.ADD_PROACTIVE,payload:{createdTs:t,name:n,privateId:i,status:o,text:a,agentId:s,botId:l,isMarkdown:c,prechats:u,campaignId:d}}};t.addProactive=a;const s=e=>({type:r.ActionType.SET_PROACTIVE_STATUS,payload:{status:e}});t.setStatus=s;const l=e=>({type:r.ActionType.SET_PROACTIVE_NAME,payload:{name:e}});t.setName=l;const c=e=>({type:r.ActionType.SET_PROACTIVE_PRECHATS,payload:{prechats:e}});t.setPrechats=c;const u=()=>({type:r.ActionType.RESET_PROACTIVE});t.resetProactive=u;const d={addProactive:(0,o.bindActionCreators)(a,i.reduxStore.dispatch),setStatus:(0,o.bindActionCreators)(s,i.reduxStore.dispatch),setName:(0,o.bindActionCreators)(l,i.reduxStore.dispatch),setPrechats:(0,o.bindActionCreators)(c,i.reduxStore.dispatch),resetProactive:(0,o.bindActionCreators)(u,i.reduxStore.dispatch)};t.dispatchers=d},27591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeSocialStore=t.dispatchers=void 0;var r=n(2036),i=n(62096),o=n(20438);const a=e=>{let t=e.vk,n=e.fb,i=e.mode;return{type:r.ActionType.INIT_SOCIAL_STORE,payload:{vk:t,fb:n,mode:i}}};t.initializeSocialStore=a;const s={initializeSocialStore:(0,o.bindActionCreators)(a,i.reduxStore.dispatch)};t.dispatchers=s},5452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startTransition=t.initTransitionStore=t.dispatchers=void 0;var r=n(2036),i=n(62096),o=n(20438);const a=e=>({type:r.ActionType.INIT_TRANSITION_STORE,payload:e});t.initTransitionStore=a;const s=e=>({type:r.ActionType.START_TRANSITION_SCRIPT,payload:{script:e}});t.startTransition=s;const l={initTransitionStore:(0,o.bindActionCreators)(a,i.reduxStore.dispatch),startTransition:(0,o.bindActionCreators)(s,i.reduxStore.dispatch)};t.dispatchers=l},50307:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.setWidgetPadding=t.setWidgetOrientation=t.setWidgetMobileOrientation=t.setWidgetLabelBubble=t.setWidgetFontType=t.setWidgetFontSize=t.setWidgetFontFamily=t.setWidgetFontColor=t.setWidgetColor2=t.setWidgetColor=t.setPrechat=t.setPowerGradient=t.setPowerButtonColor=t.setPattern=t.setOnlineLabel=t.setOfflineLabel=t.setOfflineFormTitle=t.setOfflineFormText=t.setMobileOffsetBottom=t.setDesktopOffsetBottom=t.setCallbackButtonColor=t.setCallHeaderText=t.setBubbleColor=t.dispatchers=void 0;var i=n(2036),o=n(62096),a=n(20438),s=r(n(95003)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(10018));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const u=e=>(l.default.widget_color=e,s.default.widget_color=e,{type:i.ActionType.SET_WIDGET_COLOR,payload:{widgetColor:e}});t.setWidgetColor=u;const d=e=>(l.default.widget_color2=e,s.default.widget_color2=e,{type:i.ActionType.SET_WIDGET_COLOR2,payload:{widgetColor2:e}});t.setWidgetColor2=d;const g=e=>(l.default.widget_font_color=e,s.default.widget_font_color=e,{type:i.ActionType.SET_WIDGET_FONT_COLOR,payload:{widgetFontColor:e}});t.setWidgetFontColor=g;const p=e=>(l.default.widget_orientation=e,{type:i.ActionType.SET_WIDGET_ORIENTATION,payload:{widgetOrientation:e}});t.setWidgetOrientation=p;const f=e=>((0,l.setConfigParam)("widget_mobile_orientation",e),{type:i.ActionType.SET_MOBILE_WIDGET_ORIENTATION,payload:{widgetMobileOrientation:e}});t.setWidgetMobileOrientation=f;const h=e=>((0,l.setConfigParam)("mobile_offset_bottom",e),{type:i.ActionType.SET_MOBILE_OFFSET_BOTTOM,payload:{mobileOffsetBottom:e}});t.setMobileOffsetBottom=h;const m=e=>((0,l.setConfigParam)("desktop_offset_bottom",e),{type:i.ActionType.SET_DESKTOP_OFFSET_BOTTOM,payload:{desktopOffsetBottom:e}});t.setDesktopOffsetBottom=m;const _=e=>((0,l.setConfigParam)("power_gradient",e?1:0),{type:i.ActionType.SET_POWER_GRADIENT,payload:{powerGradient:!!e||null}});t.setPowerGradient=_;const v=e=>((0,l.setConfigParam)("power_button_color",e),{type:i.ActionType.SET_MOBILE_WIDGET_COLOR,payload:{powerButtonColor:e}});t.setPowerButtonColor=v;const y=e=>{const t=+e;return l.default.widget_padding=t,{type:i.ActionType.SET_WIDGET_PADDING,payload:{widgetPadding:t}}};t.setWidgetPadding=y;const C=e=>(l.default.online_widget_label=e,{type:i.ActionType.SET_ONLINE_WIDGET_LABEL,payload:{onlineWidgetLabel:e}});t.setOnlineLabel=C;const E=e=>(l.default.offline_widget_label=e,{type:i.ActionType.SET_OFFLINE_WIDGET_LABEL,payload:{offlineWidgetLabel:e}});t.setOfflineLabel=E;const b=e=>(l.default.font_size=e,{type:i.ActionType.SET_WIDGET_FONT_SIZE,payload:{fontSize:e}});t.setWidgetFontSize=b;const S=e=>(l.default.font_family=e,{type:i.ActionType.SET_WIDGET_FONT_FAMILY,payload:{fontFamily:e}});t.setWidgetFontFamily=S;const T=e=>(l.default.font_type=e,{type:i.ActionType.SET_WIDGET_FONT_TYPE,payload:{fontType:e}});t.setWidgetFontType=T;const D=e=>({type:i.ActionType.SET_WIDGET_LABEL_BUBBLE,payload:{labelBubble:e}});t.setWidgetLabelBubble=D;const w=e=>(s.default.callText=e,{type:i.ActionType.SET_CALL_HEADER_TEXT,payload:{callHeaderText:e}});t.setCallHeaderText=w;const O=e=>(l.default.pattern=e,{type:i.ActionType.SET_PATTERN,payload:{pattern:e}});t.setPattern=O;const A=e=>(l.default.callback_btn_color=e,{type:i.ActionType.SET_CALLBACK_BUTTON_COLOR,payload:{callbackButtonColor:e}});t.setCallbackButtonColor=A;const M=e=>(l.default.bubble_color=e,{type:i.ActionType.SET_BUBBLE_COLOR,payload:{bubbleColor:e}});t.setBubbleColor=M;const I=e=>(l.default.offline_form_title=e,{type:i.ActionType.SET_OFFLINE_FORM_TITLE,payload:{offlineFormTitle:e}});t.setOfflineFormTitle=I;const R=e=>(l.default.offline_form_text=e,{type:i.ActionType.SET_OFFLINE_FORM_TEXT,payload:{offlineFormText:e}});t.setOfflineFormText=R;const k=e=>(l.default.prechat=e,{type:i.ActionType.SET_PRECHAT,payload:{prechat:e}});t.setPrechat=k;const L={setWidgetColor:(0,a.bindActionCreators)(u,o.reduxStore.dispatch),setWidgetColor2:(0,a.bindActionCreators)(d,o.reduxStore.dispatch),setWidgetFontColor:(0,a.bindActionCreators)(g,o.reduxStore.dispatch),setWidgetOrientation:(0,a.bindActionCreators)(p,o.reduxStore.dispatch),setWidgetMobileOrientation:(0,a.bindActionCreators)(f,o.reduxStore.dispatch),setDesktopOffsetBottom:(0,a.bindActionCreators)(m,o.reduxStore.dispatch),setMobileOffsetBottom:(0,a.bindActionCreators)(h,o.reduxStore.dispatch),setPowerGradient:(0,a.bindActionCreators)(_,o.reduxStore.dispatch),setPowerButtonColor:(0,a.bindActionCreators)(v,o.reduxStore.dispatch),setWidgetPadding:(0,a.bindActionCreators)(y,o.reduxStore.dispatch),setOnlineLabel:(0,a.bindActionCreators)(C,o.reduxStore.dispatch),setOfflineLabel:(0,a.bindActionCreators)(E,o.reduxStore.dispatch),setWidgetFontSize:(0,a.bindActionCreators)(b,o.reduxStore.dispatch),setWidgetFontFamily:(0,a.bindActionCreators)(S,o.reduxStore.dispatch),setWidgetFontType:(0,a.bindActionCreators)(T,o.reduxStore.dispatch),setWidgetLabelBubble:(0,a.bindActionCreators)(D,o.reduxStore.dispatch),setCallHeaderText:(0,a.bindActionCreators)(w,o.reduxStore.dispatch),setPattern:(0,a.bindActionCreators)(O,o.reduxStore.dispatch),setCallbackButtonColor:(0,a.bindActionCreators)(A,o.reduxStore.dispatch),setBubbleColor:(0,a.bindActionCreators)(M,o.reduxStore.dispatch),setOfflineFormTitle:(0,a.bindActionCreators)(I,o.reduxStore.dispatch),setOfflineFormText:(0,a.bindActionCreators)(R,o.reduxStore.dispatch),setPrechat:(0,a.bindActionCreators)(k,o.reduxStore.dispatch)};t.dispatchers=L},2036:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;t.ActionType={DO_NOTHING:"DO_NOTHING",INIT_CALLBACK_STORE:"INIT_CALLBACK_STORE",SET_CALL_AVAILABLE:"SET_CALL_AVAILABLE",SET_DELAYED_CALL_STATUS:"SET_DELAYED_CALL_STATUS",SET_CALL_IS_DELAYED:"SET_CALL_IS_DELAYED",SET_CALL_STATUS:"SET_CALL_STATUS",SET_CALL_ERROR:"SET_CALL_ERROR",SET_DELAYED_TIMEZONE:"SET_DELAYED_TIMEZONE",SET_DELAYED_PERIODS:"SET_DELAYED_PERIODS",SET_ACTIVE_WEBRTC_MESSAGE_ID:"SET_ACTIVE_WEBRTC_MESSAGE_ID",SET_WEBRTC_CALL_STATUS:"SET_WEBRTC_CALL_STATUS",UPDATE_CALLBACK_STORE:"UPDATE_CALLBACK_STORE",INIT_SOCIAL_STORE:"INIT_SOCIAL_STORE",INIT_APP_STORE:"INIT_APP_STORE",SET_APP_IS_ONLINE:"SET_APP_IS_ONLINE",SET_APP_IS_FOCUSED:"SET_APP_IS_FOCUSED",SET_APP_ROUTE:"SET_APP_ROUTE",SET_LAST_CHAT_OPENED:"SET_LAST_CHAT_OPENED",SET_IS_IN_DRAG:"SET_IS_IN_DRAG",SET_IS_INPUT_DISABLED:"SET_IS_INPUT_DISABLED",SET_MAINTENANCE:"SET_MAINTENANCE",SET_CHAT_OPEN_BY_CLIENT:"SET_CHAT_OPEN_BY_CLIENT",UPDATE_APP_STORE:"UPDATE_APP_STORE",SET_LAST_CHAT_STATUS:"SET_LAST_CHAT_STATUS",SET_QUOTE_MSG_ID:"SET_QUOTE_MSG_ID",SET_HIDDEN_BY_RULES:"SET_HIDDEN_BY_RULES",SET_WIDGET_COLOR:"SET_WIDGET_COLOR",SET_WIDGET_COLOR2:"SET_WIDGET_COLOR2",SET_WIDGET_FONT_COLOR:"SET_WIDGET_FONT_COLOR",SET_WIDGET_ORIENTATION:"SET_WIDGET_ORIENTATION",SET_WIDGET_PADDING:"SET_WIDGET_PADDING",SET_ONLINE_WIDGET_LABEL:"SET_ONLINE_WIDGET_LABEL",SET_OFFLINE_WIDGET_LABEL:"SET_OFFLINE_WIDGET_LABEL",SET_DESKTOP_OFFSET_BOTTOM:"SET_DESKTOP_OFFSET_BOTTOM",SET_WIDGET_FONT_SIZE:"SET_WIDGET_FONT_SIZE",SET_WIDGET_FONT_FAMILY:"SET_WIDGET_FONT_FAMILY",SET_WIDGET_FONT_TYPE:"SET_WIDGET_FONT_TYPE",SET_CALL_HEADER_TEXT:"SET_CALL_HEADER_TEXT",SET_PATTERN:"SET_PATTERN",SET_CALLBACK_BUTTON_COLOR:"SET_CALLBACK_BUTTON_COLOR",SET_BUBBLE_COLOR:"SET_BUBBLE_COLOR",SET_WIDGET_LABEL_BUBBLE:"SET_WIDGET_LABEL_BUBBLE",SET_PRECHAT:"SET_PRECHAT",SET_POWER_GRADIENT:"SET_POWER_GRADIENT",SET_MOBILE_OFFSET_BOTTOM:"SET_MOBILE_OFFSET_BOTTOM",SET_MOBILE_WIDGET_ORIENTATION:"SET_MOBILE_WIDGET_ORIENTATION",SET_MOBILE_WIDGET_COLOR:"SET_MOBILE_WIDGET_COLOR",INIT_AGENTS_STORE:"INIT_AGENTS_STORE",ADD_AGENT:"ADD_AGENT",UPDATE_AGENT:"UPDATE_AGENT",SET_ALL_AGENTS_LEFT:"SET_ALL_AGENTS_LEFT",INIT_BOTS_STORE:"INIT_BOTS_STORE",ADD_BOT:"ADD_BOT",INIT_CHATS_STORE:"INIT_CHATS_STORE",START_CHAT:"START_CHAT",CLOSE_CHAT:"CLOSE_CHAT",SET_JOINED_AGENTS_IN_CURRENT_CHAT:"SET_JOINED_AGENTS_IN_CURRENT_CHAT",ADD_JOINED_AGENT_TO_CURRENT_CHAT:"ADD_JOINED_AGENT_TO_CURRENT_CHAT",REMOVE_AGENT_FROM_CURRENT_CHAT:"REMOVE_AGENT_FROM_CHAT",SET_CURRENT_CHAT_EVALUATED:"SET_CHAT_EVALUATED",SET_AGENT_TYPING:"SET_AGENT_TYPING",SET_CURRENT_CHAT_DEPARTMENT_ID:"SET_CHAT_DEPARTMENT_ID",SET_CURRENT_CHAT_ID:"SET_CURRENT_CHAT_ID",SET_JOINED_BOTS:"SET_JOINED_BOTS",UPDATE_CHATS_STORE:"UPDATE_CHATS_STORE",INIT_TRANSITION_STORE:"INIT_TRANSITION_STORE",START_TRANSITION_SCRIPT:"START_TRANSITION_SCRIPT",CONTINUE_TRANSITION_SCRIPT:"CONTINUE_TRANSITION_SCRIPT",STOP_TRANSITION_SCRIPT:"STOP_TRANSITION_SCRIPT",RESET_TRANSITON_SCRIPT:"RESET_TRANSITON_SCRIPT",INIT_MESSAGES_STORE:"INIT_MESSAGES_STORE",ADD_MESSAGE:"ADD_MESSAGE",ADD_MESSAGES:"ADD_MESSAGES",EDIT_MESSAGE:"EDIT_MESSAGE",DELETE_MESSAGE:"DELETE_MESSAGE",UPDATE_MESSAGE_BODY:"UPDATE_MESSAGE_BODY",UPDATE_MESSAGE_STATUS:"UPDATE_MESSAGE_STATUS",UPDATE_MESSAGE:"UPDATE_MESSAGE",UPDATE_MESSAGES:"UPDATE_MESSAGES",SET_OFFLINE_FORM_TITLE:"SET_OFFLINE_FORM_TITLE",SET_OFFLINE_FORM_TEXT:"SET_OFFLINE_FORM_TEXT",UPDATE_CLIENT_STORE:"UPDATE_CLIENT_STORE",UPDATE_CLIENT_STORE_MANUALLY:"UPDATE_CLIENT_STORE_MANUALLY",RESET_CLIENT_STORE:"RESET_CLIENT_STORE",SET_DISABLE_FILETRANSFER:"SET_DISABLE_FILETRANSFER",SET_ENABLE_PRECHAT:"SET_ENABLE_PRECHAT",ADD_PROACTIVE:"ADD_PROACTIVE",RESET_PROACTIVE:"RESET_PROACTIVE",SET_PROACTIVE_STATUS:"SET_PROACTIVE_STATUS",SET_PROACTIVE_NAME:"SET_PROACTIVE_NAME",SET_PROACTIVE_PRECHATS:"SET_PROACTIVE_PRECHATS",UPDATE_WEBRTCCALL_STATUS:"UPDATE_WEBRTCCALL_STATUS",UPDATE_PERMISSION:"UPDATE_PERMISSION",UPDATE_DESIGNER_SETTINGS:"UPDATE_DESIGNER_SETTINGS",SET_JOINT:"SET_JOINT"}},79156:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.storesMap=t.readoptReduxToClientStorage=t.adoptClientStorageToRedux=void 0;var i=r(n(61125)),o=n(90061),a=n(28650),s=n(71047),l=n(42344),c=n(4510),u=n(17662);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const p=(0,o.createLogger)("REDUX: ClientAdapter"),f={callback:{cw_call:{error:"error",status:"status"},cw_call_enabled:"available",cw_call_delayed_periods:"delayedPeriods",cw_call_delayed_status:"delayedStatus",cw_call_delayed_tz:"delayedTimezone",cw_call_delayed:"isDelayed",activeWebRTCCallMessageId:"activeWebRTCCallMessageId",webRTCCallStatus:"webRTCCallStatus",separateForm:"separateForm"},client:{assigned_agent_id:"assignedAgentId",avatar_url:"avatarUrl",captchaToken:"captchaToken",client_id:"clientId",client_info:{client_name:"name",description:"description",email:"email",phone:"phone"},customData:"customData",department_id:"departmentId",display_name:"displayName",eula_accepted:"eulaAccepted",mailing:"mailing",evaluate:"evaluate",has_integration:"hasIntegration",inputText:"inputText",is_introduced:"isIntroduced",isBlacklisted:"isBlacklisted",isExist:"isExist",jv_sess_id:"sessionId",last_message:"lastMessage",pa_id:"priorityAgentId",user_token:"userToken",utm:"utm",visitorId:"visitorId",tags:"tags",attributes:"attributes",externalData:"externalData"}},h={callback:{name:s.STORAGED_ID.CALLBACK,keys:f.callback,initialState:l.initialState},client:{name:s.STORAGED_ID.CLIENT,keys:f.client,initialState:c.initialState}};t.storesMap=h;t.adoptClientStorageToRedux=(e,t)=>{p.warn("ADOPT_CLIENT_STORAGE_TO_REDUX",{data:e,keysSet:t});const n=h[t],r=n.keys,i=n.initialState;if(!e)return i;const o={};for(const t in r){const n=r[t];var s;if((0,u.isObject)(n))for(const r in n)e[t]&&(0,a.hasOwn)(e[t],r)?o[n[r]]=e[t][r]:o[n[r]]=null;else o[n]=null!==(s=e[t])&&void 0!==s?s:i[n]}return o};t.readoptReduxToClientStorage=(e,t)=>{p.warn("READOPT_CLIENT_STORAGE_TO_REDUX",{data:e,keysSet:t});const n=g({},e),r=h[t].keys;for(const t in r){const i=r[t];if((0,u.isObject)(i))for(const r in i)n[t]=g(g({},n[t]),{},{[r]:e[i[r]]}),delete n[i[r]];else n[t]=e[i],t!==i&&delete n[i]}return n}},91133:function(e,t,n){"use strict";var r=n(17907);t.e=void 0;var i=r(n(61125)),o=n(17662);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.e=(e,t)=>Object.keys(t).reduce((e,n)=>{const r=t[n];return(0,o.isNull)(r)||(e[n]=r),e},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))},28240:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.loggerMiddleware=void 0;var i=r(n(61125)),o=n(90061),a=r(n(22866));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=(0,o.createLogger)("Redux");t.loggerMiddleware=e=>t=>n=>{c.warn("DISPATCHING",n);const r=t(n);return a.default.getInstance()&&a.default.getInstance().saveReduxAction(l(l({},n),{},{ts:(new Date).getTime()})),c.warn("NEXT_STATE",e.getState()),r}},68031:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeOnStorage=t.statesToPersist=t.persistMiddleware=void 0;var i=r(n(10018)),o=n(16016),a=n(2036),s=n(79156),l=n(39715),c=n(71047),u=n(44733),d=n(17662);const g=u.StorageProvider.createKeyForStore(c.STORAGED_ID.POSITION),p=u.StorageProvider.createKeyForStore(c.STORAGED_ID.CLIENT),f={[c.STORAGED_ID.POSITION]:{storageKey:g,path:"position",onAdapter:null,onReadapter:null,onUpdate:null},[c.STORAGED_ID.CLIENT]:{storageKey:p,path:"client",onAdapter:e=>(0,s.adoptClientStorageToRedux)(e,c.STORAGED_ID.CLIENT),onReadapter:e=>(0,s.readoptReduxToClientStorage)(e,c.STORAGED_ID.CLIENT),onUpdate:e=>{i.default.cookie_domain&&u.StorageProvider.duplicateClientStateInCookie(e)}},[c.STORAGED_ID.CALLBACK]:{storageKey:p,path:"callback",onAdapter:e=>(0,s.adoptClientStorageToRedux)(e,c.STORAGED_ID.CALLBACK),onReadapter:e=>(0,s.readoptReduxToClientStorage)(e,c.STORAGED_ID.CALLBACK),onUpdate:null}};t.statesToPersist=f;const h={"position/initPositionStore":f[c.STORAGED_ID.POSITION],[a.ActionType.UPDATE_CLIENT_STORE]:f[c.STORAGED_ID.CLIENT],[a.ActionType.RESET_CLIENT_STORE]:f[c.STORAGED_ID.CLIENT],[a.ActionType.UPDATE_CALLBACK_STORE]:f[c.STORAGED_ID.CALLBACK]};t.persistMiddleware=e=>t=>n=>{if(t(n),n.type===a.ActionType.SET_DID_FREEZE_DATA&&!0===n.payload.didFreezeData)return Object.values(f).forEach(e=>{let t=e.storageKey;return u.StorageProvider.remove(t)});n.type===a.ActionType.RESET_CLIENT_STORE&&u.StorageProvider.remove(f[c.STORAGED_ID.CLIENT].storageKey);const r=e.getState();if(n.type in h&&!r.app.didFreezeData){const e=h[n.type],t=e.storageKey,i=e.path,o=e.onReadapter,a=e.onUpdate,s=(0,l.get)(r,i),c=u.StorageProvider.get(t),d=Object.assign({},c,o?o(s):s);u.StorageProvider.set(t,d),null==a||a(d);const g=v(n.type);u.StorageProvider.set(m,g)}};const m="sync",_=(0,o.generateGUID)(),v=e=>({actionType:e,sourceId:_,time:Date.now()});t.subscribeOnStorage=e=>{window.addEventListener("storage",(e=>t=>{let n=t.key;if((0,u.isJvKeyForStoreToGet)(n)){const t=u.StorageProvider.get(m);if(t&&t.sourceId!==_){const n=h[t.actionType],r=n.storageKey,i=n.onAdapter,o=u.StorageProvider.get(r);e.dispatch({type:t.actionType,payload:(0,d.isFunction)(i)?i(o):o})}}})(e))}},57157:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case a.ActionType.INIT_AGENTS_STORE:if(r&&r.length){const e=r.filter(e=>!e.isBot);return(0,o.default)(e)}return(0,o.default)(e);case a.ActionType.ADD_AGENT:if(r){return e.find(e=>e.id===r.id)?e.map(e=>e.id===r.id?l(l({},e),r):e):[].concat((0,o.default)(e),[l({},r)])}return(0,o.default)(e);case a.ActionType.UPDATE_AGENT:return r?e.map(e=>e.id===r.id?l(l({},e),r):e):(0,o.default)(e);case a.ActionType.SET_ALL_AGENTS_LEFT:return e.map(e=>l(l({},e),{},{state:"left"}));default:return e}};var i=r(n(61125)),o=r(n(15687)),a=n(2036);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=[]},46144:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case o.ActionType.INIT_APP_STORE:return{isFocused:r.isFocused,isOnline:!!r.isOnline,route:r.route,lastChatOpened:r.lastChatOpened,isInDrag:r.isInDrag,isInputDisabled:r.isInputDisabled,maintenance:r.maintenance,chatOpenByClient:r.chatOpenByClient,chatStarted:r.chatStarted,chatAccepted:r.chatAccepted,lastMsgId:r.lastMsgId,lastMsgTime:r.lastMsgTime,started:r.started,viReconnectTime:r.viReconnectTime,didFreezeData:r.didFreezeData,lastChatStatus:r.lastChatStatus,quoteMsgId:r.quoteMsgId,hiddenByRules:r.hiddenByRules};case o.ActionType.SET_APP_IS_ONLINE:return s(s({},e),{},{isOnline:r.isOnline});case o.ActionType.SET_APP_IS_FOCUSED:return s(s({},e),{},{isFocused:r.isFocused});case o.ActionType.SET_CHAT_OPEN_BY_CLIENT:return s(s({},e),{},{chatOpenByClient:r.chatOpenByClient});case o.ActionType.SET_APP_ROUTE:return s(s({},e),{},{route:r.route});case o.ActionType.SET_LAST_CHAT_OPENED:return s(s({},e),{},{lastChatOpened:r.lastChatOpened});case o.ActionType.SET_IS_IN_DRAG:return s(s({},e),{},{isInDrag:r.isInDrag});case o.ActionType.SET_IS_INPUT_DISABLED:return s(s({},e),{},{isInputDisabled:r.isInputDisabled});case o.ActionType.SET_MAINTENANCE:return s(s({},e),{},{maintenance:r.maintenance});case o.ActionType.SET_LAST_CHAT_STATUS:return s(s({},e),{},{lastChatStatus:r.lastChatStatus});case o.ActionType.SET_QUOTE_MSG_ID:return s(s({},e),{},{quoteMsgId:r.quoteMsgId});case o.ActionType.SET_HIDDEN_BY_RULES:return s(s({},e),{},{hiddenByRules:r.hiddenByRules});case o.ActionType.UPDATE_APP_STORE:return s(s({},e),r);default:return e}};var i=r(n(61125)),o=n(2036);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l={isFocused:null,isOnline:null,route:null,lastChatOpened:null,isInDrag:null,isInputDisabled:null,maintenance:null,chatOpenByClient:null,chatStarted:null,chatAccepted:null,lastMsgId:null,lastMsgTime:null,started:null,viReconnectTime:null,didFreezeData:!1,lastChatStatus:null,quoteMsgId:null,hiddenByRules:!1}},56786:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case a.ActionType.INIT_BOTS_STORE:if(r&&r.length){const e=r.filter(e=>e.isBot);return(0,o.default)(e)}return(0,o.default)(e);case a.ActionType.ADD_BOT:if(r){return e.find(e=>e.id===r.id)?e.map(e=>e.id===r.id?l(l({},e),r):e):[].concat((0,o.default)(e),[l({},r)])}return(0,o.default)(e);default:return e}};var i=r(n(61125)),o=r(n(15687)),a=n(2036);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=[]},42344:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;if(n===o.ActionType.UPDATE_CALLBACK_STORE)return s(s({},e),r);return e},t.initialState=void 0;var i=r(n(61125)),o=n(2036);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l={available:null,delayedPeriods:[],delayedStatus:null,delayedTimezone:null,isDelayed:null,status:null,error:null,activeWebRTCCallMessageId:null,webRTCCallStatus:null,separateForm:null};t.initialState=l},99131:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.chatTemplate=void 0,t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case a.ActionType.INIT_CHATS_STORE:return r;case a.ActionType.SET_JOINED_AGENTS_IN_CURRENT_CHAT:return e.map(c(e=>{var t;return l(l({},e),{},{joinedAgents:null!==(t=r.joinedAgents)&&void 0!==t?t:[]})}));case a.ActionType.SET_JOINED_BOTS:return e.map(c(e=>{var t;return l(l({},e),{},{joinedBots:null!==(t=r.joinedBots)&&void 0!==t?t:[]})}));case a.ActionType.ADD_JOINED_AGENT_TO_CURRENT_CHAT:return r.agentId<0?e:e.map(c(e=>e.joinedAgents.includes(r.agentId)?e:l(l({},e),{},{joinedAgents:[].concat((0,i.default)(e.joinedAgents),[r.agentId])})));case a.ActionType.SET_AGENT_TYPING:return e.map(c(e=>l(l({},e),{},{agentTyping:r.agentTyping})));case a.ActionType.SET_CURRENT_CHAT_EVALUATED:return e.map(c(e=>l(l({},e),{},{evaluated:r.evaluated})));case a.ActionType.CLOSE_CHAT:return e.map(c(e=>l(l({},e),{},{joinedAgents:[]})));case a.ActionType.SET_CURRENT_CHAT_ID:return e.map(c(e=>l(l({},e),{},{id:r.id})));default:return e}};var i=r(n(15687)),o=r(n(61125)),a=n(2036);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.chatTemplate={agentTyping:null,departmentId:null,evaluated:null,id:null,joinedAgents:[],joinedBots:[]};const c=e=>(t,n,r)=>n!==r.length-1?t:e(t),u=[]},94514:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(20438),o=n(51344),a=n(16587),s=n(12580),l=n(35073),c=n(62241),u=r(n(57157)),d=r(n(46144)),g=r(n(56786)),p=r(n(42344)),f=r(n(99131)),h=r(n(4510)),m=r(n(20209)),_=r(n(51458)),v=r(n(77620)),y=r(n(78135)),C=r(n(31147)),E=(0,i.combineReducers)({agents:u.default,app:d.default,bots:g.default,callback:p.default,chats:f.default,client:h.default,messages:m.default,position:o.position,proactive:_.default,settings:v.default,social:y.default,transition:C.default,zoom:a.zoom,pageStore:s.pageStore,extensions:l.extensions,system:c.system});t.default=E},20209:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case a.ActionType.INIT_MESSAGES_STORE:return r.messages?(0,o.default)(r.messages):(0,o.default)(e);case a.ActionType.ADD_MESSAGE:return r.message?[].concat((0,o.default)(e),[r.message]):(0,o.default)(e);case a.ActionType.ADD_MESSAGES:return r.messages&&r.messages.length?[].concat((0,o.default)(e),(0,o.default)(r.messages)):(0,o.default)(e);case a.ActionType.UPDATE_MESSAGE_BODY:return r.privateId&&r.body?(0,o.default)(e.map(e=>e.private_id===r.privateId?l(l({},e),{},{body:r.body}):e)):(0,o.default)(e);case a.ActionType.UPDATE_MESSAGE:return e.map(e=>r.messageId&&e.msg_id===r.messageId||r.privateId&&e.private_id===r.privateId?l(l({},e),r.newMessage):e);case a.ActionType.UPDATE_MESSAGES:return e.map(e=>r.messageIds&&r.messageIds.includes(e.msg_id)||r.privateIds&&r.privateIds.includes(e.private_id)?l(l({},e),r.update):e);case a.ActionType.EDIT_MESSAGE:case a.ActionType.DELETE_MESSAGE:return(0,o.default)(e);case a.ActionType.UPDATE_WEBRTCCALL_STATUS:return r.privateId&&r.webRTCCallStatus?(0,o.default)(e.map(e=>e.private_id===r.privateId?l(l({},e),{},{body:l(l({},e.body),{},{webRTCCallStatus:r.webRTCCallStatus})}):e)):(0,o.default)(e);default:return e}};var i=r(n(61125)),o=r(n(15687)),a=n(2036);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=[]},51458:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case o.ActionType.ADD_PROACTIVE:return r?{text:r.text||null,name:r.name||null,createdTs:r.createdTs||null,privateId:r.privateId||null,status:r.status||null,agentId:r.agentId||null,botId:r.botId||null,isMarkdown:r.isMarkdown||null,prechats:r.prechats||null,campaignId:r.campaignId||null}:e;case o.ActionType.SET_PROACTIVE_STATUS:return s(s({},e),{},{status:r.status});case o.ActionType.SET_PROACTIVE_NAME:return s(s({},e),{},{name:r.name});case o.ActionType.SET_PROACTIVE_PRECHATS:return s(s({},e),{},{prechats:r.prechats});case o.ActionType.RESET_PROACTIVE:return l;default:return e}},t.initialState=void 0;var i=r(n(61125)),o=n(2036);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l={text:null,name:null,createdTs:null,privateId:null,status:null,agentId:null,botId:null,isMarkdown:null,prechats:null,campaignId:null};t.initialState=l},49437:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.designer=void 0;var i=r(n(61125)),o=n(2036);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l={isMobileView:!1,mobileRenderTarget:""};t.designer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;return n===o.ActionType.UPDATE_DESIGNER_SETTINGS?s(s({},e),r):e}},37480:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.features=void 0;var i,o=r(n(61125)),a=n(2036),s=r(n(10018));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=s.default.eula,d=s.default.modules,g={apiInvitation:!!s.default.enable_api_invitation,disableEmoji:!!s.default.disable_emoji||null,disableErrorReporting:!!s.default.disable_error_reporting||null,disableFiletransfer:!!s.default.disable_filetransfer||null,disableMobile:!!s.default.disable_mobile||null,disableTelemetry:!!s.default.disable_telemetry||null,eula:u&&{customAgreement:u.custom_agreement||null,customTitle:u.custom_title||null,externalLink:u.external_link||null,titleExternalLink:u.title_external_link||null,useGdpr:u.use_gdpr||null}||null,joint:Array.isArray(s.default.joint)&&!s.default.joint.length?null:s.default.joint||null,logs:!!s.default.logs||null,mobileProactive:Boolean(s.default.mobile_proactive),disableSounds:0===s.default.enable_sounds||null,newVisitorsInsight:!!s.default.new_visitors_insight||null,prechat:!!s.default.enable_prechat||null,regions:s.default.regions||null,typingInsight:Boolean(s.default.typing_insight),modules:d?{videoCall:d.video_calls||null,telephony:d.telephony||null,bots:d.bots||null}:null,webRTCSeparateWindow:!!s.default.enable_webrtc_separate_window||null,enableRequestVideocall:!!s.default.enable_request_videocall||null,disableBotLabel:!!s.default.disable_bot_label||null,campaigns:s.default.campaigns?s.default.campaigns:null,recaptcha:s.default.enable_antispam&&s.default.recaptcha,userToken:!(!s.default.enable_token_connect||!s.default.user_token)||null,enableSpaNavigate:!!s.default.enable_spa_navigate||null,botMedia:!!s.default.bot_media||null,disableMobileBack:!!s.default.disable_mobile_back||null,mailing:s.default.eula&&null!==(i=s.default.mailing)&&void 0!==i?i:null,disableCustomData:!!s.default.disable_custom_data||null};t.features=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case a.ActionType.SET_DISABLE_FILETRANSFER:return c(c({},e),{},{disableFiletransfer:r.disableFiletransfer});case a.ActionType.SET_ENABLE_PRECHAT:return c(c({},e),{},{prechat:r.prechat});case a.ActionType.SET_JOINT:return c(c({},e),{},{joint:r.joint});default:return e}}},77620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(20438),i=n(61547),o=n(84348),a=n(6727),s=n(62241),l=n(37480),c=n(78634),u=n(6511),d=n(49437),g=(0,r.combineReducers)({features:l.features,system:s.system,user:c.user,permissions:u.permissions,campaignPopup:i.campaignPopup,campaignWidget:o.campaignWidget,contactFormPreview:a.contactFormPreview,designer:d.designer});t.default=g},6511:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.permissions=void 0;var i=r(n(61125)),o=n(2036),a=n(62168);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c={[a.Permission.AUDIO]:a.PermissionStatus.UNKNOWN,[a.Permission.VIDEO]:a.PermissionStatus.UNKNOWN};t.permissions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;return n===o.ActionType.UPDATE_PERMISSION?l(l({},e),{},{[r.permission]:r.value}):l({},e)}},78634:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.user=void 0;var i=r(n(61125)),o=n(2036),a=r(n(10018)),s=n(17662),l=n(18276);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d={bubbleColor:a.default.bubble_color||null,callback:a.default.callback_settings&&{time:a.default.callback_settings.time||0,button:!!a.default.callback_settings.button,countries:a.default.callback_settings.countries||null}||null,callbackButtonColor:a.default.callback_btn_color||null,chatMode:a.default.chat_mode||null,contactsAsk:a.default.contacts_ask,contactsSettings:a.default.contacts_settings||null,contactsSettingsNew:a.default.contacts_settings_new||null,custom_langpack:a.default.custom_langpack||null,departments:a.default.departments||null,fontFamily:a.default.font_family||"Arial",fontSize:a.default.font_size&&"0"!==a.default.font_size?a.default.font_size:"15",fontType:a.default.font_type||"normal",hideAd:a.default.hide_ad||null,hideOffline:a.default.hide_offline||null,labelBubble:a.default.label_bubble||0,locale:a.default.locale||null,offlineFormText:a.default.offline_form_text||null,offlineFormTitle:a.default.offline_form_title||null,offlineWidgetLabel:a.default.offline_widget_label||(0,l.l10n)("defOfflineWidgetLabelMobile"),onlineWidgetLabel:a.default.online_widget_label||(0,l.l10n)("defOnlineWidgetLabel"),pattern:a.default.pattern||null,powerButtonColor:a.default.power_button_color||"#44BB6E",powerButtonPhone:a.default.power_button_phone||null,powerGradient:!!a.default.power_gradient||null,prechat:a.default.prechat||null,rules:a.default.rules||null,showRateForm:a.default.show_rate_form||null,rateSettings:a.default.rate_settings?{type:a.default.rate_settings.type,icon:a.default.rate_settings.icon,conditionName:a.default.rate_settings.condition_name,conditionValue:a.default.rate_settings.condition_value,customTitle:a.default.rate_settings.custom_title,goodRateTitle:a.default.rate_settings.good_rate_title,badRateTitle:a.default.rate_settings.bad_rate_title}:null,socialResponse:a.default.social_response||null,widgetColor:a.default.widget_color||"#2f324a",widgetColor2:a.default.widget_color2||"#424867",widgetFontColor:a.default.widget_font_color||null,widgetMobileOrientation:a.default.widget_mobile_orientation||"right",desktopOffsetBottom:a.default.desktop_offset_bottom||null,mobileOffsetBottom:a.default.mobile_offset_bottom||null,widgetOrientation:a.default.widget_orientation||"bottom",widgetPadding:(0,s.isNil)(a.default.widget_padding)?100:+a.default.widget_padding,wixAgentDisplayName:a.default.wix_agent_display_name||null,wixAgentTitle:a.default.wix_agent_title||null,callHeaderText:null};t.user=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;const n=t.type,r=t.payload;switch(n){case o.ActionType.SET_WIDGET_COLOR:return u(u({},e),{},{widgetColor:r.widgetColor});case o.ActionType.SET_WIDGET_COLOR2:return u(u({},e),{},{widgetColor2:r.widgetColor2});case o.ActionType.SET_WIDGET_FONT_COLOR:return u(u({},e),{},{widgetFontColor:r.widgetFontColor});case o.ActionType.SET_WIDGET_ORIENTATION:return u(u({},e),{},{widgetOrientation:r.widgetOrientation});case o.ActionType.SET_MOBILE_WIDGET_ORIENTATION:return u(u({},e),{},{widgetMobileOrientation:r.widgetMobileOrientation});case o.ActionType.SET_DESKTOP_OFFSET_BOTTOM:return u(u({},e),{},{desktopOffsetBottom:r.desktopOffsetBottom});case o.ActionType.SET_MOBILE_OFFSET_BOTTOM:return u(u({},e),{},{mobileOffsetBottom:r.mobileOffsetBottom});case o.ActionType.SET_POWER_GRADIENT:return u(u({},e),{},{powerGradient:r.powerGradient});case o.ActionType.SET_MOBILE_WIDGET_COLOR:return u(u({},e),{},{powerButtonColor:r.powerButtonColor});case o.ActionType.SET_WIDGET_PADDING:return u(u({},e),{},{widgetPadding:r.widgetPadding});case o.ActionType.SET_ONLINE_WIDGET_LABEL:return u(u({},e),{},{onlineWidgetLabel:r.onlineWidgetLabel});case o.ActionType.SET_OFFLINE_WIDGET_LABEL:return u(u({},e),{},{offlineWidgetLabel:r.offlineWidgetLabel});case o.ActionType.SET_WIDGET_FONT_FAMILY:return u(u({},e),{},{fontFamily:r.fontFamily});case o.ActionType.SET_WIDGET_FONT_SIZE:return u(u({},e),{},{fontSize:r.fontSize});case o.ActionType.SET_WIDGET_FONT_TYPE:return u(u({},e),{},{fontType:r.fontType});case o.ActionType.SET_CALL_HEADER_TEXT:return u(u({},e),{},{callHeaderText:r.callHeaderText});case o.ActionType.SET_PATTERN:return u(u({},e),{},{pattern:r.pattern});case o.ActionType.SET_CALLBACK_BUTTON_COLOR:return u(u({},e),{},{callbackButtonColor:r.callbackButtonColor});case o.ActionType.SET_BUBBLE_COLOR:return u(u({},e),{},{bubbleColor:r.bubbleColor});case o.ActionType.SET_WIDGET_LABEL_BUBBLE:return u(u({},e),{},{labelBubble:r.labelBubble});case o.ActionType.SET_OFFLINE_FORM_TITLE:return u(u({},e),{},{offlineFormTitle:r.offlineFormTitle});case o.ActionType.SET_OFFLINE_FORM_TEXT:return u(u({},e),{},{offlineFormText:r.offlineFormText});case o.ActionType.SET_PRECHAT:return u(u({},e),{},{prechat:r.prechat});default:return e}}},78135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;const n=t.type,o=t.payload;if(n===r.ActionType.INIT_SOCIAL_STORE)return o?{vk:o.vk||null,fb:o.fb||null,mode:o.mode||null}:e;return e};var r=n(2036);const i={vk:null,fb:null,mode:null}},31147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;const n=t.type,o=t.payload;switch(n){case r.ActionType.INIT_TRANSITION_STORE:return{currentScript:o&&o.currentScript||null};case r.ActionType.START_TRANSITION_SCRIPT:return{currentScript:o&&o.script||e.currentScript};default:return e}},t.initialState=void 0;var r=n(2036);const i={currentScript:null};t.initialState=i},35233:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectRoute=t.selectQuoteMsgId=t.selectLastChatOpened=t.selectIsOnline=t.selectIsFocused=t.selectChatStarted=t.selectApp=void 0;const n=e=>e.app;t.selectApp=n;t.selectIsOnline=e=>n(e).isOnline;t.selectIsFocused=e=>n(e).isFocused;t.selectRoute=e=>n(e).route;t.selectChatStarted=e=>n(e).chatStarted;t.selectLastChatOpened=e=>n(e).lastChatOpened;t.selectQuoteMsgId=e=>n(e).quoteMsgId},55623:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.selectIsChatNotStarted=t.selectIsChatEvaluated=t.selectChatsIds=t.selectChats=void 0;var i=r(n(15687)),o=n(90189),a=n(66311);t.selectChats=e=>e.chats;t.selectIsChatEvaluated=e=>{var t;const n=(0,o.selectCurrentChat)(e);return null!==(t=null==n?void 0:n.evaluated)&&void 0!==t&&t};t.selectIsChatNotStarted=e=>{const t=(0,o.selectCurrentChat)(e);return!(null!=t&&t.joinedAgents.length||null!=t&&t.joinedBots.length)};t.selectChatsIds=e=>{const t=(0,a.selectMessages)(e);return(0,i.default)(t.reduce((e,t)=>(null!=t&&t.chat_id&&(e.has(t.chat_id)||e.add(t.chat_id)),e),new Set))}},45959:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectLastMessage=t.selectIsIntroduced=t.selectInputText=t.selectEulaAccepted=t.selectDescription=t.selectDepartmentId=t.selectClientName=t.selectClientId=t.selectClientEvaluate=t.selectClientEmail=t.selectClient=void 0;const n=e=>e.client;t.selectClient=n;t.selectClientId=e=>n(e).clientId;t.selectEulaAccepted=e=>n(e).eulaAccepted;t.selectClientEvaluate=e=>n(e).evaluate;t.selectDepartmentId=e=>n(e).departmentId;t.selectClientName=e=>n(e).name||"";t.selectClientEmail=e=>n(e).email||"";t.selectInputText=e=>n(e).inputText||"";t.selectDescription=e=>n(e).description;t.selectLastMessage=e=>n(e).lastMessage||"";t.selectIsIntroduced=e=>n(e).isIntroduced},95448:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFeatures=t.selectCampaigns=void 0;const n=e=>e.settings.features;t.selectFeatures=n;t.selectCampaigns=e=>n(e).campaigns},66311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectSendedMessages=t.selectMessages=t.selectLastMessage=t.selectLastClientMessage=t.selectClientMessages=void 0;var r=n(81152);const i=e=>e.messages;t.selectMessages=i;t.selectSendedMessages=e=>i(e).filter(e=>e.status===r.MessageStatus.SENT);const o=e=>i(e).filter(e=>e.from===r.MessageInitiator.CLIENT);t.selectClientMessages=o;t.selectLastClientMessage=e=>{const t=o(e);if(t.length>0)return t[t.length-1]};t.selectLastMessage=e=>{const t=i(e);if(t.length>0)return t[t.length-1]}},7193:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectProactive=void 0;t.selectProactive=e=>e.proactive},87692:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectWixAgentTitle=t.selectWixAgentDisplayName=t.selectWidgetPadding=t.selectWidgetOrientation=t.selectWidgetMobileOrientation=t.selectWidgetId=t.selectWidgetFontColor=t.selectWidgetColor2=t.selectWidgetColor=t.selectUserCallbackTime=t.selectSettings=t.selectPrechat=t.selectPowerGradient=t.selectPowerButtonPhone=t.selectPowerButtonColor=t.selectPattern=t.selectOfflineWidgetLabel=t.selectOfflineFormTitle=t.selectMobileProactive=t.selectMobileOffsetBottom=t.selectLocale=t.selectLabelBubble=t.selectJoint=t.selectIsPremium=t.selectGeoIp=t.selectEulaEnabled=t.selectEula=t.selectEnablePrechat=t.selectDisableEmoji=t.selectDisableBotLabel=t.selectDesigner=t.selectDepartments=t.selectContactsSettings=t.selectContactsAsk=t.selectCallHeaderText=t.selectBubbleColor=t.selectBillRu=t.selectBaseUrl=t.selectAvatarUrl=void 0;const n=e=>e.settings;t.selectSettings=n;const r=e=>n(e).features,i=e=>n(e).system,o=e=>n(e).user;t.selectEnablePrechat=e=>r(e).prechat;t.selectDisableEmoji=e=>r(e).disableEmoji;t.selectDisableBotLabel=e=>r(e).disableBotLabel;t.selectEula=e=>r(e).eula;t.selectJoint=e=>r(e).joint;t.selectMobileProactive=e=>r(e).mobileProactive;t.selectDesigner=e=>n(e).designer;t.selectAvatarUrl=e=>i(e).avatarUrl;t.selectIsPremium=e=>i(e).premium;t.selectBillRu=e=>i(e).billRu;t.selectBaseUrl=e=>i(e).baseUrl;t.selectWidgetId=e=>i(e).widgetId;t.selectGeoIp=e=>i(e).geoIp;t.selectEulaEnabled=e=>i(e).eula;t.selectBubbleColor=e=>o(e).bubbleColor||"green";t.selectPrechat=e=>o(e).prechat;t.selectLocale=e=>o(e).locale;t.selectDepartments=e=>o(e).departments||[];t.selectContactsSettings=e=>o(e).contactsSettings;t.selectWidgetOrientation=e=>o(e).widgetOrientation;t.selectWidgetMobileOrientation=e=>o(e).widgetMobileOrientation;t.selectMobileOffsetBottom=e=>o(e).mobileOffsetBottom;t.selectCallHeaderText=e=>o(e).callHeaderText;t.selectWidgetPadding=e=>o(e).widgetPadding;t.selectWidgetFontColor=e=>o(e).widgetFontColor||null;t.selectWidgetColor=e=>o(e).widgetColor||null;t.selectWidgetColor2=e=>o(e).widgetColor2||null;t.selectUserCallbackTime=e=>o(e).callback.time;t.selectPowerButtonPhone=e=>o(e).powerButtonPhone;t.selectPattern=e=>o(e).pattern;t.selectPowerButtonColor=e=>o(e).powerButtonColor;t.selectPowerGradient=e=>o(e).powerGradient;t.selectWixAgentDisplayName=e=>o(e).wixAgentDisplayName;t.selectWixAgentTitle=e=>o(e).wixAgentTitle;t.selectOfflineWidgetLabel=e=>o(e).offlineWidgetLabel;t.selectOfflineFormTitle=e=>o(e).offlineFormTitle;t.selectContactsAsk=e=>o(e).contactsAsk;t.selectLabelBubble=e=>o(e).labelBubble},92400:function(e,t){"use strict";t.q=void 0;t.q=e=>e.transition.currentScript},62096:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.reduxStore=void 0;var i=n(20438),o=n(35333),a=n(75291),s=n(44733),l=n(28240),c=n(68031),u=r(n(94514)),d=n(11517);const g=(0,i.configureStore)({reducer:u.default,preloadedState:function(){var e;const t={};return(0,o.each)(c.statesToPersist,function(e){let n=e.storageKey,r=e.path,i=e.onAdapter;const o=s.StorageProvider.get(n);o&&(0,a.set)(t,r,i?i(o):o)}),null!==(e=t.client)&&void 0!==e&&e.attributes&&(t.client.attributes=d.migrations.attributes(t.client.attributes)),t}(),middleware:e=>e({immutableCheck:!1}).concat(l.loggerMiddleware,c.persistMiddleware)});t.reduxStore=g,(0,c.subscribeOnStorage)(g)},5735:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(61125)),o=n(35333),a=n(31484),s=r(n(26754)),l=n(96367),c=r(n(14264)),u=r(n(71277)),d=r(n(2833)),g=n(81152),p=n(21476),f=n(97490),h=n(65465),m=n(4425),_=r(n(66547)),v=r(n(73687)),y=n(90061),C=r(n(92443)),E=r(n(10018)),b=n(73262),S=n(21951),T=n(68403),D=n(13077),w=n(42359),O=n(6222),A=n(80352),M=n(17662),I=n(42634),R=n(97778),k=n(16026),L=n(9550),P=n(94767),x=n(5039),N=n(26932),F=n(44145),j=n(69882),B=n(83907),U=n(74619),V=n(50350),W=n(85948),G=n(45948);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const z=(0,y.createLogger)("ruleManager"),Z=new(0,n(89766).EventEmitter),q=Object.assign(Z,{rules:[],canInvite:!0,initCampaignIds:[],init:function(){var e;const t=(0,F.getApp)(),n=t.maintenance,r=t.route,i=t.chatStarted,o=t.isOnline;if(n)return void z.log("Ignore rules, maintenance");if(r===f.Route.HIDDEN&&!(0,F.getFeatures)().enableSpaNavigate)return void z.log("Ignore rules, widget is hidden");(0,T.isPaidCustomer)()&&(0,a.defaults)(this.rules,E.default.rules);const l=(new Date).getTime();this.hasWidgetCampaign=!1,this.campaigns=null===(e=(0,F.getFeatures)().campaigns)||void 0===e?void 0:e.filter(e=>{var t,n,r,i;const o=w.StatsManager.get(e.campaign_id);return"widget"!==e.type||(e.rules.commands[0].command===B.RuleTypes.PROACTIVE&&(this.hasWidgetCampaign=!0),"widget_settings"in e.content)?(null==o||!o.isSubmitted||"call_to_action"===(null===(t=e.content)||void 0===t||null===(n=t.popup_settings)||void 0===n||null===(r=n.screens)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.action))&&(!e.end_ts||l<1e3*e.end_ts):(z.warn(`CampaignWidget '${e.title}' (#${e.campaign_id}) is no longer running. You need to recreate it.`),!1)}),this.isCampaignsEnable=this.campaigns&&this.campaigns.length>0,(0,D.setRuleLocal)("pageEnterTime",l),(0,D.addPageView)(),s.default.agent_id&&i&&o||this.ready()},ready:function(){const e=this.rules.slice();z.log("RULE MANAGER READY: initialRules",e),this.rules=[],e.forEach((e,t)=>{e.conditions?this.isCampaignsEnable&&this.hasWidgetCampaign&&e.commands[0].command===B.RuleTypes.PROACTIVE?z.warn("Remove proactive rule, because it handled by campaigns."):this.rules.push(new Q(e,t)):z.warn("Remove rule without conditions.")});const t=this.rules.length;this.isCampaignsEnable&&this.campaigns.forEach((e,n)=>{var r,i,o,a;const s=e.campaign_id,l=e.title,c=e.content,u=e.rules;u.conditions?this.rules.push(new Q($($({},u),{},{campaign_id:s,name:l||`Campaign ${s}`,widget_settings:null!==(r=null==c?void 0:c.widget_settings)&&void 0!==r?r:null,popup_settings:null!==(i=null==c?void 0:c.popup_settings)&&void 0!==i?i:null,prechats:null!==(o=null==c||null===(a=c.widget_settings)||void 0===a?void 0:a.prechat_buttons)&&void 0!==o?o:null==c?void 0:c.prechat_buttons}),t+n)):z.warn("Remove campaign without conditions.")}),z.warn("final rules",this.rules)},moveCloseButton:function(){(0,o.each)(this.rules,function(e){(0,D.setRuleLocal)("movedToCloseButton",!0),e.tick()},this)},mouseScroll:function(e){(0,o.each)(this.rules,function(t){(0,D.setRuleLocal)("scrollPosition",e),t.tick()},this)},cancelRule:function(e){z.log("canceling rule",e);for(var t=0;t<this.rules.length;t+=1)!this.rules[t].isTriggered&&this.rules[t].cancel&&this.rules[t].commands[0].command===e&&this.rules[t].cancel();e===B.RuleTypes.PROACTIVE&&(this.canInvite=!1)},allRulesCancel:function(){z.log("allRulesCancel");for(var e=0;e<this.rules.length;e++)!this.rules[e].isTriggered&&this.rules[e].cancel&&this.rules[e].cancel()},handleOnceADay:function(e,t){if(z.log("handleOnceADay",e),e&&e.name){const n=t.id?"id"+t.id:"i"+t.index;v.default.set(`${e.name}_${n}`,e.value||null,R.ONE_DAY_DELAY)}},showProactive:function(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(this.isCampaignsEnable&&o){const e=(0,F.getProactive)().campaignId;if(e)return void z.warn(`Proactive message disabled. Proactive message already have options from campaign #${e}.`);N.proactiveDispatchers.addProactive({campaignId:o})}(n&&"string"==typeof n&&n.includes("markdown")||r)&&(r=!0);const m=c.default.getCurrentChatMessages(),_="Cant show proactive:";if(!this.canInvite||(0,F.getProactive)().text||c.default.getCurrentProactive()||(0,F.getPageStore)().showMobileMenu||p.Router.getCurrentRoute()==f.Route.CHAT&&(0,F.getApp)().chatOpenByClient||(0,F.getApp)().chatStarted&&m&&m.length)return void z.info(`${_} by logic`);const v=(0,F.getUserSettings)().departments;if((0,M.isNumber)(t)&&0!==t&&(null==v||!v.find(e=>+e.id===t)))return void z.info(`${_} department id ${t} is not found.`);d.default.getActiveAgent(c=>{(0,x.getAiInvitation)(d=>{((c,d)=>{z.log("widget status",c,d);const m=(0,F.getClient)();d&&(e=d),(0,F.getApp)().isOnline||(0,F.getAgents)().length?(0,F.getProactive)().text||!c||p.Router.getCurrentRoute()!==f.Route.LABEL&&!A.platform.isChatPage?z.log('invitation failed, no agent OR route != "label" OR proactive already shown'):(c.bot_id||m.priorityAgentId&&m.priorityAgentId===c.agent_id||N.clientDispatchers.setPaId(c.agent_id),v&&(0,M.isNumber)(t)&&N.clientDispatchers.setDepartmentId(t),i&&N.featuresDispatchers.enablePrechat(!0),C.default.proactive({message:e,agentInfo:c,name:n,isMarkdown:r,prechats:i,campaignId:o,conditionList:(0,D.getCondNames)(a),extra:s}),(0,D.setInvitationTime)(),q.emit("show_proactive"),u.default.play("notification"),h.messageActions.destroyByType(g.MessageType.LISTPICKER),h.messageActions.addPrechatMessage(i,o),o?l.analytics.trackCampaignShown(n):l.analytics.trackProactiveInvitationShown(n)):z.info(`${_} for offline`)})(c,d)},n,e)},t)},showCallForm:function(e,t){const n=(0,F.getProactive)();(0,F.getApp)().route!=f.Route.LABEL||n.text&&n.status!=g.MessageStatus.READ?z.warn("ignore showCallForm due to proactive"):C.default.showCallForm(e,()=>{q.emit("show_proactive"),u.default.play("notification"),(0,D.setInvitationTime)(),l.analytics.trackCallWidgetInvitationShown(t)})},showCampaignPopup:function(e,t){var n;const r=e.campaignId,i=(0,F.getApp)().chatAccepted,o=(0,F.getSettings)().campaignPopup,a=o.campaignId,s=o.display,l=null==e||null===(n=e.screens[0])||void 0===n?void 0:n.action,c=(0,O.isFrequencyDelay)(r),u=w.StatsManager.get(r);if(!t){if(i)return void z.warn("Chat accepted by agent. CampaignPopup disabled.");if(c)return void z.warn(`CampaignPopup #${r} is delayed.`);if(s)return void z.warn(`CampaignPopup already have config from campaign #${a}.`);if(null!=u&&u.isSubmitted){if("call_to_action"!==l)return void z.warn(`CampaignPopup #${r} no longer shown. It was accepted by client.`);e.frequency="once_1d"}}C.default.showPopup(e)}});let K,Y;const J=Object.assign(Z,{inited:!1,initialize:function(){this.inited||(this.initScroll(),this.initClose(),this.inited=!0)},initScroll:function(){K=(0,b.throttle)(this._scroll.bind(this),150),(0,S.addListener)(window.parent,"scroll",K)},initClose:function(){this.last_position={},Y=(0,b.throttle)(this._mouse.bind(this),100),(0,S.addListener)(window.parent,"mousemove",Y)},_mouse:function(e){if(this.timerId&&clearTimeout(this.timerId),void 0!==this.last_position.x){var t=this.last_position.x-e.clientX,n=this.last_position.y-e.clientY,r=Math.abs(n)>Math.abs(t)&&n>0,i=!(e.clientY|0),o=e.clientY<=30,a=e.clientY<=this.last_position.dY+30&&n>e.clientY&&n>25;r&&(i||o&&a)&&(this.timerId=setTimeout(()=>{q.moveCloseButton()},200))}this.last_position={x:e.clientX,y:e.clientY,dY:this.last_position.y-e.clientY}},_scroll:function(){const e=window.parent.document;let t=e.documentElement.clientHeight;t===e.documentElement.scrollHeight&&(t=e.body.clientHeight),q.mouseScroll(Math.round((e.documentElement.scrollTop+e.body.scrollTop)/(e.documentElement.scrollHeight-t)*100))},removeEvents:function(){K&&(0,S.removeEvent)(window.parent,"scroll",K),Y&&(0,S.removeEvent)(window.parent,"scroll",Y)}}),Q=function(e,t){const n={initialize:function(){(0,a.defaults)(this,e),this.index=t,this.isCampaign=Boolean(e.campaign_id),this.isTriggered=!1;const n=(0,F.getApp)(),r=n.route,i=n.hiddenByRules;if(r===f.Route.HIDDEN||i)return void z.log("Ignore rule, widget is hidden.");(0,o.each)(this.conditions,function(e){e.condition===B.RuleConditions.WEEK_DAY&&"0"===e.value&&(e.value="7")}),this.timeConditions=[];const s=this.commands[0];let c=!1;const u=this.id?"id"+this.id:"i"+this.index,d=s.command+"_onceADay_"+u,g=v.default.get(d),p=(0,D.hasOnceCondition)(this.conditions);if(p&&g){if(!1!==p.value)return z.log(`Ignore "${this.name}" rule, already triggered today.`),void this.cancel();v.default.set(d,null,1)}if(!p&&s.params&&(s.params.once_aday||s.params.onceADay)&&g)z.log("is once a day rule",this.name);else{if(this.conditions)for(let e=0;e<this.conditions.length;e++){const t=this.conditions[e];(0,D.isGoalCondition)(t.condition)&&J.initialize(),"once_a_day"===t.condition&&(c=!0);const n=t.condition===B.RuleConditions.PAGE_URL;if(n&&(t.value=t.value.replace(/http(|s):\/\//,"")),(0,D.isTimeCondition)(t.condition)||(0,D.isGoalCondition)(t.condition)||(0,F.getFeatures)().enableSpaNavigate&&n){const e=(0,D.isGoalCondition)(t.condition)?(0,D.getGoalValue)(t):(0,D.getValue)(t.condition);t.condition===B.RuleConditions.GOAL_CLICK&&(0,D.initGoalClick)(t.value),z.info(`${this.name}; init condition ${t.condition}; expected=${t.value}; actual=${e}`),this.timeConditions.push(t)}else{if("ab_test_group"===t.condition&&!_.default.get("ab_test_group")){const e=Math.round(Math.random()),n=t.group_name?t.group_name:"JivoSite A/B Group";_.default.set("ab_test_group",e?"group_a":"group_b"),l.analytics.setABTestGroupContacts(n,e?"Group A":"Group B")}const n=(0,D.checkCondition)(t,this.name);if(this.conditions[e].isChecked=n,this.conditions[e].isStatic=!0,n)c=!0;else if("all"===this.type)return}}this.campaign_id&&(0,D.isAllStaticChecked)(this.conditions,this.type)&&q.initCampaignIds.push(this.campaign_id),this.timeConditions.length>0?(0,D.checkTimeConditions)(this.timeConditions,this.type,this.name)?this.triggered():this.timeWait():c&&this.triggered()}},timeWait:function(){var e=this;clearTimeout(this.timeWaitTimeout),this.timeWaitTimeout=setTimeout(function(){e.tick()},1e3)},tick:function(){!this.isTriggered&&(0,D.checkTimeConditions)(this.conditions,this.type,this.name)?this.triggered():this.timeWait()},cancel:function(){clearTimeout(this.timeWaitTimeout),this.isTriggered=!0},triggered:function(){var e,t,n,r,i;z.log("triggered",this.name);const o=this.commands[0];clearTimeout(this.timeWaitTimeout),this.isTriggered=!0;let a={};(0,M.isObject)(o.params)&&(a={name:o.command+"_onceADay",value:o.params.once_aday||o.params.onceADay?1:null});const s=(0,D.hasOnceCondition)(this.conditions);z.log("onceCondition",s,this.conditions),s&&(a={name:o.command+"_onceADay",value:s.value});const d=(0,D.isPopupCommand)(o.command),p=(0,F.getApp)().route,_=(0,F.getApp)().isOnline;if(p!==f.Route.LABEL&&d&&(0,F.getApp)().chatOpenByClient||A.platform.isChatPage&&[f.Route.DEPARTMENTS,f.Route.INTRODUCE].includes(p))return void z.log("cant show proactive",p);const v=(0,F.getClient)();if(d&&(0,D.isYandexMarketClient)(v.utm))return void z.log("ignore proactive for YMarket");const y=this.widget_settings,E=this.campaign_id&&y?(0,P.getFormattedTextForProactiveCampaign)(y):null===(e=o.params)||void 0===e?void 0:e.message,b=(0,F.getUserSettings)(),S=b.contactsAsk,w=b.chatMode,O=this.campaign_id,I=this.popup_settings,R=this.frequency;switch(o.command){case B.RuleTypes.PROACTIVE:q.showProactive(E,null!==(t=o.params)&&void 0!==t&&t.department?+(null===(n=o.params)||void 0===n?void 0:n.department):void 0,this.name,!!this.campaign_id||this.isMarkdown,this.prechats,this.campaign_id,this.conditions,this.campaign_id?{img_src:y.img_src,img_position:y.img_position,background:y.background,text_color:y.text_color}:null);break;case B.RuleTypes.OPEN_OFFLINE:if((0,F.getClient)().isIntroduced)return z.warn("Client introduced earlier, OPEN_OFFLINE canceled."),void q.cancelRule(B.RuleTypes.OPEN_OFFLINE);if(w===m.ChatMode.ONLINE||p!==f.Route.LABEL||(0,F.getPageStore)().showMobileMenu)return;(0,D.setInvitationTime)(),o.params&&(o.params.title&&N.userDispatchers.setOfflineFormTitle(o.params.title),o.params.message&&(h.messageActions.deleteOfflineSystemInvites(),N.userDispatchers.setOfflineFormText(o.params.message))),C.default.openOffline(),q.emit("show_proactive"),u.default.play("notification"),l.analytics.trackProactiveInvitationShown(this.name),q.cancelRule(B.RuleTypes.OPEN_OFFLINE);break;case B.RuleTypes.HIDE:N.appDispatchers.setHiddenByRules(!0),(0,F.getFeatures)().enableSpaNavigate||((0,W.addSyncExclude)("route"),N.appDispatchers.setAppRoute(f.Route.HIDDEN)),q.allRulesCancel(),u.default.disableSoundPlayer();break;case B.RuleTypes.SYSTEM_MESSAGE:if(_){var k,x;const e=c.default.getLastMessage();e&&e.get("type")===g.MessageType.SYSTEM&&e.get("text")===(null===(k=o.params)||void 0===k?void 0:k.message)&&e.destroy(),(0,D.setInvitationTime)(),C.default.systemMessage(null===(x=o.params)||void 0===x?void 0:x.message),h.messageActions.addPrechatMessage()}break;case B.RuleTypes.SYSTEM_EMAIL:if(!_)return;if(_&&S===L.ContactsType.SOCIAL)return void z.log("systemMessageEmail failed, contact settings is social");if(v.email)return void z.log("Client already has email. Rule ignored.");if((0,T.hasIntegration)(v.hasIntegration))return void z.log("systemMessageEmail failed, client has integration");(0,D.setInvitationTime)(),C.default.systemMessageEmail(null===(r=o.params)||void 0===r?void 0:r.message),h.messageActions.addPrechatMessage();break;case B.RuleTypes.SHOW_CALLFORM:q.showCallForm((null===(i=o.params)||void 0===i?void 0:i.title).replace("<br>","").replace("<span>","").replace("<span style='color: #40cd72'>","").replace("</span>",""),this.name);break;case B.RuleTypes.SHOW_POPUP:q.showCampaignPopup($($({},I),{},{frequency:R,campaignId:O}))}q.handleOnceADay(a,this)}};return n.initialize(),n};(0,F.getFeatures)().enableSpaNavigate&&new U.Observer({onUrlChange:()=>{const e=(0,j.getCurrentPage)(),t=e.title,n=e.url;(0,V.sendUrlChange)(t,n),(0,D.setRuleLocal)("firstMessageTime",null),G.isPopupConstructor||k.EnvironmentManager.isWidgetConstructor()||N.appDispatchers.setHiddenByRules(!1),(0,I.deleteProactiveMessage)(!0),q.allRulesCancel(),q.initCampaignIds=[],q.campaigns=[],q.rules=[],q.init()}}),s.default.addListener(function(){s.default.agent_id&&(0,F.getApp)().chatStarted&&(0,F.getApp)().isOnline&&q.allRulesCancel()}),c.default.on("create",()=>{c.default.getCurrentClientMessages().length&&!(0,D.getRuleLocal)("firstMessageTime")&&(z.log("cancelRules, we have client messsages."),q.cancelRule(B.RuleTypes.PROACTIVE),q.cancelRule(B.RuleTypes.SHOW_CALLFORM));const e=c.default.getLastMessage();e&&e.get("type")===B.RuleTypes.PROACTIVE&&q.cancelRule(B.RuleTypes.PROACTIVE),c.default.getAgentTextMessages().length&&e.get("from")!==g.MessageInitiator.CLIENT&&(z.log("cancel system_message, we have agentMessage"),q.cancelRule(B.RuleTypes.SYSTEM_MESSAGE))}),(0,S.addListener)(window.parent,"jBeforeunload",J.removeEvents);var X=q;t.default=X},26754:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(40694);const o=(0,r(n(85948)).default)({agent_id:0,bot_id:0,display_name:null,title:null,avatar_url:null,typing:0,state:null,isUpdateFromBot:null});o.toReduxFormat=()=>(0,i.agentToReduxFormat)(o);var a=o;t.default=a},95003:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(10018)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(85948)),a=n(69882),s=n(31484),l=n(97490),c=n(4425),u=r(n(73687)),d=n(44733),g=n(71047),p=n(9550),f=n(44145),h=n(16026),m=n(45948),_=n(80352);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const y={route:l.Route.LABEL,is_online:0,is_focused:!1,chat_started:!1,chat_accepted:!1,widget_color:i.default.widget_color,widget_color2:i.default.widget_color2,widget_font_color:i.default.widget_font_color,cap_id:null,forcedOffline:!1,callText:null,maintenance:null,eula_accepted:!1,width:!1,height:!1,viReconnectTime:null,lastMsgId:null,lastChatOpened:null,started:!1,lastMsgTime:null,didFreezeData:!1,lastChatStatus:null,quoteMsgId:null,hiddenByRules:!1},C=h.EnvironmentManager.isDesignerEditor()?null:d.StorageProvider.createKeyForStore(g.STORAGED_ID.APP),E=(0,o.default)(y,C),b=(0,f.getClient)();E.widget_color=i.default.widget_color,E.widget_color2=i.default.widget_color2,E.widget_font_color=i.default.widget_font_color,E.is_online=i.default.chat_mode===c.ChatMode.ONLINE?1:0,E.is_online||null!==b.sessionId||(E.chat_started=!1),(0,a.isWixEditor)()&&(E.chat_started=!1),_.platform.isMobileOrTablet&&(E.route=l.Route.LABEL),(0,s.defaults)(i.default,{contacts_settings:{name:{show:!1,required:!1},phone:{show:!1,required:!1},email:{show:!1,required:!1}}}),1!==i.default.hide_offline||512&i.default.options||(i.default.hide_offline=0),1!=i.default.show_rate_form||64&i.default.options||(i.default.show_rate_form=0),(0,o.addSyncExclude)("hiddenByRules"),E.hiddenByRules&&(0,o.addSyncExclude)("route"),E.route==l.Route.HIDDEN&&(E.route=l.Route.LABEL),E.chat_started&&E.chat_accepted&&!_.platform.isMobileOrTablet?(i.default.label_bubble?E.route=E.route===l.Route.LABEL?l.Route.LABEL:l.Route.CHAT:E.route=E.route===l.Route.CHAT_MIN?l.Route.CHAT_MIN:l.Route.CHAT,i.default.hide_offline=0):E.route=l.Route.LABEL,E.route==l.Route.INTRODUCE&&i.default.contacts_ask!==p.ContactsType.BEFORE_CHAT&&(E.route=l.Route.CHAT),E.route==l.Route.INTRODUCE&&b.isIntroduced&&(E.route=l.Route.CHAT),E.route!=l.Route.INTRODUCE||E.is_online||(E.route=l.Route.CHAT),E.route==l.Route.CHAT_SOCIAL&&(E.route=l.Route.CHAT),E.route!=l.Route.CHAT_EVAL&&E.route!=l.Route.CHAT_INTRODUCE||(E.route=l.Route.CHAT),!_.platform.isMobile&&E.zoom&&(E.zoom=null),h.EnvironmentManager.isRegPage()&&(E.route=l.Route.CHAT);const S=i.default.contacts_ask===p.ContactsType.BEFORE_CHAT&&!b.isIntroduced&&E.is_online;_.platform.isChatPage?S?E.route=l.Route.INTRODUCE:i.default.departments&&!E.chat_started&&E.is_online?E.route=l.Route.DEPARTMENTS:E.route=l.Route.CHAT:S&&E.route==l.Route.CHAT&&(E.route=l.Route.INTRODUCE),(!E.is_online&&i.default.hide_offline&&!E.chat_started||u.default.get("is_blacklisted")||_.platform.isMobileOrTablet&&i.default.disable_mobile||(0,a.isAppCobrowse)())&&(E.route=l.Route.HIDDEN),m.isPopupConstructor&&(E.route=l.Route.HIDDEN),E.hiddenByRules=!1,i.default.cookie_domain&&d.StorageProvider.migrate();var T=E;t.default=T},10895:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){const n=[].concat(t);for(;n.length>0;)e=n.pop()(e);return e}}},53401:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.splitCookieOnEntries=t.setCookie=t.parseCookies=t.getCookie=t.deleteCookie=void 0;var i=r(n(67375)),o=n(80210),a=n(17662),s=n(10895);const l=e=>e.toUTCString(),c=e=>e.map(e=>e.trim()),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:432e5;const t=(new Date).getTime()+e;return l(new Date(t))};t.getCookie=e=>{const t=(0,a.isRegExp)(e)?e:new RegExp(e+"=([^;]*)"),n=document.cookie.match(t),r=(0,s.compose)(JSON.parse,decodeURIComponent);return n?r(n[1]):null};const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Object.assign({path:"/",expires:u()},n);(0,a.isDate)(r.expires)&&(r.expires=l(r.expires)),(0,a.isNumber)(r.expires)&&(r.expires=(e=>{const t=new Date;return t.setDate(t.getDate()+e),l(t)})(r.expires));const s=Object.entries(r),c=(0,a.isString)(t)?t:JSON.stringify(t),d=(0,o.encodeAndJoinPair)([e,c]),g=s.reduceRight((e,t)=>{let n=(0,i.default)(t,2);return e+`; ${n[0]}=${n[1]}`},d);return document.cookie=g};t.setCookie=d;t.deleteCookie=e=>d(e,"",{"max-age":-1});t.parseCookies=()=>document.cookie.split(";").reduce((e,t)=>{var n;const r=(0,o.splitAndDecodePair)(t),i=r[0].trim(),a=null!==(n=r[1])&&void 0!==n?n:"";return e[i]=a.trim(),e},{});t.splitCookieOnEntries=()=>{const e=document.cookie.split(";"),t=(0,s.compose)(c,o.splitAndDecodePair);return e.map(t)}},31484:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[0],o=t.slice(1),a=Object.assign({},r);return Object.assign.apply(Object,[r].concat((0,i.default)(o),[a]))};var i=r(n(15687))},60277:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extend=void 0;t.extend=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?Object.assign.apply(Object,[e].concat(n)):{}}},21434:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.fileName=void 0;var i=r(n(67375)),o=n(39731);t.fileName=e=>{const t=(0,o.splitString)(e,"."),n=(0,i.default)(t,2);return{name:n[0],ext:n[1]}}},37578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterObj=void 0;var r=n(28650);t.filterObj=(e,t)=>Object.keys(e).reduce((n,i)=>((0,r.hasOwn)(e,i)&&t(e[i],i)&&(n[i]=e[i]),n),{})},39715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){return(0,r.isString)(t)?i(t.match(/([^[.\]])+/g)):(0,r.isArray)(t)?i(t):void 0;function i(t){return t.reduce((e,t)=>{try{e=e[t]}catch(e){return n}return e},e)}};var r=n(17662)},28650:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},35967:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.intersection=void 0;var i=r(n(55067));t.intersection=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return[];const o=(0,i.default)(Set,n);return e.filter(e=>o.has(e))}},82956:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.xhrPromised=t.xhr=t.createCancelablePromise=t.CancelError=void 0;var i=r(n(92664)),o=r(n(33119)),a=r(n(7819)),s=r(n(84827)),l=r(n(85299)),c=r(n(55536)),u=r(n(51398)),d=r(n(61125)),g=r(n(67375));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}const f=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(/[\r\n]+/).reduce((e,t)=>{const n=t.split(": "),r=(0,g.default)(n,2),i=r[0],o=r[1];return e[i]=o,e},{})},h=(e,t,n,r)=>{const i=new XMLHttpRequest;return i.open(t,e,!0),n.headers&&Object.keys(n.headers).forEach(e=>{i.setRequestHeader(e,n.headers[e])}),i.timeout=n.timeout,i.responseType=n.responseType,i.withCredentials=n.withCredentials,i.onload=()=>n.validateStatus(i.status)?r(null,{data:i.response,status:i.status,statusText:i.statusText,headers:f(i.getAllResponseHeaders())}):r({data:i.response,status:i.status,statusText:i.statusText}),i.onerror=e=>r({data:i.response,status:i.status,statusText:i.statusText}),i.upload.onprogress=n.onUpload,i.onprogress=n.onDownload,i.ontimeout=n.onTimeout||r,i.send(n.body),i};t.xhr=h;t.xhrPromised=(e,t,n)=>new Promise((r,i)=>h(e,t,n,(e,t)=>e?i(e):r(t)));let m=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,d.default)((0,a.default)(e),"name","CancelError"),(0,d.default)((0,a.default)(e),"message","Canceled"),e}return(0,i.default)(n)}((0,u.default)(Error));t.CancelError=m;t.createCancelablePromise=e=>{let t=!1;const n=new m;return{promise:new Promise((r,i)=>{e.then(e=>t?i(n):r(e)).catch(e=>i(t?n:e))}),cancel:()=>t=!0,isCanceled:t}}},42687:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.omit=void 0;var i=r(n(61125));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.omit=function(e){e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return null!=n&&n.length?(n.forEach(t=>delete e[t]),e):e}},38392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pick=void 0;var r=n(17662);t.pick=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return(0,r.isUndefined)(n)?{}:n.reduce((t,n)=>(n in e&&(t[n]=e[n]),t),{})}},80210:function(e,t,n){"use strict";var r=n(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.encodeAndJoinPair=s,t.querystring=void 0,t.splitAndDecodePair=l;var i=r(n(67375)),o=n(52429),a=n(39731);function s(e){return e.map(encodeURIComponent).join("=")}function l(e){return e.split("=").map(decodeURIComponent)}const c={create:e=>e?function(e){return Object.entries(e).map(s).join("&")}(e):"",parse:e=>{if(e){const t=(0,a.splitString)(e,"?");return function(e){const t=e.split("&");return(0,o.fromEntries)(t.map(l))}((0,i.default)(t,2)[1])}}};t.querystring=c},53489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=function(e){if(!1===(0,r.isString)(e))throw new TypeError("Filename must be string.");const t=(0,i.fileName)(e),n=t.name,s=t.ext,l=n.replace(o,"").replace(a,"_");return(l.length?l:"Untitled")+"."+s};var r=n(17662),i=n(21434);const o=/[/?<>\\:*|"%#]/g,a=/\s+/g},75291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e,t,n){if((0,r.isString)(t))return i(t.match(/([^[.\]])+/g));if((0,r.isArray)(t))return i(t);function i(t){t.reduce((e,t,i,o)=>((0,r.isUndefined)(e[t])&&(e[t]={}),i===o.length-1&&(e[t]=n),e[t]),e)}};var r=n(17662)},39731:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitString=void 0;t.splitString=(e,t,n)=>{const r=e[n?"indexOf":"lastIndexOf"](t),i=e.substring(0,r);return[i,e.substring(r+(i?t.length:1))]}},38632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parentSS=t.parentLS=void 0;var r=n(45926),i=n(71047),o=n(17662),a=n(4623);const s=c(i.STORAGE_TYPE.LOCAL);t.parentLS=s;const l=c(i.STORAGE_TYPE.SESSION);function c(e,t){(0,a.tryCatch)(()=>e=(0,r.getPageWindow)()[e]);const n=e=>(0,a.tryCatch)(e,t);return{get(t){return n(()=>{const n=e.getItem(t);return JSON.parse(n)})},set(t,r){return n(()=>{const n=(0,o.isString)(r)?r:JSON.stringify(r);return e.setItem(t,n),r})},remove(t){return n(()=>e.removeItem(t))},keys(){return n(()=>Object.keys(e))},values(){return n(()=>Object.values(e).map(JSON.parse))},all(){return n(()=>Object.assign({},e))},clear(){return n(()=>e.clear())},status(){return function(e){return(0,a.tryCatch)(()=>{const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),i.STORAGE_STATUS.AVAILABLE},t=>t instanceof DOMException&&function(e){return e&&0!==e.length}(e)&&function(e){return 22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUATA_REACHED"===e.name}(t)?i.STORAGE_STATUS.EXCEED:i.STORAGE_STATUS.UNAVAILABLE)}(e)}}}t.parentSS=l},4623:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryCatch=function(e,t){try{return e()}catch(e){return(0,r.isFunction)(t)?t(e):t}};var r=n(17662)},76784:function(e,t,n){"use strict";t.G=void 0;var r=n(58345);t.G=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return(0,r.unique)(e.concat.apply(e,n))}},15201:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.without=void 0;t.without=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(0===n.length)return e;const i=new Set(n);return e.filter(e=>!i.has(e))}},94184:function(e,t){var n;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},95299:function(e,t,n){var r=n(27698);e.exports=r},83450:function(e,t,n){var r=n(83363);e.exports=r},66820:function(e,t,n){var r=n(56243);e.exports=r},90093:function(e,t,n){var r=n(28196);e.exports=r},15684:function(e,t,n){var r=n(19373);e.exports=r},84234:function(e,t,n){var r=n(82073);e.exports=r},92182:function(e,t,n){var r=n(15868);e.exports=r},65362:function(e,t,n){var r=n(63383);e.exports=r},32271:function(e,t,n){var r=n(14471);e.exports=r},43536:function(e,t,n){var r=n(41910);e.exports=r},37331:function(e,t,n){var r=n(79427);e.exports=r},99565:function(e,t,n){var r=n(96507);e.exports=r},78690:function(e,t,n){var r=n(16670);e.exports=r},84670:function(e,t,n){var r=n(61895);e.exports=r},41285:function(e,t,n){var r=n(18254);e.exports=r},80281:function(e,t,n){var r=n(92547);e.exports=r},40031:function(e,t,n){var r=n(46509);e.exports=r},54493:function(e,t,n){n(77971),n(53242);var r=n(54058);e.exports=r.Array.from},24034:function(e,t,n){n(92737);var r=n(54058);e.exports=r.Array.isArray},8700:function(e,t,n){n(99076);var r=n(35703);e.exports=r("Array").indexOf},24900:function(e,t,n){n(60186);var r=n(35703);e.exports=r("Array").slice},27700:function(e,t,n){n(73381);var r=n(35703);e.exports=r("Function").bind},13830:function(e,t,n){n(66274),n(77971);var r=n(22902);e.exports=r},16246:function(e,t,n){var r=n(7046),i=n(27700),o=Function.prototype;e.exports=function(e){var t=e.bind;return e===o||r(o,e)&&t===o.bind?i:t}},34570:function(e,t,n){var r=n(7046),i=n(8700),o=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===o||r(o,e)&&t===o.indexOf?i:t}},69601:function(e,t,n){var r=n(7046),i=n(24900),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||r(o,e)&&t===o.slice?i:t}},91018:function(e,t,n){n(66274),n(37501),n(55967),n(77971);var r=n(54058);e.exports=r.Map},45999:function(e,t,n){n(49221);var r=n(54058);e.exports=r.Object.assign},35254:function(e,t,n){n(53882);var r=n(54058).Object;e.exports=function(e,t){return r.create(e,t)}},48171:function(e,t,n){n(86450);var r=n(54058).Object,i=e.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(i.sham=!0)},286:function(e,t,n){n(46924);var r=n(54058).Object,i=e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)};r.getOwnPropertyDescriptor.sham&&(i.sham=!0)},13966:function(e,t,n){n(17405);var r=n(54058);e.exports=r.Object.getPrototypeOf},3065:function(e,t,n){n(90108);var r=n(54058);e.exports=r.Object.setPrototypeOf},14983:function(e,t,n){n(7453);var r=n(54058);e.exports=r.Reflect.construct},37095:function(e,t,n){n(42355);var r=n(54058);e.exports=r.Reflect.get},57473:function(e,t,n){n(85906),n(55967),n(35824),n(8555),n(52615),n(21732),n(35903),n(1825),n(28394),n(45915),n(61766),n(62737),n(89911),n(74315),n(63131),n(64714),n(70659),n(69120),n(79413),n(1502);var r=n(54058);e.exports=r.Symbol},24227:function(e,t,n){n(66274),n(55967),n(77971),n(1825);var r=n(11477);e.exports=r.f("iterator")},27385:function(e,t,n){e.exports=n(64225)},81522:function(e,t,n){e.exports=n(30382)},32209:function(e,t,n){e.exports=n(40478)},14122:function(e,t,n){e.exports=n(89097)},69447:function(e,t,n){e.exports=n(628)},81493:function(e,t,n){e.exports=n(97088)},86672:function(e,t,n){e.exports=n(44574)},60269:function(e,t,n){e.exports=n(76936)},76094:function(e,t,n){e.exports=n(26467)},73685:function(e,t,n){e.exports=n(80621)},27533:function(e,t,n){e.exports=n(48403)},74303:function(e,t,n){e.exports=n(28688)},55122:function(e,t,n){e.exports=n(5383)},10856:function(e,t,n){e.exports=n(46733)},31524:function(e,t,n){e.exports=n(82432)},86600:function(e,t,n){e.exports=n(52201)},9759:function(e,t,n){e.exports=n(27398)},64225:function(e,t,n){var r=n(95299);e.exports=r},30382:function(e,t,n){var r=n(83450);e.exports=r},40478:function(e,t,n){var r=n(66820);e.exports=r},89097:function(e,t,n){var r=n(90093);e.exports=r},628:function(e,t,n){var r=n(15684);e.exports=r},97088:function(e,t,n){var r=n(84234);e.exports=r},44574:function(e,t,n){var r=n(92182);n(52453),n(32523),n(66591),n(55121),n(14751),n(52407),n(48580),n(27281),n(36507),n(93647),n(47641),n(18552),n(27693),n(8),n(48514),n(8212),n(89642),n(78485),n(42256),n(68826),e.exports=r},76936:function(e,t,n){var r=n(65362);e.exports=r},26467:function(e,t,n){var r=n(32271);e.exports=r},80621:function(e,t,n){var r=n(43536);e.exports=r},48403:function(e,t,n){var r=n(37331);e.exports=r},28688:function(e,t,n){var r=n(99565);e.exports=r},5383:function(e,t,n){var r=n(78690);e.exports=r},46733:function(e,t,n){var r=n(84670);e.exports=r},82432:function(e,t,n){var r=n(41285);e.exports=r},52201:function(e,t,n){var r=n(80281);n(28783),n(43975),n(65799),n(31943),n(46774),n(45414),n(80620),n(36172),e.exports=r},27398:function(e,t,n){var r=n(40031);e.exports=r},24883:function(e,t,n){var r=n(57475),i=n(69826),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},174:function(e,t,n){var r=n(24284),i=n(69826),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a constructor")}},11851:function(e,t,n){var r=n(57475),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},18479:function(e){e.exports=function(){}},5743:function(e,t,n){var r=n(7046),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},96059:function(e,t,n){var r=n(10941),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},97135:function(e,t,n){var r=n(95981);e.exports=r(function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})},11354:function(e,t,n){"use strict";var r=n(86843),i=n(78834),o=n(89678),a=n(75196),s=n(6782),l=n(24284),c=n(10623),u=n(55449),d=n(53476),g=n(22902),p=Array;e.exports=function(e){var t=o(e),n=l(this),f=arguments.length,h=f>1?arguments[1]:void 0,m=void 0!==h;m&&(h=r(h,f>2?arguments[2]:void 0));var _,v,y,C,E,b,S=g(t),T=0;if(!S||this===p&&s(S))for(_=c(t),v=n?new this(_):p(_);_>T;T++)b=m?h(t[T],T):t[T],u(v,T,b);else for(E=(C=d(t,S)).next,v=n?new this:[];!(y=i(E,C)).done;T++)b=m?a(C,h,[y.value,T],!0):y.value,u(v,T,b);return v.length=T,v}},31692:function(e,t,n){var r=n(74529),i=n(59413),o=n(10623),a=function(e){return function(t,n,a){var s,l=r(t),c=o(l),u=i(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},3610:function(e,t,n){var r=n(86843),i=n(95329),o=n(37026),a=n(89678),s=n(10623),l=n(64692),c=i([].push),u=function(e){var t=1==e,n=2==e,i=3==e,u=4==e,d=6==e,g=7==e,p=5==e||d;return function(f,h,m,_){for(var v,y,C=a(f),E=o(C),b=r(h,m),S=s(E),T=0,D=_||l,w=t?D(f,S):n||g?D(f,0):void 0;S>T;T++)if((p||T in E)&&(y=b(v=E[T],T,C),e))if(t)w[T]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return T;case 2:c(w,v)}else switch(e){case 4:return!1;case 7:c(w,v)}return d?-1:i||u?u:w}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},50568:function(e,t,n){var r=n(95981),i=n(99813),o=n(53385),a=i("species");e.exports=function(e){return o>=51||!r(function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},34194:function(e,t,n){"use strict";var r=n(95981);e.exports=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){return 1},1)})}},15790:function(e,t,n){var r=n(59413),i=n(10623),o=n(55449),a=Array,s=Math.max;e.exports=function(e,t,n){for(var l=i(e),c=r(t,l),u=r(void 0===n?l:n,l),d=a(s(u-c,0)),g=0;c<u;c++,g++)o(d,g,e[c]);return d.length=g,d}},93765:function(e,t,n){var r=n(95329);e.exports=r([].slice)},5693:function(e,t,n){var r=n(1052),i=n(24284),o=n(10941),a=n(99813)("species"),s=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===s||r(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},64692:function(e,t,n){var r=n(5693);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},75196:function(e,t,n){var r=n(96059),i=n(7609);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},21385:function(e,t,n){var r=n(99813)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},82532:function(e,t,n){var r=n(95329),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},9697:function(e,t,n){var r=n(22885),i=n(57475),o=n(82532),a=n(99813)("toStringTag"),s=Object,l="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?n:l?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},28984:function(e,t,n){"use strict";var r=n(78834),i=n(24883),o=n(96059);e.exports=function(){for(var e,t=o(this),n=i(t.delete),a=!0,s=0,l=arguments.length;s<l;s++)e=r(n,t,arguments[s]),a=a&&e;return!!a}},83590:function(e,t,n){"use strict";var r=n(86843),i=n(78834),o=n(24883),a=n(174),s=n(82119),l=n(93091),c=[].push;e.exports=function(e){var t,n,u,d,g=arguments.length,p=g>1?arguments[1]:void 0;return a(this),(t=void 0!==p)&&o(p),s(e)?new this:(n=[],t?(u=0,d=r(p,g>2?arguments[2]:void 0),l(e,function(e){i(c,n,d(e,u++))})):l(e,c,{that:n}),new this(n))}},45226:function(e,t,n){"use strict";var r=n(93765);e.exports=function(){return new this(r(arguments))}},85616:function(e,t,n){"use strict";var r=n(65988).f,i=n(29290),o=n(94380),a=n(86843),s=n(5743),l=n(82119),c=n(93091),u=n(75105),d=n(23538),g=n(94431),p=n(55746),f=n(21647).fastKey,h=n(45402),m=h.set,_=h.getterFor;e.exports={getConstructor:function(e,t,n,u){var d=e(function(e,r){s(e,g),m(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),p||(e.size=0),l(r)||c(r,e[u],{that:e,AS_ENTRIES:n})}),g=d.prototype,h=_(t),v=function(e,t,n){var r,i,o=h(e),a=y(e,t);return a?a.value=n:(o.last=a={index:i=f(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),p?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},y=function(e,t){var n,r=h(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(g,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,p?e.size=0:this.size=0},delete:function(e){var t=this,n=h(t),r=y(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),p?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=h(this),r=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!y(this,e)}}),o(g,n?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),p&&r(g,"size",{get:function(){return h(this).size}}),d},setStrong:function(e,t,n){var r=t+" Iterator",i=_(t),o=_(r);u(e,t,function(e,t){m(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?d("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,d(void 0,!0))},n?"entries":"values",!n,!0),g(t)}}},24683:function(e,t,n){"use strict";var r=n(76887),i=n(21899),o=n(21647),a=n(95981),s=n(32029),l=n(93091),c=n(5743),u=n(57475),d=n(10941),g=n(90904),p=n(65988).f,f=n(3610).forEach,h=n(55746),m=n(45402),_=m.set,v=m.getterFor;e.exports=function(e,t,n){var m,y=-1!==e.indexOf("Map"),C=-1!==e.indexOf("Weak"),E=y?"set":"add",b=i[e],S=b&&b.prototype,T={};if(h&&u(b)&&(C||S.forEach&&!a(function(){(new b).entries().next()}))){var D=(m=t(function(t,n){_(c(t,D),{type:e,collection:new b}),null!=n&&l(n,t[E],{that:t,AS_ENTRIES:y})})).prototype,w=v(e);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(e){var t="add"==e||"set"==e;!(e in S)||C&&"clear"==e||s(D,e,function(n,r){var i=w(this).collection;if(!t&&C&&!d(n))return"get"==e&&void 0;var o=i[e](0===n?0:n,r);return t?this:o})}),C||p(D,"size",{configurable:!0,get:function(){return w(this).collection.size}})}else m=n.getConstructor(t,e,y,E),o.enable();return g(m,e,!1,!0),T[e]=m,r({global:!0,forced:!0},T),C||n.setStrong(m,e,y),m}},64160:function(e,t,n){var r=n(95981);e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},23538:function(e){e.exports=function(e,t){return{value:e,done:t}}},32029:function(e,t,n){var r=n(55746),i=n(65988),o=n(31887);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},31887:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},55449:function(e,t,n){"use strict";var r=n(83894),i=n(65988),o=n(31887);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},95929:function(e,t,n){var r=n(32029);e.exports=function(e,t,n,i){return i&&i.enumerable?e[t]=n:r(e,t,n),e}},94380:function(e,t,n){var r=n(95929);e.exports=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:r(e,i,t[i],n);return e}},75609:function(e,t,n){var r=n(21899),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},55746:function(e,t,n){var r=n(95981);e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},76616:function(e){var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},61333:function(e,t,n){var r=n(21899),i=n(10941),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},66796:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},63281:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2861:function(e,t,n){var r=n(626);e.exports=r("navigator","userAgent")||""},53385:function(e,t,n){var r,i,o=n(21899),a=n(2861),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},35703:function(e,t,n){var r=n(54058);e.exports=function(e){return r[e+"Prototype"]}},56759:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},76887:function(e,t,n){"use strict";var r=n(21899),i=n(79730),o=n(97484),a=n(57475),s=n(49677).f,l=n(37252),c=n(54058),u=n(86843),d=n(32029),g=n(90953),p=function(e){var t=function(n,r,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,o)}return i(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,i,f,h,m,_,v,y,C=e.target,E=e.global,b=e.stat,S=e.proto,T=E?r:b?r[C]:(r[C]||{}).prototype,D=E?c:c[C]||d(c,C,{})[C],w=D.prototype;for(f in t)n=!l(E?f:C+(b?".":"#")+f,e.forced)&&T&&g(T,f),m=D[f],n&&(_=e.dontCallGetSet?(y=s(T,f))&&y.value:T[f]),h=n&&_?_:t[f],n&&typeof m==typeof h||(v=e.bind&&n?u(h,r):e.wrap&&n?p(h):S&&a(h)?o(h):h,(e.sham||h&&h.sham||m&&m.sham)&&d(v,"sham",!0),d(D,f,v),S&&(g(c,i=C+"Prototype")||d(c,i,{}),d(c[i],f,h),e.real&&w&&!w[f]&&d(w,f,h)))}},95981:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},45602:function(e,t,n){var r=n(95981);e.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},79730:function(e,t,n){var r=n(18285),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},86843:function(e,t,n){var r=n(97484),i=n(24883),o=n(18285),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},18285:function(e,t,n){var r=n(95981);e.exports=!r(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},98308:function(e,t,n){"use strict";var r=n(95329),i=n(24883),o=n(10941),a=n(90953),s=n(93765),l=n(18285),c=Function,u=r([].concat),d=r([].join),g={};e.exports=l?c.bind:function(e){var t=i(this),n=t.prototype,r=s(arguments,1),l=function(){var n=u(r,s(arguments));return this instanceof l?function(e,t,n){if(!a(g,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";g[t]=c("C,a","return new C("+d(r,",")+")")}return g[t](e,n)}(t,n.length,n):t.apply(e,n)};return o(n)&&(l.prototype=n),l}},78834:function(e,t,n){var r=n(18285),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},79417:function(e,t,n){var r=n(55746),i=n(90953),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,c=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},97484:function(e,t,n){var r=n(82532),i=n(95329);e.exports=function(e){if("Function"===r(e))return i(e)}},95329:function(e,t,n){var r=n(18285),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);e.exports=r?a:function(e){return function(){return o.apply(e,arguments)}}},626:function(e,t,n){var r=n(54058),i=n(21899),o=n(57475),a=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},22902:function(e,t,n){var r=n(9697),i=n(14229),o=n(82119),a=n(12077),s=n(99813)("iterator");e.exports=function(e){if(!o(e))return i(e,s)||i(e,"@@iterator")||a[r(e)]}},53476:function(e,t,n){var r=n(78834),i=n(24883),o=n(96059),a=n(69826),s=n(22902),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(i(n))return o(r(n,e));throw l(a(e)+" is not iterable")}},79993:function(e,t,n){var r=n(53476);e.exports=r},14229:function(e,t,n){var r=n(24883),i=n(82119);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},21899:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},90953:function(e,t,n){var r=n(95329),i=n(89678),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},27748:function(e){e.exports={}},15463:function(e,t,n){var r=n(626);e.exports=r("document","documentElement")},2840:function(e,t,n){var r=n(55746),i=n(95981),o=n(61333);e.exports=!r&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},37026:function(e,t,n){var r=n(95329),i=n(95981),o=n(82532),a=Object,s=r("".split);e.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?s(e,""):a(e)}:a},81302:function(e,t,n){var r=n(95329),i=n(57475),o=n(63030),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},21647:function(e,t,n){var r=n(76887),i=n(95329),o=n(27748),a=n(10941),s=n(90953),l=n(65988).f,c=n(10946),u=n(684),d=n(91584),g=n(99418),p=n(45602),f=!1,h=g("meta"),m=0,_=function(e){l(e,h,{value:{objectID:"O"+m++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},f=!0;var e=c.f,t=i([].splice),n={};n[h]=1,e(n).length&&(c.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===h){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,h)){if(!d(e))return"F";if(!t)return"E";_(e)}return e[h].objectID},getWeakData:function(e,t){if(!s(e,h)){if(!d(e))return!0;if(!t)return!1;_(e)}return e[h].weakData},onFreeze:function(e){return p&&f&&d(e)&&!s(e,h)&&_(e),e}};o[h]=!0},45402:function(e,t,n){var r,i,o,a=n(47093),s=n(21899),l=n(10941),c=n(32029),u=n(90953),d=n(63030),g=n(44262),p=n(27748),f="Object already initialized",h=s.TypeError,m=s.WeakMap;if(a||d.state){var _=d.state||(d.state=new m);_.get=_.get,_.has=_.has,_.set=_.set,r=function(e,t){if(_.has(e))throw h(f);return t.facade=e,_.set(e,t),t},i=function(e){return _.get(e)||{}},o=function(e){return _.has(e)}}else{var v=g("state");p[v]=!0,r=function(e,t){if(u(e,v))throw h(f);return t.facade=e,c(e,v,t),t},i=function(e){return u(e,v)?e[v]:{}},o=function(e){return u(e,v)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw h("Incompatible receiver, "+e+" required");return n}}}},6782:function(e,t,n){var r=n(99813),i=n(12077),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},1052:function(e,t,n){var r=n(82532);e.exports=Array.isArray||function(e){return"Array"==r(e)}},57475:function(e,t,n){var r=n(76616),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},24284:function(e,t,n){var r=n(95329),i=n(95981),o=n(57475),a=n(9697),s=n(626),l=n(81302),c=function(){},u=[],d=s("Reflect","construct"),g=/^\s*(?:class|function)\b/,p=r(g.exec),f=!g.exec(c),h=function(e){if(!o(e))return!1;try{return d(c,u,e),!0}catch(e){return!1}},m=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(g,l(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||i(function(){var e;return h(h.call)||!h(Object)||!h(function(){e=!0})||e})?m:h},77040:function(e,t,n){var r=n(90953);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},37252:function(e,t,n){var r=n(95981),i=n(57475),o=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==u||n!=c&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},82119:function(e){e.exports=function(e){return null==e}},10941:function(e,t,n){var r=n(57475),i=n(76616),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},82529:function(e){e.exports=!0},56664:function(e,t,n){var r=n(626),i=n(57475),o=n(7046),a=n(32302),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},93091:function(e,t,n){var r=n(86843),i=n(78834),o=n(96059),a=n(69826),s=n(6782),l=n(10623),c=n(7046),u=n(53476),d=n(22902),g=n(7609),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},h=f.prototype;e.exports=function(e,t,n){var m,_,v,y,C,E,b,S=n&&n.that,T=!(!n||!n.AS_ENTRIES),D=!(!n||!n.IS_RECORD),w=!(!n||!n.IS_ITERATOR),O=!(!n||!n.INTERRUPTED),A=r(t,S),M=function(e){return m&&g(m,"normal",e),new f(!0,e)},I=function(e){return T?(o(e),O?A(e[0],e[1],M):A(e[0],e[1])):O?A(e,M):A(e)};if(D)m=e.iterator;else if(w)m=e;else{if(!(_=d(e)))throw p(a(e)+" is not iterable");if(s(_)){for(v=0,y=l(e);y>v;v++)if((C=I(e[v]))&&c(h,C))return C;return new f(!1)}m=u(e,_)}for(E=D?e.next:m.next;!(b=i(E,m)).done;){try{C=I(b.value)}catch(e){g(m,"throw",e)}if("object"==typeof C&&C&&c(h,C))return C}return new f(!1)}},7609:function(e,t,n){var r=n(78834),i=n(96059),o=n(14229);e.exports=function(e,t,n){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw n;if(s)throw a;return i(a),n}},53847:function(e,t,n){"use strict";var r=n(35143).IteratorPrototype,i=n(29290),o=n(31887),a=n(90904),s=n(12077),l=function(){return this};e.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=i(r,{next:o(+!c,n)}),a(e,u,!1,!0),s[u]=l,e}},75105:function(e,t,n){"use strict";var r=n(76887),i=n(78834),o=n(82529),a=n(79417),s=n(57475),l=n(53847),c=n(249),u=n(88929),d=n(90904),g=n(32029),p=n(95929),f=n(99813),h=n(12077),m=n(35143),_=a.PROPER,v=a.CONFIGURABLE,y=m.IteratorPrototype,C=m.BUGGY_SAFARI_ITERATORS,E=f("iterator"),b="keys",S="values",T="entries",D=function(){return this};e.exports=function(e,t,n,a,f,m,w){l(n,t,a);var O,A,M,I=function(e){if(e===f&&x)return x;if(!C&&e in L)return L[e];switch(e){case b:case S:case T:return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",k=!1,L=e.prototype,P=L[E]||L["@@iterator"]||f&&L[f],x=!C&&P||I(f),N="Array"==t&&L.entries||P;if(N&&(O=c(N.call(new e)))!==Object.prototype&&O.next&&(o||c(O)===y||(u?u(O,y):s(O[E])||p(O,E,D)),d(O,R,!0,!0),o&&(h[R]=D)),_&&f==S&&P&&P.name!==S&&(!o&&v?g(L,"name",S):(k=!0,x=function(){return i(P,this)})),f)if(A={values:I(S),keys:m?x:I(b),entries:I(T)},w)for(M in A)(C||k||!(M in L))&&p(L,M,A[M]);else r({target:t,proto:!0,forced:C||k},A);return o&&!w||L[E]===x||p(L,E,x,{name:f}),h[t]=x,A}},35143:function(e,t,n){"use strict";var r,i,o,a=n(95981),s=n(57475),l=n(10941),c=n(29290),u=n(249),d=n(95929),g=n(99813),p=n(82529),f=g("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(r=i):h=!0),!l(r)||a(function(){var e={};return r[f].call(e)!==e})?r={}:p&&(r=c(r)),s(r[f])||d(r,f,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},12077:function(e){e.exports={}},10623:function(e,t,n){var r=n(43057);e.exports=function(e){return r(e.length)}},48721:function(e,t,n){"use strict";var r=n(78834),i=n(24883),o=n(96059);e.exports=function(e,t){var n,a,s=o(this),l=i(s.get),c=i(s.has),u=i(s.set);return r(c,s,e)?(n=r(l,s,e),"update"in t&&(n=t.update(n,e,s),r(u,s,e,n)),n):(a=t.insert(e,s),r(u,s,e,a),a)}},20716:function(e,t,n){"use strict";var r=n(78834),i=n(24883),o=n(57475),a=n(96059),s=TypeError;e.exports=function(e,t){var n,l=a(this),c=i(l.get),u=i(l.has),d=i(l.set),g=arguments.length>2?arguments[2]:void 0;if(!o(t)&&!o(g))throw s("At least one callback required");return r(u,l,e)?(n=r(c,l,e),o(t)&&(n=t(n),r(d,l,e,n))):o(g)&&(n=g(),r(d,l,e,n)),n}},35331:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},24420:function(e,t,n){"use strict";var r=n(55746),i=n(95329),o=n(78834),a=n(95981),s=n(14771),l=n(87857),c=n(36760),u=n(89678),d=n(37026),g=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!g||a(function(){if(r&&1!==g({b:1},g(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=g({},e)[n]||s(g({},t)).join("")!=i})?function(e,t){for(var n=u(e),i=arguments.length,a=1,g=l.f,p=c.f;i>a;)for(var h,m=d(arguments[a++]),_=g?f(s(m),g(m)):s(m),v=_.length,y=0;v>y;)h=_[y++],r&&!o(p,m,h)||(n[h]=m[h]);return n}:g},29290:function(e,t,n){var r,i=n(96059),o=n(59938),a=n(56759),s=n(27748),l=n(15463),c=n(61333),u=n(44262),d="prototype",g="script",p=u("IE_PROTO"),f=function(){},h=function(e){return"<"+g+">"+e+"</"+g+">"},m=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},_=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;_="undefined"!=typeof document?document.domain&&r?m(r):(t=c("iframe"),n="java"+g+":",t.style.display="none",l.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):m(r);for(var i=a.length;i--;)delete _[d][a[i]];return _()};s[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[d]=i(e),n=new f,f[d]=null,n[p]=e):n=_(),void 0===t?n:o.f(n,t)}},59938:function(e,t,n){var r=n(55746),i=n(83937),o=n(65988),a=n(96059),s=n(74529),l=n(14771);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=l(t),c=i.length,u=0;c>u;)o.f(e,n=i[u++],r[n]);return e}},65988:function(e,t,n){var r=n(55746),i=n(2840),o=n(83937),a=n(96059),s=n(83894),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",g="configurable",p="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=u(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:g in n?n[g]:r[g],enumerable:d in n?n[d]:r[d],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},49677:function(e,t,n){var r=n(55746),i=n(78834),o=n(36760),a=n(31887),s=n(74529),l=n(83894),c=n(90953),u=n(2840),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=l(t),u)try{return d(e,t)}catch(e){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},684:function(e,t,n){var r=n(82532),i=n(74529),o=n(10946).f,a=n(15790),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==r(e)?function(e){try{return o(e)}catch(e){return a(s)}}(e):o(i(e))}},10946:function(e,t,n){var r=n(55629),i=n(56759).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},87857:function(e,t){t.f=Object.getOwnPropertySymbols},249:function(e,t,n){var r=n(90953),i=n(57475),o=n(89678),a=n(44262),s=n(64160),l=a("IE_PROTO"),c=Object,u=c.prototype;e.exports=s?c.getPrototypeOf:function(e){var t=o(e);if(r(t,l))return t[l];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},91584:function(e,t,n){var r=n(95981),i=n(10941),o=n(82532),a=n(97135),s=Object.isExtensible,l=r(function(){s(1)});e.exports=l||a?function(e){return!!i(e)&&((!a||"ArrayBuffer"!=o(e))&&(!s||s(e)))}:s},7046:function(e,t,n){var r=n(95329);e.exports=r({}.isPrototypeOf)},55629:function(e,t,n){var r=n(95329),i=n(90953),o=n(74529),a=n(31692).indexOf,s=n(27748),l=r([].push);e.exports=function(e,t){var n,r=o(e),c=0,u=[];for(n in r)!i(s,n)&&i(r,n)&&l(u,n);for(;t.length>c;)i(r,n=t[c++])&&(~a(u,n)||l(u,n));return u}},14771:function(e,t,n){var r=n(55629),i=n(56759);e.exports=Object.keys||function(e){return r(e,i)}},36760:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},88929:function(e,t,n){var r=n(95329),i=n(96059),o=n(11851);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},95623:function(e,t,n){"use strict";var r=n(22885),i=n(9697);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},39811:function(e,t,n){var r=n(78834),i=n(57475),o=n(10941),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},54058:function(e){e.exports={}},48219:function(e,t,n){var r=n(82119),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},57309:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},94431:function(e,t,n){"use strict";var r=n(626),i=n(65988),o=n(99813),a=n(55746),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},90904:function(e,t,n){var r=n(22885),i=n(65988).f,o=n(32029),a=n(90953),s=n(95623),l=n(99813)("toStringTag");e.exports=function(e,t,n,c){if(e){var u=n?e:e.prototype;a(u,l)||i(u,l,{configurable:!0,value:t}),c&&!r&&o(u,"toString",s)}}},44262:function(e,t,n){var r=n(68726),i=n(99418),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},63030:function(e,t,n){var r=n(21899),i=n(75609),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},68726:function(e,t,n){var r=n(82529),i=n(63030);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},70487:function(e,t,n){var r=n(96059),i=n(174),o=n(82119),a=n(99813)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||o(n=r(s)[a])?t:i(n)}},64620:function(e,t,n){var r=n(95329),i=n(62435),o=n(85803),a=n(48219),s=r("".charAt),l=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,n){var r,u,d=o(a(t)),g=i(n),p=d.length;return g<0||g>=p?e?"":void 0:(r=l(d,g))<55296||r>56319||g+1===p||(u=l(d,g+1))<56320||u>57343?e?s(d,g):r:e?c(d,g,g+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},63405:function(e,t,n){var r=n(53385),i=n(95981);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41})},29630:function(e,t,n){var r=n(78834),i=n(626),o=n(99813),a=n(95929);e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,s=o("toPrimitive");t&&!t[s]&&a(t,s,function(e){return r(n,this)},{arity:1})}},34680:function(e,t,n){var r=n(63405);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},59413:function(e,t,n){var r=n(62435),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},74529:function(e,t,n){var r=n(37026),i=n(48219);e.exports=function(e){return r(i(e))}},62435:function(e,t,n){var r=n(35331);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},43057:function(e,t,n){var r=n(62435),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},89678:function(e,t,n){var r=n(48219),i=Object;e.exports=function(e){return i(r(e))}},46935:function(e,t,n){var r=n(78834),i=n(10941),o=n(56664),a=n(14229),s=n(39811),l=n(99813),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,l=a(e,u);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!i(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},83894:function(e,t,n){var r=n(46935),i=n(56664);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},22885:function(e,t,n){var r={};r[n(99813)("toStringTag")]="z",e.exports="[object z]"===String(r)},85803:function(e,t,n){var r=n(9697),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},69826:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},99418:function(e,t,n){var r=n(95329),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},32302:function(e,t,n){var r=n(63405);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},83937:function(e,t,n){var r=n(55746),i=n(95981);e.exports=r&&i(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},47093:function(e,t,n){var r=n(21899),i=n(57475),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},73464:function(e,t,n){var r=n(54058),i=n(90953),o=n(11477),a=n(65988).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},11477:function(e,t,n){var r=n(99813);t.f=r},99813:function(e,t,n){var r=n(21899),i=n(68726),o=n(90953),a=n(99418),s=n(63405),l=n(32302),c=i("wks"),u=r.Symbol,d=u&&u.for,g=l?u:u&&u.withoutSetter||a;e.exports=function(e){if(!o(c,e)||!s&&"string"!=typeof c[e]){var t="Symbol."+e;s&&o(u,e)?c[e]=u[e]:c[e]=l&&d?d(t):g(t)}return c[e]}},85906:function(e,t,n){"use strict";var r=n(76887),i=n(95981),o=n(1052),a=n(10941),s=n(89678),l=n(10623),c=n(66796),u=n(55449),d=n(64692),g=n(50568),p=n(99813),f=n(53385),h=p("isConcatSpreadable"),m=f>=51||!i(function(){var e=[];return e[h]=!1,e.concat()[0]!==e}),_=g("concat"),v=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,arity:1,forced:!m||!_},{concat:function(e){var t,n,r,i,o,a=s(this),g=d(a,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(v(o=-1===t?a:arguments[t]))for(i=l(o),c(p+i),n=0;n<i;n++,p++)n in o&&u(g,p,o[n]);else c(p+1),u(g,p++,o);return g.length=p,g}})},53242:function(e,t,n){var r=n(76887),i=n(11354);r({target:"Array",stat:!0,forced:!n(21385)(function(e){Array.from(e)})},{from:i})},99076:function(e,t,n){"use strict";var r=n(76887),i=n(97484),o=n(31692).indexOf,a=n(34194),s=i([].indexOf),l=!!s&&1/s([1],1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:l||!c},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return l?s(this,e,t)||0:o(this,e,t)}})},92737:function(e,t,n){n(76887)({target:"Array",stat:!0},{isArray:n(1052)})},66274:function(e,t,n){"use strict";var r=n(74529),i=n(18479),o=n(12077),a=n(45402),s=n(65988).f,l=n(75105),c=n(23538),u=n(82529),d=n(55746),g="Array Iterator",p=a.set,f=a.getterFor(g);e.exports=l(Array,"Array",function(e,t){p(this,{type:g,target:r(e),index:0,kind:t})},function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,c(void 0,!0)):c("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)},"values");var h=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&d&&"values"!==h.name)try{s(h,"name",{value:"values"})}catch(e){}},60186:function(e,t,n){"use strict";var r=n(76887),i=n(1052),o=n(24284),a=n(10941),s=n(59413),l=n(10623),c=n(74529),u=n(55449),d=n(99813),g=n(50568),p=n(93765),f=g("slice"),h=d("species"),m=Array,_=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,d,g=c(this),f=l(g),v=s(e,f),y=s(void 0===t?f:t,f);if(i(g)&&(n=g.constructor,(o(n)&&(n===m||i(n.prototype))||a(n)&&null===(n=n[h]))&&(n=void 0),n===m||void 0===n))return p(g,v,y);for(r=new(void 0===n?m:n)(_(y-v,0)),d=0;v<y;v++,d++)v in g&&u(r,d,g[v]);return r.length=d,r}})},73381:function(e,t,n){var r=n(76887),i=n(98308);r({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},32619:function(e,t,n){var r=n(76887),i=n(626),o=n(79730),a=n(78834),s=n(95329),l=n(95981),c=n(1052),u=n(57475),d=n(10941),g=n(56664),p=n(93765),f=n(63405),h=i("JSON","stringify"),m=s(/./.exec),_=s("".charAt),v=s("".charCodeAt),y=s("".replace),C=s(1..toString),E=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,T=!f||l(function(){var e=i("Symbol")();return"[null]"!=h([e])||"{}"!=h({a:e})||"{}"!=h(Object(e))}),D=l(function(){return'"\\udf06\\ud834"'!==h("\udf06\ud834")||'"\\udead"'!==h("\udead")}),w=function(e,t){var n=p(arguments),r=t;if((d(t)||void 0!==e)&&!g(e))return c(t)||(t=function(e,t){if(u(r)&&(t=a(r,this,e,t)),!g(t))return t}),n[1]=t,o(h,null,n)},O=function(e,t,n){var r=_(n,t-1),i=_(n,t+1);return m(b,e)&&!m(S,i)||m(S,e)&&!m(b,r)?"\\u"+C(v(e,0),16):e};h&&r({target:"JSON",stat:!0,arity:3,forced:T||D},{stringify:function(e,t,n){var r=p(arguments),i=o(T?w:h,null,r);return D&&"string"==typeof i?y(i,E,O):i}})},69120:function(e,t,n){var r=n(21899);n(90904)(r.JSON,"JSON",!0)},23112:function(e,t,n){"use strict";n(24683)("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},n(85616))},37501:function(e,t,n){n(23112)},79413:function(){},49221:function(e,t,n){var r=n(76887),i=n(24420);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},53882:function(e,t,n){n(76887)({target:"Object",stat:!0,sham:!n(55746)},{create:n(29290)})},86450:function(e,t,n){var r=n(76887),i=n(55746),o=n(65988).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},46924:function(e,t,n){var r=n(76887),i=n(95981),o=n(74529),a=n(49677).f,s=n(55746),l=i(function(){a(1)});r({target:"Object",stat:!0,forced:!s||l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},37144:function(e,t,n){var r=n(76887),i=n(63405),o=n(95981),a=n(87857),s=n(89678);r({target:"Object",stat:!0,forced:!i||o(function(){a.f(1)})},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(s(e)):[]}})},17405:function(e,t,n){var r=n(76887),i=n(95981),o=n(89678),a=n(249),s=n(64160);r({target:"Object",stat:!0,forced:i(function(){a(1)}),sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},90108:function(e,t,n){n(76887)({target:"Object",stat:!0},{setPrototypeOf:n(88929)})},55967:function(){},7453:function(e,t,n){var r=n(76887),i=n(626),o=n(79730),a=n(98308),s=n(174),l=n(96059),c=n(10941),u=n(29290),d=n(95981),g=i("Reflect","construct"),p=Object.prototype,f=[].push,h=d(function(){function e(){}return!(g(function(){},[],e)instanceof e)}),m=!d(function(){g(function(){})}),_=h||m;r({target:"Reflect",stat:!0,forced:_,sham:_},{construct:function(e,t){s(e),l(t);var n=arguments.length<3?e:s(arguments[2]);if(m&&!h)return g(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return o(f,r,t),new(o(a,e,r))}var i=n.prototype,d=u(c(i)?i:p),_=o(e,d,t);return c(_)?_:d}})},42355:function(e,t,n){var r=n(76887),i=n(78834),o=n(10941),a=n(96059),s=n(77040),l=n(49677),c=n(249);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,u,d=arguments.length<3?t:arguments[2];return a(t)===d?t[n]:(r=l.f(t,n))?s(r)?r.value:void 0===r.get?void 0:i(r.get,d):o(u=c(t))?e(u,n,d):void 0}})},1502:function(){},77971:function(e,t,n){"use strict";var r=n(64620).charAt,i=n(85803),o=n(45402),a=n(75105),s=n(23538),l="String Iterator",c=o.set,u=o.getterFor(l);a(String,"String",function(e){c(this,{type:l,string:i(e),index:0})},function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?s(void 0,!0):(e=r(n,i),t.index+=e.length,s(e,!1))})},8555:function(e,t,n){n(73464)("asyncIterator")},48616:function(e,t,n){"use strict";var r=n(76887),i=n(21899),o=n(78834),a=n(95329),s=n(82529),l=n(55746),c=n(63405),u=n(95981),d=n(90953),g=n(7046),p=n(96059),f=n(74529),h=n(83894),m=n(85803),_=n(31887),v=n(29290),y=n(14771),C=n(10946),E=n(684),b=n(87857),S=n(49677),T=n(65988),D=n(59938),w=n(36760),O=n(95929),A=n(68726),M=n(44262),I=n(27748),R=n(99418),k=n(99813),L=n(11477),P=n(73464),x=n(29630),N=n(90904),F=n(45402),j=n(3610).forEach,B=M("hidden"),U="Symbol",V="prototype",W=F.set,G=F.getterFor(U),H=Object[V],$=i.Symbol,z=$&&$[V],Z=i.TypeError,q=i.QObject,K=S.f,Y=T.f,J=E.f,Q=w.f,X=a([].push),ee=A("symbols"),te=A("op-symbols"),ne=A("wks"),re=!q||!q[V]||!q[V].findChild,ie=l&&u(function(){return 7!=v(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=K(H,t);r&&delete H[t],Y(e,t,n),r&&e!==H&&Y(H,t,r)}:Y,oe=function(e,t){var n=ee[e]=v(z);return W(n,{type:U,tag:e,description:t}),l||(n.description=t),n},ae=function(e,t,n){e===H&&ae(te,t,n),p(e);var r=h(t);return p(n),d(ee,r)?(n.enumerable?(d(e,B)&&e[B][r]&&(e[B][r]=!1),n=v(n,{enumerable:_(0,!1)})):(d(e,B)||Y(e,B,_(1,{})),e[B][r]=!0),ie(e,r,n)):Y(e,r,n)},se=function(e,t){p(e);var n=f(t),r=y(n).concat(de(n));return j(r,function(t){l&&!o(le,n,t)||ae(e,t,n[t])}),e},le=function(e){var t=h(e),n=o(Q,this,t);return!(this===H&&d(ee,t)&&!d(te,t))&&(!(n||!d(this,t)||!d(ee,t)||d(this,B)&&this[B][t])||n)},ce=function(e,t){var n=f(e),r=h(t);if(n!==H||!d(ee,r)||d(te,r)){var i=K(n,r);return!i||!d(ee,r)||d(n,B)&&n[B][r]||(i.enumerable=!0),i}},ue=function(e){var t=J(f(e)),n=[];return j(t,function(e){d(ee,e)||d(I,e)||X(n,e)}),n},de=function(e){var t=e===H,n=J(t?te:f(e)),r=[];return j(n,function(e){!d(ee,e)||t&&!d(H,e)||X(r,ee[e])}),r};c||($=function(){if(g(z,this))throw Z("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?m(arguments[0]):void 0,t=R(e),n=function(e){this===H&&o(n,te,e),d(this,B)&&d(this[B],t)&&(this[B][t]=!1),ie(this,t,_(1,e))};return l&&re&&ie(H,t,{configurable:!0,set:n}),oe(t,e)},O(z=$[V],"toString",function(){return G(this).tag}),O($,"withoutSetter",function(e){return oe(R(e),e)}),w.f=le,T.f=ae,D.f=se,S.f=ce,C.f=E.f=ue,b.f=de,L.f=function(e){return oe(k(e),e)},l&&(Y(z,"description",{configurable:!0,get:function(){return G(this).description}}),s||O(H,"propertyIsEnumerable",le,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:$}),j(y(ne),function(e){P(e)}),r({target:U,stat:!0,forced:!c},{useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(e,t){return void 0===t?v(e):se(v(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ue}),x(),N($,U),I[B]=!0},52615:function(){},64523:function(e,t,n){var r=n(76887),i=n(626),o=n(90953),a=n(85803),s=n(68726),l=n(34680),c=s("string-to-symbol-registry"),u=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=a(e);if(o(c,t))return c[t];var n=i("Symbol")(t);return c[t]=n,u[n]=t,n}})},21732:function(e,t,n){n(73464)("hasInstance")},35903:function(e,t,n){n(73464)("isConcatSpreadable")},1825:function(e,t,n){n(73464)("iterator")},35824:function(e,t,n){n(48616),n(64523),n(38608),n(32619),n(37144)},38608:function(e,t,n){var r=n(76887),i=n(90953),o=n(56664),a=n(69826),s=n(68726),l=n(34680),c=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{keyFor:function(e){if(!o(e))throw TypeError(a(e)+" is not a symbol");if(i(c,e))return c[e]}})},45915:function(e,t,n){n(73464)("matchAll")},28394:function(e,t,n){n(73464)("match")},61766:function(e,t,n){n(73464)("replace")},62737:function(e,t,n){n(73464)("search")},89911:function(e,t,n){n(73464)("species")},74315:function(e,t,n){n(73464)("split")},63131:function(e,t,n){var r=n(73464),i=n(29630);r("toPrimitive"),i()},64714:function(e,t,n){var r=n(626),i=n(73464),o=n(90904);i("toStringTag"),o(r("Symbol"),"Symbol")},70659:function(e,t,n){n(73464)("unscopables")},66591:function(e,t,n){"use strict";n(76887)({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:n(28984)})},55121:function(e,t,n){"use strict";n(76887)({target:"Map",proto:!0,real:!0,forced:!0},{emplace:n(48721)})},14751:function(e,t,n){"use strict";var r=n(76887),i=n(96059),o=n(86843),a=n(79993),s=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=i(this),n=a(t),r=o(e,arguments.length>1?arguments[1]:void 0);return!s(n,function(e,n,i){if(!r(n,e,t))return i()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},52407:function(e,t,n){"use strict";var r=n(76887),i=n(626),o=n(86843),a=n(78834),s=n(24883),l=n(96059),c=n(70487),u=n(79993),d=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=l(this),n=u(t),r=o(e,arguments.length>1?arguments[1]:void 0),g=new(c(t,i("Map"))),p=s(g.set);return d(n,function(e,n){r(n,e,t)&&a(p,g,e,n)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),g}})},27281:function(e,t,n){"use strict";var r=n(76887),i=n(96059),o=n(86843),a=n(79993),s=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=i(this),n=a(t),r=o(e,arguments.length>1?arguments[1]:void 0);return s(n,function(e,n,i){if(r(n,e,t))return i(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},48580:function(e,t,n){"use strict";var r=n(76887),i=n(96059),o=n(86843),a=n(79993),s=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=i(this),n=a(t),r=o(e,arguments.length>1?arguments[1]:void 0);return s(n,function(e,n,i){if(r(n,e,t))return i(n)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},52453:function(e,t,n){n(76887)({target:"Map",stat:!0,forced:!0},{from:n(83590)})},36507:function(e,t,n){"use strict";var r=n(76887),i=n(78834),o=n(95329),a=n(24883),s=n(53476),l=n(93091),c=o([].push);r({target:"Map",stat:!0,forced:!0},{groupBy:function(e,t){a(t);var n=s(e),r=new this,o=a(r.has),u=a(r.get),d=a(r.set);return l(n,function(e){var n=t(e);i(o,r,n)?c(i(u,r,n),e):i(d,r,n,[e])},{IS_ITERATOR:!0}),r}})},93647:function(e,t,n){"use strict";var r=n(76887),i=n(96059),o=n(79993),a=n(57309),s=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return s(o(i(this)),function(t,n,r){if(a(n,e))return r()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},47641:function(e,t,n){"use strict";var r=n(76887),i=n(78834),o=n(93091),a=n(24883);r({target:"Map",stat:!0,forced:!0},{keyBy:function(e,t){var n=new this;a(t);var r=a(n.set);return o(e,function(e){i(r,n,t(e),e)}),n}})},18552:function(e,t,n){"use strict";var r=n(76887),i=n(96059),o=n(79993),a=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){return a(o(i(this)),function(t,n,r){if(n===e)return r(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},27693:function(e,t,n){"use strict";var r=n(76887),i=n(626),o=n(86843),a=n(78834),s=n(24883),l=n(96059),c=n(70487),u=n(79993),d=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=l(this),n=u(t),r=o(e,arguments.length>1?arguments[1]:void 0),g=new(c(t,i("Map"))),p=s(g.set);return d(n,function(e,n){a(p,g,r(n,e,t),n)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),g}})},8:function(e,t,n){"use strict";var r=n(76887),i=n(626),o=n(86843),a=n(78834),s=n(24883),l=n(96059),c=n(70487),u=n(79993),d=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=l(this),n=u(t),r=o(e,arguments.length>1?arguments[1]:void 0),g=new(c(t,i("Map"))),p=s(g.set);return d(n,function(e,n){a(p,g,e,r(n,e,t))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),g}})},48514:function(e,t,n){"use strict";var r=n(76887),i=n(24883),o=n(96059),a=n(93091);r({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=o(this),n=i(t.set),r=arguments.length,s=0;s<r;)a(arguments[s++],n,{that:t,AS_ENTRIES:!0});return t}})},32523:function(e,t,n){n(76887)({target:"Map",stat:!0,forced:!0},{of:n(45226)})},8212:function(e,t,n){"use strict";var r=n(76887),i=n(96059),o=n(24883),a=n(79993),s=n(93091),l=TypeError;r({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=i(this),n=a(t),r=arguments.length<2,c=r?void 0:arguments[1];if(o(e),s(n,function(n,i){r?(r=!1,c=i):c=e(c,i,n,t)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),r)throw l("Reduce of empty map with no initial value");return c}})},89642:function(e,t,n){"use strict";var r=n(76887),i=n(96059),o=n(86843),a=n(79993),s=n(93091);r({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=i(this),n=a(t),r=o(e,arguments.length>1?arguments[1]:void 0);return s(n,function(e,n,i){if(r(n,e,t))return i()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},68826:function(e,t,n){"use strict";n(76887)({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:n(20716)})},78485:function(e,t,n){"use strict";var r=n(76887),i=n(78834),o=n(96059),a=n(24883),s=TypeError;r({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var n=o(this),r=a(n.get),l=a(n.has),c=a(n.set),u=arguments.length;a(t);var d=i(l,n,e);if(!d&&u<3)throw s("Updating absent value");var g=d?i(r,n,e):a(u>2?arguments[2]:void 0)(e,n);return i(c,n,e,t(g,e,n)),n}})},42256:function(e,t,n){"use strict";n(76887)({target:"Map",proto:!0,real:!0,forced:!0},{upsert:n(20716)})},28783:function(e,t,n){n(73464)("asyncDispose")},43975:function(e,t,n){n(73464)("dispose")},65799:function(e,t,n){n(73464)("matcher")},31943:function(e,t,n){n(73464)("metadataKey")},45414:function(e,t,n){n(73464)("metadata")},46774:function(e,t,n){n(73464)("observable")},80620:function(e,t,n){n(73464)("patternMatch")},36172:function(e,t,n){n(73464)("replaceAll")},7634:function(e,t,n){n(66274);var r=n(63281),i=n(21899),o=n(9697),a=n(32029),s=n(12077),l=n(99813)("toStringTag");for(var c in r){var u=i[c],d=u&&u.prototype;d&&o(d)!==l&&a(d,l,c),s[c]=s.Array}},27698:function(e,t,n){var r=n(54493);e.exports=r},83363:function(e,t,n){var r=n(24034);e.exports=r},56243:function(e,t,n){var r=n(13830);n(7634),e.exports=r},28196:function(e,t,n){var r=n(16246);e.exports=r},19373:function(e,t,n){var r=n(34570);e.exports=r},82073:function(e,t,n){var r=n(69601);e.exports=r},15868:function(e,t,n){var r=n(91018);n(7634),e.exports=r},63383:function(e,t,n){var r=n(45999);e.exports=r},14471:function(e,t,n){var r=n(35254);e.exports=r},41910:function(e,t,n){var r=n(48171);e.exports=r},79427:function(e,t,n){var r=n(286);e.exports=r},96507:function(e,t,n){var r=n(13966);e.exports=r},16670:function(e,t,n){var r=n(3065);e.exports=r},61895:function(e,t,n){var r=n(14983);e.exports=r},18254:function(e,t,n){var r=n(37095);e.exports=r},92547:function(e,t,n){var r=n(57473);n(7634),e.exports=r},46509:function(e,t,n){var r=n(24227);n(7634),e.exports=r},89766:function(e,t,n){var r={EventEmitter:n(47333),EmitterSubscription:n(86584)};e.exports=r},47333:function(e,t,n){"use strict";var r=n(86584),i=n(68231),o=n(73759),a=n(60139),s=function(){function e(){this._subscriber=new i,this._currentSubscription=null}var t=e.prototype;return t.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new r(this._subscriber,t,n))},t.once=function(e,t,n){var r=this;return this.addListener(e,function(){r.removeCurrentListener(),t.apply(n,arguments)})},t.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},t.removeCurrentListener=function(){this._currentSubscription||o(!1),this._subscriber.removeSubscription(this._currentSubscription)},t.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(a.thatReturnsTrue).map(function(e){return e.listener}):[]},t.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=t[n[r]];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},t.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=s},86584:function(e,t,n){"use strict";var r=function(e){var t,n;function r(t,n,r){var i;return(i=e.call(this,t)||this).listener=n,i.context=r,i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(n(27024));e.exports=r},27024:function(e){"use strict";var t=function(){function e(e){this.subscriber=e}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=t},68231:function(e,t,n){"use strict";var r=n(73759),i=function(){function e(){this._subscriptionsForType={},this._currentSubscription=null}var t=e.prototype;return t.addSubscription=function(e,t){t.subscriber!==this&&r(!1),this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},t.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},t.removeSubscription=function(e){var t=e.eventType,n=e.key,r=this._subscriptionsForType[t];r&&delete r[n]},t.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=i},60139:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},73759:function(e){"use strict";var t=function(e){};e.exports=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(t(n),!e){var a;if(void 0===n)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;(a=new Error(n.replace(/%s/g,function(){return String(i[s++])}))).name="Invariant Violation"}throw a.framesToPop=1,a}}},68337:function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function i(e){return Object.prototype.toString.call(e)}function o(e){return"[object Function]"===i(e)}function a(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var l={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},c="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function u(e){var t=e.re=n(36066)(e.__opts__),r=e.__tlds__.slice();function s(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");var l=[];function c(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===i(n))return!function(e){return"[object RegExp]"===i(e)}(n.validate)?o(n.validate)?r.validate=n.validate:c(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(o(n.normalize)?r.normalize=n.normalize:n.normalize?c(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===i(e)}(n)?c(t,n):l.push(t)}}),l.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(a).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function g(e,t){var n=new d(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function p(e,t){if(!(this instanceof p))return new p(e,t);var n;t||(n=e,Object.keys(n||{}).reduce(function(e,t){return e||s.hasOwnProperty(t)},!1)&&(t=e,e={})),this.__opts__=r({},s,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},l,e),this.__compiled__={},this.__tlds__=c,this.__tlds_replaced__=!1,this.re={},u(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},p.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,i,o,a,s,l;if(this.re.schema_test.test(e))for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(i=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a)),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},p.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(g(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(g(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},p.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var t=this.re.schema_at_start.exec(e);if(!t)return null;var n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,g(this,0)):null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},36066:function(e,t,n){"use strict";e.exports=function(e){var t={};e=e||{},t.src_Any=n(29369).source,t.src_Cc=n(99413).source,t.src_Z=n(35045).source,t.src_P=n(73189).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var r="[><]";return t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},308:function(e,t,n){"use strict";n.r(t),t.default={errorWrap:"errorWrap__Kjcj0",header:"header__Ob9wf",headerText:"headerText__SFXSx",__dark:"__dark__a8VE7",__mobile:"__mobile__wIbbI",connectContainer:"connectContainer__jiGp6",errorContent:"errorContent__trFhm",disconnectWrap:"disconnectWrap__evUkz",errorText:"errorText__NAOtZ",backWrapper:"backWrapper__oolN6",backButton:"backButton__CygdZ",iconError:"iconError__gQPlI",pattern:"pattern__irgYh"}},10611:function(e,t,n){"use strict";n.r(t),t.default={wrap:"wrap__Zy0V5",__short:"__short__bBNpR",__active:"__active__y_cuj"}},60783:function(e,t,n){"use strict";n.r(t),t.default={stand:"stand__dPhGn",standBig:"standBig__UnNsz"}},75598:function(e,t,n){"use strict";n.r(t),t.default={__widgetConstructor:"__widgetConstructor__yI4R4",unset:"unset__r9Zkd"}},7949:function(e,t,n){"use strict";n.r(t),t.default={WidgetContainer_OPEN_WIDGET:"WidgetContainer_OPEN_WIDGET__izFH0",WidgetContainer_CLOSE_WIDGET:"WidgetContainer_CLOSE_WIDGET__aaLdj",Label_MINIMIZE_WIDGET:"Label_MINIMIZE_WIDGET__MzZwl",Label_MAXIMIZE_WIDGET:"Label_MAXIMIZE_WIDGET__ZBVmq",Label_OPEN_WIDGET:"Label_OPEN_WIDGET__nKF2a",Label_CLOSE_WIDGET:"Label_CLOSE_WIDGET__CDtba",WidgetContainer_MAXIMIZE_WIDGET:"WidgetContainer_MAXIMIZE_WIDGET__TC1n4",WidgetContainer_MINIMIZE_WIDGET:"WidgetContainer_MINIMIZE_WIDGET__hJED7",WidgetContainer_MIN_WIDGET:"WidgetContainer_MIN_WIDGET__wFjry"}},37871:function(e,t,n){"use strict";n.r(t),t.default={WidgetContainer_OPEN_WIDGET:"WidgetContainer_OPEN_WIDGET__LuPl5",WidgetContainer_CLOSE_WIDGET:"WidgetContainer_CLOSE_WIDGET__QMk4K",Label_MINIMIZE_WIDGET:"Label_MINIMIZE_WIDGET__FwJpn",Label_MAXIMIZE_WIDGET:"Label_MAXIMIZE_WIDGET__wYgbv",Label_OPEN_WIDGET:"Label_OPEN_WIDGET__Uwzd9",Label_CLOSE_WIDGET:"Label_CLOSE_WIDGET__vl3Lm",WidgetContainer_MAXIMIZE_WIDGET:"WidgetContainer_MAXIMIZE_WIDGET__IkaNP",WidgetContainer_MINIMIZE_WIDGET:"WidgetContainer_MINIMIZE_WIDGET__V_bP8",WidgetContainer_MIN_WIDGET:"WidgetContainer_MIN_WIDGET__TMuwv"}},10193:function(e,t,n){"use strict";n.r(t),t.default={WidgetContainer_OPEN_WIDGET:"WidgetContainer_OPEN_WIDGET__q_N8a",WidgetContainer_CLOSE_WIDGET:"WidgetContainer_CLOSE_WIDGET__lEUMG",WidgetContainer_MAXIMIZE_WIDGET:"WidgetContainer_MAXIMIZE_WIDGET__ynbxM",WidgetContainer_MINIMIZE_WIDGET:"WidgetContainer_MINIMIZE_WIDGET__fmH1J",WidgetContainer_MIN_WIDGET:"WidgetContainer_MIN_WIDGET__So7wK"}},5446:function(e,t,n){"use strict";n.r(t),t.default={WidgetContainer_OPEN_WIDGET:"WidgetContainer_OPEN_WIDGET__JdBrp",WidgetContainer_CLOSE_WIDGET:"WidgetContainer_CLOSE_WIDGET__Ho8Dg",WidgetContainer_MAXIMIZE_WIDGET:"WidgetContainer_MAXIMIZE_WIDGET__ervRg",WidgetContainer_MINIMIZE_WIDGET:"WidgetContainer_MINIMIZE_WIDGET__BGIeq",WidgetContainer_MIN_WIDGET:"WidgetContainer_MIN_WIDGET__PfId1",Label_OPEN_WIDGET:"Label_OPEN_WIDGET__qJOBN",Label_CLOSE_WIDGET:"Label_CLOSE_WIDGET__B5Be3",Label_MAXIMIZE_WIDGET:"Label_MAXIMIZE_WIDGET__idVCg"}},86052:function(e,t,n){"use strict";n.r(t),t.default={Label_OPEN_WIDGET:"Label_OPEN_WIDGET__SiEDU",Label_CLOSE_WIDGET:"Label_CLOSE_WIDGET__fo4yP",Label_MINIMIZE_WIDGET:"Label_MINIMIZE_WIDGET__PaUzp",Label_MIN_WIDGET:"Label_MIN_WIDGET__Gzavb",Label_MAXIMIZE_WIDGET:"Label_MAXIMIZE_WIDGET__kLEgE",WidgetContainer_OPEN_WIDGET:"WidgetContainer_OPEN_WIDGET__osggM",WidgetContainer_CLOSE_WIDGET:"WidgetContainer_CLOSE_WIDGET__tBUsN",WidgetContainer_MAXIMIZE_WIDGET:"WidgetContainer_MAXIMIZE_WIDGET__fBZPC",WidgetContainer_MINIMIZE_WIDGET:"WidgetContainer_MINIMIZE_WIDGET__MOLIW",WidgetContainer_MIN_WIDGET:"WidgetContainer_MIN_WIDGET__aGuex"}},8741:function(e,t,n){"use strict";n.r(t),t.default={Label_OPEN_WIDGET:"Label_OPEN_WIDGET__CVqYF",Label_CLOSE_WIDGET:"Label_CLOSE_WIDGET__YHypI",Label_MINIMIZE_WIDGET:"Label_MINIMIZE_WIDGET__wiH8J",Label_MIN_WIDGET:"Label_MIN_WIDGET__vYJbP",Label_MAXIMIZE_WIDGET:"Label_MAXIMIZE_WIDGET__AFJxk",WidgetContainer_OPEN_WIDGET:"WidgetContainer_OPEN_WIDGET__scIhX",WidgetContainer_CLOSE_WIDGET:"WidgetContainer_CLOSE_WIDGET__XjGhN",WidgetContainer_MAXIMIZE_WIDGET:"WidgetContainer_MAXIMIZE_WIDGET__TRWbN",WidgetContainer_MINIMIZE_WIDGET:"WidgetContainer_MINIMIZE_WIDGET__Yqow2",WidgetContainer_MIN_WIDGET:"WidgetContainer_MIN_WIDGET__Vkw2F"}},91153:function(e,t){"use strict";t.Z={avatar:"avatar__dbQfo",_chatStyle:"_chatStyle__H0QqP",avatarItem:"avatarItem__W_xiX",avatarListImg:"avatarListImg__oJJ2x",avatarImg:"avatarImg__yUPFr",lightAvatar:"lightAvatar__NlEXY",darkAvatar:"darkAvatar__at6mY",_width1:"_width1__K4BbH",_width2:"_width2__ElY9g",_width3:"_width3__rDq3C",_connected:"_connected__TTiNk",_expanded:"_expanded__k3mcO",_mobile:"_mobile__O3qTp",_tablet:"_tablet__gO0YM",__isBot:"__isBot__cOIZy",onlineBadge:"onlineBadge__rOY31",avatarList:"avatarList__oV8v1",dotsItem:"dotsItem__ednbq",_light:"_light__InW4U",_dark:"_dark__TEqJJ",botIcon:"botIcon__ahBfG",__header:"__header__ggFjD",img:"img__hwexb"}},98661:function(e,t,n){"use strict";n.r(t),n.d(t,{Children:function(){return y},Component:function(){return r.Component},Fragment:function(){return r.Fragment},PureComponent:function(){return p},StrictMode:function(){return ae},Suspense:function(){return T},SuspenseList:function(){return O},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:function(){return K},cloneElement:function(){return te},createContext:function(){return r.createContext},createElement:function(){return r.createElement},createFactory:function(){return J},createPortal:function(){return R},createRef:function(){return r.createRef},default:function(){return le},findDOMNode:function(){return re},flushSync:function(){return oe},forwardRef:function(){return _},hydrate:function(){return B},isElement:function(){return se},isFragment:function(){return X},isMemo:function(){return ee},isValidElement:function(){return Q},lazy:function(){return w},memo:function(){return f},render:function(){return j},startTransition:function(){return c},unmountComponentAtNode:function(){return ne},unstable_batchedUpdates:function(){return ie},useCallback:function(){return i.I4},useContext:function(){return i.qp},useDebugValue:function(){return i.Qb},useDeferredValue:function(){return u},useEffect:function(){return i.d4},useErrorBoundary:function(){return i.cO},useId:function(){return i.Me},useImperativeHandle:function(){return i.aP},useInsertionEffect:function(){return g},useLayoutEffect:function(){return i.bt},useMemo:function(){return i.Ye},useReducer:function(){return i._Y},useRef:function(){return i.sO},useState:function(){return i.eJ},useSyncExternalStore:function(){return s},useTransition:function(){return d},version:function(){return Y}});var r=n(6400),i=n(30396);function o(e,t){for(var n in t)e[n]=t[n];return e}function a(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function s(e,t){var n=t(),r=(0,i.eJ)({t:{__:n,u:t}}),o=r[0].t,a=r[1];return(0,i.bt)(function(){o.__=n,o.u=t,l(o)&&a({t:o})},[e,n,t]),(0,i.d4)(function(){return l(o)&&a({t:o}),e(function(){l(o)&&a({t:o})})},[e]),n}function l(e){var t,n,r=e.u,i=e.__;try{var o=r();return!((t=i)===(n=o)&&(0!==t||1/t==1/n)||t!=t&&n!=n)}catch(e){return!0}}function c(e){e()}function u(e){return e}function d(){return[!1,c]}var g=i.bt;function p(e,t){this.props=e,this.context=t}function f(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:a(this.props,e)}function i(t){return this.shouldComponentUpdate=n,(0,r.createElement)(e,t)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(p.prototype=new r.Component).isPureReactComponent=!0,p.prototype.shouldComponentUpdate=function(e,t){return a(this.props,e)||a(this.state,t)};var h=r.options.__b;r.options.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),h&&h(e)};var m="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function _(e){function t(t){var n=o({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=m,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var v=function(e,t){return null==e?null:(0,r.toChildArray)((0,r.toChildArray)(e).map(t))},y={map:v,forEach:v,count:function(e){return e?(0,r.toChildArray)(e).length:0},only:function(e){var t=(0,r.toChildArray)(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:r.toChildArray},C=r.options.__e;r.options.__e=function(e,t,n,r){if(e.then)for(var i,o=t;o=o.__;)if((i=o.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);C(e,t,n,r)};var E=r.options.unmount;function b(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),e.__c.__H=null),null!=(e=o({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(e){return b(e,t,n)})),e}function S(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(e){return S(e,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function T(){this.__u=0,this.o=null,this.__b=null}function D(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function w(e){var t,n,i;function o(o){if(t||(t=e()).then(function(e){n=e.default||e},function(e){i=e}),i)throw i;if(!n)throw t;return(0,r.createElement)(n,o)}return o.displayName="Lazy",o.__f=!0,o}function O(){this.i=null,this.l=null}r.options.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),E&&E(e)},(T.prototype=new r.Component).__c=function(e,t){var n=t.__c,r=this;null==r.o&&(r.o=[]),r.o.push(n);var i=D(r.__v),o=!1,a=function(){o||(o=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=S(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.o.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},T.prototype.componentWillUnmount=function(){this.o=[]},T.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=b(this.__b,n,i.__O=i.__P)}this.__b=null}var o=t.__a&&(0,r.createElement)(r.Fragment,null,e.fallback);return o&&(o.__u&=-33),[(0,r.createElement)(r.Fragment,null,t.__a?null:e.children),o]};var A=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function M(e){return this.getChildContext=function(){return e.context},e.children}function I(e){var t=this,n=e.h;t.componentWillUnmount=function(){(0,r.render)(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),t.v||(t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(e){this.childNodes.push(e),t.h.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.h.insertBefore(e,n)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.h.removeChild(e)}}),(0,r.render)((0,r.createElement)(M,{context:t.context},e.__v),t.v)}function R(e,t){var n=(0,r.createElement)(I,{__v:e,h:t});return n.containerInfo=t,n}(O.prototype=new r.Component).__a=function(e){var t=this,n=D(t.__v),r=t.l.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),A(t,e,r)):i()};n?n(o):o()}},O.prototype.render=function(e){this.i=null,this.l=new Map;var t=(0,r.toChildArray)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},O.prototype.componentDidUpdate=O.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){A(e,n,t)})};var k="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,L=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,P=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,x=/[A-Z0-9]/g,N="undefined"!=typeof document,F=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};function j(e,t,n){return null==t.__k&&(t.textContent=""),(0,r.render)(e,t),"function"==typeof n&&n(),e?e.__c:null}function B(e,t,n){return(0,r.hydrate)(e,t),"function"==typeof n&&n(),e?e.__c:null}r.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(r.Component.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var U=r.options.event;function V(){}function W(){return this.cancelBubble}function G(){return this.defaultPrevented}r.options.event=function(e){return U&&(e=U(e)),e.persist=V,e.isPropagationStopped=W,e.isDefaultPrevented=G,e.nativeEvent=e};var H,$={enumerable:!1,configurable:!0,get:function(){return this.class}},z=r.options.vnode;r.options.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,i={},o=-1===n.indexOf("-");for(var a in t){var s=t[a];if(!("value"===a&&"defaultValue"in t&&null==s||N&&"children"===a&&"noscript"===n||"class"===a||"className"===a)){var l=a.toLowerCase();"defaultValue"===a&&"value"in t&&null==t.value?a="value":"download"===a&&!0===s?s="":"translate"===l&&"no"===s?s=!1:"o"===l[0]&&"n"===l[1]?"ondoubleclick"===l?a="ondblclick":"onchange"!==l||"input"!==n&&"textarea"!==n||F(t.type)?"onfocus"===l?a="onfocusin":"onblur"===l?a="onfocusout":P.test(a)&&(a=l):l=a="oninput":o&&L.test(a)?a=a.replace(x,"-$&").toLowerCase():null===s&&(s=void 0),"oninput"===l&&i[a=l]&&(a="oninputCapture"),i[a]=s}}"select"==n&&i.multiple&&Array.isArray(i.value)&&(i.value=(0,r.toChildArray)(t.children).forEach(function(e){e.props.selected=-1!=i.value.indexOf(e.props.value)})),"select"==n&&null!=i.defaultValue&&(i.value=(0,r.toChildArray)(t.children).forEach(function(e){e.props.selected=i.multiple?-1!=i.defaultValue.indexOf(e.props.value):i.defaultValue==e.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",$)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(e),e.$$typeof=k,z&&z(e)};var Z=r.options.__r;r.options.__r=function(e){Z&&Z(e),H=e.__c};var q=r.options.diffed;r.options.diffed=function(e){q&&q(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),H=null};var K={ReactCurrentDispatcher:{current:{readContext:function(e){return H.__n[e.__c].props.value},useCallback:i.I4,useContext:i.qp,useDebugValue:i.Qb,useDeferredValue:u,useEffect:i.d4,useId:i.Me,useImperativeHandle:i.aP,useInsertionEffect:g,useLayoutEffect:i.bt,useMemo:i.Ye,useReducer:i._Y,useRef:i.sO,useState:i.eJ,useSyncExternalStore:s,useTransition:d}}},Y="18.3.1";function J(e){return r.createElement.bind(null,e)}function Q(e){return!!e&&e.$$typeof===k}function X(e){return Q(e)&&e.type===r.Fragment}function ee(e){return!!e&&!!e.displayName&&("string"==typeof e.displayName||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function te(e){return Q(e)?r.cloneElement.apply(null,arguments):e}function ne(e){return!!e.__k&&((0,r.render)(null,e),!0)}function re(e){return e&&(e.base||1===e.nodeType&&e)||null}var ie=function(e,t){return e(t)},oe=function(e,t){return e(t)},ae=r.Fragment,se=Q,le={useState:i.eJ,useId:i.Me,useReducer:i._Y,useEffect:i.d4,useLayoutEffect:i.bt,useInsertionEffect:g,useTransition:d,useDeferredValue:u,useSyncExternalStore:s,startTransition:c,useRef:i.sO,useImperativeHandle:i.aP,useMemo:i.Ye,useCallback:i.I4,useContext:i.qp,useDebugValue:i.Qb,version:"18.3.1",Children:y,render:j,hydrate:B,unmountComponentAtNode:ne,createPortal:R,createElement:r.createElement,createContext:r.createContext,createFactory:J,cloneElement:te,createRef:r.createRef,Fragment:r.Fragment,isValidElement:Q,isElement:se,isFragment:X,isMemo:ee,findDOMNode:re,Component:r.Component,PureComponent:p,memo:f,forwardRef:_,flushSync:oe,unstable_batchedUpdates:ie,StrictMode:ae,Suspense:T,SuspenseList:O,lazy:w,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:K}},6400:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return w},Fragment:function(){return D},cloneElement:function(){return Z},createContext:function(){return q},createElement:function(){return b},createRef:function(){return T},h:function(){return b},hydrate:function(){return z},isValidElement:function(){return a},options:function(){return i},render:function(){return $},toChildArray:function(){return P}});var r,i,o,a,s,l,c,u,d,g,p,f,h,m={},_=[],v=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function C(e,t){for(var n in t)e[n]=t[n];return e}function E(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,t,n){var i,o,a,s={};for(a in t)"key"==a?i=t[a]:"ref"==a?o=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return S(e,s,i,o,null)}function S(e,t,n,r,a){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++o:a,__i:-1,__u:0};return null==a&&null!=i.vnode&&i.vnode(s),s}function T(){return{current:null}}function D(e){return e.children}function w(e,t){this.props=e,this.context=t}function O(e,t){if(null==t)return e.__?O(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?O(e):null}function A(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return A(e)}}function M(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!I.__r++||l!==i.debounceRendering)&&((l=i.debounceRendering)||c)(I)}function I(){var e,t,n,r,o,a,l,c;for(s.sort(u);e=s.shift();)e.__d&&(t=s.length,r=void 0,a=(o=(n=e).__v).__e,l=[],c=[],n.__P&&((r=C({},o)).__v=o.__v+1,i.vnode&&i.vnode(r),B(n.__P,r,o,n.__n,n.__P.namespaceURI,32&o.__u?[a]:null,l,null==a?O(o):a,!!(32&o.__u),c),r.__v=o.__v,r.__.__k[r.__i]=r,U(l,r,c),r.__e!=a&&A(r)),s.length>t&&s.sort(u));I.__r=0}function R(e,t,n,r,i,o,a,s,l,c,u){var d,g,p,f,h,v,y=r&&r.__k||_,C=t.length;for(l=k(n,t,y,l,C),d=0;d<C;d++)null!=(p=n.__k[d])&&(g=-1===p.__i?m:y[p.__i]||m,p.__i=d,v=B(e,p,g,i,o,a,s,l,c,u),f=p.__e,p.ref&&g.ref!=p.ref&&(g.ref&&W(g.ref,null,p),u.push(p.ref,p.__c||f,p)),null==h&&null!=f&&(h=f),4&p.__u||g.__k===p.__k?l=L(p,l,e):"function"==typeof p.type&&void 0!==v?l=v:f&&(l=f.nextSibling),p.__u&=-7);return n.__e=h,l}function k(e,t,n,r,i){var o,a,s,l,c,u=n.length,d=u,g=0;for(e.__k=new Array(i),o=0;o<i;o++)null!=(a=t[o])&&"boolean"!=typeof a&&"function"!=typeof a?(l=o+g,(a=e.__k[o]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?S(null,a,null,null,null):y(a)?S(D,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?S(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,-1!==(c=a.__i=x(a,n,l,d))&&(d--,(s=n[c])&&(s.__u|=2)),null==s||null===s.__v?(-1==c&&g--,"function"!=typeof a.type&&(a.__u|=4)):c!=l&&(c==l-1?g--:c==l+1?g++:(c>l?g--:g++,a.__u|=4))):e.__k[o]=null;if(d)for(o=0;o<u;o++)null!=(s=n[o])&&!(2&s.__u)&&(s.__e==r&&(r=O(s)),G(s,s));return r}function L(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=L(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=O(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function P(e,t){return t=t||[],null==e||"boolean"==typeof e||(y(e)?e.some(function(e){P(e,t)}):t.push(e)),t}function x(e,t,n,r){var i,o,a=e.key,s=e.type,l=t[n];if(null===l||l&&a==l.key&&s===l.type&&!(2&l.__u))return n;if(r>(null==l||2&l.__u?0:1))for(i=n-1,o=n+1;i>=0||o<t.length;){if(i>=0){if((l=t[i])&&!(2&l.__u)&&a==l.key&&s===l.type)return i;i--}if(o<t.length){if((l=t[o])&&!(2&l.__u)&&a==l.key&&s===l.type)return o;o++}}return-1}function N(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||v.test(t)?n:n+"px"}function F(e,t,n,r,i){var o;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||N(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||N(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])o=t!=(t=t.replace(d,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=g,e.addEventListener(t,o?f:p,o)):e.removeEventListener(t,o?f:p,o);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function j(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=g++;else if(t.t<n.u)return;return n(i.event?i.event(t):t)}}}function B(e,t,n,r,o,a,s,l,c,u){var d,g,p,f,h,m,_,v,b,S,T,O,A,M,I,k,L,P=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),a=[l=t.__e=n.__e]),(d=i.__b)&&d(t);e:if("function"==typeof P)try{if(v=t.props,b="prototype"in P&&P.prototype.render,S=(d=P.contextType)&&r[d.__c],T=d?S?S.props.value:d.__:r,n.__c?_=(g=t.__c=n.__c).__=g.__E:(b?t.__c=g=new P(v,T):(t.__c=g=new w(v,T),g.constructor=P,g.render=H),S&&S.sub(g),g.props=v,g.state||(g.state={}),g.context=T,g.__n=r,p=g.__d=!0,g.__h=[],g._sb=[]),b&&null==g.__s&&(g.__s=g.state),b&&null!=P.getDerivedStateFromProps&&(g.__s==g.state&&(g.__s=C({},g.__s)),C(g.__s,P.getDerivedStateFromProps(v,g.__s))),f=g.props,h=g.state,g.__v=t,p)b&&null==P.getDerivedStateFromProps&&null!=g.componentWillMount&&g.componentWillMount(),b&&null!=g.componentDidMount&&g.__h.push(g.componentDidMount);else{if(b&&null==P.getDerivedStateFromProps&&v!==f&&null!=g.componentWillReceiveProps&&g.componentWillReceiveProps(v,T),!g.__e&&(null!=g.shouldComponentUpdate&&!1===g.shouldComponentUpdate(v,g.__s,T)||t.__v==n.__v)){for(t.__v!=n.__v&&(g.props=v,g.state=g.__s,g.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),O=0;O<g._sb.length;O++)g.__h.push(g._sb[O]);g._sb=[],g.__h.length&&s.push(g);break e}null!=g.componentWillUpdate&&g.componentWillUpdate(v,g.__s,T),b&&null!=g.componentDidUpdate&&g.__h.push(function(){g.componentDidUpdate(f,h,m)})}if(g.context=T,g.props=v,g.__P=e,g.__e=!1,A=i.__r,M=0,b){for(g.state=g.__s,g.__d=!1,A&&A(t),d=g.render(g.props,g.state,g.context),I=0;I<g._sb.length;I++)g.__h.push(g._sb[I]);g._sb=[]}else do{g.__d=!1,A&&A(t),d=g.render(g.props,g.state,g.context),g.state=g.__s}while(g.__d&&++M<25);g.state=g.__s,null!=g.getChildContext&&(r=C(C({},r),g.getChildContext())),b&&!p&&null!=g.getSnapshotBeforeUpdate&&(m=g.getSnapshotBeforeUpdate(f,h)),l=R(e,y(k=null!=d&&d.type===D&&null==d.key?d.props.children:d)?k:[k],t,n,r,o,a,s,l,c,u),g.base=t.__e,t.__u&=-161,g.__h.length&&s.push(g),_&&(g.__E=g.__=null)}catch(e){if(t.__v=null,c||null!=a)if(e.then){for(t.__u|=c?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,t.__e=l}else for(L=a.length;L--;)E(a[L]);else t.__e=n.__e,t.__k=n.__k;i.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=V(n.__e,t,n,r,o,a,s,c,u);return(d=i.diffed)&&d(t),128&t.__u?void 0:l}function U(e,t,n){for(var r=0;r<n.length;r++)W(n[r],n[++r],n[++r]);i.__c&&i.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){i.__e(e,t.__v)}})}function V(e,t,n,o,a,s,l,c,u){var d,g,p,f,h,_,v,C=n.props,b=t.props,S=t.type;if("svg"==S?a="http://www.w3.org/2000/svg":"math"==S?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(d=0;d<s.length;d++)if((h=s[d])&&"setAttribute"in h==!!S&&(S?h.localName==S:3==h.nodeType)){e=h,s[d]=null;break}if(null==e){if(null==S)return document.createTextNode(b);e=document.createElementNS(a,S,b.is&&b),c&&(i.__m&&i.__m(t,s),c=!1),s=null}if(null===S)C===b||c&&e.data===b||(e.data=b);else{if(s=s&&r.call(e.childNodes),C=n.props||m,!c&&null!=s)for(C={},d=0;d<e.attributes.length;d++)C[(h=e.attributes[d]).name]=h.value;for(d in C)if(h=C[d],"children"==d);else if("dangerouslySetInnerHTML"==d)p=h;else if(!(d in b)){if("value"==d&&"defaultValue"in b||"checked"==d&&"defaultChecked"in b)continue;F(e,d,null,h,a)}for(d in b)h=b[d],"children"==d?f=h:"dangerouslySetInnerHTML"==d?g=h:"value"==d?_=h:"checked"==d?v=h:c&&"function"!=typeof h||C[d]===h||F(e,d,h,C[d],a);if(g)c||p&&(g.__html===p.__html||g.__html===e.innerHTML)||(e.innerHTML=g.__html),t.__k=[];else if(p&&(e.innerHTML=""),R(e,y(f)?f:[f],t,n,o,"foreignObject"==S?"http://www.w3.org/1999/xhtml":a,s,l,s?s[0]:n.__k&&O(n,0),c,u),null!=s)for(d=s.length;d--;)E(s[d]);c||(d="value","progress"==S&&null==_?e.removeAttribute("value"):void 0!==_&&(_!==e[d]||"progress"==S&&!_||"option"==S&&_!==C[d])&&F(e,d,_,C[d],a),d="checked",void 0!==v&&v!==e[d]&&F(e,d,v,C[d],a))}return e}function W(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,n)}}function G(e,t,n){var r,o;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||W(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&G(r[o],t,n||"function"!=typeof e.type);n||E(e.__e),e.__c=e.__=e.__e=void 0}function H(e,t,n){return this.constructor(e,n)}function $(e,t,n){var o,a,s,l;t==document&&(t=document.documentElement),i.__&&i.__(e,t),a=(o="function"==typeof n)?null:n&&n.__k||t.__k,s=[],l=[],B(t,e=(!o&&n||t).__k=b(D,null,[e]),a||m,m,t.namespaceURI,!o&&n?[n]:a?null:t.firstChild?r.call(t.childNodes):null,s,!o&&n?n:a?a.__e:t.firstChild,o,l),U(s,e,l)}function z(e,t){$(e,t,z)}function Z(e,t,n){var i,o,a,s,l=C({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)"key"==a?i=t[a]:"ref"==a?o=t[a]:l[a]=void 0===t[a]&&void 0!==s?s[a]:t[a];return arguments.length>2&&(l.children=arguments.length>3?r.call(arguments,2):n),S(e.type,l,i||e.key,o||e.ref,null)}function q(e,t){var n={__c:t="__cC"+h++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=new Set,(r={})[t]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach(function(e){e.__e=!0,M(e)})},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r=_.slice,i={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},o=0,a=function(e){return null!=e&&null==e.constructor},w.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=C({},this.state),"function"==typeof e&&(e=e(C({},n),this.props)),e&&C(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),M(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),M(this))},w.prototype.render=D,s=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},I.__r=0,d=/(PointerCapture)$|Capture$/i,g=0,p=j(!1),f=j(!0),h=0},30396:function(e,t,n){"use strict";n.d(t,{I4:function(){return D},Me:function(){return M},Qb:function(){return O},Ye:function(){return T},_Y:function(){return y},aP:function(){return S},bt:function(){return E},cO:function(){return A},d4:function(){return C},eJ:function(){return v},qp:function(){return w},sO:function(){return b}});var r,i,o,a,s=n(6400),l=0,c=[],u=s.options,d=u.__b,g=u.__r,p=u.diffed,f=u.__c,h=u.unmount,m=u.__;function _(e,t){u.__h&&u.__h(i,e,l||t),l=0;var n=i.__H||(i.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function v(e){return l=1,y(N,e)}function y(e,t,n){var o=_(r++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):N(void 0,t),function(e){var t=o.__N?o.__N[0]:o.__[0],n=o.t(t,e);t!==n&&(o.__N=[n,o.__[1]],o.__c.setState({}))}],o.__c=i,!i.u)){var a=function(e,t,n){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter(function(e){return!!e.__c});if(r.every(function(e){return!e.__N}))return!s||s.call(this,e,t,n);var i=o.__c.props!==e;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}}),s&&s.call(this,e,t,n)||i};i.u=!0;var s=i.shouldComponentUpdate,l=i.componentWillUpdate;i.componentWillUpdate=function(e,t,n){if(this.__e){var r=s;s=void 0,a(e,t,n),s=r}l&&l.call(this,e,t,n)},i.shouldComponentUpdate=a}return o.__N||o.__}function C(e,t){var n=_(r++,3);!u.__s&&x(n.__H,t)&&(n.__=e,n.i=t,i.__H.__h.push(n))}function E(e,t){var n=_(r++,4);!u.__s&&x(n.__H,t)&&(n.__=e,n.i=t,i.__h.push(n))}function b(e){return l=5,T(function(){return{current:e}},[])}function S(e,t,n){l=6,E(function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},null==n?n:n.concat(e))}function T(e,t){var n=_(r++,7);return x(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function D(e,t){return l=8,T(function(){return e},t)}function w(e){var t=i.context[e.__c],n=_(r++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(i)),t.props.value):e.__}function O(e,t){u.useDebugValue&&u.useDebugValue(t?t(e):e)}function A(e){var t=_(r++,10),n=v();return t.__=e,i.componentDidCatch||(i.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]}function M(){var e=_(r++,11);if(!e.__){for(var t=i.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function I(){for(var e;e=c.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(L),e.__H.__h.forEach(P),e.__H.__h=[]}catch(t){e.__H.__h=[],u.__e(t,e.__v)}}u.__b=function(e){i=null,d&&d(e)},u.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),m&&m(e,t)},u.__r=function(e){g&&g(e),r=0;var t=(i=e.__c).__H;t&&(o===i?(t.__h=[],i.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0})):(t.__h.forEach(L),t.__h.forEach(P),t.__h=[],r=0)),o=i},u.diffed=function(e){p&&p(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==c.push(t)&&a===u.requestAnimationFrame||((a=u.requestAnimationFrame)||k)(I)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.i=void 0})),o=i=null},u.__c=function(e,t){t.some(function(e){try{e.__h.forEach(L),e.__h=e.__h.filter(function(e){return!e.__||P(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],u.__e(n,e.__v)}}),f&&f(e,t)},u.unmount=function(e){h&&h(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{L(e)}catch(e){t=e}}),n.__H=void 0,t&&u.__e(t,n.__v))};var R="function"==typeof requestAnimationFrame;function k(e){var t,n=function(){clearTimeout(r),R&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);R&&(t=requestAnimationFrame(n))}function L(e){var t=i,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),i=t}function P(e){var t=i;e.__c=e.__(),i=t}function x(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function N(e,t){return"function"==typeof t?t(e):t}},16584:function(e,t,n){"use strict";n.d(t,{BX:function(){return o},HY:function(){return r.Fragment},tZ:function(){return o}});var r=n(6400);var i=0;Array.isArray;function o(e,t,n,o,a,s){t||(t={});var l,c,u=t;if("ref"in u)for(c in u={},t)"ref"==c?l=t[c]:u[c]=t[c];var d={type:e,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--i,__i:-1,__u:0,__source:a,__self:s};if("function"==typeof e&&(l=e.defaultProps))for(c in l)void 0===u[c]&&(u[c]=l[c]);return r.options.vnode&&r.options.vnode(d),d}},92703:function(e,t,n){"use strict";var r=n(50414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},55760:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,o=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,a=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),l=new t(512),c=new t(512);function u(e){return s.get(e)||s.set(e,d(e).map(function(e){return e.replace(a,"$2")}))}function d(e){return e.match(n)||[""]}function g(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function p(e){return!g(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return o.test(e)}(e))}e.exports={Cache:t,split:d,normalizePath:u,setter:function(e){var t=u(e);return l.get(e)||l.set(e,function(e,n){for(var r=0,i=t.length,o=e;r<i-1;){var a=t[r];if("__proto__"===a||"constructor"===a||"prototype"===a)return e;o=o[t[r++]]}o[t[r]]=n})},getter:function(e,t){var n=u(e);return c.get(e)||c.set(e,function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e})},join:function(e){return e.reduce(function(e,t){return e+(g(t)||r.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(e,t,n){!function(e,t,n){var r,i,o,a,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(p(r)&&(r='"'+r+'"'),o=!(a=g(r))&&/^\d+$/.test(r),t.call(n,r,a,o,i,e))}(Array.isArray(e)?e:d(e),t,n)}}},28843:function(e,t,n){"use strict";n.r(t),t.default='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18.9044 15.2138C18.5013 14.8056 17.9637 14.5896 17.3773 14.5896C16.7787 14.5896 16.1923 14.8176 15.7526 15.2498C15.3372 15.646 15.0196 16.1381 14.8363 16.6784C14.1155 16.6063 11.7567 15.1092 10.3029 13.6446C8.89803 12.2161 7.40653 9.84261 7.32102 9.11033C7.88298 8.95427 8.39607 8.65415 8.81143 8.258C9.25122 7.83784 9.50777 7.29764 9.5322 6.70941C9.55663 6.12119 9.34895 5.56898 8.94581 5.16082L7.3821 3.57622C7.01561 3.20408 6.52695 3 5.98942 3C5.43968 3 4.91437 3.21608 4.51123 3.60023L4.2669 3.84032C3.93705 4.14043 3.68051 4.50057 3.50948 4.89672C3.48504 4.95675 2.80092 6.45732 3.05747 7.58575C3.10633 7.75381 4.47667 12.0854 8.23834 15.6494C12 19.2133 16.0824 20.8679 16.2656 20.928C16.4611 20.976 16.681 21 16.9131 21C17.9027 21 18.9533 20.5798 18.9899 20.5678C19.4053 20.3998 19.7718 20.1597 20.1016 19.8596L20.346 19.6195C21.1645 18.8392 21.2255 17.5667 20.4681 16.7984L18.9044 15.2138Z" fill="_COLOR1_"/>\n</svg>\n'},92809:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><g fill="none" fill-rule="evenodd"><path d="M.941 0h15v15h-15z"/><path fill="_COLOR1_" fill-rule="nonzero" d="M3.497 9.624c.36.002.694-.14.954-.401.266-.266.425-.627.428-1.014.009-.36-.069-.72-.227-1.04.352-.288 2.063-.67 3.357-.665 1.258.01 2.972.401 3.335.688-.18.319-.274.68-.283 1.04-.009.381.117.735.367 1.007.25.271.588.424.948.426l1.396.01c.328.002.635-.124.874-.363.244-.243.381-.572.39-.922l.001-.215a1.932 1.932 0 0 0-.132-.804c-.016-.038-.378-1.007-.993-1.394-.096-.053-2.626-1.367-5.876-1.279-3.25.088-5.796 1.165-5.904 1.22a1.718 1.718 0 0 0-.319.255c-.439.439-.719 1.091-.73 1.113-.11.259-.165.528-.178.808l-.002.214c-.017.71.52 1.301 1.197 1.306l1.397.01z"/></g></svg>'},87409:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z"/><path fill="#18C139" fill-rule="nonzero" d="M12.603 10.143a1.408 1.408 0 0 0-1.018-.417c-.4 0-.79.152-1.083.44a2.377 2.377 0 0 0-.611.953c-.48-.048-2.053-1.046-3.022-2.023-.937-.952-1.931-2.534-1.988-3.022.374-.104.716-.305.993-.569.293-.28.465-.64.48-1.032a1.372 1.372 0 0 0-.39-1.032L4.92 2.384A1.285 1.285 0 0 0 3.993 2c-.367 0-.717.144-.986.4l-.162.16c-.22.2-.391.44-.505.704-.017.04-.473 1.04-.302 1.793.033.112.946 3 3.454 5.376 2.508 2.376 5.23 3.479 5.352 3.519.13.032.277.048.431.048.66 0 1.36-.28 1.385-.288.277-.112.521-.272.741-.472l.163-.16c.546-.52.586-1.369.081-1.881l-1.042-1.056z"/></g></svg>'},85972:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n  <g fill="none" fill-rule="evenodd" transform="translate(3 4)">\n    <circle cx="8.5" cy="8.5" r="9.3" stroke="_COLOR1_" stroke-width="1.6"/>\n    <circle cx="5.375" cy="6.375" r="1.375" fill="_COLOR1_"/>\n    <circle cx="11.875" cy="6.375" r="1.375" fill="_COLOR1_" transform="matrix(-1 0 0 1 23.75 0)"/>\n    <path stroke="_COLOR1_" stroke-linecap="round" stroke-width="1.6" d="M4.25 10.5S4.5 13 8.5 13s4.25-2.5 4.25-2.5"/>\n  </g>\n</svg>'},21525:function(e,t,n){"use strict";n.r(t),t.default='<svg width="84" height="65" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".6" d="M41.9983 64.5c-.9715 0-1.8662-.2429-2.6843-.7286-.7925-.4857-1.4316-1.1376-1.9173-1.9556-.4602-.7925-.6902-1.6745-.6902-2.6459 0-.997.23-1.8918.6902-2.6843.4857-.7925 1.1248-1.4316 1.9173-1.9173.8181-.4857 1.7128-.7286 2.6843-.7286.9714 0 1.8534.2429 2.6459.7286.818.4857 1.4571 1.1248 1.9173 1.9173.4857.7925.7285 1.6873.7285 2.6843 0 .9714-.2428 1.8534-.7285 2.6459-.4602.818-1.0993 1.4699-1.9173 1.9556-.7925.4857-1.6745.7286-2.6459.7286Zm.0383-16.7573c-.8692 0-1.5722-.2557-2.109-.767-.5369-.5368-.8181-1.2654-.8437-2.1857-.0255-2.7098-.0511-5.4452-.0767-8.2061-.0255-2.761-.0511-5.5091-.0766-8.2445-.0256-2.7353-.0512-5.4707-.0767-8.2061 0-2.7609-.0128-5.5091-.0384-8.2444-.0256-2.73541-.0511-5.47079-.0767-8.20616 0-.94587.3196-1.7128.9587-2.30077C40.3366.793988 41.1035.5 41.9983.5c.8691 0 1.6361.293988 2.3007.88197.6647.58797.997 1.3549.997 2.30077-.0255 2.73537-.0511 5.47075-.0767 8.20616-.0255 2.7353-.0511 5.4835-.0766 8.2444 0 2.7354-.0128 5.4708-.0384 8.2061-.0256 2.7354-.0511 5.4835-.0767 8.2445 0 2.7609-.0128 5.4963-.0383 8.2061 0 .9203-.2812 1.6489-.8437 2.1857-.5368.5113-1.2398.767-2.109.767ZM33.447 5.40833l.1534 10.73697c-4.8828.7925-9.4843 2.3391-13.8047 4.6399-4.2947 2.3008-8.1805 5.3046-11.65724 9.0114-.33233.3323-.72858.5113-1.18874.5368-.43459 0-.81805-.1661-1.15039-.4985L.891007 24.8883c-.281207-.3324-.434592-.6775-.460156-1.0354 0-.3835.127821-.7286.383463-1.0353C3.16622 19.9032 6.0422 17.2573 9.44223 14.8799c3.40007-2.3775 7.13237-4.3715 11.19717-5.98206 4.0902-1.63611 8.3595-2.79928 12.8076-3.48951Zm17.0641 0c4.4993.66467 8.7813 1.81506 12.8461 3.45117 4.0647 1.6361 7.7843 3.6557 11.1587 6.0587 3.4001 2.3775 6.3016 5.0106 8.7046 7.8994.2557.3067.3707.6518.3452 1.0353 0 .3579-.1534.703-.4602 1.0354l-4.9083 4.8699c-.3324.3324-.7158.5113-1.1504.5369-.409 0-.7797-.1662-1.1121-.4985-3.5278-3.6813-7.4519-6.6723-11.7723-8.9731-4.2948-2.3263-8.8835-3.8857-13.7663-4.6782l.115-10.73697Zm-.1533 21.47397c3.8601.7925 7.388 2.1474 10.5835 4.0647 3.1956 1.8917 5.8031 4.0647 7.8227 6.5188.2812.3324.409.6775.3834 1.0354-.0255.3579-.1917.6774-.4985.9587l-5.4835 5.4451c-.3579.3324-.7413.5113-1.1504.5369-.409 0-.7797-.179-1.112-.5369-1.3805-1.4571-2.9782-2.7737-4.7933-3.9496-1.7895-1.2016-3.7196-2.1602-5.7903-2.876l.0384-11.1971Zm-16.6807 0 .0767 11.1587c-2.0451.7158-3.9625 1.6617-5.7519 2.8377-1.7895 1.1504-3.3617 2.4669-4.7166 3.9496-.3579.3835-.7542.6008-1.1888.6519-.4346.0256-.8436-.1534-1.2271-.5368l-5.4835-5.4835c-.3323-.3068-.5113-.6264-.5368-.9587 0-.3579.1278-.703.3834-1.0354 2.0963-2.5052 4.7294-4.691 7.8994-6.5572 3.1955-1.8662 6.7106-3.2083 10.5452-4.0263Z" fill="url(#a)"/><defs><linearGradient id="a" x1="42" y1=".5" x2="42" y2="64.5" gradientUnits="userSpaceOnUse"><stop stop-color="#8796A5"/><stop offset="1" stop-color="#C6C6C6"/></linearGradient></defs></svg>'},22764:function(e,t,n){"use strict";n.r(t),t.default='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: sketchtool 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>ABB53DC4-C95A-47C0-BDA2-177372AC59FA</title>\n    <desc>Created with sketchtool.</desc>\n    <defs></defs>\n    <g id="3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="ios-Full" transform="translate(-64.000000, -499.000000)" fill="#0076FF">\n            <g id="popup" transform="translate(0.000000, 190.000000)">\n                <path d="M65.0702042,309.547272 C63.6395848,310.838212 63.3600869,312.442576 66.0124393,316.105342 C68.6644642,319.767967 72.3286805,322.837952 74.9458442,324.128565 C77.5634291,325.418898 78.6800637,324.72144 79.4127573,323.709857 C80.1457784,322.697899 80.1457784,321.895624 79.0291437,321.058674 C77.9121815,320.22121 76.3420236,318.616705 74.9110766,319.802641 C73.4804572,320.988905 72.5381753,319.73334 72.1194665,319.279396 C71.8161507,318.951279 69.6064185,316.733031 69.1531761,316.279648 C68.6992786,315.825984 68.3153375,314.710145 69.1180342,313.837773 C69.9210116,312.965822 68.8470059,311.39805 68.5596934,311.04752 C68.2457086,310.663579 66.9719412,307.831492 65.0702042,309.547272" id="Page-1"></path>\n            </g>\n        </g>\n    </g>\n</svg>'},34948:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><path fill="_COLOR1_" d="M.813.006l9.18 9.18-.806.807L.007.813z"/><path fill="_COLOR1_" d="M9.994.813l-9.18 9.18-.808-.806 9.18-9.18z"/></svg>\n'},54446:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="108" height="36" viewBox="0 0 108 36">\n    <g>\n        <path fill="_COLOR1_" fill-rule="evenodd" d="M6.342 11.967H.957c-.2 0-.4 0-.6.2 0 .2-.198.2-.198.4v1.993c0 .2 0 .4.198.6.2.198.4.198.6.198h2.79v14.36c0 1.397-1.196 2.594-2.392 2.594h-.4c-.2 0-.398 0-.598.2-.2.2-.2.398-.2.598v1.994c0 .2 0 .4.2.6.2.198.4.198.6.198h.198c3.192 0 5.785-2.792 5.785-5.984V12.566c0-.2 0-.4-.2-.6h-.398m6.98 0H11.33c-.2 0-.2 0-.4.2s-.2.2-.2.4v14.76c0 .2 0 .398.2.598.2.2.4.2.598.2h1.795c.2 0 .4 0 .598-.2.2-.2.2-.4.2-.598v-14.76c0-.2 0-.4-.198-.6h-.6m17.154 0H28.88c-.598 0-.997.2-.997.4l-4.388 9.973-4.188-9.974c0-.4-.4-.4-.6-.4h-1.993c-.4 0-.598 0-.598.2-.2.2-.2.4 0 .6l6.78 15.357c.2.2.4.4.6.4h.2c.198 0 .597-.2.597-.4l6.782-15.358c.2-.2.2-.4 0-.598-.2-.2-.4-.2-.6-.2m9.176-.4c-2.193.002-3.988.8-5.584 2.594-1.595 1.597-2.393 3.592-2.393 5.985 0 2.393.798 4.388 2.393 5.984 1.596 1.794 3.39 2.592 5.585 2.592s3.99-.798 5.586-2.593c1.596-1.796 2.394-3.79 2.394-5.985 0-2.393-.798-4.388-2.394-5.984-1.596-1.794-3.59-2.591-5.585-2.591m3.193 12.165c-.798.998-1.995 1.596-3.192 1.596-1.395 0-2.392-.398-3.39-1.395-.797-.998-1.396-2.194-1.396-3.79 0-1.396.4-2.792 1.397-3.59.798-.997 1.995-1.396 3.39-1.396 1.398 0 2.395.398 3.193 1.395.797.997 1.396 2.194 1.396 3.59s-.6 2.593-1.397 3.59m19.147-.598c-.398-.4-.797-.2-.997 0l-.4.4-.597.597c-.2.2-.4.2-.6.4-.198.2-.597.398-.796.398-.4 0-.6.2-.998.2-1.396 0-2.393-.6-3.19-1.596-.8-.998-1.397-2.194-1.397-3.79 0-1.396.4-2.792 1.396-3.79.998-.997 1.996-1.396 3.392-1.396 1.197 0 2.194.6 3.19 1.596.4.4.8.4.998.2l1.197-1.197s0-.4-.4-.8c-1.395-1.794-3.39-2.79-5.584-2.79-2.194-.002-3.99.796-5.584 2.59-1.597 1.597-2.395 3.592-2.395 5.985 0 2.393.798 4.388 2.394 6.183 1.594 1.596 3.39 2.394 5.583 2.394 2.593 0 4.588-1.197 5.984-3.39.2-.4.2-.8-.2-1.198l-.997-.997m11.57-11.569c-1.597 0-2.993.6-4.59 1.796V4.986c0-.2 0-.4-.198-.598-.2-.2-.4-.2-.6-.2H66.38c-.2 0-.398 0-.598.2-.2.2-.2.4-.2.598v22.54c0 .198 0 .398.2.597.2.2.4.2.598.2h1.796c.598 0 .797-.2.797-.798V17.353c.2-.6.8-.998 1.398-1.596.797-.598 1.795-.798 2.792-.798.997 0 1.795.398 2.393 1.196.6.798.798 1.795.798 3.19v8.378c0 .2 0 .4.2.6.2.198.4.198.6.198h1.794c.2 0 .4 0 .6-.2.198-.2.198-.398.198-.598v-8.177c-.2-5.386-2.194-7.979-6.183-7.979m20.144 1.995c-.4-.798-.997-1.197-1.596-1.596-.798-.4-1.795-.598-2.992-.598-1.994 0-3.79.398-5.385.996-.398.2-.597.4-.597.998l.4 1.396c.198.598.398.798.796.598a12.823 12.823 0 0 1 4.388-.798c.997 0 1.595.2 1.994.798.4.598.598 1.596.4 2.793l-.4-.2c-.2 0-.598-.198-1.197-.198-.4.2-.797.2-1.396.2-1.995 0-3.392.398-4.588 1.395-1.197.997-1.596 2.194-1.596 3.79s.4 2.992 1.396 3.99c.998.996 2.194 1.395 3.59 1.395 1.796 0 3.39-.598 4.787-1.994l.398 1.196c.2.4.4.6.6.6h1.195c.2 0 .4 0 .6-.2.198-.2.198-.4.198-.6V18.75c0-1.198 0-2.195-.198-2.993-.2-.598-.4-1.396-.798-2.194M91.31 23.735c-.2.4-.797.998-1.396 1.396-.798.4-1.396.6-2.194.6s-1.396-.2-1.795-.798c-.4-.4-.598-1.197-.598-1.795 0-.798.2-1.396.798-1.995.598-.4 1.396-.797 2.393-.797.598 0 1.197 0 1.795.2.6.198.997.198.997.398v2.792m16.555 2.793l-.598-1.596c-.2-.4-.4-.598-.997-.4a3.834 3.834 0 0 1-2.394.8c-.4 0-.798-.2-.997-.4-.2-.2-.4-.598-.4-1.396V14.96h4.19c.198 0 .397 0 .597-.2.2-.2.2-.4.2-.6v-1.594c0-.2 0-.4-.2-.6h-4.788V7.38c0-.2 0-.4-.2-.598-.2-.2-.398-.2-.598-.2h-1.994c-.2 0-.4 0-.6.2-.198.2-.198.398-.198.598v4.587h-1.795c-.4 0-.798.2-.798.798v1.396c0 .2 0 .4.2.6.2.2.398.2.598.2h1.795v8.975c0 1.595.2 2.792.798 3.59.598.798 1.595 1.197 2.99 1.197.8 0 1.597-.2 2.395-.4s1.396-.598 1.795-.797c.997-.2 1.197-.598.997-.997z"/>\n        <path fill="_COLOR2_" fill-rule="evenodd" d="M6.94 10.77C6.543.4.16 0 .16 0c-.4 9.374 6.78 10.77 6.78 10.77z"/>\n    </g>\n</svg>\n'},30349:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="25.688" height="18">\n    <path fill="_COLOR1_" d="M7.155 5.93H6.134a.4.4 0 00-.287.128.378.378 0 00-.123.268v7.448a.377.377 0 00.123.28.389.389 0 00.287.12h1.021a.382.382 0 00.274-.12.353.353 0 00.131-.28V6.33a.375.375 0 00-.131-.268.353.353 0 00-.274-.132zm9.313.02h-.824a.557.557 0 00-.57.228l-2.353 5.04h-.041l-2.242-5.04a.379.379 0 00-.369-.228H8.958a.356.356 0 00-.328.14.289.289 0 00.021.32l3.648 7.748a.376.376 0 00.369.208h.111a.373.373 0 00.348-.208l3.648-7.748a.288.288 0 00.021-.32.368.368 0 00-.328-.14zm4.935-.188a4.312 4.312 0 00-4.3 4.276 4.212 4.212 0 001.254 3.044 4.11 4.11 0 003.038 1.284 4.069 4.069 0 003.025-1.284 4.181 4.181 0 001.262-3.044 4.313 4.313 0 00-4.279-4.276zm1.783 6.156a2.379 2.379 0 01-1.783.756 2.4 2.4 0 01-1.8-.744 2.623 2.623 0 01-.725-1.888 2.529 2.529 0 01.725-1.84 2.427 2.427 0 011.8-.736 2.368 2.368 0 011.783.736 2.525 2.525 0 01.725 1.84 2.669 2.669 0 01-.725 1.876zM3.322 5.93H.416a.392.392 0 00-.275.128.373.373 0 00-.131.272v1a.386.386 0 00.131.28.4.4 0 00.275.12h1.475v7.17a1.331 1.331 0 01-1.18 1.312H.416a.4.4 0 00-.287.12.371.371 0 00-.123.28v1a.415.415 0 00.111.28.394.394 0 00.295.12h.143a3.13 3.13 0 003.152-2.9.848.848 0 00.017-.188V6.33a.377.377 0 00-.123-.28.365.365 0 00-.279-.12z" fill-rule="evenodd"/>\n    <path fill="_COLOR2_" d="M.03-.006c-.254 4.676 3.681 5.34 3.681 5.34C3.515.214.03-.006.03-.006z" fill-rule="evenodd"/>\n</svg>'},43832:function(e,t){"use strict";t.Z='<svg width="12" height="9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.25 6.433 1.818 4.001l-.829.822L4.25 8.084l7-7-.822-.822L4.25 6.433Z" fill="_COLOR1_"/></svg>'},36683:function(e,t,n){"use strict";n.r(t),t.default='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient x1="50%" y1="3.556%" x2="50%" y2="97.988%" id="a"><stop stop-color="#00C6FF" offset="0%"/><stop stop-color="#0371FF" offset="100%"/></linearGradient></defs><path d="M7.5 0C3.375 0 0 3.105 0 6.938c0 2.16 1.065 4.087 2.737 5.362l.046 2.7 2.587-1.41-.022-.008a8.106 8.106 0 0 0 2.152.293c4.125 0 7.5-3.105 7.5-6.938C15 3.106 11.625 0 7.5 0zm.773 9.307L6.405 7.335l-3.78 1.972L6.66 5.085l1.935 1.853 3.637-1.853-3.96 4.222z" transform="translate(1)" fill="url(#a)"/></svg>'},74783:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><mask id="a" width="14" height="14" x="1" y="1" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="#fff" d="M14.9307 1H1.06934v14H14.9307V1Z"/></mask><g mask="url(#a)"><path fill="#07F" d="M1.06934 7.72c0-3.16784 0-4.75175.97437-5.73588C3.01809 1 4.58633 1 7.7228 1h.55446c3.13644 0 4.70474 0 5.67904.98412.9744.98413.9744 2.56804.9744 5.73588v.56c0 3.1678 0 4.7518-.9744 5.7359C12.982 15 11.4137 15 8.27726 15H7.7228c-3.13647 0-4.70471 0-5.67909-.9841-.97437-.9841-.97437-2.5681-.97437-5.7359v-.56Z"/><path fill="#fff" d="M8.44475 11.0859c-3.15925 0-4.96122-2.18754-5.0363-5.82754h1.58251c.05198 2.67166 1.21862 3.80333 2.14271 4.03666V5.25836h1.49015v2.30415c.91254-.09916 1.87118-1.14915 2.19458-2.30415h1.4902c-.2484 1.42334-1.288 2.47333-2.0273 2.90499.7393.35 1.9234 1.26584 2.3739 2.92255h-1.6404c-.3523-1.10838-1.23009-1.96588-2.39098-2.08255v2.08255h-.17907Z"/></g></svg>'},66574:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="24"><defs/><g fill="none" fill-rule="evenodd"><path d="M0 0h12v24H0z"/><circle cx="6" cy="5" r="2" fill="_COLOR1_"/><circle cx="6" cy="12" r="2" fill="_COLOR1_"/><circle cx="6" cy="19" r="2" fill="_COLOR1_"/></g></svg>'},88921:function(e,t){"use strict";t.Z='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n  <g fill="_COLOR1_" fill-rule="evenodd" transform="translate(7 7)">\n    <rect width="1.5" height="12.941" x="5.06" y="-.876" rx=".75" transform="rotate(45 5.81 5.595)"/>\n    <rect width="1.5" height="12.941" x="5.06" y="-.876" rx=".75" transform="scale(-1 1) rotate(45 0 -8.433)"/>\n  </g>\n</svg>'},31617:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="34"><path fill="_COLOR1_" d="M81.9 6.6h3.2v.8h-3.2zM9.2 20.2c.6.1 1.3.1 2 .1 3.9 0 7.3-1.2 9.4-3.6 1.6-1.7 2.4-4.1 2.4-7 0-2.9-1-5.3-2.7-6.9C18.4 1 15.5 0 11.6 0 8.4 0 5.9.3 4 .6v16.2H0v3.3h4V25H.1v3.3H4v5.4h4v-5.4h6.6V25H8v-4.8h1.2zM8 16.5V3.7c.7-.2 2-.3 3.7-.3 4.4 0 7.3 2.1 7.3 6.5 0 4.5-2.9 7-7.7 7-1.4 0-2.5-.1-3.3-.4z"/></svg>'},28122:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0 0h24v24H0z"/>\n    <path d="M0 0h24v24H0z"/>\n    <path fill="_COLOR1_" fill-rule="nonzero" d="M18.904 15.214a2.113 2.113 0 0 0-1.527-.624c-.598 0-1.185.228-1.624.66a3.566 3.566 0 0 0-.917 1.428c-.72-.072-3.08-1.569-4.533-3.033C8.898 12.216 7.407 9.843 7.32 9.11a3.547 3.547 0 0 0 1.49-.852c.44-.42.697-.96.721-1.549a2.058 2.058 0 0 0-.586-1.548L7.382 3.576A1.927 1.927 0 0 0 5.99 3a2.14 2.14 0 0 0-1.478.6l-.244.24c-.33.3-.586.66-.758 1.057-.024.06-.708 1.56-.452 2.689.05.168 1.42 4.5 5.181 8.063 3.762 3.564 7.844 5.219 8.028 5.279.195.048.415.072.647.072.99 0 2.04-.42 2.077-.432a3.711 3.711 0 0 0 1.112-.708l.244-.24c.818-.78.88-2.053.122-2.822l-1.564-1.584z"/>\n  </g>\n</svg>'},36972:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><defs><path id="a" d="M0 0h24v24H0z"/></defs><g fill="none" fill-rule="evenodd" transform="rotate(-90 12 12)"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><g stroke="_COLOR1_" stroke-linecap="round" stroke-width="1.5" mask="url(#b)"><path d="M13.343 16.814l-4.657-4.657L13.343 7.5"/></g></g></svg>'},39581:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path fill="_COLOR1_" fill-rule="nonzero" d="M21 3v12.5a3.5 3.5 0 1 1-2-3.16V6.47L9 8.6v8.9a3.5 3.5 0 1 1-2-3.16V6l14-3z"/></g></svg>'},54304:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path fill="_COLOR1_" fill-rule="nonzero" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></g></svg>\n'},28149:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path fill="_COLOR1_" fill-rule="nonzero" d="M13 9V3.5L18.5 9H13zM6 2c-1.11 0-2 .89-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6z"/></g></svg>'},28372:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path fill="_COLOR1_" fill-rule="nonzero" d="M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm1-5C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10c5.523 0 10-4.477 10-10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"/></g></svg>'},69357:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path fill="_COLOR1_" fill-rule="nonzero" d="M21 18V4c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"/></g></svg>'},43055:function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path fill="_COLOR1_" fill-rule="nonzero" d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></g></svg>'},54983:function(e,t,n){"use strict";n.r(t),t.default='<svg width="33" height="42" viewBox="0 0 33 42" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8.14273 26.7757C8.82522 26.7757 9.37848 27.3289 9.37848 28.0114C9.37848 31.8539 12.5045 34.98 16.347 34.98C20.1896 34.98 23.3156 31.8539 23.3156 28.0114C23.3156 27.3289 23.8689 26.7757 24.5514 26.7757C25.2338 26.7757 25.7871 27.3289 25.7871 28.0114C25.7871 33.2167 21.5524 37.4515 16.347 37.4515C11.1419 37.4515 6.90697 33.2167 6.90697 28.0114C6.90697 27.3289 7.46032 26.7757 8.14273 26.7757Z" fill="#445669"/>\n<path d="M16.3472 16.5601C18.8966 16.5601 20.9707 18.6342 20.9707 21.1836V28.3054C20.9707 30.8549 18.8966 32.929 16.3472 32.929C13.7978 32.929 11.7237 30.8549 11.7237 28.3054V21.1836C11.7237 18.6342 13.7978 16.5601 16.3472 16.5601ZM14.1952 28.3054C14.1952 29.4921 15.1606 30.4575 16.3472 30.4575C17.5337 30.4575 18.4992 29.492 18.4992 28.3054V21.1836C18.4992 19.997 17.5337 19.0316 16.3472 19.0316C15.1606 19.0316 14.1952 19.997 14.1952 21.1836V28.3054Z" fill="#445669"/>\n<path d="M16.3468 34.9799C17.0293 34.9799 17.5825 35.5332 17.5825 36.2157V40.0394C17.5825 40.7218 17.0293 41.2751 16.3468 41.2751C15.6643 41.2751 15.111 40.7218 15.111 40.0394V36.2157C15.111 35.5333 15.6643 34.9799 16.3468 34.9799Z" fill="#445669"/>\n<path d="M8.44618 14.7048C10.5565 12.5943 13.3624 11.4321 16.3471 11.4321C19.3317 11.4321 22.1376 12.5943 24.2479 14.7048C24.7305 15.1873 24.7305 15.9699 24.2479 16.4524C23.7654 16.9349 22.9828 16.9349 22.5004 16.4524C20.8568 14.8088 18.6714 13.9036 16.3471 13.9036C14.0227 13.9036 11.8374 14.8088 10.1938 16.4524C9.95256 16.6937 9.63631 16.8143 9.31997 16.8143C9.00372 16.8143 8.68754 16.6936 8.4461 16.4524C7.96362 15.9698 7.96362 15.1873 8.44618 14.7048Z" fill="#445669"/>\n<path d="M4.28306 10.5426C10.9346 3.89089 21.7579 3.89089 28.4096 10.5426C28.8921 11.0251 28.8921 11.8076 28.4096 12.2901C27.927 12.7727 27.1445 12.7726 26.662 12.2901C20.9738 6.60215 11.7188 6.60215 6.03064 12.2901C5.78944 12.5315 5.47319 12.6521 5.15685 12.6521C4.84052 12.6521 4.52434 12.5314 4.28306 12.2901C3.8005 11.8076 3.8005 11.0252 4.28306 10.5426Z" fill="#445669"/>\n<path d="M0.361938 6.62111C4.63165 2.35139 10.3084 0 16.3467 0C22.3849 0 28.0617 2.35139 32.3314 6.62103C32.814 7.10359 32.814 7.88604 32.3314 8.36861C31.8489 8.85117 31.0663 8.85117 30.5839 8.36861C22.7335 0.518277 9.95993 0.518277 2.10952 8.36861C1.86832 8.60997 1.55206 8.73057 1.23573 8.73057C0.919476 8.73057 0.603302 8.60997 0.361938 8.36869C-0.120625 7.88612 -0.120625 7.10375 0.361938 6.62111Z" fill="#445669"/>\n</svg>\n'},29865:function(e,t,n){"use strict";e.exports=n(1091)},59885:function(e){const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=e=>e.match(t)||[],r=e=>e[0].toUpperCase()+e.slice(1),i=(e,t)=>n(e).join(t).toLowerCase(),o=e=>n(e).reduce((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`,"");e.exports={words:n,upperFirst:r,camelCase:o,pascalCase:e=>r(o(e)),snakeCase:e=>i(e,"_"),kebabCase:e=>i(e,"-"),sentenceCase:e=>r(i(e," ")),titleCase:e=>n(e).map(r).join(" ")}},94633:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},o=n,a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach(function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});o--;)i[o]||l(e[o],o,new Set);return r;function l(e,t,o){if(o.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(e){c=""}throw new Error("Cyclic dependency"+c)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var u=a.get(e)||new Set;if(t=(u=Array.from(u)).length){o.add(e);do{var d=u[--t];l(d,s.get(d),o)}while(t);o.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},6693:function(e,t,n){"use strict";n.r(t),n.d(t,{ACCEPT:function(){return i},CONTENT_TYPE:function(){return o},METHODS:function(){return r},Timeouts:function(){return a}});const r={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",HEAD:"HEAD"},i="application/json, text/plain, */*",o={X_WWW_FORM:"application/x-www-form-urlencoded",APP_JSON:"application/json"},a={MESSAGE_SEND_ERROR_TIMEOUT:6e3,BOT_TYPING:1e4,AGENT_TYPING:3e3}},92246:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});const r={type:"standard",theme:void 0,themeOptions:void 0,zoom:0,activeScreen:0,position:"top_center",logoType:"",markingAdText:"",screenSettings:void 0,screensCount:0,constructorOptions:void 0,campaign:void 0,isMobile:!1,isMobileOrTablet:!1,isFirstScreen:!1,isLastScreen:!1,isEULA:!1,isBlackout:!1,isShowLogo:!1,isDisplay:!1,isConstructor:!1,isPreview:!1,isCallbackPopup:!1,isGalleryView:!1,isSending:!1,setSending:void 0},i=n(98661).default.createContext(r)},65648:function(e,t,n){"use strict";n.d(t,{bt:function(){return r},gk:function(){return o},oL:function(){return i}});const r=(e,t)=>t?"top_center":e,i=(e,t)=>t?"standard":e,o=(e,t,n)=>{const r=Boolean(e)&&["left_width","top_width","right_width"].includes(t);return r&&n?{position:"top_width",isWideImage:r}:{position:t,isWideImage:r}}},70691:function(e,t,n){"use strict";n.d(t,{c:function(){return se}});var r=n(16584),i=n(98661),o=n(24111),a=n(83549),s=n(80352),l=n(90061),c=n(54415),u=n(88263),d=n(97490),g=n(75998),p=n(88996),f=n(10465),h=n(79105),m=n(65138),_=n(1092),v=n(96367),y=n(18276),C=n(36874),E=n(16217),b=n(38042),S=n(26932),T=n(65465),D=n(85074),w=n(17094),O=n(67597),A=n(21115),M=n(45926),I=n(86107),R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const k=(e={})=>{var{data:t}=e,n=R(e,["data"]);const r=Object.assign({},n);return t&&(r.body=t instanceof Object?JSON.stringify(t):t),r};var L=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const P=(e,t)=>L(void 0,void 0,void 0,function*(){var n;const r=yield fetch(e,t),i=(0,I.s)(r.headers.entries()),o=r.statusText||(r.ok?"OK":"ERROR");let a=null;return(null===(n=i["content-type"])||void 0===n?void 0:n.includes("application/json"))&&(a=yield r.json()),{data:a,status:r.status,statusText:o,headers:i}}),x=(e,t,n)=>P(e,Object.assign(Object.assign({},k(Object.assign({data:t},n))),{method:"POST"}));var N=n(8519);const F=(0,M.getJivoConfig)(),j=`${(0,M.getProtocol)()}${F.base_url}/script/stat/omnibutton/${F.site_id}/${F.widget_id}`,B=`jv_ob_sended_stats_${F.widget_id}`,{localStorage:U}=(0,M.getPageWindow)();let V=null;const W=()=>{const e=U.getItem(B);e&&e.includes("shown")||(V=x(`${j}/shown`).then(()=>{V=null,U.setItem(B,e?`${e}shown;`:"shown;")}))},G=e=>{const t=U.getItem(B);t&&t.includes(`click-${e}`)||x(`${j}/click?device=${s.platform.device}&channel=${e}&source=${(()=>{const{location:e}=(0,M.getPageWindow)();return e.pathname.length>200?`...${e.pathname.slice(-197)}`:e.pathname})()}`).then(()=>{U.setItem(B,t?`${t}click-${e};`:`click-${e};`)})},H=e=>{const t=(0,M.getJivoConfig)();if(!t||!t.collect_omnichannel_stat||t.unverified||N.j9||V)return;U.getItem(B)||U.setItem(B,""),e()},$={shown:()=>H(W),click:e=>H(()=>G(e))};var z=n(45683),Z=n(74783),q=n(36683),K=n(43055),Y=n(28843),J=n(49963),Q=n(39398),X=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ee=e=>{v.analytics.trackMobileSocial(e),(0,b.telemetry)(`powerbtn_open_${e}`)},te=(e,t)=>X(void 0,void 0,void 0,function*(){const n=()=>{ee(t),$.click(t)};if((0,M.getJivoConfig)().replace_omnichannel_links){e.preventDefault();const{href:t}=e.currentTarget,r=window.open("","_blank"),i=e=>{if(r){try{r.location.href=e}catch(t){r.location.replace(e)}n()}};if(J.connectionAdapter.isConnected())i(Q.p.getMetaLink(t));else try{yield J.connectionAdapter.checkConnectionWithTimeout(1500),i(Q.p.getMetaLink(t))}catch(e){i(t)}}else n()}),ne=(0,_._v)(),re=()=>{(0,w.Ws)()||(S.appDispatchers.setAppIsFocused(!0),g.pageStoreDispatch.setShowMobileMenu(!1),T.messageActions.deleteUnansweredOfflineSystemInvite(),T.messageActions.offlineSystemInvite(),u.routerService.next(d.RouterEvent.ToCall),(0,D.onOpenChat)()),v.analytics.trackMobileCallClick(),(0,b.telemetry)("powerbtn_open_callback")},ie=(e,t)=>e?(0,y.l10n)(`social_text_${t||1}`):null,oe=(0,l.createLogger)("OmniChannelMenu"),ae=(0,i.lazy)(()=>n.e(428).then(n.bind(n,54914)).then(e=>({default:e.OmniMenu})).catch(e=>(oe.error("Failed to load OmniChannelMenu:",e),c.Monitoring.reportException(e),s.platform.isMobileOrTablet&&u.routerService.next(d.RouterEvent.ToChat),{default:()=>null}))),se=({show:e,onCancelClick:t,onOverlayClick:n,onLoad:l})=>{(0,a.useErrorCatcher)("OmniMenuContainer");const c=(0,o.useAppSelector)(m.selectIsOnline),u=(0,o.useAppSelector)(h.selectBillRu),b=(0,o.useAppSelector)(p.xy),T=(0,o.useAppSelector)(h.selectSettings),w=(0,o.useAppSelector)(h.selectWidgetOrientation),M=(0,i.useMemo)(()=>{var e;const t=(({isOnline:e,callback:t,settings:n})=>{var r;const i=[],{features:o,user:a}=n,l=s.platform.isMobileOrTablet;if(o.joint){const{tg:t,im:c,vk:u,fb:d,ig:g,vb:p,wa:f}=o.joint;t&&(t.botname||t.customUrl)&&i.push({name:"tg",url:t.customUrl||(l?(0,O.getTgLink)((null===(r=n.system)||void 0===r?void 0:r.geoIp)||"")+t.botname:"https://t.me/"+t.botname),title:"Telegram",subTitle:null,iconName:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 12C0 5.373 5.373 0 12 0s12 5.373 12 12-5.373 12-12 12S0 18.627 0 12Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12ZM12.43 8.859c-1.167.485-3.5 1.49-6.998 3.014-.568.226-.866.447-.893.663-.046.366.412.51 1.034.705.085.027.173.054.263.084.613.199 1.437.432 1.865.441.389.008.823-.152 1.302-.48 3.268-2.207 4.955-3.322 5.061-3.346.075-.017.179-.039.249.024.07.062.063.18.056.212-.046.193-1.84 1.862-2.77 2.726-.29.269-.495.46-.537.504-.094.097-.19.19-.282.279-.57.548-.996.96.024 1.632.49.323.882.59 1.273.856.427.291.853.581 1.405.943.14.092.274.187.405.28.497.355.944.673 1.496.623.32-.03.652-.331.82-1.23.397-2.126 1.179-6.73 1.36-8.628a2.112 2.112 0 0 0-.02-.472.506.506 0 0 0-.172-.325c-.143-.117-.365-.142-.465-.14-.451.008-1.143.249-4.476 1.635Z" fill="#54A6E4"/></svg>',iconColor:null,device:ne,onClick:e=>{te(e,"tg")}});const h=o.joint.max;(null==h?void 0:h.botname)&&i.push({name:"max",url:`https://max.ru/${h.botname}`,title:"Max",subTitle:null,iconName:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 49 49">\n  <rect width="48" height="48" x=".460938" y=".957031" fill="url(#a)" rx="24"/>\n  <path fill="#fff" fill-rule="evenodd" d="M24.7644 38.8497c-2.7543 0-4.0343-.4021-6.2593-2.0105-1.4073 1.8094-5.8639 3.2234-6.0582.8042 0-1.8162-.4021-3.3508-.8578-5.0262-.5429-2.0641-1.1594-4.3628-1.1594-7.6935 0-7.9548 6.5274-13.9393 14.261-13.9393 7.7404 0 13.8053 6.2794 13.8053 14.013.0125 3.6568-1.4264 7.1692-4.0008 9.7662-2.5744 2.597-6.074 4.0665-9.7308 4.0861Zm.1139-20.9895c-3.7663-.1943-6.7016 2.4126-7.3516 6.5006-.5361 3.3843.4155 7.5058 1.2264 7.7202.3887.0939 1.3671-.6969 1.977-1.3068 1.0084.6967 2.1827 1.115 3.4044 1.213 1.8759.0902 3.7124-.5591 5.1147-1.8085 1.4023-1.2494 2.2584-2.9991 2.3844-4.873.0733-1.8778-.5934-3.7093-1.8568-5.1005-1.2633-1.3912-3.0223-2.2308-4.8985-2.3383v-.0067Z" clip-rule="evenodd"/>\n  <defs>\n    <linearGradient id="a" x1="13.5284" x2="53.9962" y1="63.0252" y2="45.7695" gradientUnits="userSpaceOnUse">\n      <stop stop-color="#43D6FF"/>\n      <stop offset=".5" stop-color="#3838FF"/>\n      <stop offset=".98659" stop-color="#8F3FFF"/>\n    </linearGradient>\n  </defs>\n</svg>\n',iconColor:null,device:ne,onClick:()=>{ee("max"),$.click("max")}}),c&&c.joint_id&&(l?s.platform.supports.iMessage:s.platform.supports.appleBusinessChat)&&i.push({name:"im",url:`sms://open?service=iMessage&recipient=urn:biz:${c.joint_id}&biz-intent-id=click_in_jivo${l?"":"_desktop"}`,title:l?(0,y.l10n)("lblMessagesApp"):(0,y.l10n)("lbAbcText"),subTitle:null,iconName:'<svg width="76.5" height="76.5" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg">\n  <path fill="#0076ff" d="M22.5 45C10.0736 45 0 34.9264 0 22.5S10.0736 0 22.5 0 45 10.0736 45 22.5 34.9264 45 22.5 45zm-.038-14.2213c6.3812 0 11.5542-4.177 11.5542-9.3295 0-5.1526-5.173-9.3295-11.5543-9.3295-6.3812 0-11.5542 4.177-11.5542 9.3295 0 3.1476 1.9304 5.931 4.8874 7.6207l.0752.0424a.1523.1523 0 0 1 .0745.1016c.2544 1.2152-1.4097 2.3051-2.5218 3.0324 3.6862.232 5.546-1.2438 6.0782-1.7276.9024.1827 1.9882.26 2.9607.26z"/>\n  <path fill="#ffffff" stroke="#ffffff" stroke-width="2" d="M22.462 30.7787c6.3812 0 11.5542-4.177 11.5542-9.3295 0-5.1526-5.173-9.3295-11.5543-9.3295-6.3812 0-11.5542 4.177-11.5542 9.3295 0 3.1476 1.9304 5.931 4.8874 7.6207l.0752.0424a.1524.1524 0 0 1 .0745.1016c.2544 1.2152-1.4097 2.3051-2.5218 3.0324 3.6862.232 5.546-1.2438 6.0782-1.7276.9024.1827 1.9882.26 2.9607.26z"/>\n</svg>',iconColor:null,device:ne,onClick:()=>{ee("im"),$.click("im")}}),u&&(u.joint_id||u.customUrl)&&i.push({name:"vk",url:u.customUrl||(l?`https://vk.me/club${u.joint_id}`:`https://vk.${(0,z.getVkDomain)()}/im?sel=-${u.joint_id}`),title:l?(0,y.l10n)("social_vk"):(0,y.l10n)("label_vk_text"),subTitle:l?null:ie(e,a.socialResponse||null),iconName:Z.default,iconColor:null,device:ne,onClick:()=>{ee("vk"),$.click("vk")}}),d&&d.joint_id&&i.push({name:"fb",url:l?"https://m.me/"+d.joint_id:"https://www.facebook.com/messages/t/"+d.joint_id,title:l?"Facebook Messenger":(0,y.l10n)("label_fb_text"),subTitle:l?null:ie(e,a.socialResponse||null),iconName:q.default,iconColor:null,device:ne,onClick:()=>{ee("fb"),$.click("fb")}}),g&&g.group_name&&i.push({name:"ig",url:"https://www.instagram.com/"+g.group_name,title:"Instagram",subTitle:null,iconName:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.004.75c-4.698 0-6.072.005-6.34.027-.964.08-1.564.232-2.217.557-.504.25-.901.54-1.293.947C1.44 3.022 1.007 3.934.85 5.018c-.076.526-.098.633-.102 3.321-.002.896 0 2.075 0 3.657 0 4.694.005 6.066.027 6.333.078.938.225 1.528.537 2.174a4.74 4.74 0 0 0 3.072 2.51c.464.12.976.185 1.634.216.279.012 3.12.021 5.962.021 2.842 0 5.684-.003 5.956-.017.761-.036 1.203-.096 1.692-.222a4.711 4.711 0 0 0 3.073-2.515c.305-.63.46-1.243.53-2.132.016-.194.022-3.285.022-6.371 0-3.088-.007-6.173-.022-6.367-.071-.903-.226-1.51-.542-2.153a4.46 4.46 0 0 0-.963-1.32c-.744-.71-1.654-1.143-2.74-1.3-.525-.076-.63-.098-3.32-.103h-3.662Z" fill="url(#a)"/><path d="M12.004.75c-4.698 0-6.072.005-6.34.027-.964.08-1.564.232-2.217.557-.504.25-.901.54-1.293.947C1.44 3.022 1.007 3.934.85 5.018c-.076.526-.098.633-.102 3.321-.002.896 0 2.075 0 3.657 0 4.694.005 6.066.027 6.333.078.938.225 1.528.537 2.174a4.74 4.74 0 0 0 3.072 2.51c.464.12.976.185 1.634.216.279.012 3.12.021 5.962.021 2.842 0 5.684-.003 5.956-.017.761-.036 1.203-.096 1.692-.222a4.711 4.711 0 0 0 3.073-2.515c.305-.63.46-1.243.53-2.132.016-.194.022-3.285.022-6.371 0-3.088-.007-6.173-.022-6.367-.071-.903-.226-1.51-.542-2.153a4.46 4.46 0 0 0-.963-1.32c-.744-.71-1.654-1.143-2.74-1.3-.525-.076-.63-.098-3.32-.103h-3.662Z" fill="url(#b)"/><path d="M11.998 3.693c-2.256 0-2.54.01-3.425.05-.885.04-1.489.18-2.017.386a4.068 4.068 0 0 0-1.472.958 4.078 4.078 0 0 0-.959 1.471c-.206.529-.346 1.133-.386 2.017-.04.886-.05 1.17-.05 3.426 0 2.256.01 2.539.05 3.425.041.884.181 1.488.387 2.016a4.07 4.07 0 0 0 .958 1.472c.462.462.925.747 1.471.96.529.205 1.133.345 2.017.385.886.04 1.17.05 3.426.05 2.256 0 2.538-.01 3.425-.05.884-.04 1.489-.18 2.017-.386a4.066 4.066 0 0 0 1.471-.959c.462-.462.746-.925.959-1.471.204-.529.344-1.133.386-2.017.04-.886.05-1.169.05-3.425s-.01-2.54-.05-3.426c-.042-.884-.182-1.488-.386-2.016a4.078 4.078 0 0 0-.959-1.472 4.062 4.062 0 0 0-1.471-.958c-.53-.206-1.134-.346-2.019-.386-.886-.04-1.168-.05-3.425-.05h.002Zm-.745 1.497h.745c2.219 0 2.482.008 3.358.048.81.037 1.25.172 1.542.286.388.15.664.33.955.621.29.29.47.568.622.956.113.292.249.732.286 1.542.04.876.048 1.139.048 3.356 0 2.217-.008 2.48-.048 3.356-.037.81-.172 1.25-.286 1.543a2.57 2.57 0 0 1-.622.954c-.29.29-.567.47-.955.621-.292.115-.732.25-1.542.287-.876.04-1.14.048-3.358.048s-2.481-.009-3.357-.048c-.81-.038-1.25-.173-1.543-.287a2.573 2.573 0 0 1-.955-.621c-.29-.291-.471-.567-.622-.955-.114-.293-.25-.732-.286-1.542-.04-.876-.048-1.14-.048-3.358 0-2.219.008-2.48.048-3.356.037-.81.172-1.25.286-1.543.15-.388.331-.665.622-.955.29-.291.568-.471.955-.622.293-.114.733-.25 1.543-.287.767-.034 1.064-.045 2.612-.046v.002Zm5.18 1.38a.997.997 0 1 0 0 1.993.997.997 0 0 0 0-1.994Zm-4.435 1.164A4.267 4.267 0 1 0 12 16.268a4.267 4.267 0 0 0 0-8.534Zm0 1.497a2.77 2.77 0 1 1 0 5.54 2.77 2.77 0 0 1 0-5.54Z" fill="#fff"/><defs><radialGradient id="a" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0 -22.2992 20.7456 0 6.725 24.983)"><stop stop-color="#FD5"/><stop offset=".1" stop-color="#FD5"/><stop offset=".5" stop-color="#FF543E"/><stop offset="1" stop-color="#C837AB"/></radialGradient><radialGradient id="b" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(78.678 -2.958 -.659) scale(9.96792 41.0985)"><stop stop-color="#3771C8"/><stop offset=".128" stop-color="#3771C8"/><stop offset="1" stop-color="#60F" stop-opacity="0"/></radialGradient></defs></svg>',iconColor:null,device:ne,onClick:()=>{ee("ig"),$.click("ig")}}),p&&p.botname&&l&&i.push({name:"vb",url:"viber://pa?chatURI="+p.botname,title:"Viber",subTitle:null,iconName:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.811 2.34c-.596-.55-3.006-2.299-8.375-2.323 0 0-6.33-.382-9.417 2.45C1.302 4.184.697 6.698.633 9.815.57 12.933.487 18.775 6.118 20.358h.006l-.004 2.418s-.036.978.608 1.178c.78.242 1.237-.502 1.981-1.304.409-.44.973-1.086 1.398-1.58 3.85.324 6.813-.417 7.149-.527.777-.252 5.177-.816 5.893-6.657.739-6.02-.357-9.829-2.338-11.545Z" fill="#fff"/><path d="M19.559 3.557c-.504-.458-2.68-1.825-7.222-1.845 0 0-5.377-.354-7.987 2.01C2.897 5.158 2.407 7.29 2.354 9.895c-.054 2.603-.332 7.576 4.43 8.899l-.021 4.016c0 .227.036.382.165.414.093.023.233-.025.352-.144.761-.765 3.199-3.705 3.199-3.705 3.27.213 5.873-.432 6.152-.524.66-.212 4.229-.518 4.833-5.397.624-5.029-.23-8.461-1.905-9.896Z" fill="#7360F2"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.529 7.788a.304.304 0 0 1 .319-.288c.626.033 1.147.223 1.519.607.37.382.55.916.582 1.558a.304.304 0 1 1-.606.03c-.027-.55-.178-.923-.413-1.166-.233-.242-.59-.395-1.114-.422a.304.304 0 0 1-.287-.32Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.068 6.152a.304.304 0 0 1 .325-.28c1.275.093 2.301.529 3.049 1.344.74.809 1.09 1.814 1.065 2.993a.304.304 0 0 1-.607-.014c.023-1.04-.283-1.888-.906-2.568-.62-.678-1.49-1.065-2.645-1.15a.304.304 0 0 1-.28-.325Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.532 4.597a.304.304 0 0 1 .306-.301c1.762.012 3.251.599 4.447 1.764 1.206 1.176 1.802 2.776 1.817 4.763a.304.304 0 1 1-.607.005c-.014-1.862-.568-3.294-1.634-4.333-1.075-1.048-2.41-1.58-4.027-1.592a.304.304 0 0 1-.302-.306Z" fill="#fff"/><path d="M12.892 13.746s.427.036.657-.247l.447-.564c.217-.279.738-.457 1.249-.173.383.218.754.456 1.113.711.339.25 1.033.829 1.035.829.33.279.407.689.182 1.12l-.002.01c-.248.43-.563.817-.932 1.148-.005.002-.005.004-.009.006-.32.269-.636.421-.946.458a1.263 1.263 0 0 1-.541-.053l-.01-.015c-.478-.135-1.275-.472-2.603-1.204-.769-.42-1.5-.902-2.187-1.445a11.464 11.464 0 0 1-.984-.872l-.033-.033-.033-.034-.033-.033-.033-.033c-.31-.31-.6-.639-.872-.983a15.514 15.514 0 0 1-1.445-2.187c-.733-1.328-1.07-2.125-1.204-2.603l-.015-.01a1.26 1.26 0 0 1-.053-.541c.038-.31.191-.625.458-.948.002-.003.004-.003.007-.008.33-.37.718-.684 1.148-.932l.009-.002c.432-.225.842-.149 1.12.18.003.002.58.696.829 1.035.255.36.493.731.71 1.114.285.51.107 1.033-.172 1.249l-.564.448c-.285.23-.247.656-.247.656s.835 3.16 3.954 3.956Z" fill="#fff"/></svg>',iconColor:null,device:ne,onClick:()=>{ee("vb"),$.click("vb")}}),f&&i.push({name:"wa",url:"string"==typeof f?`https://wa.me/${f}`:f.customUrl,title:"WhatsApp",subTitle:null,iconName:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M.564 11.896c-.001 2.023.528 3.998 1.533 5.74l-1.63 5.949 6.089-1.597a11.482 11.482 0 0 0 5.487 1.398h.006c6.329 0 11.481-5.15 11.484-11.481a11.408 11.408 0 0 0-3.361-8.122A11.412 11.412 0 0 0 12.048.416C5.718.416.566 5.566.564 11.896" fill="url(#a)"/><path d="M.153 11.892c0 2.096.547 4.142 1.588 5.946L.054 24l6.306-1.654a11.887 11.887 0 0 0 5.685 1.448h.005c6.556 0 11.894-5.336 11.896-11.892a11.82 11.82 0 0 0-3.48-8.414A11.823 11.823 0 0 0 12.05 0C5.493 0 .156 5.335.153 11.892Zm3.756 5.635-.235-.374a9.857 9.857 0 0 1-1.512-5.26c.002-5.45 4.438-9.884 9.892-9.884a9.824 9.824 0 0 1 6.99 2.899 9.824 9.824 0 0 1 2.894 6.993c-.002 5.45-4.438 9.885-9.888 9.885h-.004a9.875 9.875 0 0 1-5.032-1.379l-.362-.214-3.742.982 1-3.648Z" fill="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.077 6.92c-.223-.494-.457-.504-.67-.513-.173-.008-.37-.007-.569-.007-.198 0-.52.074-.793.372-.272.297-1.04 1.016-1.04 2.479s1.065 2.876 1.214 3.074c.148.198 2.056 3.295 5.077 4.487 2.511.99 3.022.793 3.567.743.545-.05 1.76-.718 2.007-1.413.247-.694.247-1.288.173-1.413-.074-.124-.272-.198-.57-.347-.297-.148-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.198.297-.767.966-.94 1.164-.174.199-.347.224-.645.075-.297-.15-1.254-.463-2.39-1.475-.884-.788-1.48-1.761-1.654-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.447-.52.148-.174.198-.298.297-.496.099-.199.05-.372-.025-.521-.074-.149-.652-1.619-.916-2.206Z" fill="#fff"/><defs><linearGradient id="a" x1="12" y1="23.585" x2="12" y2=".416" gradientUnits="userSpaceOnUse"><stop stop-color="#20B038"/><stop offset="1" stop-color="#60D66A"/></linearGradient><linearGradient id="b" x1="12" y1="24" x2="12" y2="0" gradientUnits="userSpaceOnUse"><stop stop-color="#F9F9F9"/><stop offset="1" stop-color="#fff"/></linearGradient></defs></svg>',iconColor:null,device:ne,onClick:e=>{te(e,"wa")}}),i.length>0&&$.shown()}if((0,E.isVideoCallEnabled)()&&(l||s.platform.isChatPage)&&i.push({name:"video_call",url:null,title:(0,y.l10n)("webrtc_video_text_popup"),subTitle:null,iconName:K.default,iconColor:C.colorsFromFigma.GREEN_80,device:ne,onClick:()=>{(0,A.Jb)(),ee("video_call"),v.analytics.trackVideoCallClick()}}),t.available)i.push({name:"call",url:null,title:t.isDelayed&&n.user.callback?(0,y.l10n)("callback_delayed_button_submit"):`${(0,y.l10n)("cw_callAfter")} ${n.user.callback.time} ${(0,E.getSeconds)(n.user.callback.time)}!`,subTitle:null,iconName:Y.default,iconColor:C.colorsFromFigma.GREEN_80,device:ne,onClick:()=>{l?re():(S.userDispatchers.setCallHeaderText(null),(0,D.showChat)(e,d.RouterEvent.ToCall),ee("call")),g.pageStoreDispatch.setShowMobileMenu(!1)}});else if(n.user.powerButtonPhone&&s.platform.isMobileOrChatpage){const e=`+${n.user.powerButtonPhone.replace("+","")}`;i.push({name:"call_phone",url:`tel:${e}`,title:`${(0,y.l10n)("lblCallMe")} ${e}`,subTitle:null,iconName:Y.default,iconColor:C.colorsFromFigma.GREEN_80,device:ne,onClick:()=>re()})}return i.length?(s.platform.isChatPage||i.push({name:"chat",url:null,title:e?l?(0,y.l10n)("onlineChat"):(0,y.l10n)("cw_typeInChat"):(0,y.l10n)("lblLeaveMessage"),subTitle:null,iconName:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 17.86c4.97 0 9-3.297 9-7.364s-4.03-7.364-9-7.364-9 3.297-9 7.364c0 2.452 1.465 4.624 3.717 5.962-.677 2.418-1.837 4.41-1.837 4.41s3.568-.864 6.327-3.037c.26.019.526.029.793.029Z" fill="_COLOR1_"/></svg>',iconColor:C.colorsFromFigma.GREEN_80,device:ne,onClick:()=>{(0,D.navigateToChat)(l)}}),i):[]})({isOnline:c,callback:b,settings:{features:{joint:T.features.joint},user:{callback:{time:(null===(e=T.user.callback)||void 0===e?void 0:e.time)||0},powerButtonPhone:T.user.powerButtonPhone||void 0,socialResponse:T.user.socialResponse||void 0},system:T.system}});return t.map(e=>Object.assign(Object.assign({},e),{qaId:`OMNICHANNEL_MENU_ITEM_${e.name.toUpperCase()}`,device:(0,_._v)(),iconColor:e.iconColor||"#000000",iconName:e.iconName,subTitle:e.subTitle||"",url:e.url||""}))},[c,b,T]);return!e||(0,f.x)(M)?null:(0,r.tZ)(i.Suspense,{fallback:()=>{},children:(0,r.tZ)(ae,{show:e,device:(0,_._v)(),menuItems:M,copyright:(0,_.th)(u),orientation:w||"right",onCancelClick:()=>{s.platform.isChatPage?null==t||t():g.pageStoreDispatch.setShowMobileMenu(!1)},onOverlayClick:n,onLoad:l})})}},1092:function(e,t,n){"use strict";n.d(t,{D8:function(){return _},Yc:function(){return f},_v:function(){return h},fP:function(){return g},p0:function(){return p},th:function(){return m}});var r=n(96367),i=n(97778),o=n(99393),a=n(80352),s=n(26613),l=n(38042),c=n(45683);const u=280,d="0px 1px 17px 1px rgba(0, 0, 0, 0.1), 0px 0px 4px rgba(0, 0, 0, 0.16)",g=({orientation:e})=>({[o.e.LEFT]:{boxShadow:d,width:u,transformOrigin:"top right",transform:`rotate(90deg) translate(calc(100% + ${i.LABEL_HEIGHT+16}px), calc(280px - 100%))`},[o.e.RIGHT]:{boxShadow:d,width:u,transformOrigin:"top right",transform:"rotate(90deg) translate(-16px, calc(280px - 100%))"},[o.e.BOTTOM]:{boxShadow:d,width:u,transform:"translate(0, calc(-100% - 16px))"}}[e]),p={boxShadow:d,width:u},f={boxShadow:d,width:u,position:"absolute",right:16,transform:"translateY(16px)"},h=()=>a.platform.isTablet?"tablet":a.platform.isIos?"ios":a.platform.isMobile?"android":"desktop",m=e=>({show:(0,s.isCopyrightEnabled)(),link:(0,c.getUTMLink)("mobile_menu"),icon:`logo-jivo${e?"site":"chat"}-white`}),_=e=>{r.analytics.trackSocial(e),(0,l.telemetry)(`label_buttons_${e}`)}},92089:function(e,t,n){"use strict";n.r(t),n.d(t,{addCustomVarsToStyle:function(){return w},callResize:function(){return D},fixSafariKeyframes:function(){return S},getAnimationPostfix:function(){return C},getChatPosition:function(){return h},getContainerStyle:function(){return T},getCustomVars:function(){return E},getSize:function(){return b}});var r=n(52028),i=n(2982),o=n(75686),a=n(70859),s=n(97778),l=n(97490),c=n(80352),u=n(62096),d=n(44145),g=n(16026),p=n(24344),f=n(91920);const h=(e,t,n,r,i)=>{var o;let a={};const s=null!==(o=null==r?void 0:r.offsetWidth)&&void 0!==o?o:void 0;return"bottom"===e&&(a=m(t)),"left"===e&&(a=_(t,s)),"right"===e&&(a=v(t,s)),a=y(a,n),n.height&&parseInt(n.height)||(a.height="496px"),i&&(a.height="auto"),a},m=e=>{const t={};return 100===e||50===e?(t.right="30px",50===e&&(t.translate50="50%")):t.left="40px",t},_=(e,t)=>{const n={left:"40px",bottom:t?`calc(50% - ${t/2}px)`:"50%"};return 100===e&&(n.bottom="20px"),n},v=(e,t)=>({right:"39px",bottom:t?50===e&&t?`calc(50% - ${t/2}px)`:"0":"50%"}),y=(e,t)=>{const n=e;return t.right&&(n.right=t.right),t.height&&(n.height=t.height),t.left&&(n.left=t.left),n},C=(e,t)=>{const{labelBubble:n}=u.reduxStore.getState().settings.user;return(0,f.hasCustomLabel)()||r.isDesignerEditor||g.EnvironmentManager.isExtensionsEnable()||c.platform.isDesktop&&n?"custom":"bottom"===e&&0===t?`${e}_0`:e},E=(e,t,n,r,o)=>{const a=(0,i.getSavedLabelPosition)();return Object.assign({labelwidth:r&&r.offsetWidth?`${r.offsetWidth}px`:a.offsetWidth,labelright:r&&r.style&&r.style.right?r.style.right:a.right,labelleft:r&&r.style&&r.style.left?r.style.left:a.left},h(e,t,n,r,o))},b=(e,t,n,r)=>{if(r==l.Route.CHAT_MIN)return{width:s.CHAT_WIDTH+"px",height:s.HEADER_HEIGHT+"px"};if(r==l.Route.CALL)return{width:s.CHAT_WIDTH+"px",height:s.DEFAULT_WIDGET_HEIGHT+"px"};const o=(0,i.getSavedLabelPosition)().offsetWidth,a=e?s.CHAT_WIDTH+"px":o;return"bottom"===t||e?{width:a,height:e?n||"496px":s.LABEL_HEIGHT+"px"}:{width:s.LABEL_HEIGHT+"px",height:o}},S=(e=!1)=>{if(c.platform.isSafari&&!c.platform.isMobileOrTablet){const t=o.default.get(a.Component.WIDGET_CONTAINER);(0,i.updateKeyframes)(t,e)}},T=()=>{const e={display:"block",position:"fixed"};return c.platform.isSafari&&g.EnvironmentManager.isRegPage()&&(e.width="336px",e.height="496px",e.animation="none"),e},D=e=>{const t=(0,d.getPosition)(),{widgetOrientation:n}=(0,d.getUserSettings)(),{route:r}=(0,d.getApp)();(0,p.callUserFunction)("onResizeCallback",b(e,n,t.height||"496px",r))},w=(e,t)=>{if(t)for(const n in t)if({}.hasOwnProperty.call(t,n)){const r=t[n];(0,i.isFallbackNeeded)()?e[n]=r:e[(0,i.jivoCustomCSSProperty)(n)]=r}return e}},36874:function(e,t,n){"use strict";n.r(t),n.d(t,{colorsFromFigma:function(){return s},getTokenColor:function(){return l}});var r=n(75686),i=n(70859),o=JSON.parse('{"blue-80":"#0b82f7","blue-90":"#086bcd","red-80":"#ff3b30","red-90":"#e54c44","green-70":"#00d376","green-90":"#12a730","green-80":"#18c139","steel-80":"#445669","steel-90":"#303f4e","white-38":"rgba(255, 255, 255, 0.38)","white-74":"rgba(255, 255, 255, 0.84)","white-100":"#ffffff","greyscale-30":"#ededed","greyscale-20":"#f9fafc","grayscale-12":"rgba(0, 0, 0, 0.12)","grayscale-38":"rgba(0, 0, 0, 0.38)","grayscale-60":"rgba(0, 0, 0, 0.6)","grayscale-87":"rgba(0, 0, 0, 0.87)"}');const a=JSON.parse(JSON.stringify(o)),s=Object.keys(a).reduce((e,t)=>Object.assign(Object.assign({},e),{[t.toUpperCase().replace("-","_")]:a[t]}),{}),l=e=>{const t=r.default.getComponent(i.Component.ROOT_COMPONENT);return t?getComputedStyle(t.base).getPropertyValue(e):""}},28723:function(e,t,n){"use strict";n.r(t),n.d(t,{HistoryStore:function(){return a}});var r=n(44733),i=n(56026),o=n(938);const a=new class{constructor(){this.LS=r.StorageProvider}push(e){let t=this.get()||[];e=this.format(e);this.getHistoryByUrl(t,e.url).length?t=this.updateHistoryByUrl(t,e.url):(10===t.length&&(t=this.deleteOldestEntry(t)),e.time=(new Date).getTime(),t.push(e)),this.LS.set("history",t)}get(){return this.LS.get("history")||[]}destroy(){this.LS.remove("history")}format(e){return e.url=this.subStr((new i.Z).decode(e.url),255),e.title=this.subStr(e.title,150),e}subStr(e,t){return e.length>t?e.substring(0,t)+"...":e}getHistoryByUrl(e,t){return e.filter(e=>e.url===t)}updateHistoryByUrl(e,t){for(let n=0;n<e.length;n++)e[n].url===t&&(e[n].time=(new Date).getTime());return e}deleteOldestEntry(e){const t=this.sortByTime(e);return t.shift(),t}sortByTime(e){return(0,o.sortBy)(e,"time")}}},24578:function(e,t,n){"use strict";n.r(t),n.d(t,{needSyncRoute:function(){return m},reloadStories:function(){return v},reloadTransitionStore:function(){return h},syncRouter:function(){return _}});var r=n(97490),i=n(44145),o=n(68403),a=n(21476),s=n(79868),l=n(90061),c=n(8717),u=n(50402),d=n(26932),g=n(80352),p=n(95003);const f=(0,l.createLogger)("syncRouter"),h=e=>{const t=e||(0,i.getApp)().route;let n=(0,c.isContainerRoute)(t)?u.ScriptName.OPEN_WIDGET:u.ScriptName.CLOSE_WIDGET;t===r.Route.CALL_POPUP&&(n=u.ScriptName.CLOSE_WIDGET),(0,c.isMinRoute)(t)&&(n=u.ScriptName.MIN_WIDGET);const{currentScript:o}=(0,i.getTransition)();n==u.ScriptName.OPEN_WIDGET&&o==u.ScriptName.MAXIMIZE_WIDGET||d.transitionDispatchers.initTransitionStore({currentScript:n})},m=()=>{if(g.platform.isMobileOrTablet)return;const e=(0,i.getApp)(),t=(0,i.getClient)(),n=a.Router.getPrevEvent(),l=e.route===r.Route.INTRODUCE;if((!t.isIntroduced||!l)&&(e.isOnline||!l)&&(!(0,o.isChatContactForm)()||!l))if(e.route!==r.Route.CHAT_SOCIAL||n&&s.default.getPopupMode())if(e.route!==r.Route.CHAT_MIN||e.chatAccepted){if(e.chatOpenByClient||e.chatStarted||(0,i.getProactive)().text||e.route===r.Route.HIDDEN)return!0}else a.Router.setNext(r.RouterEvent.CloseWindow);else f.warn("prevent to show Social without user click.")},_=()=>{const e=(0,i.getApp)();e.route!==a.Router.getCurrentRoute()&&m()&&(f.warn("syncRouter",e.route,a.Router.getCurrentRoute()),a.Router.setNext(e.route),h())},v=()=>{p.default.reload(),_()}},4510:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a},initialState:function(){return o}});var r=n(2036),i=n(91133);const o={assignedAgentId:null,avatarUrl:null,captchaToken:null,clientId:null,customData:null,departmentId:null,description:null,displayName:null,email:null,evaluate:null,eulaAccepted:null,mailing:{email:null,phone:null},hasIntegration:null,inputText:"",isBlacklisted:null,isIntroduced:null,isExist:!1,lastMessage:"",name:null,phone:null,priorityAgentId:null,sessionId:null,userToken:null,utm:{campaign:null,content:null,keyword:null,term:null,medium:null,source:null},visitorId:null,tags:null,attributes:null,externalData:null};function a(e=o,t){const{type:n,payload:a}=t;switch(n){case r.ActionType.UPDATE_CLIENT_STORE:return(0,i.e)(e,a);case r.ActionType.UPDATE_CLIENT_STORE_MANUALLY:return Object.assign(Object.assign({},e),a);case r.ActionType.RESET_CLIENT_STORE:return o;default:return e}}},11517:function(e,t,n){"use strict";n.r(t),n.d(t,{migrations:function(){return i}});var r=n(3491);const i={attributes:e=>(0,r.k)(e)?e.reduce((e,{name:t,value:n})=>(e[t]=n,e),{}):e}},42413:function(e,t,n){"use strict";n.d(t,{C:function(){return c}});var r=n(16584),i=(n(98661),n(94184)),o=n.n(i),a=n(53400),s=n(21922),l={badge:"badge__v9Lfa",text:"text__NBrOH",__show:"__show__xbLeI",__small:"__small__rkFZC",__large:"__large__ypCzP"};const c=({show:e,text:t,size:n="small",top:i,right:c})=>{const u=Object.assign(Object.assign({},(0,s.h)(i)&&{top:i+"px"}),(0,s.h)(c)&&{right:c+"px"});return(0,r.tZ)("jdiv",Object.assign({className:o()(l.badge,l[`__${n}`],{[l.__show]:e}),style:u},(0,a.locator)("BADGE"),{children:(0,r.tZ)("jdiv",Object.assign({className:l.text},(0,a.locator)("BADGE_TEXT"),{children:t}))}))}},21579:function(e,t,n){"use strict";n.d(t,{W:function(){return F}});var r=n(16584),i=n(98661),o=n(91763),a=n(94184),s=n.n(a),l=n(97490),c=n(24111),u=n(65138),d=n(18276),g="chat__RB1m6",p="__show__u1u6u",f="call__VD85s",h="overlay__xjR6S",m="popup__bUjub",_="content__L0zfc",v="text__ciPCf";const y=(0,i.memo)(({type:e})=>{const t=(0,c.useAppSelector)(u.selectRoute),n="call"===e,i="chat"===e,o="popup"===e,a=(0,r.tZ)("jdiv",{className:s()({[g]:i,[f]:n,[m]:o,[p]:i&&t===l.Route.CHAT_CALL}),children:(0,r.tZ)("jdiv",{className:_,children:(0,r.tZ)("jdiv",{className:v,children:(0,d.l10n)("cb_loading")})})});return"popup"===e?(0,r.tZ)("jdiv",{className:s()(h,{[p]:o&&t===l.Route.CALL_POPUP}),children:a}):a});var C=n(21525),E=n(38669),b=n(8145),S=n(74784),T=n(38042),D=n(88263),w="chat__nXlFC",O="__show__QwYky",A="close__QxliY",M="call__yrf5U",I="overlay__Mr_7X",R="popup__JAEEO",k="content__KLM0v",L="icon__hQkSM",P="text__beRN7";const x=(0,i.memo)(({type:e,onRetry:t})=>{const n=(0,c.useAppSelector)(u.selectRoute),i="chat"===e,o="popup"===e,a=(0,r.BX)("jdiv",{className:s()({[w]:i,[M]:"call"===e,[R]:o,[O]:i&&n===l.Route.CHAT_CALL}),children:[(0,r.tZ)("jdiv",{className:A,onClick:()=>{"chat"===e?D.routerService.next(l.RouterEvent.ToChat):D.routerService.next(l.RouterEvent.CloseWindow)},children:(0,r.tZ)(b.Tw,{})}),(0,r.BX)("jdiv",{className:k,children:[!i&&(0,r.tZ)(S.SvgIcon,{icon:C.default,className:L}),(0,r.tZ)("jdiv",{className:P,children:(0,d.l10n)("maintenanceSystemText")}),(0,r.tZ)(E.Button,{onClick:()=>{null==t||t(),(0,T.telemetry)("callback_retry_click")},children:(0,d.l10n)("tryAgain")})]})]});return"popup"===e?(0,r.tZ)("jdiv",{className:s()(I,{[O]:o&&n===l.Route.CALL_POPUP}),children:a}):a}),N=(0,o.zF)(()=>n.e(414).then(n.bind(n,90728)),y,x),F=e=>(0,r.tZ)(N,Object.assign({},e,{lazyLoaderProps:{type:e.type},lazyErrorProps:{type:e.type}}))},26034:function(e,t,n){"use strict";n.r(t),n.d(t,{CloseButton:function(){return f}});var r=n(16584),i=n(98661),o=n(94184),a=n.n(o),s=n(4244),l=n(74784),c="wrap__iNQHi",u="__call__max3h",d="__show__wDgF2",g="closeButton___jyEa",p="closeIcon__kPp8Y";const f=i.default.memo(({drag:e,callEnabled:t,inCall:n,show:i,ignoreDragHeight:o,onClick:f})=>(0,r.BX)(r.HY,{children:[(0,r.tZ)("jdiv",{className:a()({[c]:!0,[d]:i,[u]:n}),dir:"ltr",id:"jivo_action",children:(0,r.tZ)("jdiv",{className:g,onClick:f,id:"jivo_close_button",children:(0,r.tZ)(l.SvgIcon,{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <g fill="none" fill-rule="evenodd" transform="translate(2 2)">\n        <circle cx="12" cy="12" r="12" fill="#FFF" opacity="1"/>\n        <circle cx="12" cy="12" r="12.75" stroke="#222D38" stroke-width="1.5" opacity="1"/>\n        <g fill="#222D38" opacity="1" transform="translate(6 6)">\n            <rect width="1.611" height="13.9" x="5.435" y="-.941" rx=".806" transform="rotate(45 6.24 6.01)"/>\n            <rect width="1.611" height="13.9" x="5.435" y="-.941" rx=".806" transform="scale(-1 1) rotate(45 0 -9.058)"/>\n        </g>\n    </g>\n</svg>\n',color:"#7D8999",hoverColor:"#7D8999",className:p,qaId:"CLOSE_BUTTON"})})}),e?(0,r.tZ)(s.Z,{isNarrow:t,IsIgnoreHeight:o}):null]}));f.displayName="CloseButton"},81351:function(e,t,n){"use strict";n.r(t),n.d(t,{DisconnectAlert:function(){return M}});var r=n(16584),i=n(98661),o=n(94184),a=n.n(o),s=n(43832),l=n(18276),c=n(74784),u=n(36874),d=n(45007),g=n(49862),p=n(35233),f=n(65138),h=n(95421),m=n(38042);const _="online",v="offline",y="reconnect",C={stage:_,reconnects:0,disconnectTime:null,reconnectTime:null};function E(e,t){switch(t.type){case _:return Object.assign(Object.assign({},e),{stage:_});case v:return Object.assign(Object.assign({},e),{stage:v,disconnectTime:Date.now()});case y:return Object.assign(Object.assign({},e),{stage:y,reconnects:e.reconnects+1,reconnectTime:Date.now()});default:return e}}var b="container__eKdFu",S="wrapper__T2w1p",T="__show__AyRaZ",D="main__GPASt",w="offline__t699a",O="reconnect__IKrcz",A="icon__Rwd3a";const M=({children:e,className:t,onReconnect:n})=>{const{isOnline:o,isOffline:M,isReconnect:I,onTransition:R}=(e=>{const[t,n]=(0,i.useReducer)(E,C),{route:r}=(0,d.v9)(f.selectApp),o=(0,h.c)(),a=(0,d.v9)(p.selectChatStarted),s=t.stage===_,l=t.stage===v,c=t.stage===y;return(0,i.useEffect)(function(){return o||c?o&&l?n({type:y}):void 0:n({type:v})},[l,o,c]),(0,g.l)(function(){a&&(0,m.telemetry)("reconnection",{param1:r,param2:String(t.reconnects),param3:t.reconnectTime&&t.disconnectTime?String(Math.floor(t.reconnectTime-t.disconnectTime)/1e3):""})},[t.reconnectTime]),{isOnline:s,isOffline:l,isReconnect:c,onTransition:t=>{t.stopPropagation(),c&&(null==e||e(),n({type:_}))}}})(n);return(0,r.BX)(r.HY,{children:[(0,r.tZ)("jdiv",{className:a()(b,t),children:(0,r.tZ)("jdiv",{className:a()(S,{[T]:M||I}),children:(0,r.BX)("jdiv",{className:a()(D,{[w]:M,[O]:I}),onTransitionEnd:R,children:[M&&(0,l.l10n)("disconnect_msg"),I&&(0,r.BX)(r.HY,{children:[(0,l.l10n)("reconnect_msg"),(0,r.tZ)(c.SvgIcon,{icon:s.Z,color:u.colorsFromFigma.GREEN_80,className:A})]})]})})}),o&&e?e:null]})}},80508:function(e,t,n){"use strict";n.r(t),n.d(t,{fromCodePoint:function(){return c},replace:function(){return l},replaceEmoji:function(){return d},toCodePoint:function(){return u}});var r=n(36581),i=n(30633);const o=String.fromCharCode,a=/\uFE0F/g,s=String.fromCharCode(8205);function l(e,t){return String(e).replace(i.EMOJI_REGEX,t)}function c(e){let t="string"==typeof e?parseInt(e,16):e;return t<65536?o(t):(t-=65536,o(55296+(t>>10),56320+(1023&t)))}const u=(e,t)=>function(e,t){const n=[];let r=0,i=0,o=0;for(;o<e.length;)r=e.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(r-56320)).toString(16)),i=0):55296<=r&&r<=56319?i=r:n.push(r.toString(16));return n.join(t||"-")}(e.indexOf(s)<0?e.replace(a,""):e,t),d=e=>e.replace(/:\w+:/g,e=>{const t=e.replace(/:/g,"");return r.m[t]?c(r.m[t]):e})},15698:function(e,t,n){"use strict";n.r(t),n.d(t,{getMediaData:function(){return w},openIntroduce:function(){return M},sendMedia:function(){return A},startUploadMedia:function(){return O}});var r=n(88263),i=n(97490),o=n(69625),a=n(81152),s=n(53489),l=n(71277),c=n(26932),u=n(90061),d=n(54415),g=n(97778),p=n(65465),f=n(55329),h=n(13077),m=n(42634),_=n(44145),v=n(16016),y=n(49963),C=n(75141),E=n(8717),b=n(77294),S=n(38042);const T=(0,u.createLogger)("FileUploadHelpers"),D=e=>{let t="";return t=e.includes("image")?"":e.includes("video")?"":e.includes("audio")?"":"",t},w=e=>{try{const t=(0,_.getMessageByPrivateId)(e);return!!t&&(e=>{const t={message:"",media:null},n=e.body,r=Object.assign({},n);if(n&&!n.error&&(n.file_url||n.file)){const e=!!n.status,i=n.file_url||n.file,o=`${D(e?n.mime_type||"":n.type||"")} ${i}`;T.warn("getMediaData",e,r,o),r.file=i,delete r.file_url,e?(delete r.loadedSize,delete r.status):r.type=(0,C.detectType)(n.type||""),t.message=o,t.media=r,T.warn("data to send:",t)}return t})(t)}catch(e){return d.Monitoring.reportException(e,"[error] getMediaData: "),!1}},O=(e,{privateId:t,repliedMsgId:n,onUploadProgress:r,onCancel:i})=>{t||(t=(0,v.generateGUID)()),n&&c.appDispatchers.setQuoteMsgId(null),(0,m.markInvitationAnswered)(),c.messagesDispatchers.addMessage({type:a.MessageType.MEDIA,from:a.MessageInitiator.CLIENT,private_id:t,replied_message:n?(0,_.getMessageById)(n):null,body:{type:(0,C.detectType)(e.type),file_name:(0,s.sanitize)(e.name),file_size:e.size,mime_type:e.type,loadedSize:0,status:a.MediaStatus.UPLOADING}});const u=(0,_.getMessageByPrivateId)(t);o.b.startUpload(u,e,i=>{T.warn("file url:",u,e,i);const o=(0,C.detectType)(e.type),s={file:i.fullUrl,file_name:e.name,file_size:e.size,type:o,mime_type:e.type},d=Object.assign({},u.body),m=(0,b.isVideo)(e.type);if("photo"===o||m){m||(d.width=e.width,d.height=e.height,s.width=e.width,s.height=e.height);const t=(0,b.getSize)(s);s.thumb=`${i.fullUrl}?width=${t.width||g.MAX_IMAGE_WIDTH}&thumb`,d.thumb=s.thumb}d.status=a.MediaStatus.COMPLETE,d.file=i.fullUrl,d.file_size=e.size;const _=(v=e.type,y=i.fullUrl,`${D(v)} ${y}`);var v,y;null==r||r(0),c.messagesDispatchers.updateMessage({privateId:t,messageId:null},{text:_,body:Object.assign(Object.assign({},u.body),d)});const E={name:"client_message",message:_,replied_msg_id:n,private_id:t,media:s};c.appDispatchers.setChatStarted(!0),A(E),p.messageActions.checkMessageStatus(t),(0,f.prechatEnabled)()&&p.messageActions.deletePrechatMsg(),(0,h.getRuleLocal)("firstMessageTime")||(0,h.setRuleLocal)("firstMessageTime",new Date),p.messageActions.startContactFormIfNeed(),l.default.play("outgoing_message"),(0,S.telemetry)("file_upload_success",{param1:e.type}),n&&(0,S.telemetry)("visitor_reply_button_send")},r,i)},A=e=>{y.connectionAdapter.checkConnection(()=>y.connectionAdapter.sendEvent(e))},M=e=>{(0,E.shouldRedirectToIntroduce)()&&(e.preventDefault(),e.stopPropagation(),r.routerService.next(i.RouterEvent.ToIntroduce))}},75141:function(e,t,n){"use strict";n.r(t),n.d(t,{detectType:function(){return r}});const r=e=>!e.includes("image")||e.includes("photoshop")||e.includes("svg")?e.includes("video")?"video":e.includes("audio")?"audio":"document":"photo"},17094:function(e,t,n){"use strict";n.d(t,{B6:function(){return _},Bq:function(){return v},NW:function(){return h},Ws:function(){return f},ss:function(){return m},u1:function(){return y}});var r=n(97490),i=n(26932),o=n(44145),a=n(90061),s=n(50402),l=n(96367),c=n(34930),u=n(80352),d=n(38042),g=n(88263);const p=(0,a.createLogger)("HeaderContainer"),f=()=>Boolean(!(0,o.getCallback)().available&&(0,o.getUserSettings)().powerButtonPhone&&u.platform.isMobileOrChatpage),h=()=>`tel:+${(0,o.getUserSettings)().powerButtonPhone}`,m=()=>{if(p.log("onCallClick"),f())return void l.analytics.trackMobileCallClick();const{route:e}=(0,o.getApp)();if(e===r.Route.CHAT_MIN)return g.routerService.next(r.RouterEvent.ToCall),void i.transitionDispatchers.startTransition(s.ScriptName.MAXIMIZE_WIDGET);g.routerService.next(e===r.Route.CHAT_CALL?r.RouterEvent.ToChat:r.RouterEvent.ToCall)},_=e=>{(0,c.closeWidget)(),g.routerService.next(r.RouterEvent.CloseWindow),i.appDispatchers.setAppRoute("label"),(0,d.telemetry)("mobile_chat_close",{param1:e?"bySwipeDown":"byTap"})},v=()=>{(0,o.getApp)().route===r.Route.CHAT_MIN&&(i.appDispatchers.setAppIsFocused(!0),g.routerService.next(r.RouterEvent.Navigate),i.transitionDispatchers.startTransition(s.ScriptName.MAXIMIZE_WIDGET))},y=()=>{g.routerService.next(r.RouterEvent.ToDebug)}},19934:function(e,t,n){"use strict";n.r(t),n.d(t,{useGetHeaderColors:function(){return l}});var r=n(45007),i=n(80598),o=n(87692),a=n(45683),s=n(80352);const l=()=>{const e=(0,r.v9)(o.selectWidgetColor),t=(0,r.v9)(o.selectWidgetColor2),n=(0,r.v9)(o.selectPowerButtonColor),l=(0,r.v9)(o.selectPowerGradient),c=(0,r.v9)(o.selectPattern),u=c?(0,a.getPatternURL)(c):null;return{background:(0,i.getBackground)(e,t,l,n,s.platform.isMobileOrChatpage),leafBackground:t||e,isDarkText:"dark"===(0,r.v9)(o.selectWidgetFontColor),patternUrl:u}}},10838:function(e,t,n){"use strict";n.r(t),n.d(t,{Leaf:function(){return d}});var r=n(16584),i=(n(98661),n(94184)),o=n.n(i),a=n(80352),s=n(53400),l=n(36874),c=n(74784),u={leaf:"leaf__B2VCK",_bottom:"_bottom__JNN_X",_right:"_right__sZPgI",_left:"_left__aXc9y",cssLeaf:"cssLeaf__waNUM",_offline:"_offline__pfLEa"};const d=({backgroundColor:e,onClick:t,online:n,orientation:i,qaId:d})=>a.platform.isMobileOrTablet?null:(0,r.tZ)("jdiv",Object.assign({className:o()({[u.leaf]:!0,[u["_"+i]]:!0}),onClick:t||void 0},(0,s.locator)(d),{children:(0,r.tZ)(c.SvgIcon,{color:e,color2:n?l.colorsFromFigma.GREEN_80:"#5e5f61",icon:n?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="40" viewBox="0 0 32 40">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="_COLOR1_" d="M0 0h9.02L32 33.196V40H0z"/>\n        <path fill="_COLOR2_" d="M9 0c3.581.05 23 5.426 23 33.08v.03C18.922 30.751 9 19.311 9 5.554V0z"/>\n    </g>\n</svg>\n':'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="40" viewBox="0 0 32 40">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="_COLOR1_" d="M0 0h9.02L32 33.196V40H0z"/>\n        <path fill="_COLOR1_" d="M9 0c3.581.05 23 5.426 23 33.08v.03C18.922 30.751 9 19.311 9 5.554V0z" fill-opacity="1"/>\n        <path fill="#5e5f61" d="M9 0c3.581.05 23 5.426 23 33.08v.03C18.922 30.751 9 19.311 9 5.554V0z" fill-opacity="0.7"/>\n    </g>\n</svg>\n',className:u.cssLeaf})}))},56443:function(e,t,n){"use strict";n.r(t),n.d(t,{Markdown:function(){return ge}});var r=n(16584),i=n(98661),o=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},a=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"access private method"),n);function s(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var l={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};function c(e){l=e}var u=/[&<>"']/,d=new RegExp(u.source,"g"),g=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,p=new RegExp(g.source,"g"),f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h=e=>f[e];function m(e,t){if(t){if(u.test(e))return e.replace(d,h)}else if(g.test(e))return e.replace(p,h);return e}var _=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function v(e){return e.replace(_,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}var y=/(^|[^\[])\^/g;function C(e,t){e="string"==typeof e?e:e.source,t=t||"";const n={replace:(t,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(y,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}var E=/[^\w:]/g,b=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function S(e,t,n){if(e){let e;try{e=decodeURIComponent(v(n)).replace(E,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!b.test(n)&&(n=function(e,t){T[" "+e]||(D.test(e)?T[" "+e]=e+"/":T[" "+e]=I(e,"/",!0));e=T[" "+e];const n=-1===e.indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(w,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(O,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}var T={},D=/^[^:]+:\/*[^/]*$/,w=/^([^:]+:)[\s\S]*$/,O=/^([^:]+:\/*[^/]*)[\s\S]*$/;var A={exec:()=>null};function M(e,t){const n=e.replace(/\|/g,(e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function I(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.slice(0,r-i)}function R(e,t,n,r){const i=t.href,o=t.title?m(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:m(a)}}var k=class{constructor(e){this.options=e||l}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:I(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map(e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e}).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=I(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(e);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:r,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,i,o,a,s,l,c,u,d,g,p,f=t[1].trim();const h=f.length>1,m={type:"list",raw:"",ordered:h,start:h?+f.slice(0,-1):"",loose:!1,items:[]};f=h?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=h?f:"[*+-]");const _=new RegExp(`^( {0,3}${f})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,t=_.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),c=t[2].split("\n",1)[0].replace(/^\t+/,e=>" ".repeat(3*e.length)),u=e.split("\n",1)[0],this.options.pedantic?(o=2,g=c.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,g=c.slice(o),o+=t[1].length),s=!1,!c&&/^ *$/.test(u)&&(n+=u+"\n",e=e.substring(u.length+1),p=!0),!p){const t=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),r=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),a=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;e&&(d=e.split("\n",1)[0],u=d,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!i.test(u))&&!a.test(u)&&!t.test(u)&&!r.test(e);){if(u.search(/[^ ]/)>=o||!u.trim())g+="\n"+u.slice(o);else{if(s)break;if(c.search(/[^ ]/)>=4)break;if(i.test(c))break;if(a.test(c))break;if(r.test(c))break;g+="\n"+u}s||u.trim()||(s=!0),n+=d+"\n",e=e.substring(d.length+1),c=u.slice(o)}}m.loose||(l?m.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(g),r&&(i="[ ] "!==r[0],g=g.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:g}),m.raw+=n}m.items[m.items.length-1].raw=n.trimRight(),m.items[m.items.length-1].text=g.trimRight(),m.raw=m.raw.trimRight();const v=m.items.length;for(a=0;a<v;a++)if(this.lexer.state.top=!1,m.items[a].tokens=this.lexer.blockTokens(m.items[a].text,[]),!m.loose){const e=m.items[a].tokens.filter(e=>"space"===e.type),t=e.length>0&&e.some(e=>/\n.*\n/.test(e.raw));m.loose=t}if(m.loose)for(a=0;a<v;a++)m.items[a].loose=!0;return m}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const n=this.options.sanitizer?this.options.sanitizer(t[0]):m(t[0]),r=e;r.type="paragraph",r.text=n,r.tokens=this.lexer.inline(n)}return e}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:M(t[1]).map(e=>({text:e})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r,i,o,a=e.align.length;for(n=0;n<a;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(a=e.rows.length,n=0;n<a;n++)e.rows[n]=M(e.rows[n],e.header.length).map(e=>({text:e}));for(a=e.header.length,r=0;r<a;r++)e.header[r].tokens=this.lexer.inline(e.header[r].text);for(a=e.rows.length,r=0;r<a;r++)for(o=e.rows[r],i=0;i<o.length;i++)o[i].tokens=this.lexer.inline(o[i].text);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:m(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):m(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=I(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),R(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return R(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=r[0].length-1;let i,o,a=n,s=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=i.length,r[3]||r[4]){a+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){s+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+s);const t=e.slice(0,n+r.index+o+1);if(Math.min(n,o)%2){const e=t.slice(1,-1);return{type:"em",raw:t,text:e,tokens:this.lexer.inlineTokens(e)}}const l=t.slice(2,-2);return{type:"strong",raw:t,text:l,tokens:this.lexer.inlineTokens(l)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=m(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=m(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=m(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=m(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=m(n[0]),r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):m(n[0]):n[0]:m(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}},L={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:A,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};L.def=C(L.def).replace("label",L._label).replace("title",L._title).getRegex(),L.bullet=/(?:[*+-]|\d{1,9}[.)])/,L.listItemStart=C(/^( *)(bull) */).replace("bull",L.bullet).getRegex(),L.list=C(L.list).replace(/bull/g,L.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+L.def.source+")").getRegex(),L._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",L._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,L.html=C(L.html,"i").replace("comment",L._comment).replace("tag",L._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),L.lheading=C(L.lheading).replace(/bull/g,L.bullet).getRegex(),L.paragraph=C(L._paragraph).replace("hr",L.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",L._tag).getRegex(),L.blockquote=C(L.blockquote).replace("paragraph",L.paragraph).getRegex(),L.normal={...L},L.gfm={...L.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},L.gfm.table=C(L.gfm.table).replace("hr",L.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",L._tag).getRegex(),L.gfm.paragraph=C(L._paragraph).replace("hr",L.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",L.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",L._tag).getRegex(),L.pedantic={...L.normal,html:C("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",L._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:A,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:C(L.normal._paragraph).replace("hr",L.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",L.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};var P={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:A,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:A,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};function x(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function N(e){let t,n,r="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}P._punctuation="\\p{P}$+<=>`^|~",P.punctuation=C(P.punctuation,"u").replace(/punctuation/g,P._punctuation).getRegex(),P.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,P.anyPunctuation=/\\[punct]/g,P._escapes=/\\([punct])/g,P._comment=C(L._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),P.emStrong.lDelim=C(P.emStrong.lDelim,"u").replace(/punct/g,P._punctuation).getRegex(),P.emStrong.rDelimAst=C(P.emStrong.rDelimAst,"gu").replace(/punct/g,P._punctuation).getRegex(),P.emStrong.rDelimUnd=C(P.emStrong.rDelimUnd,"gu").replace(/punct/g,P._punctuation).getRegex(),P.anyPunctuation=C(P.anyPunctuation,"gu").replace(/punct/g,P._punctuation).getRegex(),P._escapes=C(P._escapes,"gu").replace(/punct/g,P._punctuation).getRegex(),P._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,P._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,P.autolink=C(P.autolink).replace("scheme",P._scheme).replace("email",P._email).getRegex(),P._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,P.tag=C(P.tag).replace("comment",P._comment).replace("attribute",P._attribute).getRegex(),P._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,P._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,P._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,P.link=C(P.link).replace("label",P._label).replace("href",P._href).replace("title",P._title).getRegex(),P.reflink=C(P.reflink).replace("label",P._label).replace("ref",L._label).getRegex(),P.nolink=C(P.nolink).replace("ref",L._label).getRegex(),P.reflinkSearch=C(P.reflinkSearch,"g").replace("reflink",P.reflink).replace("nolink",P.nolink).getRegex(),P.normal={...P},P.pedantic={...P.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:C(/^!?\[(label)\]\((.*?)\)/).replace("label",P._label).getRegex(),reflink:C(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",P._label).getRegex()},P.gfm={...P.normal,escape:C(P.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},P.gfm.url=C(P.gfm.url,"i").replace("email",P.gfm._extended_email).getRegex(),P.breaks={...P.gfm,br:C(P.br).replace("{2,}","*").getRegex(),text:C(P.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};var F,j,B,U,V=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||l,this.options.tokenizer=this.options.tokenizer||new k,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:L.normal,inline:P.normal};this.options.pedantic?(t.block=L.pedantic,t.inline=P.pedantic):this.options.gfm&&(t.block=L.gfm,this.options.breaks?t.inline=P.breaks:t.inline=P.gfm),this.tokenizer.rules=t}static get rules(){return{block:L,inline:P}}static lex(e,t){return new V(t).lex(e)}static lexInline(e,t){return new V(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,i,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(e,t,n)=>t+"    ".repeat(n.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach(e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,i,o,a,s,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(s=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,s))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,N))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,N))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach(e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,x))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),a=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}},W=class{constructor(e){this.options=e||l}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+m(r)+'">'+(n?e:m(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:m(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,n,r){if(this.options.headerIds){return`<h${t} id="${this.options.headerPrefix+r.slug(n)}">${e}</h${t}>\n`}return`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,n){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){if(null===(e=S(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=S(this.options.sanitize,this.options.baseUrl,e)))return n;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}},G=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}},H=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}},$=class{constructor(e){this.options=e||l,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new G,this.slugger=new H}static parse(e,t){return new $(t).parse(e)}static parseInline(e,t){return new $(t).parseInline(e)}parse(e,t=!0){let n,r,i,o,a,s,l,c,u,d,g,p,f,h,m,_,y,C,E,b="";const S=e.length;for(n=0;n<S;n++)if(d=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(E=this.options.extensions.renderers[d.type].call({parser:this},d),!1!==E||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)))b+=E||"";else switch(d.type){case"space":continue;case"hr":b+=this.renderer.hr();continue;case"heading":b+=this.renderer.heading(this.parseInline(d.tokens),d.depth,v(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":b+=this.renderer.code(d.text,d.lang,!!d.escaped);continue;case"table":for(c="",l="",o=d.header.length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(d.header[r].tokens),{header:!0,align:d.align[r]});for(c+=this.renderer.tablerow(l),u="",o=d.rows.length,r=0;r<o;r++){for(s=d.rows[r],l="",a=s.length,i=0;i<a;i++)l+=this.renderer.tablecell(this.parseInline(s[i].tokens),{header:!1,align:d.align[i]});u+=this.renderer.tablerow(l)}b+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(d.tokens),b+=this.renderer.blockquote(u);continue;case"list":for(g=d.ordered,p=d.start,f=d.loose,o=d.items.length,u="",r=0;r<o;r++)m=d.items[r],_=m.checked,y=m.task,h="",m.task&&(C=this.renderer.checkbox(!!_),f?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=C+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=C+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:C}):h+=C),h+=this.parse(m.tokens,f),u+=this.renderer.listitem(h,y,!!_);b+=this.renderer.list(u,g,p);continue;case"html":b+=this.renderer.html(d.text,d.block);continue;case"paragraph":b+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;n+1<S&&"text"===e[n+1].type;)d=e[++n],u+="\n"+(d.tokens?this.parseInline(d.tokens):d.text);b+=t?this.renderer.paragraph(u):u;continue;default:{const e='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}return b}parseInline(e,t){t=t||this.renderer;let n,r,i,o="";const a=e.length;for(n=0;n<a;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))o+=i||"";else switch(r.type){case"escape":case"text":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}return o}},z=class{constructor(e){this.options=e||l}preprocess(e){return e}postprocess(e){return e}};z.passThroughHooks=new Set(["preprocess","postprocess"]);F=new WeakSet,j=function(e,t){return(n,r,i)=>{"function"==typeof r&&(i=r,r=null);const o={...r},s={...this.defaults,...o},l=a(this,B,U).call(this,!!s.silent,!!s.async,i);if(null==n)return l(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function(e,t){e&&!e.silent&&(t&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(e.sanitize||e.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(e.highlight||"language-"!==e.langPrefix)&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),e.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),e.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),e.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),e.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(e.headerIds||e.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}(s,i),s.hooks&&(s.hooks.options=s),i){const r=s.highlight;let o;try{s.hooks&&(n=s.hooks.preprocess(n)),o=e(n,s)}catch(e){return l(e)}const a=e=>{let n;if(!e)try{s.walkTokens&&this.walkTokens(o,s.walkTokens),n=t(o,s),s.hooks&&(n=s.hooks.postprocess(n))}catch(t){e=t}return s.highlight=r,e?l(e):i(null,n)};if(!r||r.length<3)return a();if(delete s.highlight,!o.length)return a();let c=0;return this.walkTokens(o,e=>{"code"===e.type&&(c++,setTimeout(()=>{r(e.text,e.lang,(t,n)=>{if(t)return a(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),c--,0===c&&a()})},0))}),void(0===c&&a())}if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(t=>e(t,s)).then(e=>s.walkTokens?Promise.all(this.walkTokens(e,s.walkTokens)).then(()=>e):e).then(e=>t(e,s)).then(e=>s.hooks?s.hooks.postprocess(e):e).catch(l);try{s.hooks&&(n=s.hooks.preprocess(n));const r=e(n,s);s.walkTokens&&this.walkTokens(r,s.walkTokens);let i=t(r,s);return s.hooks&&(i=s.hooks.postprocess(i)),i}catch(e){return l(e)}}},B=new WeakSet,U=function(e,t,n){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+m(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):n?void n(null,e):e}if(t)return Promise.reject(r);if(!n)throw r;n(r)}};var Z=new class{constructor(...e){o(this,F),o(this,B),this.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},this.options=this.setOptions,this.parse=a(this,F,j).call(this,V.lex,$.parse),this.parseInline=a(this,F,j).call(this,V.lexInline,$.parseInline),this.Parser=$,this.parser=$.parse,this.Renderer=W,this.TextRenderer=G,this.Lexer=V,this.lexer=V.lex,this.Tokenizer=k,this.Slugger=H,this.Hooks=z,this.use(...e)}walkTokens(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":for(const e of r.header)n=n.concat(this.walkTokens(e.tokens,t));for(const e of r.rows)for(const r of e)n=n.concat(this.walkTokens(r.tokens,t));break;case"list":n=n.concat(this.walkTokens(r.items,t));break;default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[r.type]?this.defaults.extensions.childTokens[r.type].forEach(e=>{n=n.concat(this.walkTokens(r[e],t))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,t)))}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");t[e.level]?t[e.level].unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),n.extensions=t),e.renderer){const t=this.defaults.renderer||new W(this.defaults);for(const n in e.renderer){const r=t[n];t[n]=(...i)=>{let o=e.renderer[n].apply(t,i);return!1===o&&(o=r.apply(t,i)),o}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new k(this.defaults);for(const n in e.tokenizer){const r=t[n];t[n]=(...i)=>{let o=e.tokenizer[n].apply(t,i);return!1===o&&(o=r.apply(t,i)),o}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new z;for(const n in e.hooks){const r=t[n];z.passThroughHooks.has(n)?t[n]=i=>{if(this.defaults.async)return Promise.resolve(e.hooks[n].call(t,i)).then(e=>r.call(t,e));const o=e.hooks[n].call(t,i);return r.call(t,o)}:t[n]=(...i)=>{let o=e.hooks[n].apply(t,i);return!1===o&&(o=r.apply(t,i)),o}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens;n.walkTokens=function(n){let r=[];return r.push(e.walkTokens.call(this,n)),t&&(r=r.concat(t.call(this,n))),r}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}};function q(e,t,n){return Z.parse(e,t,n)}q.options=q.setOptions=function(e){return Z.setOptions(e),q.defaults=Z.defaults,c(q.defaults),q},q.getDefaults=s,q.defaults=l,q.use=function(...e){return Z.use(...e),q.defaults=Z.defaults,c(q.defaults),q},q.walkTokens=function(e,t){return Z.walkTokens(e,t)},q.parseInline=Z.parseInline,q.Parser=$,q.parser=$.parse,q.Renderer=W,q.TextRenderer=G,q.Lexer=V,q.lexer=V.lex,q.Tokenizer=k,q.Slugger=H,q.Hooks=z,q.parse=q;q.options,q.setOptions,q.use,q.walkTokens,q.parseInline,$.parse;var K=V.lex,Y=n(30633),J=n(73163),Q=n(94184),X=n.n(Q);const ee=/&(?:amp|lt|gt|quot|#(0+)?39);/g,te=RegExp(ee.source),ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var re=n(53400),ie=n(13752),oe=n(38042),ae={wrapper:"wrapper__JmOUu","heading-1":"heading-1__kzFN4",text:"text__X1x_D",imageContainer:"imageContainer__bJYDX",imageLink:"imageLink__EkAN1",image:"image__tZ_M2",mediaType:"mediaType__ScyRn",blockquote:"blockquote__gQWbn",paragraph:"paragraph__xKuMJ",list:"list__nRla6",listItem:"listItem__mN34D",marker:"marker__S87go",unordered:"unordered__fu30l",content:"content__jb0Ah",strong:"strong__EtSUV",italic:"italic__c8ERD",strikethrough:"strikethrough__dhiqP",link:"link__UKZoz",emoji:"emoji__cococ"};const se=({containerClassName:e,className:t,href:n,title:i,qaId:o})=>{const a=Boolean(n&&(n.includes("youtube")||n.includes("youtu.be"))),s=Boolean(n&&!a&&n.includes(".gif")),l=(0,r.BX)(r.HY,{children:[(0,r.tZ)("img",Object.assign({src:n,title:i,className:X()(ae.image,t)},(0,re.locator)(`${o}_IMAGE`))),a||s?(0,r.tZ)("jdiv",Object.assign({className:ae.mediaType},(0,re.locator)(`${o}_MEDIA_${a?"YOUTUBE":"GIF"}`),{children:a?"YouTube":"GIF"})):null]});return(0,r.tZ)("jdiv",Object.assign({className:X()(ae.imageContainer,e)},(0,re.locator)(`${o}_IMAGE_CONTAINER`),{children:a?(0,r.tZ)("a",Object.assign({href:n,title:i,target:"_blank",rel:"nofollow noopener noreferrer",className:ae.imageLink},(0,re.locator)(`${o}_IMAGE_LINK`),{children:l})):l}))},le=({className:e,listItemClassName:t,markerClassName:n,contentClassName:i,items:o,ordered:a,startNumber:s,qaId:l,parseToken:c})=>(0,r.tZ)("jdiv",Object.assign({className:X()(ae.list,e)},(0,re.locator)(`${l}_LIST`),{children:o.map((e,o)=>{var u;return(0,r.BX)("jdiv",Object.assign({className:X()(ae.listItem,t)},(0,re.locator)(`${l}_LIST_ITEM_${o+1}`),{children:[(0,r.tZ)("jdiv",{className:X()(ae.marker,n,{[ae.unordered]:!a}),children:a?`${s+o}.`:(0,r.tZ)(r.HY,{children:""})}),(0,r.tZ)("jdiv",Object.assign({className:X()(ae.content,i)},(0,re.locator)(`${l}_LIST_ITEM_${o+1}_CONTENT`),{children:null===(u=e.tokens)||void 0===u?void 0:u.map(c)}))]}),e.raw)})})),ce=(0,i.forwardRef)(({tokens:e,emojiQueue:t,theme:n,nativeEmoji:i,qaId:o,onLinkClick:a},s)=>{const l=(()=>{let e=0;return(t,n)=>{if(!n||!n.length||!t.includes(":emoji:"))return t;let r=t;for(;r.includes(":emoji:");)r=r.replace(":emoji:",n[e]),e+=1;return r}})(),c=e=>{var s,u,d,g,p,f,h,m,_,v,y,C,E,b,S,T;switch(e.type){case"image":return(0,r.tZ)(se,{href:e.href,title:e.title,containerClassName:null===(s=null==n?void 0:n.image)||void 0===s?void 0:s.container,className:null===(u=null==n?void 0:n.image)||void 0===u?void 0:u.base,qaId:o});case"link":return(0,r.tZ)("a",Object.assign({href:e.href,title:e.text,target:"_blank",rel:"nofollow noopener noreferrer",className:X()(ae.link,null==n?void 0:n.link),onClick:()=>{null==a||a(),(0,oe.telemetry)("markdown_link_click",{param1:e.href})}},(0,re.locator)(`${o}_LINK`),{children:null===(d=e.tokens)||void 0===d?void 0:d.map(c)}));case"heading":return(0,r.tZ)("jdiv",Object.assign({className:X()(ae[`heading-${e.depth}`],{[String(null===(g=null==n?void 0:n.heading)||void 0===g?void 0:g.h1)]:(null===(p=null==n?void 0:n.heading)||void 0===p?void 0:p.h1)&&1===e.depth})},(0,re.locator)(`${o}_HEADING_${e.depth}`),{children:null===(f=e.tokens)||void 0===f?void 0:f.map(c)}));case"paragraph":return(0,r.tZ)("jdiv",Object.assign({className:X()(ae.paragraph,null==n?void 0:n.paragraph)},(0,re.locator)(`${o}_PARAGRAPH`),{children:null===(h=e.tokens)||void 0===h?void 0:h.map(c)}));case"blockquote":return(0,r.tZ)("jdiv",Object.assign({className:X()(ae.blockquote,null==n?void 0:n.blockquote)},(0,re.locator)(`${o}_BLOCKQUOTE`),{children:null===(m=e.tokens)||void 0===m?void 0:m.map(c)}));case"list":return(0,r.tZ)(le,{className:null===(_=null==n?void 0:n.list)||void 0===_?void 0:_.base,listItemClassName:null===(v=null==n?void 0:n.list)||void 0===v?void 0:v.li,markerClassName:null===(y=null==n?void 0:n.list)||void 0===y?void 0:y.marker,contentClassName:null===(C=null==n?void 0:n.list)||void 0===C?void 0:C.content,items:e.items,ordered:e.ordered,startNumber:e.start,qaId:o,parseToken:c});case"text":case"singlequote":case"code":case"codespan":case"html":case"escape":return(0,r.tZ)(ie.Text,{className:X()(ae.text,null==n?void 0:n.text),nativeEmoji:i,includeWrapper:!0,disableLinkify:!0,disableAloneEmoji:!0,qaId:o,children:e.tokens?e.tokens.map(c):l((T=e.text,T&&te.test(T)?T.replace(ee,e=>ne[e]||"'"):T),t)});case"strong":return(0,r.tZ)("jdiv",Object.assign({className:X()(ae.strong,null==n?void 0:n.strong)},(0,re.locator)(`${o}_STRONG`),{children:null===(E=e.tokens)||void 0===E?void 0:E.map(c)}));case"em":return(0,r.tZ)("jdiv",Object.assign({className:X()(ae.italic,null==n?void 0:n.italic)},(0,re.locator)(`${o}_ITALIC`),{children:null===(b=e.tokens)||void 0===b?void 0:b.map(c)}));case"del":return(0,r.tZ)("jdiv",Object.assign({className:X()(ae.strikethrough,null==n?void 0:n.strikethrough)},(0,re.locator)(`${o}_STRIKETHROUGH`),{children:null===(S=e.tokens)||void 0===S?void 0:S.map(c)}));default:return null}};return(0,r.tZ)("jdiv",Object.assign({ref:s,className:X()(ae.wrapper,null==n?void 0:n.wrapper)},(0,re.locator)(`${o}_WRAPPER`),{children:e.map(c)}))});ce.displayName="Tokenizer";const ue={name:"singlequote",level:"inline",start(e){return e.indexOf("'")},tokenizer(e){const t=/^'/.exec(e);if(t)return{type:"singlequote",raw:t[0],text:t[0]}},renderer(e){return e.text}};q.use({mangle:!1,extensions:[ue]});const de=(0,i.forwardRef)(({children:e,theme:t,nativeEmoji:n,qaId:o,onLinkClick:a},s)=>{if(e&&"string"!=typeof e)throw new TypeError("Markdown: Expected children to be of type string but got "+typeof e);const{tokens:l,emojiQueue:c}=(0,i.useMemo)(()=>{const t=e,n=t.match(Y.EMOJI_REGEX);return{tokens:K((0,J.k)(t,Y.EMOJI_REGEX,":emoji:")),emojiQueue:n}},[e]);return(0,r.tZ)(ce,{ref:s,tokens:l,emojiQueue:c,theme:t,nativeEmoji:n,qaId:o,onLinkClick:a})});de.displayName="Markdown";const ge=(0,i.memo)(de)},17739:function(e,t,n){"use strict";n.d(t,{t:function(){return Se}});var r=n(16584),i=n(98661),o=n(87536),a=n(18357),s=n(2305),l=n(10018),c=n(83549),u=n(75686),d=n(70859),g=n(90061),p=n(97490),f=n(68403),h=n(88263),m=n(45926),_=n(43417),v=n(45691),y=n(93907),C=n(10465),E=n(1667),b=n(53130),S=n(18166),T=n(87826),D=n(25886),w=n(79868),O=n(38042),A=n(47367),M=n(24111),I=n(65138),R=n(97979),k=n(79105),L=n(99915),P=n(80352),x=n(17097);var N=n(23400);const F=()=>{const e=(0,L.R)(),{isOnline:t,chatStarted:n}=(0,M.useAppSelector)(I.selectApp),r=(0,M.useAppSelector)(R.selectClient),o=(0,M.useAppSelector)(k.selectEula),a=(0,M.useAppSelector)(k.selectMailing),{isContactFormPreview:s,previewSettings:l}=(0,i.useContext)(x.h),c=!s&&Boolean(a),u=Boolean(r.isIntroduced),d=!s&&Boolean(o&&!r.eulaAccepted),g=P.platform.isMobileOrTablet,p=(0,i.useMemo)(()=>(0,y.dc)({client:s?void 0:r,settings:s?l:t?e:(0,N.Zo)(e),isEULA:d,isMailing:c}),[r,d,c,l,s,t,e]);return{client:r,hasEULA:d,isMailingEnabled:c,isIntroduced:u,isOnline:t,isMobile:g,isContactFormPreview:s,chatStarted:n,formShape:p}};var j=n(94184),B=n.n(j),U="container__U8qNt",V="__preview__uwQhg";const W=(0,i.forwardRef)(({children:e,isPreview:t},n)=>(0,r.tZ)("jdiv",{ref:n,className:B()(U,{[V]:t}),children:e}));W.displayName="ContactFormContainer";var G=n(53400),H="wrapper__E8NST",$="focus__Lfr5X",z="overlay__N5Wly";const Z=({children:e,hasFocus:t,onOverlayClick:n,ref:i})=>(0,r.BX)("jdiv",Object.assign({className:B()(H,{[$]:t}),ref:i},(0,G.locator)("CONTACTS_FORM"),{children:[!t&&(0,r.tZ)("jdiv",Object.assign({className:z},n)),e]}));var q=n(18276),K="socialText__Ln7O4",Y="link__jgsZM";const J=({isVkURL:e,isFbURL:t,onSocialClick:n})=>(0,r.BX)("jdiv",{className:K,children:[`${(0,q.l10n)("introduce_social")} `,e&&(0,r.tZ)("jdiv",Object.assign({className:Y},(0,_.onClickHandler)(()=>n("vk"),!1,!0),{children:(0,q.l10n)("social_vk")})),e&&t&&` ${(0,q.l10n)("introduce_or")} `,t&&(0,r.tZ)("jdiv",Object.assign({className:Y},(0,_.onClickHandler)(()=>n("fb"),!1,!0),{children:"Facebook"}))]});var Q=n(97778),X=n(38669),ee=n(11500),te=n(13752);const ne=(e,t)=>{const n=u.default.getComponent("ScrollContainer");if(!n||!t||!e)return;const r=new IntersectionObserver(e=>{e.forEach(e=>{if(!e.isIntersecting){const t=Math.floor(e.boundingClientRect.bottom),r=e.rootBounds?t-e.rootBounds.bottom+5:0;r>0&&n.scrollTop(n.getScrollTop()+r)}r.disconnect()})},{root:n.container,threshold:.5,rootMargin:"0px 0px -120px"});r.observe(t)};var re="button__l5wcq",ie="input__QoSOn",oe="checkbox__rbMJu",ae="__hidden__I4pgL",se="checkboxForm__WY37K",le="checkboxTextWrapper__JXo_m",ce="checkboxText__LhQiG";const ue=({control:e,fields:t,clientPhone:n,isEULA:i,isMailing:o,isSubmitted:a,onSubmit:s,onCountryChange:l})=>(0,r.BX)(r.HY,{children:[t.map(({name:t,required:i,title:o,show:a,attribute_type:s,settings:c})=>{if(!a||"country"===t||"message"===t)return null;const u=(0,y.Ql)(null!=s?s:t),d=o||(0,y.ph)(t),g=`CONTACTS_FORM_${t.toUpperCase()}${i?"_REQUIRED":""}`,p=(null==c?void 0:c.options)&&c.options.length>0?c.options.map(e=>({value:e,label:e})):null;return"number"===u?(0,r.tZ)(ee.Y2,{control:e,name:t,containerClassName:ie,label:d,required:i,maxLength:Q.MAX_ATTRIBUTE_NUMBER_LENGTH,qaId:g},t):"list"===u&&p?(0,r.tZ)(ee.Ph,{control:e,name:t,options:p,containerClassName:ie,label:d,required:i,showSearch:!0,showReset:!0,searchPlaceholder:(0,q.l10n)("attribute_list_search_placeholder"),qaId:g,onValueClick:ne},t):"checkbox"===u?(0,r.tZ)(ee.XZ,{control:e,name:t,labelClassName:se,textClassName:le,label:(0,r.tZ)("jdiv",{className:ce,children:d}),required:i,qaId:g},t):"date"===u?(0,r.tZ)(ee.Wr,{control:e,name:t,containerClassName:ie,label:d,required:i,qaId:g},t):"phone"===t?(0,r.tZ)(ee.sb,{control:e,name:t,watchValue:n,containerClassName:ie,label:d,required:i,onCountryChange:l,qaId:g},t):(0,r.tZ)(ee.II,{control:e,name:t,type:u,containerClassName:ie,label:d,required:i,maxLength:s?Q.MAX_ATTRIBUTE_STRING_LENGTH:void 0,qaId:g},t)}),i&&(0,r.tZ)(ee.wc,{control:e,name:"eula",labelClassName:oe,required:!0,qaId:"CONTACTS_FORM_EULA",telemetryLinkParams:{param1:"from_contact_form"}}),(0,r.tZ)(ee._M,{control:e,name:"mailing",labelClassName:B()(oe,{[ae]:!o}),qaId:"CONTACTS_FORM_MAILING",telemetryLinkParams:{param1:"from_contact_form"}}),(0,r.tZ)(X.Button,{size:"md",tabIndex:0,className:re,fullWidth:!0,disabled:a,qaId:"CONTACTS_FORM_SUBMIT",onClick:s,onKeyDown:e=>{"Enter"===e.key&&(null==s||s())},children:(0,r.tZ)(te.Text,{children:a?(0,q.l10n)("lblThanks"):(0,q.l10n)("lblSend")})})]});var de=n(65465),ge=n(54346),pe=n(44145),fe=n(24344),he=n(26932),me=n(79523),_e=n(49963),ve=n(79010),ye=n(5895);const Ce=(0,g.createLogger)("ContactForm"),Ee=({isOnline:e,isIntroduced:t,values:n})=>{var r,i,o,a;if(!e){if(t||(he.clientDispatchers.setClientEmail(null!==(r=n.email)&&void 0!==r?r:null),he.clientDispatchers.setClientPhone(null!==(i=n.phone)&&void 0!==i?i:null),he.clientDispatchers.setClientName(null!==(o=n.name)&&void 0!==o?o:null),he.clientDispatchers.setClientDescription(null!==(a=n.description)&&void 0!==a?a:null),he.clientDispatchers.setIsIntroduced(!0)),he.appDispatchers.setChatStarted(!0),he.appDispatchers.setIsInputDisabled(!1),me.introduceActions.setClientContactInfo(n,!1,!0),_e.connectionAdapter.checkConnection(),!(0,ge.isAssistantBot)()){const e=de.messageActions.getOfflineSuccessText();e&&de.messageActions.systemMessageOnce(e)}_e.connectionAdapter.isConnected()&&(0,ye.sendOfflineTmpMessages)();const e=(0,pe.getLastClientMessage)();return Ce.log("lastClientMessage",e),e&&de.messageActions.checkMessageStatus(e.private_id),(0,fe.callUserFunction)("onOfflineFormSubmit"),void(0,O.telemetry)("offline_form_submit",{param1:"formSubmitSuccess",param2:(0,y.OQ)()},{once:!0})}t?(me.introduceActions.sendIntroduction(n),_e.connectionAdapter.checkConnection()):((0,ve.$W)(),me.introduceActions.setClientContactInfo(n,!1,!0),he.clientDispatchers.setIsIntroduced(!0))},be=(0,g.createLogger)("ContactForm"),Se=({messages:e=[]})=>{var t;(0,c.useErrorCatcher)("ContactForm");const n=e[0],{client:g,hasEULA:M,isMailingEnabled:I,formShape:R,isIntroduced:k,isMobile:L,isOnline:P,isContactFormPreview:x,chatStarted:N}=F(),j=(0,i.useRef)(null),B=(0,i.useRef)(!1),{ref:U}=(0,a.YD)({delay:100,trackVisibility:!0,onChange:(e,t)=>{u.default.set("ContactFormObserver",{entry:t,inView:e,focusFirstInput:ae})}});(0,i.useImperativeHandle)(U,()=>j.current,[]);const V=x||Boolean(null===(t=n.get("body"))||void 0===t?void 0:t.inited),[G,H]=(0,i.useState)(k||V),[$,z]=(0,i.useState)(!x&&(!M&&k)),[q,K]=(0,i.useState)(null),Y=(0,i.useRef)(R.values),Q=!x&&(N&&!L&&!(0,f.hasIntegration)(g.hasIntegration)&&((null==q?void 0:q.links.fbUrl)||(null==q?void 0:q.links.vkUrl))),{control:X,watch:ee,getValues:te,setValue:ne,handleSubmit:re,formState:{errors:ie}}=(0,o.cI)({defaultValues:R.values,resolver:(0,s.X)(R.resolver),mode:"onChange"}),oe=(0,S.X)({values:ee(["email","phone"]),isMailingEnabled:I,mailing:g.mailing},Y.current),ae=()=>{var e;H(!0),V||n.set("body",{inited:!0}),j.current&&(null===(e=j.current.querySelector("input"))||void 0===e||e.focus()),(0,O.telemetry)("chat_introduce",{param1:"formFocused"},{once:!0})},se=re(()=>{const e=te();if(!(0,y.UJ)(e)&&!$){if(be.log("SUBMIT CONTACTS",e),Y.current=e,M&&(0,T.D)(),I&&(e.mailing?(0,b.O)(e):(0,b.f)(e)),L){const{activeElement:e}=(0,m.getPageWindow)().document;null==e||e.blur()}if(z(!0),Ee({isOnline:P,isIntroduced:k,values:e}),l.default.enable_client_attributes){const t=R.fields.filter(({attribute_type:e})=>e).reduce((t,n)=>{if(!e[n.name])return t;const r=e[n.name];return t[n.name]="date"===n.attribute_type?(0,A.Al)(r):r,t},{});(0,C.x)(t)||(0,v.F)(t)}}},()=>{(0,y.ql)(P,ie)});return(0,i.useEffect)(()=>{if(x)return;const e=te();["name","email","phone"].forEach(t=>{const n=g[t];t in e&&!(0,E.k)(n)&&n!==e[t]&&(("email"===t||"phone"===t)&&I&&g.mailing[t]&&(0,b.f)(e),ne(t,n,{shouldDirty:!0,shouldValidate:!0}))})},[g.name,g.email,g.phone,g.mailing,I]),(0,i.useEffect)(()=>{if(x||!g.attributes)return;const e=te();R.attributeKeys.forEach(t=>{var n;g.attributes&&t in e&&!(0,E.k)(g.attributes[t])&&e[t]!==g.attributes[t]&&ne(t,null!==(n=g.attributes[t])&&void 0!==n?n:"",{shouldDirty:!0,shouldValidate:!0})})},[g.attributes]),(0,i.useEffect)(()=>{const e=ee(()=>{B.current?$&&z(!1):B.current=!0});return()=>e.unsubscribe()},[ee,$]),(0,i.useEffect)(()=>{j.current&&u.default.set(d.Component.CHAT_INTRODUCE,j.current),V||n.set("body",{inited:!0}),K((0,D.getJoints)())},[]),(0,r.BX)(W,{ref:j,isPreview:x,children:[(0,r.tZ)(Z,{hasFocus:G,onOverlayClick:(0,_.onClickHandler)(ae,!1,!0),ref:U,children:(0,r.tZ)(ue,{control:X,fields:R.fields,clientPhone:g.phone,isSubmitted:$,isEULA:M,isMailing:oe,onSubmit:x?void 0:se,onCountryChange:e=>{ne("country",e)}})}),Q&&(0,r.tZ)(J,{isVkURL:Boolean(null==q?void 0:q.links.vkUrl),isFbURL:Boolean(null==q?void 0:q.links.fbUrl),onSocialClick:e=>{if(L&&(null==q?void 0:q.links)){const{fbUrl:t,vkUrl:n}=q.links;return void window.open("fb"===e?t:n)}w.default.setPopupMode(e),h.routerService.next(p.RouterEvent.ToSocial),(0,O.telemetry)("chat_introduce_social",{param1:`click_${e}`})}})]})}},59699:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(16584),i=(n(98661),n(30396));const o=({children:e})=>{const[t]=(0,i.cO)();return t?(0,r.tZ)(r.HY,{}):e}},93861:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});const r={angel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><circle fill="#FFCC4D" cx="18" cy="18" r="18"/><path fill="#664500" d="M27.335 22.629c-.178-.161-.444-.171-.635-.029-.039.029-3.922 2.9-8.7 2.9-4.766 0-8.662-2.871-8.7-2.9-.191-.142-.457-.13-.635.029-.177.16-.217.424-.094.628C8.7 23.472 11.788 28.5 18 28.5s9.301-5.028 9.429-5.243c.123-.205.084-.468-.094-.628zM26 19c-.419 0-.809-.265-.948-.684C24.849 17.717 24.033 16 23 16c-1.062 0-1.889 1.827-2.052 2.316-.175.523-.736.808-1.265.632-.523-.174-.807-.74-.632-1.265C19.177 17.307 20.355 14 23 14s3.823 3.307 3.948 3.684c.175.524-.108 1.091-.632 1.265-.105.034-.212.051-.316.051zm-10 0c-.419 0-.809-.265-.949-.684C14.848 17.717 14.034 16 13 16c-1.062 0-1.888 1.827-2.051 2.316-.175.523-.738.808-1.265.632-.524-.174-.807-.74-.632-1.265C9.177 17.307 10.355 14 13 14s3.823 3.307 3.949 3.684c.175.524-.108 1.091-.632 1.265-.106.034-.213.051-.317.051z"/><path fill="#FFAC33" d="M33.175 8.316s-9.042.161-15.175.161c-3.905 0-15.206-.118-15.206-.118l-.521.876c3.043 1.856 9.064 2.917 15.727 2.917 6.596 0 12.576-1.04 15.652-2.86l.078-.047s-.374-.664-.555-.929z"/><path fill="#5DADEC" d="M23.777.345c-1.212-.094-2.473-.159-3.773-.19C19.343.139 18.676.129 18 .129c-.672 0-1.336.01-1.993.025-1.302.031-2.564.096-3.777.19C5.34.88.169 2.451.169 5.287c0 3.588 8.264 5.771 17.831 5.771s17.831-2.183 17.831-5.771c0-2.835-5.168-4.405-12.054-4.942zM18 7.383c-6.861 0-12.91-.833-12.91-2.736 0-.536.494-1.023 1.339-1.449 1.153-.581 2.978-1.044 5.189-1.349 1.911-.262 4.098-.41 6.382-.41 2.291 0 4.485.148 6.4.413 2.242.31 4.086.783 5.232 1.377.807.418 1.278.894 1.278 1.418 0 1.903-6.049 2.736-12.91 2.736z"/><path fill="#3B94D9" d="M24.4 1.853c2.242.31 4.086.783 5.232 1.377l.062.017c-2.285-1.674-4.57-2.56-5.917-2.902-1.212-.094-2.473-.159-3.773-.19l.018.007L24.4 1.853zM6.429 3.199c1.153-.581 2.978-1.044 5.189-1.349L15.984.162l.023-.008c-1.302.031-2.564.096-3.777.19-1.347.342-3.633 1.227-5.919 2.902l.118-.047z"/><path fill="#FFCC4D" d="M28.472 3.375c-.66-.443-1.346-.91-2.001-1.26C23.947.765 21.063 0 18 0c-2.929 0-5.695.7-8.14 1.941-1.089.553-1.881.999-2.17 1.434h20.782z"/></svg>',unicorn_face:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#C1CDD5" d="M36 19.854C33.518 9.923 25.006 1.909 16.031 6.832c0 0-4.522-1.496-5.174-1.948-.635-.44-1.635-.904-.912.436.423.782.875 1.672 2.403 3.317C8 12.958 9.279 18.262 7.743 21.75c-1.304 2.962-2.577 4.733-1.31 6.976 1.317 2.33 4.729 3.462 7.018 1.06 1.244-1.307.471-1.937 3.132-4.202 2.723-.543 4.394-1.791 4.394-4.375 0 0 .795-.382 1.826 6.009.456 2.818-.157 5.632-.039 8.783H36V19.854z"/><path fill="#60379A" d="M31.906 6.062c.531 1.312.848 3.71.595 5.318-.15-3.923-3.188-6.581-4.376-7.193-2.202-1.137-4.372-.979-6.799-.772.111.168.403.814.32 1.547-.479-.875-1.604-1.42-2.333-1.271-1.36.277-2.561.677-3.475 1.156-.504.102-1.249.413-2.372 1.101-1.911 1.171-4.175 4.338-6.737 3.511 1.042 2.5 3.631 1.845 3.631 1.845 1.207-1.95 4.067-3.779 6.168-4.452 7.619-1.745 12.614 3.439 15.431 9.398.768 1.625 2.611 7.132 4.041 10.292V10.956c-.749-1.038-1.281-3.018-4.094-4.894z"/><path fill="#C1CDD5" d="M13.789 3.662c.573.788 3.236.794 4.596 3.82 1.359 3.026-1.943 2.63-3.14 1.23-1.334-1.561-1.931-2.863-2.165-3.992-.124-.596-.451-2.649.709-1.058z"/><path fill="#758795" d="M14.209 4.962c.956.573 2.164 1.515 2.517 2.596.351 1.081-.707.891-1.349-.042-.641-.934-.94-1.975-1.285-2.263-.346-.289.117-.291.117-.291z"/><circle fill="#292F33" cx="15.255" cy="14.565" r=".946"/><path fill="#53626C" d="M8.63 26.877c.119.658-.181 1.263-.67 1.351-.49.089-.984-.372-1.104-1.03-.119-.659.182-1.265.671-1.354.49-.088.984.373 1.103 1.033z"/><path fill="#EE7C0E" d="M13.844 8.124l.003-.002-.005-.007-.016-.014c-.008-.007-.011-.019-.019-.025-.009-.007-.021-.011-.031-.018C12.621 7.078.933-.495.219.219-.51.948 10.443 9.742 11.149 10.28l.011.006.541.439c.008.007.01.018.018.024.013.01.028.015.042.024l.047.038-.009-.016c.565.361 1.427.114 1.979-.592.559-.715.577-1.625.066-2.079z"/><path fill="#C43512" d="M4.677 2.25l.009-.025c-.301-.174-.594-.341-.878-.5-.016.038-.022.069-.041.11-.112.243-.256.484-.429.716-.166.224-.349.424-.541.595-.02.018-.036.026-.056.043.238.22.489.446.745.676.234-.21.456-.449.654-.717.214-.287.395-.589.537-.898zm2.275 2.945c.306-.41.521-.822.66-1.212-.292-.181-.584-.36-.876-.538-.076.298-.247.699-.586 1.152-.31.417-.613.681-.864.845.259.223.52.445.779.665.314-.244.619-.552.887-.912zM9.87 7.32c.365-.49.609-.983.734-1.437l-.906-.586c-.023.296-.172.81-.631 1.425-.412.554-.821.847-1.1.978l.814.671c.381-.256.761-.611 1.089-1.051z"/></svg>',confused:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><ellipse fill="#664500" cx="11.5" cy="16.5" rx="2.5" ry="3.5"/><ellipse fill="#664500" cx="24.5" cy="16.5" rx="2.5" ry="3.5"/><path fill="#664500" d="M12 28c2-5 13-5 13-3 0 1-8-1-13 3z"/></svg>',rage:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#DA2F47" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><path fill="#292F33" d="M25.485 29.879C25.44 29.7 24.317 25.5 18 25.5c-6.318 0-7.44 4.2-7.485 4.379-.055.217.043.442.237.554.195.109.439.079.6-.077.019-.019 1.954-1.856 6.648-1.856s6.63 1.837 6.648 1.855c.096.095.224.145.352.145.084 0 .169-.021.246-.064.196-.112.294-.339.239-.557zm-9.778-12.586C12.452 14.038 7.221 14 7 14c-.552 0-.999.447-.999.998-.001.552.446 1 .998 1.002.029 0 1.925.022 3.983.737-.593.64-.982 1.634-.982 2.763 0 1.934 1.119 3.5 2.5 3.5s2.5-1.566 2.5-3.5c0-.174-.019-.34-.037-.507.013 0 .025.007.037.007.256 0 .512-.098.707-.293.391-.391.391-1.023 0-1.414zM29 14c-.221 0-5.451.038-8.707 3.293-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293.013 0 .024-.007.036-.007-.016.167-.036.333-.036.507 0 1.934 1.119 3.5 2.5 3.5s2.5-1.566 2.5-3.5c0-1.129-.389-2.123-.982-2.763 2.058-.715 3.954-.737 3.984-.737.551-.002.998-.45.997-1.002-.001-.551-.447-.998-.999-.998z"/></svg>',imp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><circle fill="#AA8DD8" cx="18" cy="18" r="18"/><path fill="#AA8DD8" d="M10 4C7.42 4 4.369 1.534 3.414.586 2.843.014 1.981-.157 1.235.153.487.462 0 1.191 0 2c0 3.459 1.672 10 8 10 .757 0 1.45-.428 1.789-1.106l2-4c.31-.62.277-1.356-.088-1.946C11.337 4.359 10.693 4 10 4zM34.766.153c-.75-.311-1.607-.139-2.18.434C31.7 1.472 28.589 4 26 4c-.693 0-1.337.359-1.701.949-.364.589-.397 1.326-.088 1.946l2 4C26.55 11.572 27.242 12 28 12c6.328 0 8-6.541 8-10 0-.809-.487-1.538-1.234-1.847z"/><path fill="#553986" d="M27.335 25.629c-.178-.161-.444-.171-.635-.029-.039.029-3.922 2.9-8.7 2.9-4.766 0-8.662-2.871-8.7-2.9-.191-.142-.457-.13-.635.029-.177.16-.217.424-.094.628C8.7 26.472 11.788 31.5 18 31.5s9.301-5.028 9.429-5.243c.123-.205.084-.468-.094-.628zm-11.628-7.336C12.452 15.038 7.221 15 7 15c-.552 0-.999.447-.999.998-.001.552.446 1.001.998 1.002.029 0 1.925.022 3.983.737-.593.64-.982 1.634-.982 2.763 0 1.934 1.119 3.5 2.5 3.5s2.5-1.566 2.5-3.5c0-.174-.019-.34-.037-.507.013 0 .025.007.037.007.256 0 .512-.098.707-.293.391-.391.391-1.023 0-1.414zM29 15c-.221 0-5.451.038-8.707 3.293-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293.013 0 .024-.007.036-.007-.016.167-.036.333-.036.507 0 1.934 1.119 3.5 2.5 3.5s2.5-1.566 2.5-3.5c0-1.129-.389-2.123-.982-2.763 2.058-.715 3.954-.737 3.984-.737.551-.001.998-.45.997-1.002-.001-.551-.447-.998-.999-.998z"/></svg>',disappointed:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><circle fill="#FFCC4D" cx="18" cy="18" r="18"/><path fill="#664500" d="M23.485 28.879C23.474 28.835 22.34 24.5 18 24.5s-5.474 4.335-5.485 4.379c-.053.213.044.431.232.544.188.112.433.086.596-.06.009-.008 1.013-.863 4.657-.863 3.59 0 4.617.83 4.656.863.095.09.219.137.344.137.084 0 .169-.021.246-.064.196-.112.294-.339.239-.557zM11.226 15.512c-.317 0-.636.039-.947.116-2.87.707-3.513 4.121-3.539 4.267-.04.223.076.443.281.54.067.031.14.047.211.047.145 0 .287-.063.385-.18.01-.012 1.01-1.178 3.379-1.761.714-.176 1.412-.265 2.073-.265 1.104 0 1.732.253 1.735.254.067.028.131.04.207.04.272.012.509-.221.509-.5 0-.165-.08-.311-.203-.402-.367-.435-1.953-2.156-4.091-2.156zm13.548 0c.317 0 .636.039.947.116 2.87.707 3.513 4.121 3.539 4.267.04.223-.076.443-.281.54-.067.031-.14.047-.211.047-.145 0-.287-.063-.385-.18-.01-.012-1.01-1.178-3.379-1.761-.714-.176-1.412-.265-2.073-.265-1.104 0-1.731.253-1.735.254-.067.028-.131.04-.206.04-.272.012-.509-.221-.509-.5 0-.165.08-.311.203-.402.366-.435 1.952-2.156 4.09-2.156z"/></svg>',kissing_heart:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><circle fill="#FFCC4D" cx="18" cy="18" r="18"/><ellipse fill="#664500" cx="11.5" cy="15.5" rx="2.5" ry="3.5"/><path fill="#664500" d="M28.457 17.797c-.06-.135-1.499-3.297-4.457-3.297-2.957 0-4.397 3.162-4.457 3.297-.092.207-.032.449.145.591.175.142.426.147.61.014.012-.009 1.262-.902 3.702-.902 2.426 0 3.674.881 3.702.901.088.066.194.099.298.099.11 0 .221-.037.312-.109.177-.142.238-.386.145-.594zM5.999 11c-.208 0-.419-.065-.599-.2-.442-.331-.531-.958-.2-1.4C8.462 5.05 12.816 5 13 5c.552 0 1 .448 1 1 0 .551-.445.998-.996 1-.155.002-3.568.086-6.204 3.6-.196.262-.497.4-.801.4zm23.002 3c-.305 0-.604-.138-.801-.4-2.592-3.456-6.961-2.628-7.004-2.62-.547.11-1.068-.244-1.177-.784-.108-.541.243-1.068.784-1.177.231-.047 5.657-1.072 8.996 3.38.332.442.242 1.069-.2 1.4-.179.136-.389.201-.598.201zm-8.922 13.042c1.335-.412 2.629-1.156 2.629-2.5 0-2.619-4.912-2.968-5.472-2.999-.274-.026-.509.193-.527.468-.017.274.19.511.464.53.035.002 3.535.299 3.535 2.001s-3.5 1.999-3.535 2.001c-.014.001-.024.009-.037.011-.052.006-.101.018-.146.04l-.019.011c-.047.026-.088.057-.125.098-.014.015-.024.031-.036.048-.023.032-.044.063-.059.102-.012.029-.018.061-.024.092-.004.023-.016.044-.018.067 0 .011.004.021.004.031s-.005.021-.004.031c.001.024.013.045.018.068.006.031.011.061.023.09.013.03.031.057.049.084.017.024.032.05.052.071.023.023.05.041.078.061.024.017.046.034.074.047.032.015.066.021.101.027.024.006.044.018.069.02.035.002 3.535.299 3.535 2.001s-3.5 1.999-3.535 2.001c-.274.02-.481.257-.464.53.017.265.237.469.499.469l.028-.001c.56-.031 5.472-.38 5.472-2.999 0-1.345-1.294-2.089-2.629-2.501z"/><path fill="#FFAC33" d="M34.202 25.803c-.236-.79-.779-1.486-1.578-1.875-.922-.449-1.956-.391-2.793.06-.16-.936-.75-1.789-1.67-2.237-1.517-.74-3.348-.11-4.087 1.406-.105.215-.18.437-.23.659-.775 2.556.64 6.341 2.192 7.948 1.23.13 2.953-.198 4.513-.873 1.5-1.46 2.733-3.183 3.653-5.088z"/><path fill="#DD2E44" d="M35.654 27.222c.739-1.516.11-3.347-1.405-4.086-.922-.449-1.956-.391-2.793.06-.16-.936-.75-1.789-1.67-2.237-1.517-.74-3.348-.109-4.087 1.406-.105.215-.18.437-.23.659-.774 2.556.64 6.341 2.192 7.948 2.223.234 6.077-.979 7.615-3.161.145-.179.273-.374.378-.589z"/></svg>',yum:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><circle fill="#FFCC4D" cx="18" cy="18" r="18"/><path fill="#664500" d="M6.999 17c-.15 0-.303-.034-.446-.105-.494-.247-.694-.848-.447-1.342C6.158 15.448 7.424 13 11 13c3.577 0 4.842 2.449 4.894 2.553.247.494.046 1.095-.447 1.342-.491.247-1.085.049-1.336-.436C14.067 16.378 13.28 15 11 15c-2.317 0-3.099 1.433-3.106 1.447-.175.351-.528.553-.895.553zM29 17c.15 0 .303-.034.446-.105.494-.247.694-.848.447-1.342-.052-.105-1.318-2.553-4.894-2.553-3.577 0-4.842 2.449-4.894 2.553-.247.494-.046 1.095.447 1.342.491.247 1.085.049 1.336-.436.044-.081.831-1.459 3.111-1.459 2.317 0 3.099 1.433 3.106 1.447.175.351.528.553.895.553zm.503 6.52c.323-.749.461-1.257.466-1.277.134-.534-.19-1.075-.725-1.21-.536-.136-1.077.188-1.215.723C27.955 22.051 26.081 29 18 29s-9.955-6.949-10.03-7.245c-.138-.534-.679-.858-1.215-.723-.534.135-.858.676-.725 1.21C6.052 22.33 8.331 31 18 31c1.65 0 3.07-.266 4.315-.685 4.33-1.458 6.374-4.91 7.188-6.795z"/><path fill="#E75B70" d="M32.407 26.681l-2.956-3.051s-.68-.438-1.273.568c-.78 1.322-2.075 2.935-3.934 4.171-.781.519-2.139 1.189-2.697 1.318-.735.169-.388.964-.388.964.585-.127 1.051-.301 1.051-.301l.296.296 2.726 2.726c1.728 1.728 5 2 7 0s1.904-4.962.175-6.691z"/><path fill="#DE3146" d="M29.915 31.074c.213-.213.213-.558 0-.771l-3.629-3.629-.796.748 3.653 3.653c.213.212.559.212.772-.001z"/></svg>',disappointed_relieved:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><ellipse fill="#664500" cx="11.5" cy="16.5" rx="2.5" ry="3.5"/><ellipse fill="#664500" cx="24.5" cy="16.5" rx="2.5" ry="3.5"/><path fill="#664500" d="M23.485 27.879C23.474 27.835 22.34 23.5 18 23.5s-5.474 4.335-5.485 4.379c-.053.213.044.431.232.544.188.112.433.086.596-.06.009-.007 1.013-.863 4.657-.863 3.59 0 4.617.83 4.656.863.095.091.219.137.344.137.084 0 .169-.021.246-.064.196-.111.294-.339.239-.557z"/><path fill="#5DADEC" d="M10 30c0 2.762-2.238 5-5 5s-5-2.238-5-5 4-10 5-10 5 7.238 5 10z"/><path fill="#664500" d="M30 13c-5.554 0-7.802-4.367-7.895-4.553-.247-.494-.047-1.095.447-1.342.492-.247 1.092-.048 1.34.443C23.967 7.694 25.713 11 30 11c.553 0 1 .448 1 1 0 .553-.447 1-1 1zM6 13c-.552 0-1-.448-1-1s.448-1 1-1c5.083 0 5.996-3.12 6.033-3.253.145-.528.69-.848 1.219-.709.53.139.851.673.718 1.205C13.921 8.437 12.704 13 6 13z"/></svg>',weary:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><path fill="#664500" d="M16.664 10.543c-.207-.09-.451-.03-.592.148-.009.012-.979 1.202-3.335 1.844-.775.212-1.531.319-2.245.319-.992 0-1.559-.212-1.562-.213-.21-.085-.453-.014-.587.169-.135.184-.128.435.016.612.071.087 1.78 2.147 4.125 2.147.351 0 .702-.047 1.043-.14 2.854-.778 3.41-4.208 3.432-4.354.034-.223-.087-.441-.295-.532zm10.975 2.155c-.138-.181-.38-.245-.59-.159-.006.003-.633.256-1.737.256-.661 0-1.358-.089-2.073-.265-2.369-.583-3.369-1.749-3.377-1.758-.146-.176-.388-.233-.596-.137-.207.095-.323.318-.283.542.026.145.668 3.56 3.539 4.267.311.077.629.116.946.116 2.396 0 4.099-2.16 4.17-2.252.138-.181.137-.43.001-.61zM9.998 10c-.448 0-.855-.303-.969-.757-.133-.535.191-1.077.724-1.212.036-.009 3.593-.961 5.352-4.478.247-.494.846-.695 1.342-.447.494.247.694.848.447 1.342-2.181 4.361-6.471 5.477-6.652 5.523-.081.02-.163.029-.244.029zM26 10c-.08 0-.161-.01-.242-.03-.182-.045-4.472-1.162-6.652-5.523-.247-.494-.047-1.095.447-1.342.493-.247 1.094-.047 1.342.447 1.758 3.517 5.315 4.469 5.352 4.478.533.137.857.681.722 1.215-.116.453-.522.755-.969.755zm-8 18.965c-3.623 0-6.027.422-9 1-.679.131-2 0-2-2 0-4 4.595-9 11-9 6.404 0 11 5 11 9 0 2-1.321 2.132-2 2-2.973-.578-5.377-1-9-1z"/><path fill="#FFF" d="M10 25s3-1 8-1 8 1 8 1-2-4-8-4-8 4-8 4z"/></svg>',grin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><path fill="#664500" d="M16 18c-.419 0-.809-.265-.949-.684C14.848 16.717 14.034 15 13 15c-1.062 0-1.888 1.827-2.051 2.316-.175.523-.738.808-1.265.632-.524-.174-.807-.741-.632-1.265C9.177 16.307 10.356 13 13 13s3.823 3.307 3.949 3.684c.175.524-.108 1.091-.632 1.265-.106.034-.213.051-.317.051zm10 0c-.419 0-.809-.265-.948-.684C24.849 16.717 24.033 15 23 15c-1.062 0-1.889 1.827-2.052 2.316-.175.523-.736.808-1.265.632-.523-.174-.807-.741-.632-1.265C19.177 16.307 20.355 13 23 13s3.823 3.307 3.948 3.684c.175.524-.108 1.091-.632 1.265-.105.034-.212.051-.316.051zm-8 4c-3.623 0-6.027-.422-9-1-.679-.131-2 0-2 2 0 4 4.595 9 11 9 6.404 0 11-5 11-9 0-2-1.321-2.132-2-2-2.973.578-5.377 1-9 1z"/><path fill="#FFF" d="M9 23s3 1 9 1 9-1 9-1-1.344 6.75-9 6.75S9 23 9 23z"/><path fill="#664500" d="M18 27.594c-3.596 0-6.272-.372-7.937-.745l-.825-1.871c.823.312 3.889.897 8.763.897 4.954 0 8.037-.616 8.864-.938l-.701 1.842c-1.634.38-4.419.815-8.164.815z"/></svg>',laughing:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><path fill="#664500" d="M18 22c-3.623 0-6.027-.422-9-1-.679-.131-2 0-2 2 0 4 4.595 9 11 9 6.404 0 11-5 11-9 0-2-1.321-2.132-2-2-2.973.578-5.377 1-9 1z"/><path fill="#FFF" d="M9 23s3 1 9 1 9-1 9-1-2 4-9 4-9-4-9-4z"/><path fill="#664500" d="M6.001 20c-.304 0-.604-.138-.801-.4-.332-.441-.242-1.068.2-1.399.143-.107 2.951-2.183 6.856-2.933C9.781 14.027 7.034 14 6.999 14c-.552-.002-.999-.45-.998-1.002 0-.551.447-.998.999-.998.221 0 5.452.038 8.707 3.293.286.286.372.716.217 1.09-.155.374-.52.617-.924.617-4.613 0-8.363 2.772-8.4 2.8-.18.135-.391.2-.599.2zm23.998-.001c-.208 0-.418-.064-.598-.198C29.363 19.772 25.59 17 21 17c-.404 0-.77-.243-.924-.617-.155-.374-.069-.804.217-1.09C23.549 12.038 28.779 12 29 12c.552 0 .998.447.999.998.001.552-.446 1-.997 1.002-.036 0-2.783.027-5.258 1.268 3.905.75 6.713 2.825 6.855 2.933.441.331.531.956.201 1.398-.196.261-.496.4-.801.4z"/></svg>',wink:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><ellipse fill="#664500" cx="11.5" cy="16.5" rx="2.5" ry="3.5"/><path fill="#664500" d="M28.457 17.797c-.06-.135-1.499-3.297-4.457-3.297-2.957 0-4.397 3.162-4.457 3.297-.092.207-.032.449.145.591.175.142.426.147.61.014.012-.009 1.262-.902 3.702-.902 2.426 0 3.674.881 3.702.901.088.066.194.099.298.099.11 0 .221-.037.312-.109.177-.142.238-.386.145-.594zM5.999 12.458c-.208 0-.419-.065-.599-.2-.442-.331-.531-.958-.2-1.4 3.262-4.35 7.616-4.4 7.8-4.4.552 0 1 .448 1 1 0 .551-.445.998-.996 1-.156.002-3.569.086-6.205 3.6-.195.262-.496.4-.8.4zm23.002 2.125c-.305 0-.604-.138-.801-.4-2.592-3.457-6.961-2.627-7.004-2.62-.547.108-1.068-.243-1.177-.784-.108-.542.243-1.068.784-1.177.231-.047 5.657-1.072 8.996 3.38.332.442.242 1.069-.2 1.4-.179.137-.389.201-.598.201zm-5.747 8.994c-.188-.11-.432-.087-.597.06-.01.008-1.013.863-4.657.863-3.641 0-4.646-.854-4.646-.854-.159-.16-.404-.19-.6-.082-.195.111-.293.339-.238.557.01.044 1.144 4.379 5.484 4.379s5.474-4.335 5.485-4.379c.053-.213-.044-.431-.231-.544z"/></svg>',sunglasses:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18S0 27.941 0 18 8.059 0 18 0s18 8.059 18 18"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#292F33" d="M1.24 11.018c.24.239 1.438.957 1.677 1.675.24.717.72 4.784 2.158 5.981 1.483 1.232 7.077.774 8.148.24 2.397-1.195 2.691-4.531 3.115-6.221.239-.957 1.677-.957 1.677-.957s1.438 0 1.678.956c.424 1.691.72 5.027 3.115 6.221 1.072.535 6.666.994 8.151-.238 1.436-1.197 1.915-5.264 2.155-5.982.238-.717 1.438-1.435 1.677-1.674.241-.239.241-1.196 0-1.436-.479-.478-6.134-.904-12.223-.239-1.215.133-1.677.478-4.554.478-2.875 0-3.339-.346-4.553-.478-6.085-.666-11.741-.24-12.221.238-.239.239-.239 1.197 0 1.436z"/><path fill="#664500" d="M27.335 23.629c-.178-.161-.444-.171-.635-.029-.039.029-3.922 2.9-8.7 2.9-4.766 0-8.662-2.871-8.7-2.9-.191-.142-.457-.13-.635.029-.177.16-.217.424-.094.628C8.7 24.472 11.788 29.5 18 29.5s9.301-5.028 9.429-5.243c.123-.205.084-.468-.094-.628z"/></svg>',neutral_face:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><ellipse fill="#664500" cx="11.5" cy="16.5" rx="2.5" ry="3.5"/><ellipse fill="#664500" cx="24.5" cy="16.5" rx="2.5" ry="3.5"/><path fill="#664500" d="M25 26H11c-.552 0-1-.447-1-1s.448-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1z"/></svg>',winking_eye:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><path fill="#66471B" d="M15.457 15.815c-.06-.135-1.499-3.297-4.457-3.297-2.957 0-4.397 3.162-4.457 3.297-.092.207-.032.449.144.591.177.143.427.147.61.014.013-.009 1.262-.902 3.703-.902 2.426 0 3.674.881 3.702.901.088.066.193.099.298.099.11 0 .221-.037.311-.109.179-.142.238-.386.146-.594z"/><path fill="#F5F8FA" d="M31 13.5c0 3.59-2.91 6.5-6.5 6.5S18 17.09 18 13.5 20.91 7 24.5 7 31 9.91 31 13.5z"/><circle fill="#292F33" cx="24.5" cy="13.5" r="2.5"/><path fill="#66471B" d="M7 21.262c0 3.964 4.596 9 11 9s11-5 11-9c0 0-10.333 2.756-22 0z"/><path fill="#E8596E" d="M18.545 23.604l-1.091-.005c-3.216-.074-5.454-.596-5.454-.596v6.961c0 3 2 6 6 6s6-3 6-6v-6.92c-1.922.394-3.787.542-5.455.56z"/><path fill="#DD2F45" d="M18 31.843c.301 0 .545-.244.545-.545v-7.694l-1.091-.005v7.699c.001.301.245.545.546.545z"/></svg>',hushed:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18S0 27.941 0 18 8.059 0 18 0s18 8.059 18 18"/><ellipse fill="#664500" cx="18" cy="25" rx="4" ry="5"/><ellipse fill="#664500" cx="12" cy="13.5" rx="2.5" ry="3.5"/><ellipse fill="#664500" cx="24" cy="13.5" rx="2.5" ry="3.5"/></svg>',thumbsup:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFDB5E" d="M34.956 17.916c0-.503-.12-.975-.321-1.404-1.341-4.326-7.619-4.01-16.549-4.221-1.493-.035-.639-1.798-.115-5.668.341-2.517-1.282-6.382-4.01-6.382-4.498 0-.171 3.548-4.148 12.322-2.125 4.688-6.875 2.062-6.875 6.771v10.719c0 1.833.18 3.595 2.758 3.885C8.195 34.219 7.633 36 11.238 36h18.044c1.838 0 3.333-1.496 3.333-3.334 0-.762-.267-1.456-.698-2.018 1.02-.571 1.72-1.649 1.72-2.899 0-.76-.266-1.454-.696-2.015 1.023-.57 1.725-1.649 1.725-2.901 0-.909-.368-1.733-.961-2.336.757-.611 1.251-1.535 1.251-2.581z"/><path fill="#EE9547" d="M23.02 21.249h8.604c1.17 0 2.268-.626 2.866-1.633.246-.415.109-.952-.307-1.199-.415-.247-.952-.108-1.199.307-.283.479-.806.775-1.361.775h-8.81c-.873 0-1.583-.71-1.583-1.583s.71-1.583 1.583-1.583H28.7c.483 0 .875-.392.875-.875s-.392-.875-.875-.875h-5.888c-1.838 0-3.333 1.495-3.333 3.333 0 1.025.475 1.932 1.205 2.544-.615.605-.998 1.445-.998 2.373 0 1.028.478 1.938 1.212 2.549-.611.604-.99 1.441-.99 2.367 0 1.12.559 2.108 1.409 2.713-.524.589-.852 1.356-.852 2.204 0 1.838 1.495 3.333 3.333 3.333h5.484c1.17 0 2.269-.625 2.867-1.632.247-.415.11-.952-.305-1.199-.416-.245-.953-.11-1.199.305-.285.479-.808.776-1.363.776h-5.484c-.873 0-1.583-.71-1.583-1.583s.71-1.583 1.583-1.583h6.506c1.17 0 2.27-.626 2.867-1.633.247-.416.11-.953-.305-1.199-.419-.251-.954-.11-1.199.305-.289.487-.799.777-1.363.777h-7.063c-.873 0-1.583-.711-1.583-1.584s.71-1.583 1.583-1.583h8.091c1.17 0 2.269-.625 2.867-1.632.247-.415.11-.952-.305-1.199-.417-.246-.953-.11-1.199.305-.289.486-.799.776-1.363.776H23.02c-.873 0-1.583-.71-1.583-1.583s.709-1.584 1.583-1.584z"/></svg>',thumbsdown:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFDB5E" d="M34.956 18.084c0 .503-.12.975-.321 1.404-1.341 4.326-7.619 4.01-16.549 4.221-1.493.035-.639 1.798-.115 5.668.341 2.517-1.282 6.382-4.01 6.382-4.498 0-.171-3.548-4.148-12.322-2.125-4.688-6.875-2.062-6.875-6.771V5.948c0-1.833.18-3.595 2.758-3.885C8.195 1.781 7.633 0 11.238 0h18.044c1.838 0 3.333 1.496 3.333 3.334 0 .762-.267 1.456-.698 2.018 1.02.571 1.72 1.649 1.72 2.899 0 .76-.266 1.454-.696 2.015 1.023.57 1.725 1.649 1.725 2.901 0 .909-.368 1.733-.961 2.336.757.611 1.251 1.535 1.251 2.581z"/><path fill="#EE9547" d="M23.02 14.751h8.604c1.17 0 2.268.626 2.866 1.633.246.415.109.952-.307 1.199-.415.247-.952.108-1.199-.307-.283-.479-.806-.775-1.361-.775h-8.81c-.873 0-1.583.71-1.583 1.583s.71 1.583 1.583 1.583H28.7c.483 0 .875.392.875.875s-.392.875-.875.875h-5.888c-1.838 0-3.333-1.495-3.333-3.333 0-1.025.475-1.932 1.205-2.544-.615-.605-.998-1.445-.998-2.373 0-1.028.478-1.938 1.212-2.549-.611-.604-.99-1.441-.99-2.367 0-1.12.559-2.108 1.409-2.713-.524-.589-.852-1.356-.852-2.204 0-1.838 1.495-3.333 3.333-3.333h5.484c1.17 0 2.269.625 2.867 1.632.247.415.11.952-.305 1.199-.416.245-.953.11-1.199-.305-.285-.479-.808-.776-1.363-.776h-5.484c-.873 0-1.583.71-1.583 1.583s.71 1.583 1.583 1.583h6.506c1.17 0 2.27.626 2.867 1.633.247.416.11.953-.305 1.199-.419.251-.954.11-1.199-.305-.289-.487-.799-.777-1.363-.777h-7.063c-.873 0-1.583.711-1.583 1.584s.71 1.583 1.583 1.583h8.091c1.17 0 2.269.625 2.867 1.632.247.415.11.952-.305 1.199-.417.246-.953.11-1.199-.305-.289-.486-.799-.776-1.363-.776H23.02c-.873 0-1.583.71-1.583 1.583s.709 1.584 1.583 1.584z"/></svg>',smile:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#FFCC4D" d="M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"/><ellipse fill="#664500" cx="11.5" cy="12.5" rx="2.5" ry="5.5"/><ellipse fill="#664500" cx="24.5" cy="12.5" rx="2.5" ry="5.5"/><path fill="#664500" d="M18 22c-3.623 0-6.027-.422-9-1-.679-.131-2 0-2 2 0 4 4.595 9 11 9 6.404 0 11-5 11-9 0-2-1.321-2.132-2-2-2.973.578-5.377 1-9 1z"/><path fill="#FFF" d="M9 23s3 1 9 1 9-1 9-1-2 4-9 4-9-4-9-4z"/></svg>',tada:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#DD2E44" d="M11.626 7.488c-.112.112-.197.247-.268.395l-.008-.008L.134 33.141l.011.011c-.208.403.14 1.223.853 1.937.713.713 1.533 1.061 1.936.853l.01.01L28.21 24.735l-.008-.009c.147-.07.282-.155.395-.269 1.562-1.562-.971-6.627-5.656-11.313-4.687-4.686-9.752-7.218-11.315-5.656z"/><path fill="#EA596E" d="M13 12L.416 32.506l-.282.635.011.011c-.208.403.14 1.223.853 1.937.232.232.473.408.709.557L17 17l-4-5z"/><path fill="#A0041E" d="M23.012 13.066c4.67 4.672 7.263 9.652 5.789 11.124-1.473 1.474-6.453-1.118-11.126-5.788-4.671-4.672-7.263-9.654-5.79-11.127 1.474-1.473 6.454 1.119 11.127 5.791z"/><path fill="#AA8DD8" d="M18.59 13.609c-.199.161-.459.245-.734.215-.868-.094-1.598-.396-2.109-.873-.541-.505-.808-1.183-.735-1.862.128-1.192 1.324-2.286 3.363-2.066.793.085 1.147-.17 1.159-.292.014-.121-.277-.446-1.07-.532-.868-.094-1.598-.396-2.11-.873-.541-.505-.809-1.183-.735-1.862.13-1.192 1.325-2.286 3.362-2.065.578.062.883-.057 1.012-.134.103-.063.144-.123.148-.158.012-.121-.275-.446-1.07-.532-.549-.06-.947-.552-.886-1.102.059-.549.55-.946 1.101-.886 2.037.219 2.973 1.542 2.844 2.735-.13 1.194-1.325 2.286-3.364 2.067-.578-.063-.88.057-1.01.134-.103.062-.145.123-.149.157-.013.122.276.446 1.071.532 2.037.22 2.973 1.542 2.844 2.735-.129 1.192-1.324 2.286-3.362 2.065-.578-.062-.882.058-1.012.134-.104.064-.144.124-.148.158-.013.121.276.446 1.07.532.548.06.947.553.886 1.102-.028.274-.167.511-.366.671z"/><path fill="#77B255" d="M30.661 22.857c1.973-.557 3.334.323 3.658 1.478.324 1.154-.378 2.615-2.35 3.17-.77.216-1.001.584-.97.701.034.118.425.312 1.193.095 1.972-.555 3.333.325 3.657 1.479.326 1.155-.378 2.614-2.351 3.17-.769.216-1.001.585-.967.702.033.117.423.311 1.192.095.53-.149 1.084.16 1.233.691.148.532-.161 1.084-.693 1.234-1.971.555-3.333-.323-3.659-1.479-.324-1.154.379-2.613 2.353-3.169.77-.217 1.001-.584.967-.702-.032-.117-.422-.312-1.19-.096-1.974.556-3.334-.322-3.659-1.479-.325-1.154.378-2.613 2.351-3.17.768-.215.999-.585.967-.701-.034-.118-.423-.312-1.192-.096-.532.15-1.083-.16-1.233-.691-.149-.53.161-1.082.693-1.232z"/><path fill="#AA8DD8" d="M23.001 20.16c-.294 0-.584-.129-.782-.375-.345-.432-.274-1.061.156-1.406.218-.175 5.418-4.259 12.767-3.208.547.078.927.584.849 1.131-.078.546-.58.93-1.132.848-6.493-.922-11.187 2.754-11.233 2.791-.186.148-.406.219-.625.219z"/><path fill="#77B255" d="M5.754 16c-.095 0-.192-.014-.288-.042-.529-.159-.829-.716-.67-1.245 1.133-3.773 2.16-9.794.898-11.364-.141-.178-.354-.353-.842-.316-.938.072-.849 2.051-.848 2.071.042.551-.372 1.031-.922 1.072-.559.034-1.031-.372-1.072-.923-.103-1.379.326-4.035 2.692-4.214 1.056-.08 1.933.287 2.552 1.057 2.371 2.951-.036 11.506-.542 13.192-.13.433-.528.712-.958.712z"/><circle fill="#5C913B" cx="25.5" cy="9.5" r="1.5"/><circle fill="#9266CC" cx="2" cy="18" r="2"/><circle fill="#5C913B" cx="32.5" cy="19.5" r="1.5"/><circle fill="#5C913B" cx="23.5" cy="31.5" r="1.5"/><circle fill="#FFCC4D" cx="28" cy="4" r="2"/><circle fill="#FFCC4D" cx="32.5" cy="8.5" r="1.5"/><circle fill="#FFCC4D" cx="29.5" cy="12.5" r="1.5"/><circle fill="#FFCC4D" cx="7.5" cy="23.5" r="1.5"/></svg>'}},13752:function(e,t,n){"use strict";n.r(t),n.d(t,{Text:function(){return N}});var r=n(16584),i=n(98661),o=n(10018);const a=/\uFE0F/g,s=String.fromCharCode(8205),l=()=>Boolean(null===o.default||void 0===o.default?void 0:o.default.disable_emoji),c=e=>{let t="string"==typeof e?parseInt(e,16):e;return t<65536?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))};var u=n(94184),d=n.n(u),g=n(45926),p=n(36581),f=n(45683),h=n(38042);const m=({children:e,className:t,source:n})=>(0,r.tZ)("jdiv",{className:t,draggable:!1,alt:e,style:{backgroundImage:`url(${n})`},children:e});var _=n(93861),v={emojiIcon:"emojiIcon__xHfU1",emojiMessages:"emojiMessages__v0K4L",__isAlone:"__isAlone__dxjO9",iconSuccess:"iconSuccess__UAzfk",icon:"icon__Pth2N"};const y=(0,i.memo)(({icon:e,className:t,type:n="emojiMessages",isAlone:i=!1})=>{var o;const a=(0,g.hasExternalEmojiProcessor)(),s=d()(v.emojiIcon,{[v[n]]:n,[v.__isAlone]:i},t);if(!_.q[e]){const t=null!==(o=p.m[e])&&void 0!==o?o:e,n=c(t),i=(0,f.getEmojiURL)(t);return i.endsWith("/.svg")?((0,h.telemetry)("asset_error",{param1:"emoji",param2:e},{once:!0}),null):(0,r.tZ)(m,{source:i,className:s,children:a?null:n})}const l=c(e);return(0,r.tZ)("jdiv",{className:s,children:(0,r.tZ)("jdiv",{className:v.icon,style:{backgroundImage:`url("data:image/svg+xml,${encodeURIComponent(_.q[e])}")`},alt:l,children:a?null:l})})});var C=n(53400),E=n(30633),b=n(68337),S=n.n(b),T=n(50754),D=n.n(T),w=n(52161);const O=S()().add("file:",null),A=/(http|https)?:\/\//,M=/(http|https|ftp)?:\/\//,I=/mailto/,R=e=>{const t=e.replace(/https?:\/\//,""),n=t.split("/")[0],r=D().toUnicode(n),i=t.replace(n,r);let o=i;try{o=decodeURIComponent(i)}catch(e){}return(e=>e.length>80?`${e.slice(0,30)}...${e.slice(-30)}`:e)((0,w.escape)(o))},k=(e,t)=>A.test(t)||I.test(e)?e:`https://${t}`,L=e=>M.test(e)?e.replace(M,""):e,P=(e,t,n="string")=>{let r=0;if("array"===n){const n=[];return t.forEach(({index:i,lastIndex:o,url:a,text:s},l)=>{const c=e.substring(r,i);r=o,n.push(c,{url:k(a,s),title:L(s),text:R(s)}),l===t.length-1&&n.push(e.substring(r,e.length))}),n}return t.reduce((n,{index:i,lastIndex:o,url:a,text:s},l)=>{const c=e.substring(r,i);return r=o,n+=`${c}${((e,t,n)=>`<a href="${e}" target="_blank" rel="noopener" title="${t}">${n}</a>`)(k(a,s),L(s),R(s))}`,l===t.length-1&&(n+=e.substring(r,e.length)),n},"")},x=(e,t,n)=>{const{disableLinkify:r,nativeEmoji:i}=n,o=r?null:((e,t="string")=>{const n=O.test(e);return"array"===t?n?P(e,O.match(e),t):null:n?P(e,O.match(e)):e})(e,"array"),a=i?null:e.match(E.EMOJI_REGEX);let s=[e];if(o&&(s=o.map((e,n)=>"string"!=typeof e?t.link(`link-${n}`,e):e)),a){const e=a.map((e,n)=>t.emoji(`emoji-${n}`,e));let n=0;s=s.flatMap(t=>"string"!=typeof t||-1===t.search(E.EMOJI_REGEX)?t:t.split(E.EMOJI_REGEX).reduce((t,r,i,{length:o})=>(t.push(r),i!==o-1&&(t.push(e[n]),n++),t),[]))}return s},N=(0,i.memo)(({children:e,className:t,nativeEmoji:n=l(),disableLinkify:i=!1,disableAloneEmoji:o=!1,includeWrapper:c=!1,qaId:u})=>{const d="string"==typeof e,g=!(!d||o)&&(e=>{let t=0;const n=e.replace(E.EMOJI_REGEX,()=>(t++,"")).match(/\S/gu);return 1===t&&!n})(e),p=d?x(e,{emoji:(e,t)=>{return(0,r.tZ)(y,{icon:(n=t,((e,t)=>{const n=[];let r=0,i=0,o=0;for(;o<e.length;)r=e.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(r-56320)).toString(16)),i=0):55296<=r&&r<=56319?i=r:n.push(r.toString(16));return n.join(t||"-")})(n.indexOf(s)<0?n.replace(a,""):n,i)),isAlone:g},e);var n,i},link:(e,{url:t,title:n,text:i})=>(0,r.tZ)("a",Object.assign({href:t,target:"_blank",rel:"noopener noreferrer",title:n},(0,C.locator)(`${u}_TEXT_LINK`),{children:i}),e)},{nativeEmoji:n,disableLinkify:i}):e;return d&&c?(0,r.tZ)("jdiv",Object.assign({className:t},(0,C.locator)(`${u}_TEXT_CONTAINER`),{children:p})):(0,r.tZ)(r.HY,{children:p})})},5852:function(e,t,n){"use strict";n.d(t,{XZ:function(){return D},mZ:function(){return X},II:function(){return h},Ph:function(){return q}});var r=n(16584),i=n(98661),o=n(94184),a=n.n(o),s=n(74784),l=n(53400);var c={container:"container__ZRCQp",input:"input__Q09iC",label:"label__gMOK3",__filled:"__filled__HzOiS",__outlined:"__outlined__lhNJp",__hasLabel:"__hasLabel__LhtPQ",__hasValue:"__hasValue__NqqFT",__hasDisabled:"__hasDisabled___lyCa",mask:"mask__xKBAk",__hasValid:"__hasValid__Gveie",__hasError:"__hasError__sjVKH",__hasValidation:"__hasValidation__TDoCn",validation:"validation__Wo6cX",__hasLeftPlace:"__hasLeftPlace__iUyFv",__autoHeight:"__autoHeight__wLvID",icon:"icon__G4e_c",__error:"__error__hjhGw",__visible:"__visible__CEghJ",leftPlace:"leftPlace__JXx4D",maxLength:"maxLength__d3PwS"};const u=(e,t)=>`${e}${t.slice(e.length)}`;var d="mask__XnrHk",g="__visible__mQQA7";const p=({className:e,formattedValue:t,matchedCountry:n})=>{const i=`+${null==n?void 0:n.phone_code} ${null==n?void 0:n.phone_format}`,o=Boolean(t)&&t.length<=`+${null==n?void 0:n.phone_code}`.length;return(0,r.tZ)("jdiv",{className:a()(d,{[g]:o},e),children:o?u(t,i):i})};var f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const h=(0,i.forwardRef)((e,t)=>{const{computedLabel:n,computedPlaceholder:i,computedMaxLength:o,hasLabel:u,hasValue:d,hasDisabled:g,hasValid:h,hasError:m,hasValidation:_,hasLeftPlace:v}=(({label:e,value:t,placeholder:n,disabled:r,valid:i,error:o,required:a,leftPlace:s,maxLength:l})=>{const c=Boolean(e),u="string"==typeof t&&Boolean(t.trim()),d=Boolean(r),g=Boolean(i),p=Boolean(o),f=Boolean(i||o),h=Boolean(s);return{computedLabel:a?`${e}*`:e,computedPlaceholder:n&&a?`${n}*`:n,computedMaxLength:"string"==typeof t&&l?l-t.length:!u&&l?l:0,hasLabel:c,hasValue:u,hasDisabled:d,hasValid:g,hasError:p,hasValidation:f,hasLeftPlace:h}})(e),{containerRef:y,containerClassName:C,className:E,variant:b="filled",valid:S,leftPlace:T,maskProps:D,showMaxLengthCounter:w=!0,autoHeight:O=!1,qaId:A,onChange:M}=e,I=f(e,["containerRef","containerClassName","className","variant","valid","leftPlace","maskProps","showMaxLengthCounter","autoHeight","qaId","onChange"]),R=e=>{null==M||M(e.currentTarget.value,e),O&&(e.currentTarget.style.setProperty("--jv-input-auto-height","46px"),e.currentTarget.style.setProperty("--jv-input-auto-height",`${e.currentTarget.scrollHeight}px`))};return(0,r.BX)("jdiv",{ref:y,className:a()(c.container,c[`__${b}`],{[c.__hasLabel]:u,[c.__hasValue]:d,[c.__hasDisabled]:g,[c.__hasLeftPlace]:v,[c.__hasValidation]:_,[c.__hasValid]:h,[c.__hasError]:m},C),children:[T&&(0,r.tZ)("jdiv",{className:c.leftPlace,children:T}),"textarea"===e.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("textarea",Object.assign({},I,{ref:t,className:a()(c.input,{[c.__autoHeight]:O},E),placeholder:i,onChange:R,required:void 0},(0,l.locator)(A))),e.maxLength&&w&&(0,r.tZ)("jdiv",{className:c.maxLength,children:o})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",Object.assign({},I,{ref:t,className:a()(c.input,E),placeholder:i,onChange:R,required:void 0},(0,l.locator)(A))),D&&(0,r.tZ)(p,Object.assign({},D,{className:c.mask}))]}),(0,r.BX)("jdiv",{className:c.validation,children:[(0,r.tZ)(s.SvgIcon,{icon:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">\n    <defs>\n        <path id="a" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd" transform="rotate(-90 12 12)">\n        <mask id="b" fill="#fff">\n            <use xlink:href="#a"/>\n        </mask>\n        <g stroke="#18C139" stroke-linecap="round" stroke-width="1.5" mask="url(#b)">\n            <path d="M16.343 17.814l-7.657-5.657L12.343 8.5"/>\n        </g>\n    </g>\n</svg>\n',className:a()(c.icon,{[c.__visible]:S}),qaId:"INPUT_VALID_ICON"}),(0,r.tZ)(s.SvgIcon,{icon:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6c-3.312 0-6 2.688-6 6s2.688 6 6 6 6-2.688 6-6-2.688-6-6-6Zm.6 9h-1.2v-1.2h1.2V15Zm0-2.4h-1.2V9h1.2v3.6Z" fill="#e54c44"/></svg>',className:a()(c.icon,c.__error,{[c.__visible]:m}),qaId:"INPUT_INVALID_ICON"})]}),u&&(0,r.tZ)("jdiv",{className:c.label,children:n})]})});h.displayName="Input";var m="label__Y_2De",_="checkbox__V9vC7",v="input__el2Zo",y="switch__hOzyj",C="__hasError__BU6IX",E="container__BPP5J",b="text__L3SEP",S="required__FZXIN",T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const D=(0,i.forwardRef)((e,t)=>{const{variant:n="default",value:o,label:s,error:c,required:u,className:d,labelClassName:g,containerClassName:p,textClassName:f,qaId:h,onChange:D}=e,w=T(e,["variant","value","label","error","required","className","labelClassName","containerClassName","textClassName","qaId","onChange"]),O=(0,i.useRef)(null),A=Boolean(c);return(0,i.useImperativeHandle)(t,()=>O.current,[]),(0,r.BX)("jdiv",{className:a()(m,{[C]:A},g),onClick:e=>{var t;"A"!==e.target.tagName&&(null==D||D(!(null===(t=O.current)||void 0===t?void 0:t.checked)))},children:[(0,r.BX)("jdiv",{className:a()(E,p),children:[(0,r.tZ)("input",Object.assign({},w,{ref:O,type:"checkbox",checked:o,className:a()(v,d)})),(0,r.tZ)("jdiv",Object.assign({className:a()({[_]:"default"===n,[y]:"switch"===n})},(0,l.locator)(h)))]}),s&&(0,r.BX)("jdiv",{className:a()(b,f),children:[s,u&&(0,r.tZ)("jdiv",{className:S,children:"*"})]})]})});D.displayName="Checkbox";var w=n(54442),O=n(4231),A=n(8145);var M="list__Q5GPH",I="__show__Qz0ws",R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const k=(0,i.forwardRef)((e,t)=>{var{children:n,listMaxHeight:i,isShow:o}=e,s=R(e,["children","listMaxHeight","isShow"]);return(0,r.tZ)("jdiv",Object.assign({},s,{ref:t,className:a()(M,{[I]:o}),style:{"--jv-select-list-max-height":`${i}px`},onWheel:e=>{e.stopPropagation()},children:n}))});k.displayName="List";var L="container__IZAmg",P="__bottom__igxnx",x="pane__UvWIm",N="__top___TEKz",F="__show__Kq3kF";const j=(0,i.forwardRef)(({children:e,isShow:t,isReverse:n=!1},i)=>(0,r.tZ)("jdiv",{ref:i,className:a()(L,{[F]:t,[P]:!n,[N]:n}),children:(0,r.tZ)("jdiv",{className:x,children:e})}));j.displayName="SelectListWrapper";var B="item__pwWrI",U="__selected__PznGy",V=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const W=e=>{var{children:t,isSelected:n}=e,i=V(e,["children","isSelected"]);return(0,r.tZ)("jdiv",Object.assign({className:a()(B,{[U]:n})},i,{onTouchMove:e=>{e.stopPropagation()},children:t}))};var G=n(18357);const H=({children:e,isBigList:t,onChange:n})=>t?(0,r.tZ)(G.df,{as:"jdiv",onChange:n,children:e}):(0,r.tZ)(r.HY,{children:e});var $=n(1667);const z=(e,t,n)=>e?(e=>t=>{const{state:n,update:r,searchValue:i}=e;t&&(i.trim().length>0?r(10):r(n+10))})(n):t?(e=>t=>{const{state:n,update:r,searchValue:i}=e;t&&(i.trim().length>0?r(10):r(n-10))})(n):void 0;var Z={container:"container__AJdx0",label:"label__o1Cmu",__filled:"__filled__zn6I_",__outlined:"__outlined__IR2MU",__inset:"__inset___yw7G",selectedValue:"selectedValue__EUEk1",arrow:"arrow__bUQWt",__hasValue:"__hasValue__OhPbK",__hasFocus:"__hasFocus__cEFpv",__hasDisabled:"__hasDisabled__Evv9U",__hasValid:"__hasValid__Ihlfc",__hasError:"__hasError__qFxws",__hasLooseList:"__hasLooseList__UepVU",__hasReset:"__hasReset__oTxAC",__isSingle:"__isSingle__y4zq_",reset:"reset__jvVvV"};const q=(0,i.forwardRef)((e,t)=>{const{computedLabel:n,hasLabel:o,hasValid:s,hasError:c,hasOwnShow:u}=(({label:e,valid:t,error:n,ownShow:r,required:i})=>{const o="boolean"==typeof r,a=Boolean(e);return{hasOwnShow:o,computedLabel:i?`${e}*`:e,hasValid:Boolean(t),hasError:Boolean(n),hasLabel:a}})(e),{containerClassName:d,searchContainerClassName:g,variant:p="filled",disabled:f=!1,required:m,rawOutput:_=!1,showSearch:v=!1,showReset:y=!1,looseList:C=!1,showTop:E=!1,searchPlaceholder:b,listMaxHeight:S=130,defaultValue:T,ownValue:D,ownShow:M,options:I,qaId:R,filter:L,selectedValueRender:P,optionRender:x,onChange:N,onValueClick:F}=e,[B,U]=(0,i.useState)(""),V=(0,i.useMemo)(()=>{if(!v)return I;const e=L?L(I,B):((e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(({value:e,label:t})=>{const r=t.toLowerCase().includes(n),i=!(0,$.k)(e)&&String(e).toLowerCase().includes(n);return r||i}):e})(I,B);return e.length>0?e:I},[I,B,v,L]),G=1===I.length,q=I.length>=100,K=(0,i.useRef)(null),Y=(0,i.useRef)(null),J=(0,i.useRef)(null),[Q,X]=(0,w.useToggle)(!1),[ee,te]=(0,i.useState)(()=>((e,t)=>{const n=t.find(t=>t.value===String(e));return null!=n?n:e?{value:e,label:e}:""})(T,V)),[ne,re]=(0,i.useState)(10),ie=null!=D?D:ee,oe=u?Boolean(M):Q,ae=y&&!m&&Boolean(ie.value),se=e=>{const t=_?e:null==e?void 0:e.value;null==N||N(t)};return(0,i.useImperativeHandle)(t,()=>K.current,[]),(0,O.useClickOutside)(K,()=>{u||X(!1)}),(0,r.BX)("jdiv",{ref:K,className:a()(Z.container,Z[`__${p}`],{[Z.__hasValue]:Boolean(ie.value),[Z.__hasFocus]:oe,[Z.__hasDisabled]:f,[Z.__hasValid]:s,[Z.__hasError]:c,[Z.__hasLooseList]:C,[Z.__hasReset]:ae},d),children:[(0,r.BX)("jdiv",Object.assign({className:a()(Z.selectedValue,{[Z.__isSingle]:G}),onClick:()=>{G||(null==F||F(!oe,J.current),u||X(),oe||setTimeout(()=>{var e;null===(e=Y.current)||void 0===e||e.focus()},150))}},(0,l.locator)(`${R}_SELECT_VALUE`),{children:[P?P(ie,G):ie.label,ae&&(0,r.tZ)("jdiv",{className:Z.reset,onClick:e=>{e.stopPropagation();const t={value:"",label:""};te(t),se(t)},children:(0,r.tZ)(A.Tw,{})}),!G&&(0,r.tZ)("jdiv",{className:Z.arrow})]})),o&&(0,r.tZ)("jdiv",{className:Z.label,children:n}),(0,r.BX)(j,{ref:J,isShow:oe,isReverse:E,children:[v&&I.length>5&&(0,r.tZ)(h,{ref:Y,type:"text",containerClassName:g,value:B,placeholder:b,autoComplete:"search-off",onChange:U,qaId:`${R}_SELECT_SEARCH`}),(0,r.tZ)(k,Object.assign({listMaxHeight:S,isShow:oe},(0,l.locator)(`${R}_SELECT_LIST`),{children:V.map((e,t)=>q&&t>ne?null:(0,r.tZ)(H,{isBigList:q,onChange:z(t===ne-2,ne>10&&t===ne-20,{state:ne,searchValue:B,update:re}),children:(0,r.tZ)(W,Object.assign({isSelected:e.value===ie.value,onClick:()=>(e=>{u||X(!1),v&&U(""),void 0===D&&te(e),se(e)})(e)},(0,l.locator)(`${R}_SELECT_OPTION_${t+1}`),{children:x?x(e,t):e.label}))},e.value))}))]})]})});var K="container__zpa9c",Y="circle__HxO0s",J="progress___b0zq",Q="text__qUIzo";const X=({className:e,size:t=100,progress:n,maxProgress:i=100,text:o,hideText:s=!1})=>{const{viewBox:l,circleRadius:c,circleX:u,circleY:d,circleWidth:g,circleCircumference:p,percentage:f,textFontSize:h,cssVars:m}=(({size:e,progress:t,maxProgress:n})=>{const r=e/2,i=r-10,o=r,a=r,s=Math.floor(r/6),l=Math.PI*i*2;return{viewBox:`0 0 ${e} ${e}`,circleRadius:i,circleX:o,circleY:a,circleWidth:s,circleCircumference:l,percentage:Math.round(l*((n-t)/n)),textFontSize:3*s,cssVars:{"--jv-circle-size":`${e}px`}}})({size:t,progress:n,maxProgress:i});return(0,r.tZ)("jdiv",{className:a()(K,e),style:m,children:(0,r.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:l,children:[(0,r.tZ)("circle",{r:c,cx:u,cy:d,className:Y,strokeWidth:g}),(0,r.tZ)("circle",{r:c,cx:u,cy:d,className:J,strokeWidth:g,strokeDasharray:p,strokeDashoffset:f}),!s&&(0,r.tZ)("text",{className:Q,x:u,y:d,fontSize:h,dominantBaseline:"central",children:null!=o?o:n})]})})}},11500:function(e,t,n){"use strict";n.d(t,{XZ:function(){return oe},Wr:function(){return ie},wc:function(){return ae},II:function(){return te},_M:function(){return se},Y2:function(){return re},sb:function(){return ne},Ph:function(){return le}});var r=n(16584),i=n(98661),o=n(87536),a=n(5852),s=n(94184),l=n.n(s),c=e=>!e.match(/[\s()-.\/]/),u=(e,t,n)=>e.map((e,r)=>r>=t&&c(e)?n:e),d={7:["8"]},g={EE:[7,8],EG:[7,10],RS:[8,10],NZ:[10,12],BR:[10,12],BG:[8,12],MX:[10,12],DE:[10,12],AT:[10,12],KH:[10,12],CH:[9,12],IL:[8,12]},p=(e,t)=>{var n;let{phoneCode:r,countryCode:i,previousMatch:o,geoIPCountryCode:a,reverseSearch:s=!1}=t,l=i?e.find(e=>e.code===i):void 0,{result:c,phoneCode:u}=((e,t)=>{let{phoneCode:n}=t,{reverseSearch:r}=t,i=e.filter(e=>{var t;return e.phone_code===n||(null==(t=d[e.phone_code])?void 0:t.includes(n))});if(r&&n)for(;!i.length&&n.length>0;)n=n.substring(0,n.length-1),i=e.filter(e=>{var t;return e.phone_code===n||(null==(t=d[e.phone_code])?void 0:t.includes(n))});return{result:i,phoneCode:n}})(e,{phoneCode:r,reverseSearch:s});switch(!0){case"RU"===a&&2===c.length&&"KZ"===(null==(n=c[0])?void 0:n.code):return c[1]||l||o||e[0];case"1"===u:return c[3]||l||o||e[0];default:return c[0]||l||o||e[0]}},f=(e,t)=>`${e.length?"+":""}${t?((e,t)=>{let n="object"==typeof t?t.pattern:t,r="object"==typeof t?t.placeholder:void 0,i=n.replace(/\W/g,""),o=e.replace(/\W/g,""),a=n.split(""),s=0,l=0;for(;l<a.length;l++){if(s>=o.length){if(i.length===o.length)return a.join("");if(void 0!==r&&i.length>o.length)return u(a,l,r).join("");break}if(a[l]&&c(a[l])&&o[s].match(/[0-9]/))a[l]=o[s++];else if(a[l]&&c(a[l]))return void 0!==r?u(a,l,r).join(""):a.slice(0,l).join("")}return a.join("").substring(0,l)})(e,{pattern:`${t.phone_code} ${t.phone_format}`}):e}`,h=(e,t)=>{let n=e.trim().replace(/[^0-9]/g,""),r=f(n,t),i=n.substring(0,4);return 4===i.length&&"RU"===(null==t?void 0:t.code)&&n.startsWith("8")&&(n=`7${n.substring(1)}`,r=r.replace("+8","+7")),{cleanValue:n,phoneCodeSubstring:i,formattedValue:r}},m=[{code:"CA",name:"Canada",name_ru:"",phone_code:"1",phone_format:"204-234-5678"},{code:"DO",name:"Dominican Republic",name_ru:" ",phone_code:"1",phone_format:"809-234-5678"},{code:"PR",name:"Puerto Rico",name_ru:"-",phone_code:"1",phone_format:"787-234-5678"},{code:"US",name:"United States (USA)",name_ru:"   ()",phone_code:"1",phone_format:"201-555-0123"},{code:"KZ",name:"Kazakhstan",name_ru:"",phone_code:"7",phone_format:"771 000 9998"},{code:"RU",name:"Russian Federation",name_ru:"",phone_code:"7",phone_format:"912 345-67-89"},{code:"EG",name:"Egypt",name_ru:"",phone_code:"20",phone_format:"100 123 4567"},{code:"ZA",name:"South Africa",name_ru:"",phone_code:"27",phone_format:"71 123 4567"},{code:"GR",name:"Greece",name_ru:"",phone_code:"30",phone_format:"691 234 5678"},{code:"NL",name:"Netherlands",name_ru:"",phone_code:"31",phone_format:"6 12345678"},{code:"BE",name:"Belgium",name_ru:"",phone_code:"32",phone_format:"470 12 34 56"},{code:"FR",name:"France",name_ru:"",phone_code:"33",phone_format:"6 12 34 56 78"},{code:"ES",name:"Spain",name_ru:"",phone_code:"34",phone_format:"612 34 56 78"},{code:"HU",name:"Hungary",name_ru:"",phone_code:"36",phone_format:"20 123 4567"},{code:"IT",name:"Italy",name_ru:"",phone_code:"39",phone_format:"312 345 6789"},{code:"RO",name:"Romania",name_ru:"",phone_code:"40",phone_format:"712 345 678"},{code:"CH",name:"Switzerland",name_ru:"",phone_code:"41",phone_format:"26 123 45 678"},{code:"AT",name:"Austria",name_ru:"",phone_code:"43",phone_format:"644 123456"},{code:"GB",name:"United Kingdom",name_ru:"",phone_code:"44",phone_format:"7797 123456"},{code:"DK",name:"Denmark",name_ru:"",phone_code:"45",phone_format:"20 12 34 56"},{code:"SE",name:"Sweden",name_ru:"",phone_code:"46",phone_format:"70 123 45 67"},{code:"NO",name:"Norway",name_ru:"",phone_code:"47",phone_format:"412 34 567"},{code:"PL",name:"Poland",name_ru:"",phone_code:"48",phone_format:"512 345 678"},{code:"DE",name:"Germany",name_ru:"",phone_code:"49",phone_format:"151 23456789"},{code:"PE",name:"Peru",name_ru:"",phone_code:"51",phone_format:"912 345 678"},{code:"MX",name:"Mexico",name_ru:"",phone_code:"52",phone_format:"1 222 123 4567"},{code:"CU",name:"Cuba",name_ru:"",phone_code:"53",phone_format:"5 1234567"},{code:"AR",name:"Argentina",name_ru:"",phone_code:"54",phone_format:"9 11 2345-6789"},{code:"BR",name:"Brazil",name_ru:"",phone_code:"55",phone_format:"11 61234-5678"},{code:"CL",name:"Chile",name_ru:"",phone_code:"56",phone_format:"9 6123 4567"},{code:"CO",name:"Colombia",name_ru:"",phone_code:"57",phone_format:"321 1234567"},{code:"VE",name:"Venezuela",name_ru:"",phone_code:"58",phone_format:"412-1234567"},{code:"MY",name:"Malaysia",name_ru:"",phone_code:"60",phone_format:"12-345 6789"},{code:"AU",name:"Australia",name_ru:"",phone_code:"61",phone_format:"412 345 678"},{code:"ID",name:"Indonesia",name_ru:"",phone_code:"62",phone_format:"812-345-67890"},{code:"PH",name:"Philippines",name_ru:"",phone_code:"63",phone_format:"905 123 4567"},{code:"NZ",name:"New Zealand",name_ru:" ",phone_code:"64",phone_format:"21 123 45678"},{code:"SG",name:"Singapore",name_ru:"",phone_code:"65",phone_format:"8123 4567"},{code:"TH",name:"Thailand",name_ru:"",phone_code:"66",phone_format:"81 234 5678"},{code:"JP",name:"Japan",name_ru:"",phone_code:"81",phone_format:"70-1234-5678"},{code:"KR",name:"South Korea",name_ru:" ",phone_code:"82",phone_format:"10-2345-6789"},{code:"VN",name:"Vietnam",name_ru:"",phone_code:"84",phone_format:"91 234 56 78"},{code:"CN",name:"China",name_ru:"",phone_code:"86",phone_format:"131 2345 6789"},{code:"TR",name:"Turkey",name_ru:"",phone_code:"90",phone_format:"501 234 5678"},{code:"IN",name:"India",name_ru:"",phone_code:"91",phone_format:"91 23 456789"},{code:"PK",name:"Pakistan",name_ru:"",phone_code:"92",phone_format:"301 2345678"},{code:"AF",name:"Afghanistan",name_ru:"",phone_code:"93",phone_format:"70 123 4567"},{code:"LK",name:"Sri Lanka",name_ru:"-",phone_code:"94",phone_format:"71 234 5678"},{code:"MM",name:"Myanmar",name_ru:"",phone_code:"95",phone_format:"9 212 3456"},{code:"IR",name:"Iran",name_ru:"",phone_code:"98",phone_format:"912 345 6789"},{code:"SS",name:"South Sudan",name_ru:" ",phone_code:"211",phone_format:"977 123 456"},{code:"MA",name:"Morocco",name_ru:"",phone_code:"212",phone_format:"650-123456"},{code:"DZ",name:"Algeria",name_ru:"",phone_code:"213",phone_format:"551 23 45 67"},{code:"TN",name:"Tunisia",name_ru:"",phone_code:"216",phone_format:"20 123 456"},{code:"LY",name:"Libya",name_ru:"",phone_code:"218",phone_format:"91-2345678"},{code:"GM",name:"Gambia",name_ru:"",phone_code:"220",phone_format:"301 2345"},{code:"SN",name:"Senegal",name_ru:"",phone_code:"221",phone_format:"70 101 23 45"},{code:"MR",name:"Mauritania",name_ru:"",phone_code:"222",phone_format:"22 12 34 56"},{code:"ML",name:"Mali",name_ru:"",phone_code:"223",phone_format:"65 01 23 45"},{code:"BF",name:"Burkina Faso",name_ru:"-",phone_code:"226",phone_format:"70 12 34 56"},{code:"NE",name:"Niger",name_ru:"",phone_code:"227",phone_format:"93 12 34 56"},{code:"TG",name:"Togo",name_ru:"",phone_code:"228",phone_format:"90 11 23 45"},{code:"BJ",name:"Benin",name_ru:"",phone_code:"229",phone_format:"90 01 12 34"},{code:"MU",name:"Mauritius",name_ru:"",phone_code:"230",phone_format:"251 2345"},{code:"LR",name:"Liberia",name_ru:"",phone_code:"231",phone_format:"4 612 345"},{code:"SL",name:"Sierra Leone",name_ru:"-",phone_code:"232",phone_format:"25 123456"},{code:"GH",name:"Ghana",name_ru:"",phone_code:"233",phone_format:"23 123 4567"},{code:"NG",name:"Nigeria",name_ru:"",phone_code:"234",phone_format:"802 123 4567"},{code:"TD",name:"Chad",name_ru:"",phone_code:"235",phone_format:"63 01 23 45"},{code:"CF",name:"Central African Republic",name_ru:"",phone_code:"236",phone_format:"70 01 23 45"},{code:"CM",name:"Cameroon",name_ru:"",phone_code:"237",phone_format:"71 23 45 67"},{code:"CV",name:"Cape Verde",name_ru:"-",phone_code:"238",phone_format:"991 12 34"},{code:"ST",name:"Sao Tome and Principe",name_ru:"-  ",phone_code:"239",phone_format:"981 2345"},{code:"GQ",name:"Equatorial Guinea",name_ru:" ",phone_code:"240",phone_format:"222 123 456"},{code:"GA",name:"Gabon",name_ru:"",phone_code:"241",phone_format:"06 03 12 34"},{code:"CG",name:"Republic of the Congo",name_ru:" ",phone_code:"242",phone_format:"06 123 4567"},{code:"CD",name:"Democratic Republic of the Congo",name_ru:"  ",phone_code:"243",phone_format:"991 234 567"},{code:"AO",name:"Angola",name_ru:"",phone_code:"244",phone_format:"923 123 456"},{code:"GN",name:"Guinea",name_ru:"",phone_code:"245",phone_format:"501 2345"},{code:"SC",name:"Seychelles",name_ru:" ",phone_code:"248",phone_format:"2 510 123"},{code:"SD",name:"Sudan",name_ru:"",phone_code:"249",phone_format:"91 123 1234"},{code:"RW",name:"Rwanda",name_ru:"",phone_code:"250",phone_format:"720 123 456"},{code:"ET",name:"Ethiopia",name_ru:"",phone_code:"251",phone_format:"91 123 4567"},{code:"SO",name:"Somalia",name_ru:"",phone_code:"252",phone_format:"90 792024"},{code:"DJ",name:"Djibouti",name_ru:"",phone_code:"253",phone_format:"77 83 10 01"},{code:"KE",name:"Kenya",name_ru:"",phone_code:"254",phone_format:"712 123456"},{code:"TZ",name:"Tanzania",name_ru:"",phone_code:"255",phone_format:"612 345 678"},{code:"UG",name:"Uganda",name_ru:"",phone_code:"256",phone_format:"712 345678"},{code:"BI",name:"Burundi",name_ru:"",phone_code:"257",phone_format:"79 56 12 34"},{code:"MZ",name:"Mozambique",name_ru:"",phone_code:"258",phone_format:"82 123 4567"},{code:"ZM",name:"Zambia",name_ru:"",phone_code:"260",phone_format:"95 5123456"},{code:"MG",name:"Madagascar",name_ru:"",phone_code:"261",phone_format:"30 12 345 67"},{code:"RE",name:"Reunion",name_ru:"",phone_code:"262",phone_format:"692 12 34 56"},{code:"YT",name:"Mayotte",name_ru:"",phone_code:"262",phone_format:"692 12 34 56"},{code:"ZW",name:"Zimbabwe",name_ru:"",phone_code:"263",phone_format:"71 123 4567"},{code:"NA",name:"Namibia",name_ru:"",phone_code:"264",phone_format:"81 123 4567"},{code:"MW",name:"Malawi",name_ru:"",phone_code:"265",phone_format:"991 23 45 67"},{code:"LS",name:"Lesotho",name_ru:"",phone_code:"266",phone_format:"5012 3456"},{code:"BW",name:"Botswana",name_ru:"",phone_code:"267",phone_format:"71 123 456"},{code:"SZ",name:"Swaziland",name_ru:"",phone_code:"268",phone_format:"7612 3456"},{code:"KM",name:"Comoros",name_ru:" ",phone_code:"269",phone_format:"321 23 45"},{code:"ER",name:"Eritrea",name_ru:"",phone_code:"291",phone_format:"7 123 456"},{code:"AW",name:"Aruba",name_ru:"",phone_code:"297",phone_format:"560 1234"},{code:"FO",name:"Faroe Islands",name_ru:" ",phone_code:"298",phone_format:"211234"},{code:"GL",name:"Greenland",name_ru:"",phone_code:"299",phone_format:"22 12 34"},{code:"GI",name:"Gibraltar",name_ru:"",phone_code:"350",phone_format:"57123456"},{code:"PT",name:"Portugal",name_ru:"",phone_code:"351",phone_format:"912 345 678"},{code:"LU",name:"Luxembourg",name_ru:"",phone_code:"352",phone_format:"628 123 456"},{code:"IE",name:"Ireland",name_ru:"",phone_code:"353",phone_format:"85 012 3456"},{code:"IS",name:"Iceland",name_ru:"",phone_code:"354",phone_format:"610 1234"},{code:"AL",name:"Albania",name_ru:"",phone_code:"355",phone_format:"66 123 4567"},{code:"MT",name:"Malta",name_ru:"",phone_code:"356",phone_format:"9696 1234"},{code:"CY",name:"Cyprus",name_ru:"",phone_code:"357",phone_format:"96 123456"},{code:"FI",name:"Finland",name_ru:"",phone_code:"358",phone_format:"41 2345678"},{code:"BG",name:"Bulgaria",name_ru:"",phone_code:"359",phone_format:"48 123 4567"},{code:"LT",name:"Lithuania",name_ru:"",phone_code:"370",phone_format:"612 34567"},{code:"LV",name:"Latvia",name_ru:"",phone_code:"371",phone_format:"21 234 567"},{code:"EE",name:"Estonia",name_ru:"",phone_code:"372",phone_format:"5123 4567"},{code:"MD",name:"Moldova",name_ru:"",phone_code:"373",phone_format:"650 12 345"},{code:"AM",name:"Armenia",name_ru:"",phone_code:"374",phone_format:"77 123456"},{code:"BY",name:"Belarus",name_ru:"",phone_code:"375",phone_format:"29 491 1911"},{code:"AD",name:"Andorra",name_ru:"",phone_code:"376",phone_format:"312 345"},{code:"MC",name:"Monaco",name_ru:"",phone_code:"377",phone_format:"6 12 34 56 78"},{code:"SM",name:"San Marino",name_ru:"-",phone_code:"378",phone_format:"66 66 12 12"},{code:"UA",name:"Ukraine",name_ru:"",phone_code:"380",phone_format:"39 123 4567"},{code:"RS",name:"Serbia",name_ru:"",phone_code:"381",phone_format:"60 1234567"},{code:"ME",name:"Montenegro",name_ru:"",phone_code:"382",phone_format:"67 622 901"},{code:"HR",name:"Croatia",name_ru:"",phone_code:"385",phone_format:"91 234 5678"},{code:"SI",name:"Slovenia",name_ru:"",phone_code:"386",phone_format:"31 234 567"},{code:"BA",name:"Bosnia and Herzegovina",name_ru:"  ",phone_code:"387",phone_format:"61 123 456"},{code:"MK",name:"Macedonia",name_ru:"",phone_code:"389",phone_format:"72 345 678"},{code:"CZ",name:"Czech Republic",name_ru:"",phone_code:"420",phone_format:"601 123 456"},{code:"SK",name:"Slovakia",name_ru:"",phone_code:"421",phone_format:"912 123 456"},{code:"LI",name:"Liechtenstein",name_ru:"",phone_code:"423",phone_format:"661 234 567"},{code:"FK",name:"Falkland Islands",name_ru:" ",phone_code:"500",phone_format:"51234"},{code:"BZ",name:"Belize",name_ru:"",phone_code:"501",phone_format:"622-1234"},{code:"GT",name:"Guatemala",name_ru:"",phone_code:"502",phone_format:"5123 4567"},{code:"SV",name:"El Salvador",name_ru:"",phone_code:"503",phone_format:"7012 3456"},{code:"HN",name:"Honduras",name_ru:"",phone_code:"504",phone_format:"9123-4567"},{code:"NI",name:"Nicaragua",name_ru:"",phone_code:"505",phone_format:"8123 4567"},{code:"CR",name:"Costa Rica",name_ru:"-",phone_code:"506",phone_format:"8312 3456"},{code:"PA",name:"Panama",name_ru:"",phone_code:"507",phone_format:"6001-2345"},{code:"HT",name:"Haiti",name_ru:"",phone_code:"509",phone_format:"34 10 1234"},{code:"BO",name:"Bolivia",name_ru:"",phone_code:"591",phone_format:"71234567"},{code:"GY",name:"Guyana",name_ru:"",phone_code:"592",phone_format:"609 1234"},{code:"EC",name:"Ecuador",name_ru:"",phone_code:"593",phone_format:"99 123 4567"},{code:"PY",name:"Paraguay",name_ru:"",phone_code:"595",phone_format:"961 456789"},{code:"MQ",name:"Martinique",name_ru:"",phone_code:"596",phone_format:"696 20 12 34"},{code:"SR",name:"Suriname",name_ru:"",phone_code:"597",phone_format:"741-2345"},{code:"UY",name:"Uruguay",name_ru:"",phone_code:"598",phone_format:"94 231 234"},{code:"BQ",name:"Bonaire, Sint Eustatius & Saba",name_ru:", -  ",phone_code:"599",phone_format:"718 1234"},{code:"TL",name:"Timor-Leste",name_ru:"-",phone_code:"670",phone_format:"7721 2345"},{code:"BN",name:"Brunei",name_ru:"",phone_code:"673",phone_format:"712 3456"},{code:"NR",name:"Nauru",name_ru:"",phone_code:"674",phone_format:"555 1234"},{code:"PG",name:"Papua New Guinea",name_ru:"- ",phone_code:"675",phone_format:"681 2345"},{code:"TO",name:"Tonga",name_ru:"",phone_code:"676",phone_format:"771 5123"},{code:"SB",name:"Solomon Islands",name_ru:" ",phone_code:"677",phone_format:"742 1234"},{code:"VU",name:"Vanuatu",name_ru:"",phone_code:"678",phone_format:"591 2345"},{code:"FJ",name:"Fiji",name_ru:"",phone_code:"679",phone_format:"701 2345"},{code:"PW",name:"Palau",name_ru:"",phone_code:"680",phone_format:"620 1234"},{code:"WF",name:"Wallis and Futuna",name_ru:"  ",phone_code:"681",phone_format:"50 12 34"},{code:"CK",name:"Cook Islands",name_ru:" ",phone_code:"682",phone_format:"71 234"},{code:"NU",name:"Niue",name_ru:"",phone_code:"683",phone_format:"1234"},{code:"KI",name:"Kiribati",name_ru:"",phone_code:"686",phone_format:"61234"},{code:"NC",name:"New Caledonia",name_ru:" ",phone_code:"687",phone_format:"75.12.34"},{code:"TV",name:"Tuvalu",name_ru:"",phone_code:"688",phone_format:"901234"},{code:"PF",name:"French Polynesia",name_ru:" ",phone_code:"689",phone_format:"21 23 45"},{code:"TK",name:"Tokelau",name_ru:"",phone_code:"690",phone_format:"5190"},{code:"FM",name:"Micronesia",name_ru:"",phone_code:"691",phone_format:"350 1234"},{code:"MH",name:"Marshall Islands",name_ru:" ",phone_code:"692",phone_format:"235-1234"},{code:"KP",name:"North Korea",name_ru:" ",phone_code:"850",phone_format:"192 123 4567"},{code:"HK",name:"Hong Kong",name_ru:"",phone_code:"852",phone_format:"5123 4567"},{code:"MO",name:"Macao",name_ru:"",phone_code:"853",phone_format:"6612 3456"},{code:"KH",name:"Cambodia",name_ru:"",phone_code:"855",phone_format:"91 234 567"},{code:"LA",name:"Laos",name_ru:"",phone_code:"856",phone_format:"20 23 123 456"},{code:"BD",name:"Bangladesh",name_ru:"",phone_code:"880",phone_format:"1812 345678"},{code:"TW",name:"Taiwan",name_ru:"",phone_code:"886",phone_format:"912 345 678"},{code:"MV",name:"Maldives",name_ru:"",phone_code:"960",phone_format:"771-2345"},{code:"LB",name:"Lebanon",name_ru:"",phone_code:"961",phone_format:"71 123 456"},{code:"JO",name:"Jordan",name_ru:"",phone_code:"962",phone_format:"7 9012 3456"},{code:"SY",name:"Syria",name_ru:"",phone_code:"963",phone_format:"944 567 890"},{code:"IQ",name:"Iraq",name_ru:"",phone_code:"964",phone_format:"791 234 5678"},{code:"KW",name:"Kuwait",name_ru:"",phone_code:"965",phone_format:"500 12345"},{code:"SA",name:"Saudi Arabia",name_ru:" ",phone_code:"966",phone_format:"51 234 5678"},{code:"YE",name:"Yemen",name_ru:"",phone_code:"967",phone_format:"712 345 678"},{code:"OM",name:"Oman",name_ru:"",phone_code:"968",phone_format:"9212 3456"},{code:"PS",name:"Palestine",name_ru:"",phone_code:"970",phone_format:"599 123 456"},{code:"AE",name:"UAE",name_ru:"",phone_code:"971",phone_format:"50 123 4567"},{code:"IL",name:"Israel",name_ru:"",phone_code:"972",phone_format:"050-123-4567"},{code:"BH",name:"Bahrain",name_ru:"",phone_code:"973",phone_format:"3600 1234"},{code:"QA",name:"Qatar",name_ru:"",phone_code:"974",phone_format:"3312 3456"},{code:"BT",name:"Bhutan",name_ru:"",phone_code:"975",phone_format:"17 12 34 56"},{code:"MN",name:"Mongolia",name_ru:"",phone_code:"976",phone_format:"8812 3456"},{code:"NP",name:"Nepal",name_ru:"",phone_code:"977",phone_format:"984-1234567"},{code:"TJ",name:"Tajikistan",name_ru:"",phone_code:"992",phone_format:"917 12 3456"},{code:"TM",name:"Turkmenistan",name_ru:"",phone_code:"993",phone_format:"66 123456"},{code:"AZ",name:"Azerbaijan",name_ru:"",phone_code:"994",phone_format:"40 123 45 67"},{code:"GE",name:"Georgia",name_ru:"",phone_code:"995",phone_format:"555 12 34 56"},{code:"KG",name:"Kyrgyzstan",name_ru:"",phone_code:"996",phone_format:"700 123 456"},{code:"UZ",name:"Uzbekistan",name_ru:"",phone_code:"998",phone_format:"91 234 56 78"},{code:"BS",name:"Bahamas",name_ru:" ",phone_code:"1242",phone_format:"359-1234"},{code:"BB",name:"Barbados",name_ru:"",phone_code:"1246",phone_format:"250-1234"},{code:"AI",name:"Anguilla",name_ru:"",phone_code:"1264",phone_format:"235-1234"},{code:"AG",name:"Antigua and Barbuda",name_ru:"  ",phone_code:"1268",phone_format:"464-1234"},{code:"VG",name:"Virgin Islands, British",name_ru:"  ",phone_code:"1284",phone_format:"300-1234"},{code:"VI",name:"Virgin Islands (USA)",name_ru:"  ()",phone_code:"1340",phone_format:"642-1234"},{code:"KY",name:"Cayman Islands",name_ru:" ",phone_code:"1345",phone_format:"323-1234"},{code:"BM",name:"Bermuda",name_ru:" ",phone_code:"1441",phone_format:"370-1234"},{code:"GD",name:"Grenada",name_ru:"",phone_code:"1473",phone_format:"403-1234"},{code:"TC",name:"Turks and Caicos Islands",name_ru:"   ",phone_code:"1649",phone_format:"231-1234"},{code:"MS",name:"Montserrat",name_ru:"",phone_code:"1664",phone_format:"492-3456"},{code:"MP",name:"Northern Mariana Islands",name_ru:"  ",phone_code:"1670",phone_format:"234-5678"},{code:"GU",name:"Guam",name_ru:"",phone_code:"1671",phone_format:"300-1234"},{code:"AS",name:"American Samoa",name_ru:" ",phone_code:"1684",phone_format:"733-1234"},{code:"SX",name:"Saint Martin",name_ru:"-",phone_code:"1721",phone_format:"520-5678"},{code:"LC",name:"Saint Lucia",name_ru:"-",phone_code:"1758",phone_format:"284-5678"},{code:"DM",name:"Dominica",name_ru:"",phone_code:"1767",phone_format:"225-1234"},{code:"VC",name:"Saint Vincent and the Grenadines",name_ru:"-  ",phone_code:"1784",phone_format:"430-1234"},{code:"TT",name:"Trinidad and Tobago",name_ru:"  ",phone_code:"1868",phone_format:"291-1234"},{code:"KN",name:"Saint Kitts and Nevis",name_ru:"-  ",phone_code:"1869",phone_format:"556-1234"},{code:"JM",name:"Jamaica",name_ru:"",phone_code:"1876",phone_format:"210-1234"}],_=e=>{let{countries:t,value:n,geoIPCountryCode:r,onCountryChange:o,onChange:a}=e,s=(0,i.useMemo)(()=>(e=>e.map(e=>{let{code:t,name:n,phone_format:r}=e,i={...e,value:t,label:n};if(t in g){let[,e]=g[t],n=r.trim().replace(/[^0-9]/g,"").length,o=e>n?e-n:0;o>0&&(i.phone_format=`${i.phone_format} ${"0".repeat(o)}`)}return i}))(t??m),[t]),l=(0,i.useMemo)(()=>((e,t)=>{let{value:n,geoIPCountryCode:r}=t,{cleanValue:i,phoneCodeSubstring:o}=h(n),a=p(e,{phoneCode:o,countryCode:r,geoIPCountryCode:r,reverseSearch:!0});return{matchedCountry:a,formattedValue:f(i,a)}})(s,{value:n,geoIPCountryCode:r}),[]),[c,u]=(0,i.useState)(()=>l.matchedCountry),[d,_]=(0,i.useState)(()=>n?l.formattedValue:`+${null==c?void 0:c.phone_code}`),v=(0,i.useMemo)(()=>(e=>e?`+${e.phone_code} ${e.phone_format}`.length:100)(c),[c]);return{countries:s,internalValue:d,setInternalValue:_,matchedCountry:c,maxLength:v,setMatchedCountry:u,onChangeHandler:e=>{let{cleanValue:t,phoneCodeSubstring:n,formattedValue:i}=h(e,c);if(t.length>0&&t.length<5){let e=p(s,{phoneCode:n,previousMatch:c,geoIPCountryCode:r});u(e),null==o||o(e)}_(i),null==a||a(t)},onCountrySelectHandler:e=>{if(u(e),null==o||o(e),e.phone_code!==(null==c?void 0:c.phone_code))_(`+${e.phone_code}`),null==a||a(e.phone_code);else{let t=!d.length;_(f(t?`+${e.phone_code}`:d,e)),t&&(null==a||a(e.phone_code))}},onPasteHandler:e=>{var t;let n=null==(t=e.clipboardData)?void 0:t.getData("text/plain");if(!n)return;let{cleanValue:i,phoneCodeSubstring:l}=h(n);if(!i)return;let c=p(s,{phoneCode:l,countryCode:r,geoIPCountryCode:r,reverseSearch:!0}),{formattedValue:d}=h(i,c);_(d),u(c),null==o||o(c),null==a||a(i)},onAutofillHandler:e=>{if(e.preventDefault(),"Event"===e.constructor.name&&!("data"in e)){let{value:t}=e.currentTarget,{cleanValue:n,phoneCodeSubstring:i}=h(t),l=p(s,{phoneCode:i,countryCode:r,geoIPCountryCode:r,reverseSearch:!0}),{formattedValue:c}=h(n,l);_(c),u(l),null==o||o(l),null==a||a(n)}}}},v=(e,t)=>{let n=t.toLowerCase().replace("+","");return n?e.filter(e=>{var t;let r=e.name.toLowerCase().includes(n),i=null==(t=e.name_ru)?void 0:t.toLowerCase().includes(n),o=e.phone_code.includes(n),a=e.code.toLowerCase().includes(n);return r||i||o||a}):e},y=n(51e3),C=n(18276),E=n(54442),b=n(4231),S=n(24111),T=n(79105),D=n(1667),w=n(10018),O=n(45683),A="flag__omZ_I",M="__isSingle__rgANo";const I=({matchedCountry:e,isSingleList:t})=>(0,r.tZ)("div",{className:l()(A,{[M]:t}),style:{backgroundImage:e?`url(${(0,O.getFlagIconURL)(e.code)})`:null}});var R="option__aZqHU",k="flag__g8GPy",L="text__g4swI",P="phoneCode__eeSrL";const x=({country:e,isRULocale:t})=>(0,r.BX)("jdiv",{className:R,children:[(0,r.tZ)("jdiv",{className:k,style:{backgroundImage:`url(${(0,O.getFlagIconURL)(e.code)})`}}),(0,r.tZ)("jdiv",{className:L,children:t&&e.name_ru||e.name}),(0,r.BX)("jdiv",{className:P,children:["+",e.phone_code]})]});var N="internal__vATgh",F="__hasSearch__nkXKC",j="search__qu19N",B=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const U=(0,i.forwardRef)((e,t)=>{const{countries:n}=e,o=B(e,["countries"]),{value:s,disabled:c,watchValue:u,onChange:d,onCountryChange:g}=o,p=(0,w.getIpCountry)()||"",{countries:f,internalValue:h,matchedCountry:m,maxLength:O,setInternalValue:A,setMatchedCountry:M,onChangeHandler:R,onCountrySelectHandler:k,onPasteHandler:L,onAutofillHandler:P}=_({value:s||"",countries:n,geoIPCountryCode:p,onChange:d,onCountryChange:g}),U=(0,S.useAppSelector)(T.selectLocale),V=(0,i.useRef)(null),W=(0,i.useRef)(null),G=(0,i.useRef)(u),[H,$]=(0,E.useToggle)(!1),z=(0,i.useMemo)(()=>["ru_RU","be","kk","uk"].includes(U),[U]);if((0,i.useImperativeHandle)(t,()=>V.current,[]),(0,b.useClickOutside)(W,()=>$(!1)),(0,i.useEffect)(()=>{null==g||g(m)},[]),!(0,D.k)(u)&&u!==G.current){G.current=u;const{cleanValue:e,phoneCodeSubstring:t}=(0,y.Dg)(u),n=(0,y.Av)(f,{phoneCode:t,countryCode:p,geoIPCountryCode:p,reverseSearch:!0}),{formattedValue:r}=(0,y.Dg)(e,n);A(r),M(n)}return(0,r.tZ)(a.II,Object.assign({},o,{ref:V,containerRef:W,type:"tel",value:h,maxLength:O,leftPlace:(0,r.tZ)(a.Ph,{options:f,defaultValue:null==m?void 0:m.code,ownValue:m,ownShow:H,variant:"inset",containerClassName:l()(N,F),searchContainerClassName:j,rawOutput:!0,looseList:!0,showSearch:!0,disabled:Boolean(c),searchPlaceholder:(0,C.l10n)("phone_mask_search_placeholder"),filter:v,selectedValueRender:(e,t)=>(0,r.tZ)(I,{matchedCountry:e,isSingleList:t}),optionRender:e=>(0,r.tZ)(x,{country:e,isRULocale:z}),onChange:e=>{var t;$(!1),k(e),null===(t=V.current)||void 0===t||t.focus()},onValueClick:$,qaId:"COUNTRY"}),maskProps:{formattedValue:h,matchedCountry:m},onChange:e=>{$(!1),R(e)},onInput:P,onPaste:L,onKeyDown:e=>{const{key:t,metaKey:n,ctrlKey:r}=e,i=n||r;/^[0-9]$/.test(t)||["Backspace","Tab","Delete","ArrowLeft","ArrowRight"].includes(t)||i||e.preventDefault()}}))});U.displayName="PhoneInput";const V=(0,i.forwardRef)((e,t)=>(0,r.tZ)(a.II,Object.assign({},e,{ref:t,type:"tel",autoComplete:"number-off",onKeyDown:e=>{const{key:t,metaKey:n,ctrlKey:r}=e,i=n||r;/^[0-9]$/.test(t)||["Backspace","Tab","Delete","ArrowLeft","ArrowRight"].includes(t)||i||e.preventDefault()}})));V.displayName="NumberInput";var W=n(80369),G=n(47367);const H=(0,i.forwardRef)((e,t)=>{const{onChange:n,value:o}=e,s=(0,i.useRef)(!1),[l,c]=(0,i.useState)(()=>(0,G.aQ)(o||"")),u=(0,G.mh)();return(0,r.tZ)(a.II,Object.assign({},e,{ref:t,type:"tel",value:l,autoComplete:"number-off",placeholder:(0,G.Nn)(u),maxLength:10,onChange:(e,t)=>{!s.current&&[9,10].includes(e.length)&&(s.current=!0),s.current&&e.length<=3&&(s.current=!1),"deleteContentBackward"===(null==t?void 0:t.inputType)||s.current&&10!==e.length?c(e):c((0,W.y)(e,u)),null==n||n((0,G.Al)(e))},onKeyDown:e=>{const{key:t,metaKey:n,ctrlKey:r}=e,i=n||r;/^[0-9]$/.test(t)||["Backspace","Tab","Delete","ArrowLeft","ArrowRight"].includes(t)||i||e.preventDefault()}}))});H.displayName="DateInput";var $=n(38042),z=n(53400),Z="text__Nlo0x";const q=({children:e,href:t,linkText:n,onLinkClick:i,qaId:o})=>{const[a,s]=e.split("!x!");return(0,r.BX)("jdiv",Object.assign({className:Z},(0,z.locator)(o),{children:[a,(0,r.tZ)("a",Object.assign({href:t,target:"_blank",rel:"noopener noreferrer",onClick:i},(0,z.locator)(`${o}_LINK`),{children:n})),s]}))},K=(0,i.forwardRef)(({labelClassName:e,value:t,error:n,required:o,telemetryLinkParams:s,qaId:l,onChange:c},u)=>{const d=(0,S.useAppSelector)(T.selectSystemSettings),g=(0,S.useAppSelector)(T.selectEula),{link:p,text:f,linkText:h}=(0,i.useMemo)(()=>((e,t)=>({text:(0,C.l10n)("eula_checkbox_text",{link:"!x!"}),linkText:(0,C.l10n)("word_consent"),link:e.externalLink||(0,O.getEulaURL)(t)}))(g,d.baseUrl),[g,d.baseUrl]);return(0,r.tZ)(a.XZ,{ref:u,labelClassName:e,value:t,label:(0,r.tZ)(q,{href:p,linkText:h,onLinkClick:()=>{(0,$.telemetry)("eula_link_clicked",s)},qaId:`${l}_TEXT`,children:f}),required:o,error:n,onChange:c,qaId:`${l}_CHECKBOX`})});K.displayName="EulaCheckbox";var Y="text__kS6FA";const J=({children:e,href:t,linkText:n,onLinkClick:i,qaId:o})=>{const[a,s]=e.split("!x!");return(0,r.BX)("jdiv",Object.assign({className:Y},(0,z.locator)(o),{children:[a,(0,r.tZ)("a",Object.assign({href:t,target:"_blank",rel:"noopener noreferrer",onClick:i},(0,z.locator)(`${o}_LINK`),{children:n})),s]}))},Q=(0,i.forwardRef)(({labelClassName:e,value:t,error:n,telemetryLinkParams:i,qaId:o,onChange:s},l)=>{const c=(0,S.useAppSelector)(T.selectMailing);return(0,r.tZ)(a.XZ,{ref:l,labelClassName:e,value:t,label:(0,r.tZ)(J,{href:null==c?void 0:c.external_link,linkText:(0,C.l10n)("word_consent"),onLinkClick:()=>{(0,$.telemetry)("mailing_link_clicked",i)},qaId:`${o}_TEXT`,children:(0,C.l10n)("mailing_checkbox_text",{link:"!x!"})}),error:n,onChange:s,qaId:`${o}_CHECKBOX`})});Q.displayName="MailingCheckbox";var X=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ee=(e,t)=>function(n){var{control:i,name:a,rules:s}=n,l=X(n,["control","name","rules"]);const{field:c,fieldState:{invalid:u,isDirty:d}}=(0,o.bc)({control:i,name:a,rules:s}),g=Object.assign(Object.assign(Object.assign(Object.assign({},c),l),null==t?void 0:t(c,l)),{valid:d&&!u,error:u});return(0,r.tZ)(e,Object.assign({},g))},te=ee(a.II),ne=ee(U),re=ee(V),ie=ee(H),oe=ee(a.XZ),ae=ee(K),se=ee(Q),le=ee(a.Ph,(e,t)=>{var n;return{defaultValue:null!==(n=t.defaultValue)&&void 0!==n?n:e.value}})},88993:function(e,t,n){"use strict";n.d(t,{i:function(){return y}});var r=n(44145),i=n(10018);const o="abTests",a=[{name:"aiInvitation",groups:2,percentage:100,conditions:[["enable_ai_invitation","1"]],isEnabled:Boolean((0,r.getClient)().clientId)&&"ru_RU"===i.default.locale}],s={initialized:!1,enabled:!1,tests:a,activeTests:{},activeTestsAsString:"",activeTestsAsTelemetry:{abtest_name:"",abtest_group:0}};var l=n(80352),c=n(90061),u=n(45926),d=n(78466),g=n(10465),p=n(44733);const f=(0,c.createLogger)("ABTesting"),h=e=>Math.floor(Math.random()*e)+1,m=()=>{const e=p.StorageProvider.get(o),t=a.filter(({conditions:e,percentage:t=100,isEnabled:n})=>{const r=!e||(e=>e.every(([e,t])=>{if("device"===e)return t.includes(l.platform.device);const n=(0,u.getJivoConfig)();return String((0,d.U)(n,e))===t}))(e);return n&&r&&(e=>Math.random()<=.01*e)(t)});if(0===t.length)return p.StorageProvider.remove(o),{};const n=t.reduce((t,{name:n,groups:r})=>(t[n]={chosenGroup:e&&n in e?e[n].chosenGroup:h(r)},t),{});return p.StorageProvider.set(o,n),n},_=e=>e.reduce((e,[t,{chosenGroup:n}],r,{length:i})=>{const o=r===i-1;return e.abtest_name+=`${t}${o?"":","}`,e.abtest_group=n,e},{abtest_name:"",abtest_group:0});let v=s;const y={init:()=>{v.initialized||(v=Object.assign(Object.assign({},(()=>{const e=p.StorageProvider.get(o);if(0===a.length)return e&&p.StorageProvider.remove(o),f.log("AB testing is disabled. No tests defined."),s;const t=m();if((0,g.x)(t))return f.log("AB testing is disabled. No active tests.",t),s;const n=Object.entries(t);return f.log("AB testing is enabled.",t),{enabled:!0,tests:a,activeTests:t,activeTestsAsString:(r=n,r.map(([e,{chosenGroup:t}])=>`${e},${t}`).join(";")),activeTestsAsTelemetry:_(n)};var r})()),{initialized:!0}))},isEnabled:()=>v.enabled,getActiveTests:()=>v.activeTests,getActiveTestsAsString:()=>v.activeTestsAsString,getActiveTestsAsTelemetry:()=>v.activeTestsAsTelemetry,getActiveTestByName:e=>{var t;return null!==(t=v.activeTests[e])&&void 0!==t?t:{}}}},5039:function(e,t,n){"use strict";n.r(t),n.d(t,{getAiInvitation:function(){return f}});var r=n(50789),i=n(66547),o=n(73687),a=n(13077),s=n(44145),l=n(69882),c=n(97778),u=n(25467),d=n(88993),g=n(10396),p=n(38042);const f=(e,t,n)=>{if(d.i.isEnabled()&&2===d.i.getActiveTestsAsTelemetry().abtest_group&&(0,s.getClient)().clientId&&(0,g.isDefaultProactive)(t)&&"!    - ?"===n){r.ApiProvider.getAiProactive((()=>{const{utm:e}=(0,s.getClient)(),t=JSON.stringify(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.campaign&&{campaign:e.campaign}),e.source&&{source:e.source}),e.medium&&{medium:e.medium}),e.keyword&&{keyword:e.keyword}),e.term&&{keyword:e.term}),e.content&&{content:e.content}));return{current_page_url:JSON.stringify((0,l.getCurrentPage)()),utm:t,time_on_page_seconds:(0,u.getSecondsDiff)((0,a.getRuleLocal)("pageEnterTime")),chats:(0,s.getChats)().length,pages_viewed:i.default.get("pages_count"),site_visits:o.default.get("visits_count")}})(),{clientId:(0,s.getClient)().clientId,timeout:5e3}).then(t=>{var n;const r=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.ai_invitation_text;(0,p.telemetry)("ai_request_success",{param1:r}),o.default.set("ai_request",!0,c.ONE_DAY_DELAY),null==e||e(r)}).catch(t=>{(0,p.telemetry)("ai_request_error",{param1:(null==t?void 0:t.type)||(null==t?void 0:t.status)||(null==t?void 0:t.message)}),o.default.set("ai_request",!0,c.ONE_DAY_DELAY),null==e||e(void 0)})}else null==e||e(void 0)}},12437:function(e,t,n){"use strict";n.r(t),n.d(t,{setClientAttributes:function(){return y}});var r=n(73687),i=n(44145),o=n(45691),a=n(10018),s=n(73262),l=n(6254),c=n(86107),u=n(10465),d=n(1667),g=n(3491);const p=e=>(0,c.s)(Object.entries(e).filter(([,e])=>!(0,d.k)(e)&&""!==String(e).trim())),f=(e,t)=>{if("object"!=typeof e||(0,g.k)(e))return"Attributes must be an object.";const n=p(e);return(0,u.x)(n)?"Attributes must not be empty.":((e,t)=>{if((0,u.x)(t))return!0;const n=Object.keys(e),r=Object.keys(t),i=(0,l.$B)(e),o=(0,l.$B)(t);if(n.length>r.length)return!0;for(const e of n)if(!(e in o)||i[e]!==o[e])return!0;return!1})(n,t)?"":"Attributes are the same as the current ones."};var h=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const m=window.console;let _={};const v=(0,s.throttle)(()=>h(void 0,void 0,void 0,function*(){var e;const t=(0,i.getClient)(),n=f(_,t.attributes||(0,l.LE)());if(n)return void m.warn(n);const a=r.default.get("client_attributes_times_per_hour")||0,s=p(_),c=yield(0,o.F)(s);if(_={},!c||"skipped"===c)return;(null===(e=c.data)||void 0===e?void 0:e.ok)||m.error("Client attributes sending failed."),r.default.set("client_attributes_times_per_hour",a+1,3600);const u=r.default.get("client_attributes_warnings_errors"),{attributes:d}=(0,i.getClient)(),g=JSON.stringify(d);u?m.warn(`Client attributes sent with ${u}\nSaved attributes: ${g}`):m.log(`Client attributes sent successfully!\nCurrent attributes: ${g}`)}),3e3),y=e=>{const t=r.default.get("client_attributes_warnings_errors");return a.default.disable_client_attributes_api?(m.warn("Client attributes API is disabled."),{ok:!1,message:"Client attributes API is disabled."}):r.default.get("client_attributes_internal_error")?(m.error("Internal server error. Try again later."),{ok:!1,message:"Internal server error. Try again later."}):r.default.get("client_attributes_times_per_hour")>=10?(m.warn("Limit of requests per hour has been exceeded. Try again later."),{ok:!1,message:"Limit of requests per hour has been exceeded. Try again later."}):(t&&m.warn(`Last ${t}`),_=Object.assign(Object.assign({},_),e),void v())}},96367:function(e,t,n){"use strict";n.r(t),n.d(t,{analytics:function(){return d}});var r=n(90061),i=n(68403),o=n(45926),a=n(73163),s=n(84565),l=n(48999),c=n(38042);const u=(0,r.createLogger)("analytics"),d={counters:{ya:0,fb:0,ga:0},analyticsInfo:{},_yaCounter:[],_trackedEvents:[],getCountersTelemetry:()=>({param2:d.counters.ya,param3:d.counters.fb,param4:d.counters.ga}),getAnalyticsClientId:()=>{const e=(0,o.getPageWindow)();if("function"==typeof e.ga&&("function"==typeof e.ga.getAll&&e.ga.getAll().forEach(e=>{d.analyticsInfo.ga||(d.analyticsInfo.ga=e.get("clientId"))}),d.counters.ga=1),!d.analyticsInfo.ga&&e.gaGlobal&&(d.analyticsInfo.ga=e.gaGlobal.vid,d.counters.ga=1),d._yaCounter.forEach(t=>{const n=e[t];n&&"function"==typeof n.getClientID&&(d.analyticsInfo.ym||(d.analyticsInfo.ym=n.getClientID()))}),"function"==typeof e.ym){u.log("Site has Yandex Tag Manager.");try{const t=e.ym.a[0][0];e.ym(t,"getClientID",e=>{d.analyticsInfo.ym||(d.analyticsInfo.ym=e)}),d.counters.ya=1}catch(e){u.warn(e)}}return d.analyticsInfo},isAnalyticsIdAvaiable:()=>{if(!d.isEnabled())return!1;const e=d.getAnalyticsClientId();return u.log("Counters userId",e),!(!(0,i.isPaidCustomer)()||!e.ga&&!e.ym)&&e},init:()=>{if(d.isEnabled()){d._yaCounter=[];try{const e=(0,o.getPageWindow)();for(const t in e)if(t in e){const n=e[t];0===t.indexOf("yaCounter")&&"function"==typeof n.reachGoal&&(d._yaCounter.push(t),d.counters.ya=1)}!d.counters.ya&&e.Ya&&e.Ya._metrika&&e.Ya._metrika.getCounters&&e.Ya._metrika.getCounters().forEach(t=>{const n=e["yaCounter"+t.id];n&&d._yaCounter.push(n)}),u.log("Active Yandex counters: ",d._yaCounter.length)}catch(e){u.log(e)}}},isEnabled:()=>!(0,i.isAnalyticsDisabled)()&&!!(0,i.isPaidCustomer)(),_trackEvent:(e,t,n)=>{if(!d.isEnabled())return;if(!n&&d._trackedEvents.includes(e))return;d.counters.ga&&d.counters.ya||d.init(),d._trackedEvents.push(e),u.info(`trackEvent action: ${e}, label: ${t}`);const r=(0,o.getPageWindow)();void 0!==r._gaq&&"function"==typeof r._gaq.push&&r._gaq.push(["_trackEvent","JivoSite",e,t,void 0,!0]),r.ga&&"function"==typeof r.ga.getAll&&(r.ga.getAll().forEach(n=>{const r=n.get("name");u.log("track ga:",n.get("name"),e,t),r&&0!==r.search(/^gtag_/i)&&n.send("event","JivoSite",e,t,{nonInteraction:1})}),d.counters.ga=1);const i="function"==typeof r.gtag,a={event_category:"JivoSite",event_action:e,event_label:t};if(i&&r.gtag){u.log("track gtag:",a);try{r.gtag("event","JivoSite",a)}catch(e){u.warn(e)}d.counters.ga=1}if(!i&&r.dataLayer&&"function"==typeof r.dataLayer.push&&(u.log("track dataLayer:",a),r.dataLayer.push(Object.assign({event:"JivoSite"},a)),d.counters.ga=1),r._gaUA_real&&"function"==typeof r._gaUA_real.getAll){const n=r._gaUA_real.getAll();2==n.length&&(n[1].send("event","JivoSite",e,t,{nonInteraction:1}),u.log("Track event to custom tiu client counter",n[1].get("trackingId"),e,t)),d.counters.ga=1}if(r.gaUA&&"function"==typeof r.gaUA.getAll){const n=r.gaUA.getAll();n.length&&n.length>0&&n[1]&&"function"==typeof n[1].send&&(n[1].send("event","JivoSite",e,t,{nonInteraction:1}),u.log("Track event to custom tiu client counter",n[1].get("trackingId"),e,t)),d.counters.ga=1}if(e=`Jivo_${e.replace(/ /g,"_")}`,d._yaCounter.length>0)d._yaCounter.forEach(t=>{const n=r[t];r&&n&&"function"==typeof n.reachGoal&&n.reachGoal(e)}),d.counters.ya=1;else if("function"==typeof r.ym){u.log("Site has Yandex Tag Manager.");try{const t=r.ym.a[0][0];r.ym(t,"reachGoal",e),d.counters.ya=1}catch(e){u.warn(e)}}d.trackFBEvents(e)},_setCustomVar:(e,t)=>{u.log("_setCustomVar: "+e+"/"+t);const n=(0,o.getPageWindow)();if(void 0!==n._gaq&&n._gaq.push&&n._gaq.push(["_setCustomVar",1,e,t,1]),"function"==typeof n.ga&&n.ga("set",e,t),d._yaCounter.length>0){const r={};r[e]=t,d._yaCounter.forEach(e=>{n[e].params(r)})}},trackFBEvents:e=>{const t=(0,o.getPageWindow)().fbq;t&&!(0,i.isJivoSite)()&&(e=e.replace(/ /gi,"_").replace("Jivo_",""),u.log("trackFBEvents",e),(0,s.m)(t)&&(t("trackCustom","Jivo",{content_name:e}),d.counters.fb=1))},trackChatOpenedByClick:()=>{d._trackEvent("Chat requested","User clicked chat widget")},trackOfflineFormOpenedByClick:()=>{d._trackEvent("Offline form shown","User offline form")},trackOfflineMessageSent:()=>{d._trackEvent("Offline message sent","User sent message via offline form")},trackProactiveInvitationShown:e=>{d._trackEvent("Proactive invitation shown",e)},trackProactiveInvitationAccepted:e=>{d._trackEvent("Proactive invitation accepted",e)},trackProactiveInvitationRejected:e=>{d._trackEvent("Proactive invitation rejected",e)},trackCampaignShown:e=>{d._trackEvent("jivo_chat_campaign_shown",e,!0)},trackCampaignAccepted:e=>{d._trackEvent("jivo_chat_campaign_answered",e,!0)},trackCampaignRejected:e=>{d._trackEvent("jivo_chat_campaign_closed",e,!0)},trackPopupClosed:e=>{d._trackEvent("jivo_popup_closed",e,!0)},trackChatConnected:e=>{d._trackEvent("Chat established",(e?"Bot":"Agent")+" accept chat.")},trackGaveContacts:()=>{const e="User gave contacts during chat";d._trackEvent(e,e)},trackCallWidgetInvitationShown:e=>{d._trackEvent("Callback invitation shown",e)},trackCallWidgetRequested:()=>{d._trackEvent("Callback requested","User request callback.")},setABTestGroupContacts:(e,t)=>{d._setCustomVar(e,t)},trackSystemMessageEmailShown:()=>{const e="In-chat email form shown";d._trackEvent(e,e)},trackSystemMessageEmailSubmitted:()=>{const e="In-chat email form submitted";d._trackEvent(e,e)},trackContinueInSocial:e=>{d._trackEvent("Continue in social",`User clicked ${e} button`)},trackMobileSocial:e=>{const t=d.getSocialName(e);d._trackEvent(`Jivo_${t}`,`User tap ${t} mobile link`)},trackSocial:e=>{const t=d.getSocialName(e);d._trackEvent(`Jivo_${t}`,`User click ${t} label link`)},trackClientInitChat:()=>{d._trackEvent("Client initiate chat","Client initiate chat"),(0,c.telemetry)("client_initiate_chat",d.isEnabled()?{param1:d._yaCounter.length>0?String(d._yaCounter.length):"0"}:void 0)},trackClientAnswerAgentChatRequest:()=>{const e="Client answer on agent request";d._trackEvent(e,e)},trackMobileCallClick:()=>{d._trackEvent("Mobile call","Mobile call")},trackVideoCallClick:()=>{d._trackEvent("Video call","User requested video call")},trackCallClick:()=>{d._trackEvent("Callback button","User requested callback form")},trackPrechatClick:e=>{d._trackEvent("Prechat phrase clicked",e)},trackBotButtonClick:e=>{d._trackEvent("Client press bot button",e)},trackRateForm:e=>{d._trackEvent(`Jivo_Rate_form_${e}`,`Rate form ${e}`)},getSocialName:e=>{switch(e){case"vk":return"Vkontakte";case"fb":return"Facebook";case"ig":return"Instagram";case"wa":return"WhatsApp";case"tg":return"Telegram";case"vb":return"Viber";default:return e}},reportCampaign:(e,t)=>{const n=(0,l.QF)(t);if(!n)return;const r="popup"===n.type;d._trackEvent("jivo_"+d.getCampaignText(e,r),"name_"+(0,a.k)(n.title," ","_"),!0)},getCampaignText:(e,t)=>`${t?"popup":"chat_campaign"}_${e}`}},7919:function(e,t,n){"use strict";n.r(t),n.d(t,{Application:function(){return to}});var r=n(16584),i=n(98661);function o(e){return{render:function(t){(0,i.render)(t,e)},unmount:function(){(0,i.unmountComponentAtNode)(e)}}}var a=n(90061),s=n(10018),l=n(26932),c=n(21951),u=n(69882),d=n(97490),g=n(45926),p=n(79010),f=n(91275),h=n(99012),m=n(22618),_=n(74603),v=n(75686),y=n(70859),C=n(24344),E=n(45007),b=n(62096),S=n(3579),T=n(50402),D=n(24111),w=n(65138);var O=i.default.memo(({children:e,allowedRoutes:t})=>{const n=(0,D.useAppSelector)(w.selectRoute);return t.includes(n)?(0,r.tZ)(i.default.Fragment,{children:e}):null}),A=n(26034),M=n(91763),I=n(80797),R=n(13551),k=n(21579),L=n(61744),P=n(94184),x=n.n(P),N=n(35233),F=n(18276),j=n(80352),B=n(10838),U="loadingWrap__uxDb7",V="__mobile__aGj7Q",W="header__S4iaw",G="headerText__RB7PM",H="loadingBg__qce1G",$="gradient__cmgbV";const z=(0,M.zF)(()=>n.e(535).then(n.bind(n,33816)),({onCloseButtonClick:e,text:t})=>{const{isWidgetConstructor:n,isPreview:i}=(0,I.useWidgetConstructorContext)(),o=j.platform.isMobileOrChatpage,a=(0,E.v9)(N.selectRoute)!==d.Route.CHAT_MIN,s=x()({[U]:!0,[V]:o});return(0,r.BX)("jdiv",{className:s,children:[(0,r.BX)("jdiv",{className:W,children:[(i||!(n||o))&&(0,r.tZ)(A.CloseButton,{drag:!1,callEnabled:!1,inCall:!1,show:a,onClick:()=>{null==e||e()},ignoreDragHeight:!1}),o?null:(0,r.tZ)(B.Leaf,{orientation:"bottom",backgroundColor:"#eaeaea",online:!0}),(0,r.tZ)("jdiv",{className:G,children:(0,F.l10n)("cb_loading")})]}),(0,r.BX)("jdiv",{className:H,children:[t||null,(0,r.tZ)("jdiv",{className:$})]})]})},L.m),Z=[d.Route.CHAT,d.Route.CHAT_CALL,d.Route.CHAT_SOCIAL,d.Route.CHAT_MIN,d.Route.CHAT_SETUP_CALL,d.Route.DEPARTMENTS,d.Route.INTRODUCE,d.Route.DEBUG],q=[d.Route.CALL];var K=i.default.memo(({needRenderCloseBtn:e,needRenderCallContainer:t,needRenderDrag:n,showCloseButton:i,showHeaderText:o,showBody:a,callbackEnabled:s,route:l,isStatic:c,onCloseButtonClick:u})=>{const{isWidgetConstructor:g,isPreview:p}=(0,I.useWidgetConstructorContext)(),{isWidgetTarget:f}=(0,R.useWidgetExtensionsContext)();return(0,r.BX)(r.HY,{children:[(()=>{const t=!(g&&f||!e)&&(p||i);return(0,r.tZ)(A.CloseButton,{drag:n,callEnabled:s,inCall:l===d.Route.CALL,show:t,onClick:u,ignoreDragHeight:c})})(),(0,r.tZ)(O,{allowedRoutes:Z,children:(0,r.tZ)(z,{showHeaderText:o,showBody:a})}),t?(0,r.tZ)(O,{allowedRoutes:q,children:(0,r.tZ)(k.W,{type:"call"})}):null]})}),Y=n(42634),J=n(16217),Q=n(88263),X=n(92089),ee=n(47138),te=n(34930),ne=n(81722),re=n(44145),ie=n(92400),oe=n(75998),ae=n(38042),se=n(85074),le=n(87692),ce=n(88996);const ue=e=>e.position;var de=n(97778);const ge=()=>{const{route:e,callbackEnabled:t,showCloseButton:n,showHeaderText:o,showBody:a,needRenderCloseBtn:s,needRenderDrag:c,isStatic:p,customVars:h,changeShowCloseButton:m,changeShowHeaderText:_,changeShowBody:E,onCloseButtonClick:b,callResize:O,orientation:A,padding:M,isInDrag:R,isPopup:k}=(()=>{const{isPreview:e}=(0,I.useWidgetConstructorContext)(),t=(0,D.useAppSelector)(le.selectWidgetPadding),n=(0,D.useAppSelector)(le.selectWidgetOrientation),r=(0,D.useAppSelector)(w.selectRoute),o=(0,D.useAppSelector)(ce.Fl),a=(0,D.useAppSelector)(ue),s=(0,D.useAppSelector)(ce.xy).status,c=(0,D.useAppSelector)(w.selectIsInDrag),p=(0,D.useAppSelector)(ie.q),{campaignId:f,name:h}=(0,D.useAppSelector)(re.getProactive),[m,_]=(0,i.useState)(!1),[E,b]=(0,i.useState)(!0),[S,O]=(0,i.useState)(!0),A=v.default.get(y.Component.LABEL),M=-1!==[d.Route.CALL,d.Route.INTRODUCE].indexOf(r),R=r===d.Route.CALL_POPUP,k=r!==d.Route.CALL||![ee.CallStatus.WAIT,ee.CallStatus.CONNECTING,ee.CallStatus.CONNECTED].includes(s),L=!j.platform.isMobileOrTablet&&!(0,u.isWixIframe)()&&r!==d.Route.CHAT_MIN,P=m&&L,x=(0,X.getCustomVars)(n,t,a,A,M);return(0,i.useEffect)(()=>{if(f&&h&&p===T.ScriptName.OPEN_WIDGET&&S){const e=(0,ne.getMaxWidgetHeightForProactive)();e&&e!==a.height&&oe.positionDispatch.setWidgetHeight(e)}},[f,h,p,S,a.height]),{route:r,callbackEnabled:o,callbackStatus:s,isInDrag:c,showCloseButton:m,showHeaderText:E,showBody:S,needRenderCloseBtn:k,needRenderDrag:P,isStatic:M,customVars:x,changeShowCloseButton:_,changeShowHeaderText:b,changeShowBody:O,onCloseButtonClick:()=>{var t;e?null===(t=(0,g.getPageWindow)()._widgetCampaignConstructorAPI)||void 0===t||t.reset():((0,te.closeWidget)(),setTimeout(()=>{(0,X.fixSafariKeyframes)(!0)},0),(0,se.isChatMinAvailable)()?l.transitionDispatchers.startTransition(T.ScriptName.MINIMIZE_WIDGET):s===ee.CallStatus.CONNECTED?Q.routerService.next(d.RouterEvent.CloseWindow):l.transitionDispatchers.startTransition(T.ScriptName.CLOSE_WIDGET),(0,ae.telemetry)("widget_close_click"))},callResize:e=>{(0,C.callUserFunction)("onResizeCallback",(0,X.getSize)(e,n,(a.height?a.height:x.height)||`${de.DEFAULT_WIDGET_HEIGHT}px`,Q.routerService.getCurrentRoute()))},orientation:n,padding:t,position:a,isPopup:R}})();return e===d.Route.HIDDEN?null:(0,r.tZ)(S.Z,{id:"jcont",name:y.Component.WIDGET_CONTAINER,onClick:void 0,startCallbacks:{[T.ScriptName.OPEN_WIDGET]:()=>{R||(m(!1),_(!0),E(!1),f.default.initSocial(),(0,Y.addMessagesOnOpen)(),(0,C.callUserFunction)("onOpen"),O(!0))},[T.ScriptName.CLOSE_WIDGET]:()=>{m(!1),_(!1),E(!1),O(!1)},[T.ScriptName.MINIMIZE_WIDGET]:()=>{m(!1),_(!0),E(!0),Q.routerService.next(d.RouterEvent.CloseWindow),O(!1)}},endCallbacks:{[T.ScriptName.OPEN_WIDGET]:()=>{R||(m(!0),E(!0),(0,X.fixSafariKeyframes)())},[T.ScriptName.CLOSE_WIDGET]:()=>{k||e===d.Route.LABEL_INVITATION||Q.routerService.next(d.RouterEvent.CloseWindow)},[T.ScriptName.MAXIMIZE_WIDGET]:()=>{R||(m(!0),_(!0),E(!0),(0,C.callUserFunction)("onOpen"),O(!0))},[T.ScriptName.MIN_WIDGET]:()=>{}},customVars:h,style:(0,X.getContainerStyle)(),animationPostfix:(0,X.getAnimationPostfix)(A,M),children:(0,r.tZ)(K,{needRenderCloseBtn:s,needRenderCallContainer:(0,J.isCallbackEnabled)(),needRenderDrag:c,showCloseButton:n,showHeaderText:o,showBody:a,callbackEnabled:t,route:e,onCloseButtonClick:b,isStatic:p})})};var pe=n(74379),fe=n(625),he=n(42601),me=n(43417),_e=n(21476);const ve=(e,t)=>{const n=[d.Route.LABEL,d.Route.HIDDEN].includes(e);return!(j.platform.isTablet||!t||n)};var ye="container__Vq4Tk",Ce="__visible__qPMXm",Ee="__zoomPadding__KXUwr",be="image__x3ft2";const Se=()=>{const{user:e}=(0,D.useAppSelector)(he.o),t=(0,D.useAppSelector)(w.selectRoute),n="landscape"===pe.default.getOrientation();return(0,r.tZ)("jdiv",Object.assign({className:x()(ye,{[Ce]:ve(t,n),[Ee]:e&&e>1})},(0,me.onClickHandler)(()=>_e.Router.next(d.RouterEvent.CloseWindow),!0,!0),{children:(0,r.tZ)("jdiv",{className:be})}))};var Te=n(73262),De=n(39733);const we=e=>e.pageStore,Oe=(e,t,n)=>!((0,u.isWixContext)()||e===d.Route.HIDDEN||j.platform.isIos&&pe.default.isWidgetOnWix)&&(!(Me(e)&&!n)&&(t||1)>de.MAX_ALLOWED_USER_ZOOM),Ae=e=>{if(!e)return;const{width:t,height:n,offsetLeft:r,offsetTop:i}=e;return{width:t,height:n,transform:`translate(${r}px, ${i}px)`}},Me=e=>e===d.Route.LABEL;var Ie=n(74784),Re="iconContainer__EY2O_",ke="hand__IIq6x",Le="arrow__zIaYQ",Pe="arrow2__D6OE2";const xe=()=>(0,r.BX)("jdiv",{className:Re,children:[(0,r.tZ)(Ie.SvgIcon,{icon:'<svg width="160" height="173" viewBox="0 0 160 173" xmlns="http://www.w3.org/2000/svg"><title>hand</title><path d="M56.31 169.5S8.685 109 5.968 106.25c-2.717-2.75-5.84-12.663 0-20.05C11.807 78.816 21.295 82.95 24 85c2.705 2.05 13.06 10.5 13.06 10.5s7.646 6.35 14.5 2.093c6.857-4.256 6.42-11.392 6.42-11.392s1.93-16.115-1.67-35.2C52.714 31.915 49 25.25 46.75 20c-2.25-5.25-1.124-11.59 5.938-16.045C59.75-.5 67 6.5 68.5 9.25s6.396 9.49 12.12 27.253c5.722 17.763 7.69 41.372 7.69 41.372l-2-23.25c5.576 0 13.464-2.994 24.017 9.168 4.736 5.457 6.86 24.332 6.86 24.332s-1.874-15.188-5.25-21.75c4.5-1.25 12.583-4.006 21.376 4.875 6.31 6.375 5.375 23.25 5.375 23.25s1.25-13.063-4.25-21.938c13.68-1.527 19.937 11.313 21.937 19.563 2 8.25-.875 26.75-.875 26.75l-14.19 51.875" stroke="#A3AFB8" fill-rule="nonzero" stroke-width="4" fill="#FFF" stroke-linecap="round" stroke-linejoin="round"/></svg>',className:ke}),(0,r.tZ)(Ie.SvgIcon,{icon:'<svg width="59" height="71" viewBox="0 0 59 71" xmlns="http://www.w3.org/2000/svg"><title>Arrow1</title><g transform="rotate(163 27.277 33.133)" fill="#00A355" fill-rule="evenodd"><rect y="12" width="8" height="48" rx="4"/><rect y="52" width="48" height="8" rx="4"/><rect transform="rotate(-45 30.523 29.475)" x="-6.477" y="25.475" width="74" height="8" rx="4"/></g></svg>',className:Le}),(0,r.tZ)(Ie.SvgIcon,{icon:'<svg width="59" height="71" viewBox="0 0 59 71" xmlns="http://www.w3.org/2000/svg"><title>Arrow2</title><g transform="rotate(-17 45.338 20.625)" fill="#00A355" fill-rule="evenodd"><rect y="12" width="8" height="48" rx="4"/><rect y="52" width="48" height="8" rx="4"/><rect transform="rotate(-45 30.523 29.475)" x="-6.477" y="25.475" width="74" height="8" rx="4"/></g></svg>',className:Pe})]});var Ne="container__yaqaV",Fe="__visible__A75Co",je="zoomPane___As1I",Be="iconContainer__HRb_t",Ue="viewContainer__qNMw6",Ve="view__wNG7t";const We=({appZoom:e,innerWidth:t,innerHeight:n,viewportStyles:i,isVisible:o,hasVisualViewport:a})=>(0,r.BX)("jdiv",{className:x()(Ne,{[Fe]:o}),children:[(0,r.tZ)("jdiv",{className:je}),(0,r.tZ)("jdiv",{className:Be,style:{width:a?"100%":t,height:n},children:(0,r.tZ)("jdiv",{className:Ue,style:a?i:void 0,children:(0,r.tZ)("jdiv",{className:Ve,style:{zoom:e},children:(0,r.tZ)(xe,{})})})})]}),Ge=()=>{const e=(0,D.useAppSelector)(w.selectRoute),{app:t,user:n}=(0,D.useAppSelector)(he.o),{showMobileMenu:o}=(0,D.useAppSelector)(we),{innerWidth:a,innerHeight:s,visualViewport:l}=pe.default.window,[c,u]=(0,i.useState)(Oe(e,n,o)),[d,g]=(0,i.useState)(Ae(l));return(0,De.r)(()=>{const t=pe.default.bodyEl;c&&j.platform.isSafari&&t&&(t.scrollTop=0,t.scrollLeft=0),Me(e)&&(0,ae.telemetry)(c?"zoom_overlay_show":"zoom_overlay_hide",void 0,{once:!0})},[e,t,n,c,o]),(0,i.useEffect)(()=>{u(Oe(e,n,o))},[e,o,n]),(0,i.useEffect)(()=>{if(!l)return;const e=(0,Te.throttle)(()=>g(Ae(l)),150);return l.addEventListener("scroll",e),l.addEventListener("resize",e),()=>{l.removeEventListener("scroll",e),l.removeEventListener("resize",e)}},[]),(0,r.tZ)(We,{appZoom:t,innerWidth:a,innerHeight:s,viewportStyles:d,isVisible:c,hasVisualViewport:Boolean(d)})};var He=n(41189),$e=n(70691),ze="mobileContainer__FnU2l",Ze="__tablet__VhAS9",qe="__cpFull__y1sAm";const Ke=()=>{const e=(0,D.useAppSelector)(w.selectRoute),t=(0,D.useAppSelector)(ce.xy),n=(0,D.useAppSelector)(he.o),{showMobileMenu:o}=(0,D.useAppSelector)(we),a=(0,fe.a)(n.app),l=t.available,c=t.status;(0,i.useEffect)(()=>{o||![d.Route.LABEL,d.Route.HIDDEN].includes(e)?pe.default.blockSite():pe.default.unblockSite()},[o,e]),(0,i.useEffect)(()=>{e!==d.Route.HIDDEN?e!==d.Route.LABEL&&e!==d.Route.HIDDEN?pe.default.setZoomChangeIterval(500):pe.default.setZoomChangeIterval(1e3):clearInterval(pe.default.intervalId)},[e]);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(O,{allowedRoutes:[d.Route.CHAT,d.Route.CHAT_CALL,d.Route.CHAT_SOCIAL,d.Route.CHAT_MIN,d.Route.DEPARTMENTS,d.Route.INTRODUCE,d.Route.CALL,d.Route.DEPARTMENTS,d.Route.INTRODUCE,d.Route.DEBUG,d.Route.CHAT_SETUP_CALL],children:(0,r.tZ)("jdiv",{className:x()({[ze]:!0,[Ze]:j.platform.isTablet||j.platform.isDesktop&&j.platform.isChatPage,[qe]:j.platform.isChatPage&&s.default.enable_full_cp}),style:{zoom:a,zIndex:2147483647,"-webkit-text-size-adjust":j.platform.isIos?pe.default.getTextSize():"none"},ref:e=>{v.default.set(y.Component.MOBILE_CONTAINER,e)},children:(0,r.tZ)(K,{needRenderCloseBtn:!1,needRenderCallContainer:l,needRenderDrag:!1,showCloseButton:!0,showHeaderText:!0,showBody:!0,callbackEnabled:l,route:e,onCloseButtonClick:()=>{(0,te.closeWidget)(),c===ee.CallStatus.CONNECTED&&Q.routerService.next(d.RouterEvent.CloseWindow)},isStatic:!1})})}),!He.V.chatPageYClients&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(Se,{}),(0,r.tZ)(Ge,{})]}),j.platform.isTablet?null:(0,r.tZ)($e.c,{show:o,onCancelClick:()=>oe.pageStoreDispatch.setShowMobileMenu(!1),onOverlayClick:()=>oe.pageStoreDispatch.setShowMobileMenu(!1)})]})};var Ye=n(52028),Je=n(96367),Qe=n(21115);const Xe=()=>[d.Route.LABEL],et=e=>{Ye.isDesignerEditor||(l.userDispatchers.setCallHeaderText(null),l.appDispatchers.setChatOpenByClient(!0),e?(0,Qe.Jb)():[ee.CallPopupStatus.ENABLED,ee.CallPopupStatus.ONLY_BUTTON_CLICK].includes((0,re.getCallback)().separateForm)?_e.Router.next(d.RouterEvent.ToCallPopup):(l.transitionDispatchers.startTransition(T.ScriptName.OPEN_WIDGET),_e.Router.next(d.RouterEvent.ToCall),Je.analytics.trackCallClick()),(0,ae.telemetry)("cw_button_click",{param1:e?"isVideo":void 0}))};var tt=n(83549),nt=n(43055),rt=n(28122),it=n(57930),ot=n(53400),at=n(36874),st={container:"container__FOxjM",show:"show__yTq3B",popup:"popup__DCGGg",__show:"__show__cNo9H",__powerBtn:"__powerBtn__aOlDt",__desktopOffsetBottom:"__desktopOffsetBottom__e2lLV",__powerBtnPositionLeft:"__powerBtnPositionLeft__GF_US",__left50:"__left50__Quzgv",__left100:"__left100__QicSq",__right50:"__right50__ue2Ku",__bottom50:"__bottom50__RTHD6",__right100:"__right100__xg5eB",__bottom0:"__bottom0__dj2cZ",__bottom100:"__bottom100__fTfub",animation:"animation__XEXhS",pulse:"pulse__L1Dth",pulseBefore:"pulseBefore__YDePT",pulseAfter:"pulseAfter__Lrqk6",button:"button__xl5pM",iconWrap:"iconWrap__BCLJU",animationBtn:"animationBtn__qpZkI",logoCallback:"logoCallback__h3lOH",__animation:"__animation__lIAbK",rotate:"rotate__hXAhT"},lt=n(80598),ct=n(81152),ut=n(36148);const dt=(0,a.createLogger)("HistoryManager");let gt;class pt{constructor(){if(gt)return gt;this.initHash=this.getLocation().hash,this.initHref=this.getLocationWithoutHash(),gt=this}getLocation(){return(0,g.getPageWindow)().location}getLocationWithoutHash(){const e=this.getLocation();return e.href.replace(e.hash,"")}setHistoryState(){dt.log("setHistoryState");const e=(0,g.getPageWindow)(),t=e.history,n=e.location,r=e.document;(!t.state||t.state&&"number"!=typeof t.state.jmobile)&&t.pushState({jmobile:1},r.title,n.href),t.replaceState({jmobile:1},r.title,n.href)}checkPopState(){const e=(0,re.getApp)().route;dt.log("checkPopState",this.initHash,this,this.initHref),this.initHash!==this.getLocation().hash&&this.initHref===this.getLocationWithoutHash()||(this.initHash=this.getLocation().hash,this.initHref=this.getLocationWithoutHash(),j.platform.isMobileOrTablet&&e!==d.Route.LABEL&&(Q.routerService.next(d.RouterEvent.CloseWindow),(0,ae.telemetry)("mobile_chat_close",{param1:"byBack"})))}}var ft=n(25886),ht=n(65465),mt=n(27104),_t=n(45683),vt=n(32183),yt=n(94767);const Ct=()=>{var e;!(0,re.getFeatures)().disableMobileBack&&j.platform.isMobileOrTablet&&window.history&&"function"==typeof window.history.pushState&&(null===(e=gt)||void 0===e||e.setHistoryState())},Et=(e,t)=>{const n=(0,re.getProactive)();let r=!!n.text&&n.status!==ut.MessageStatus.READ;return t&&!r&&(r=!0),t||!(e=>e.filter(e=>e.from===ct.MessageInitiator.AGENT&&e.status!==ut.MessageStatus.READ&&e.type==ct.MessageType.FOR_TEST).length)(e)||(0,re.getApp)().isOnline||(r=!0),r?1:0},bt=e=>{const t={};e&&(t.param1=e,t.param2=String(j.platform.supports.pointer?1:0)),(0,re.getSystemSettings)().botmode&&(t.param4=1),(0,ae.telemetry)("widget_click",t)},St=(e,t)=>{const n=(0,ft.getJoints)();if(l.appDispatchers.setChatOpenByClient(!0),(e=>{const t=(0,re.getMessages)();return(0,re.getUnreadMessages)().length+Et(t,e)})(Boolean(e)))return void((e,t)=>{l.appDispatchers.setAppIsFocused(!0),oe.pageStoreDispatch.setShowMobileMenu(!1),e?Q.routerService.next(d.RouterEvent.ToCall):(Q.routerService.next(d.RouterEvent.ToChat),l.userDispatchers.setCallHeaderText(null)),(0,se.onOpenChat)(),(0,Y.readProactive)(),bt(t?"from_popup":null)})(e,t);const{status:r}=(0,re.getCallback)();"cw_connected"!==r&&(n.count>0||(0,J.isVideoCallEnabled)())?(l.appDispatchers.setChatOpenByClient(!1),oe.pageStoreDispatch.setShowMobileMenu(!0),(0,ae.telemetry)("powerbtn_open_menu",{param1:"menu",param2:String(j.platform.supports.pointer?1:0)})):(l.appDispatchers.setAppIsFocused(!0),ht.messageActions.deleteUnansweredOfflineSystemInvite(),ht.messageActions.offlineSystemInvite(),ht.messageActions.addPrechatMessage(),(0,se.navigateToChat)(!0),(0,se.onOpenChat)(),bt("from_pwr")),Ct()},Tt=(e,t)=>{const n=(0,g.getPageWindow)().visualViewport,r="left"===t,i=pe.default.isSiteOptimizedForMobile?-15:15;if(j.platform.isMobileOrTablet&&n&&e>=1.1){const t=pe.default.getPseudo(),o=t&&t.getBoundingClientRect().height||0,a=t&&t.getBoundingClientRect().width||0,s=n.width-a+n.offsetLeft,l=n.offsetLeft+i*e,c=r?l:s;return{top:n.height-o+n.offsetTop-i,left:c-i}}return{left:null,top:null}},Dt=e=>{e.stopPropagation(),(0,ae.telemetry)("powerbtn_open_im")},wt=e=>{const{route:t}=(0,re.getApp)(),{showMobileMenu:n}=(0,re.getPageStore)(),r=e.target?e.target.tagName:null;!j.platform.isChatPage&&"BODY"===r&&t!==d.Route.LABEL&&(0,vt.hasClass)((0,g.getPageWindow)().document.body,"jivo-tablet-overlay")&&(e.preventDefault(),Q.routerService.next(d.RouterEvent.CloseWindow),(0,te.closeWidget)(),l.appDispatchers.setAppRoute(d.Route.LABEL)),j.platform.isTablet&&n&&"JDIV"!==r&&oe.pageStoreDispatch.setShowMobileMenu(!1)},Ot=()=>{const e=(0,D.useAppSelector)(le.selectPowerButtonColor),t=(0,D.useAppSelector)(le.selectWidgetColor),n=(0,D.useAppSelector)(le.selectWidgetColor2),r=(0,D.useAppSelector)(le.selectWidgetFontColor),i=(0,D.useAppSelector)(le.selectPowerGradient),o=!(0,D.useAppSelector)(le.selectDesigner).isMobileView&&j.platform.isDesktop,a=(({isDesktop:e,powerButtonColor:t,powerGradient:n,color:r,widgetFontColor:i})=>{const o="#3e414f",a="#fff";if(e&&"auto"!==i)return"light"===i?a:o;let s;return s=n||e?mt.default.isLightColor(r):mt.default.isLightColor(t),s?o:a})({isDesktop:o,powerButtonColor:e,powerGradient:i,color:t,widgetFontColor:r}),s=e||t,l=(({isDesktop:e,powerButtonColor:t,powerGradient:n,color:r,color2:i})=>n||e?mt.default.getGradientBg(r,i):t)({isDesktop:o,powerButtonColor:e,powerGradient:i,color:t,color2:n});return{iconColor:a,iconTopColor:s,powerButtonColorComputed:l}};var At=n(79105),Mt=n(88993);const It=({videoButton:e,onClick:t})=>{const{desktopOffsetBottom:n,labelBubble:o,callbackPosition:a,buttonPosition:s,callbackButtonColor:l,ABTestGroup:c}=(()=>{const{chosenGroup:e}=Mt.i.getActiveTestByName("CallbackButtonAnimation"),t=(0,D.useAppSelector)(At.selectDesktopOffsetBottom),n=(0,D.useAppSelector)(le.selectLabelBubble),r=(0,D.useAppSelector)(le.selectWidgetOrientation),o=(0,D.useAppSelector)(le.selectWidgetPadding),a=(0,D.useAppSelector)(ce.rN),[s,l]=(0,i.useState)(n?(0,lt.getPowerButtonDesktopPosition)(r,o):"right"),[c,u]=(0,i.useState)(n?null:`${r}${o}`),{powerButtonColorComputed:d,iconColor:g}=Ot();return(0,i.useEffect)(()=>{const e=(0,lt.getPowerButtonDesktopPosition)(r,o);l(e),n||u(`${r}${o}`)},[r,o,n]),{desktopOffsetBottom:t,labelBubble:n,callbackPosition:s,buttonPosition:c,powerButtonColorComputed:d,callbackButtonColor:a,iconColor:g,ABTestGroup:e}})(),u=o&&Boolean(n),d=2===c;return(0,r.BX)("jdiv",{className:x()(st.container,st.__show,{[st.__powerBtn]:o,[st.__desktopOffsetBottom]:u,[st.__powerBtnPositionLeft]:"left"===a,[st[`__${s}`]]:!o&&s,__jivoVideoBtn:e},"__jivoCallbackBtn"),style:{background:l||at.colorsFromFigma.GREEN_80,"--jivoDesktopOffsetBottom":u?`${n}px`:null},onClick:t,children:[d?(0,r.tZ)("jdiv",{className:st.animation}):null,(0,r.tZ)("jdiv",Object.assign({className:st.button},(0,ot.locator)(e?it.Locator.CALLBACK_VIDEO_BUTTON:it.Locator.CALLBACK_BUTTON))),(0,r.BX)("jdiv",{className:st.iconWrap,children:[(0,r.tZ)(Ie.SvgIcon,{icon:e?nt.default:rt.default,color:"#fff",className:x()(st.logoCallback,{[st.__animation]:!e&&d})}),e?(0,r.tZ)("jdiv",{className:st.popup,children:(0,F.l10n)("webrtc_video_text_popup")}):null]})]})},Rt=()=>{const e=(0,D.useAppSelector)(w.selectHiddenByRules),t=(0,D.useAppSelector)(w.selectIsOnline),n=(0,D.useAppSelector)(ce.xy),r=(0,D.useAppSelector)(ce.Fl),o=n.separateForm,a=(0,D.useAppSelector)(e=>{var t,n;return null!==(n=null===(t=e.settings.user.callback)||void 0===t?void 0:t.button)&&void 0!==n&&n}),s=(0,D.useAppSelector)(At.selectDesignerMobileView),l=(0,D.useAppSelector)(e=>e.settings.features.enableRequestVideocall),c=(0,D.useAppSelector)(e=>{var t,n;return null!==(n=null===(t=e.settings.features.modules)||void 0===t?void 0:t.videoCall)&&void 0!==n?n:null}),[d,g]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{g(((e,t)=>e&&t&&!j.platform.isMobileOrTablet&&!j.platform.isChatPage&&!(0,u.isAppCobrowse)()||Ye.isDesignerEditor)(a,r))},[a,r]),{isOnline:t,callbackAvailable:r,separateForm:o,enableRequestVideocall:l,videoCall:c,isMobileDesigner:s,hiddenByRules:e,isCallButtonEnabled:d}},kt=()=>{(0,tt.useErrorCatcher)("CallWidgetContainer");const{isOnline:e,callbackAvailable:t,separateForm:n,enableRequestVideocall:i,videoCall:o,isMobileDesigner:a,hiddenByRules:s,isCallButtonEnabled:l}=Rt();return(0,r.BX)(r.HY,{children:[!l||a||s?null:(0,r.tZ)(O,{allowedRoutes:Xe(),children:(0,r.tZ)(It,{videoButton:!1,onClick:()=>{et(!1)},isCallButtonEnabled:l})}),(()=>{const t=((e,t,n)=>e&&t&&n&&!Ye.isDesignerEditor&&!j.platform.isMobileOrTablet&&!j.platform.isChatPage&&!(0,u.isAppCobrowse)())(Boolean(i),Boolean(o),Boolean(e));return t?(0,r.tZ)(O,{allowedRoutes:Xe(),children:(0,r.tZ)(It,{videoButton:!0,onClick:()=>{et(!0)},isCallButtonEnabled:l})}):null})(),!t&&n==ee.CallPopupStatus.DISABLED||!n||j.platform.isMobileOrTablet?null:(0,r.tZ)(k.W,{type:"popup"})]})};var Lt=n(2903),Pt=n(21922),xt=n(92246),Nt=n(97979),Ft=n(45948),jt=n(26613),Bt=n(1667);const Ut=e=>{const t=(0,D.useAppSelector)(At.selectCampaigns);return(0,i.useMemo)(()=>{if(!(0,Bt.k)(e)&&!(0,Bt.k)(t))return t.find(t=>t.campaign_id===e)},[e])};var Vt=n(65648);const Wt=(e,{stringFormat:t}={stringFormat:!1})=>{4===e.length&&(e=`${e[0]}${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`);const n={r:0,g:0,b:0},r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r&&(n.r=parseInt(r[1],16),n.g=parseInt(r[2],16),n.b=parseInt(r[3],16)),t?`rgb(${n.r}, ${n.g}, ${n.b})`:n},Gt={white:{button:"",buttonText:"",background:"#ffffff",text:"#1B1F23",inputText:"#1B1F23",inputBg:"#ffffff",inputBorder:"#C6CBD1",inputPlaceholder:"#959DA5",eulaText:"#959da5",link:"#367fee",pollCellText:"#ffffff",pollCellTextHover:"#ffffff",pollCellBg:"#1B1F23",closeButton:"#6A737D",closeButtonBg:"#00000033",backgroundImg:"",backgroundImgAlpha:"0"},dark:{button:"",buttonText:"",background:"#24292E",text:"#ffffff",inputText:"#ffffff",inputBg:"#ffffff1a",inputBorder:"#D1D5DA",inputPlaceholder:"#D1D5DA",eulaText:"#ffffff",link:"#ffffff",pollCellText:"#1B1F23",pollCellTextHover:"#ffffff",pollCellBg:"#ffffff",closeButton:"#ffffff",closeButtonBg:"#ffffff33",backgroundImg:"",backgroundImgAlpha:"0"},black:{button:"",buttonText:"",background:"#000000",text:"#ffffff",inputText:"#ffffff",inputBg:"#ffffff1a",inputBorder:"#D1D5DA",inputPlaceholder:"#D1D5DA",eulaText:"#ffffff",link:"#ffffff",pollCellText:"#1B1F23",pollCellTextHover:"#ffffff",pollCellBg:"#ffffff",closeButton:"#ffffff",closeButtonBg:"#ffffff33",backgroundImg:"",backgroundImgAlpha:"0"},colored:{button:"",buttonText:"",background:"",text:"#ffffff",inputText:"#ffffff",inputBg:"#ffffff1a",inputBorder:"#D1D5DA",inputPlaceholder:"#D1D5DA",eulaText:"#ffffff",link:"#ffffff",pollCellText:"#ffffff",pollCellTextHover:"#ffffff",pollCellBg:"#1B1F2380",closeButton:"#ffffff",closeButtonBg:"#00000033",backgroundImg:"",backgroundImgAlpha:"0"}},Ht=(e,{backgroundImgSrc:t,backgroundOpacity:n,position:r})=>{const{type:i,color:o}=e,a=Boolean(o)&&"light"===(e=>("string"==typeof e&&(e=Wt(e)),(299*e.r+587*e.g+114*e.b)/1e3/255>.75?"light":"dark"))(o),s=Object.assign(Object.assign({},Gt[i]),{button:o,buttonText:a?"#1B1F23":"#ffffff",background:"colored"===i?o:Gt[i].background,backgroundImg:t?`url(${t})`:Gt[i].backgroundImg,backgroundImgAlpha:n?""+n/100:Gt[i].backgroundImgAlpha});return i&&o?["top_width","right_width"].includes(r)?Object.assign(Object.assign({},s),{closeButton:"#ffffff",closeButtonBg:"#00000033"}):s:Gt.white},$t=({type:e,screens:t,theme:n,desktopAnchor:o,mobileAnchor:a,renderItem:s})=>{const{document:l}=(0,g.getPageWindow)(),c=l.getElementById(o),u=l.getElementById(a),d=t.length,p=d/2,f=!(d>2);let h=0;return c||u?(0,r.tZ)(r.HY,{children:t.map((t,o)=>{const a=o>=p,l={screenKey:`screen-${a?`mobile${h+1}`:o+1}`,type:a?"standard":e,theme:Ht(n,{backgroundImgSrc:null==t?void 0:t.background_img_src,backgroundOpacity:null==t?void 0:t.background_img_opacity,position:null==t?void 0:t.img_position}),screenSettings:t,isMobile:a,isFirstScreen:a?0===h:0===o,isLastScreen:Boolean(!f&&(a?o===d-1:o===p-1))};a&&h++;const g=a?u:c;return g?(0,i.createPortal)((0,r.tZ)(r.HY,{children:s(l)}),g):null})}):null},zt=({children:e,target:t,screensCount:n})=>{const o=(0,g.getPageWindow)().document.getElementById(t);return!o||n<=0?null:(0,i.createPortal)((0,r.tZ)(r.HY,{children:e}),o)},Zt=(0,i.lazy)(()=>n.e(594).then(n.bind(n,23226))),qt=()=>{(0,tt.useErrorCatcher)(qt.displayName);const e=(()=>{var e;const{app:t}=(0,D.useAppSelector)(he.o),{route:n}=(0,D.useAppSelector)(w.selectApp),r=(0,D.useAppSelector)(At.selectEula),o=(0,D.useAppSelector)(At.selectMailing),a=(0,D.useAppSelector)(At.selectBillRu),s=(0,D.useAppSelector)(Nt.selectClient),{target:c,previewTargetDesktop:u,previewTargetMobile:g,type:p,position:f,marking_ad_text:h,theme:m,blackout:_,screens:v,hide_logo:y,activeScreen:C,display:E,campaignId:b,clientAnswerId:S,onSubmitActionCallback:T,answerData:O,frequency:A,isMobileView:M,isGalleryView:I}=(0,D.useAppSelector)(At.selectCampaignPopupSettings),R=Ut(b),[k,L]=(0,i.useState)(!1),P=v[C],x=v.length-1,N=M||j.platform.isMobile,F=j.platform.isMobileOrTablet,B=v.length>0&&0===C,U=v.length>1&&C===x,V=Boolean(Ft.isPopupConstructor),W=Boolean(V&&(u||g)),G=!V&&Boolean(_),H=!(y||!(0,jt.isCopyrightEnabled)()),$=n===d.Route.CALL_POPUP,z=(0,Vt.bt)(f,N),Z=(0,Vt.oL)(p,N),{position:q}=(0,Vt.gk)(null==P?void 0:P.img_src,null==P?void 0:P.img_position,N),K=Ht(m,{backgroundImgSrc:null==P?void 0:P.background_img_src,backgroundOpacity:null==P?void 0:P.background_img_opacity,position:q}),Y=a?"logo-jivosite":"logo-jivochat",J=Boolean(r)&&!s.eulaAccepted,Q=Boolean(o);(0,i.useEffect)(()=>{V&&l.appDispatchers.setHiddenByRules(!0)},[]);const[X,ee]=(0,i.useState)({width:0,height:0});return{type:Z,position:z,theme:K,themeOptions:m,logoType:Y,markingAdText:h,screenSettings:P,screensCount:v.length,zoom:t,activeScreen:C,constructorOptions:{target:c,previewTargetDesktop:u,previewTargetMobile:g,themeOptions:m,screens:W?v.concat(v):void 0},campaign:{title:null==R?void 0:R.title,campaignId:null==R?void 0:R.campaign_id,endTs:null==R?void 0:R.end_ts,tagId:null==R?void 0:R.tag_id,enableNotifications:null!==(e=null==R?void 0:R.enable_widget_notification)&&void 0!==e&&e,image:{width:X.width,height:X.height},clientAnswerId:S,answerData:O,frequency:A,onSubmitActionCallback:T,onImageLoaded:e=>{ee({width:e.width,height:e.height})}},isMobile:N,isMobileOrTablet:F,isFirstScreen:B,isLastScreen:U,isEULA:J,isMailingEnabled:Q,isBlackout:G,isShowLogo:H,isDisplay:E,isConstructor:V,isPreview:W,isCallbackPopup:$,isGalleryView:I,isSending:k,setSending:L}})(),{isConstructor:t,isPreview:n,constructorOptions:o,type:a,campaign:s,activeScreen:c,screensCount:u,isFirstScreen:g,isLastScreen:p,isDisplay:f,isBlackout:h,isGalleryView:m}=e,[_,v]=(0,i.useState)(!1),y=(0,i.useCallback)(()=>{v(!0),!t&&h&&pe.default.blockScroll()},[t,h]),C=(0,i.useCallback)(e=>{v(!1);const n=setTimeout(()=>{oe.campaignPopupDispatch.reset(),clearTimeout(n)},250);t||(h&&pe.default.unblockScroll(),s&&g&&Je.analytics.trackPopupClosed(s.title),s.enableNotifications&&(0,Pt.h)(null==e?void 0:e.poll_rate)&&(0,Lt.D)({campaign_id:s.campaignId,clientAnswer:e,image:s.image}))},[s,t,g,h]),E=(0,i.useCallback)(e=>{if(t)return;const n=c+1;p?C():n!==u&&(oe.campaignPopupDispatch.setActiveScreen(n),s.enableNotifications&&(0,Pt.h)(null==e?void 0:e.poll_rate)&&(0,Lt.D)({campaign_id:s.campaignId,clientAnswer:e,image:s.image}))},[t,s,c,p,u]);return(0,i.useEffect)(()=>{m&&(f?y():C())},[m,f]),(0,r.tZ)(xt.t.Provider,{value:e,children:t?n?(0,r.tZ)($t,{type:a,theme:o.themeOptions,screens:o.screens,desktopAnchor:o.previewTargetDesktop,mobileAnchor:o.previewTargetMobile,renderItem:e=>(0,r.tZ)(i.Suspense,{fallback:null,children:(0,r.tZ)(Zt,{isVisible:_,onMounted:y,onClose:C,onSetNextScreen:E,previewProps:e})})}):m?(0,r.tZ)(i.Suspense,{fallback:null,children:(0,r.tZ)(Zt,{isVisible:_,onMounted:y,onClose:C,onSetNextScreen:E})}):(0,r.tZ)(zt,{target:o.target,screensCount:u,children:(0,r.tZ)(i.Suspense,{fallback:null,children:(0,r.tZ)(Zt,{isVisible:_,onMounted:y,onClose:C,onSetNextScreen:E})})}):f?(0,r.tZ)(i.Suspense,{fallback:null,children:(0,r.tZ)(Zt,{isVisible:_,onMounted:y,onClose:C,onSetNextScreen:E})}):null})};qt.displayName="CampaignPopupContainer";var Kt=n(16026),Yt="player__Fqj8A";const Jt=({src:e})=>{const t=(0,i.useRef)(null);(0,i.useEffect)(()=>{v.default.set(`sound_${e}`.toUpperCase(),t.current)},[e]);const n=(Kt.EnvironmentManager.isDevelopment()?"/public":"")+`/sounds/${e}.`,o=(0,_t.getStaticURL)(n+"mp3"),a=(0,_t.getStaticURL)(n+"ogg"),s=(0,_t.getStaticURL)(n+"wav");return(0,r.BX)("audio",{preload:"auto",id:`jivo-sound-${e}`,ref:t,children:[(0,r.tZ)("source",{src:o,type:"audio/mpeg"}),(0,r.tZ)("source",{src:a,type:"audio/ogg; codecs=vorbis"}),(0,r.tZ)("source",{src:s,type:"audio/wav"})]})},Qt=({sounds:e})=>(0,r.tZ)("jdiv",{id:"jivo-player",className:Yt,children:e.map(e=>(0,r.tZ)(Jt,{src:e},e))});var Xt=n(71277),en="globalClass__I7eXH",tn={global:"global__csYF4",__dark:"__dark__Uirhv",__light:"__light__gOYPj",__green:"__green__tVcQp",__blue:"__blue__hJnsb",__grey:"__grey__dTxAn"};const nn=/\p{Lu}?\p{Ll}+|[0-9]+|\p{Lu}+(?!\p{Ll})|\p{Emoji_Presentation}|\p{Extended_Pictographic}|\p{L}+/gu,rn=e=>(e=>{var t;return Array.from(null!==(t=e.match(nn))&&void 0!==t?t:[])})(e).map(e=>e.toLowerCase()).join("-"),on=(0,g.getJivoConfig)(),an=({children:e})=>(0,r.tZ)("jdiv",{className:x()(en,tn.global,tn.__light,tn[`__${on.bubble_color||"green"}`],{"jv-chat-page-yclients":He.V.chatPageYClients,"jv-copyright":(0,jt.isCopyrightEnabled)()},Object.keys(j.platform).reduce((e,t)=>!j.platform[t]||["os","supports","device","isNotSearchSpider"].includes(t)?e:`${e} ${rn(t).replace("is-","jv-")}`,"").trim()),style:{"--jv-font-family":on.font_family?`'${on.font_family}', 'Arial', sans-serif`:null},children:e});var sn=n(91920);const ln=()=>{const e=(0,D.useAppSelector)(w.selectApp),t=(0,D.useAppSelector)(At.selectUserSettings),n=(0,D.useAppSelector)(At.selectFeaturesSettings),r=(0,D.useAppSelector)(At.selectBillRu),i=(0,D.useAppSelector)(At.selectDesignerMobileView),o=(0,D.useAppSelector)(w.selectHiddenByRules),{isWidgetTarget:a}=(0,R.useWidgetExtensionsContext)(),s=(0,sn.hasCustomLabel)(),l=Kt.EnvironmentManager.isDesignerEditor(),c=(0,jt.isCopyrightEnabled)(),u=[d.Route.HIDDEN,d.Route.CHAT_MIN].includes(e.route)||t.labelBubble||i||o,g=e.route===d.Route.LABEL_INVITATION;return{app:e,userSettings:t,features:n,text:e.isOnline?t.onlineWidgetLabel:t.offlineWidgetLabel,styles:(({fontSize:e,fontType:t,widgetFontColor:n,bgColor:r,bgColorSecondary:i})=>{const[o,a]=t.split(" "),s="dark"===n?"#000":"#fff",l=`${e}px`,c="bold"===o?"bold":"",u="bold"!==o?o:a||"",d=mt.default.getGradientBg(r,i),g=i||r;return{vars:{"--jv-label-font-size":l,"--jv-label-font-weight":c||null,"--jv-label-font-style":u||null,"--jv-label-color":s,"--jv-label-background":d,"--jv-label-background-corner":g},props:{fontSize:l,fontWeight:c,fontStyle:u,color:s,background:d,backgroundCorner:g}}})({fontSize:t.fontSize,fontType:t.fontType,widgetFontColor:t.widgetFontColor,bgColor:t.widgetColor,bgColorSecondary:t.widgetColor2}),hasCopyright:c,isBillRu:r,isHiddenByRules:o,isCustomLabel:s,isWidgetTarget:a,isDesignerEditor:l,isNotRender:u,isInvitation:g}};var cn=n(78692),un=n(88921),dn=n(56443),gn=n(91153),pn="container__tlDIa",fn="__isShow__kj9_u",hn="close__QVRZ_",mn="icon__QNylL",_n="invitation__TCE20",vn="header__rjZSE",yn="avatar__WRy19",Cn="text__aXvSK",En="content__zq5A1",bn="link____rqn";const Sn=({isShow:e,agentName:t,agentAvatarURL:n,text:i,onInvitationClick:o,onCloseClick:a,onMarkdownLinkClick:s})=>(0,r.BX)("jdiv",{className:x()(pn,{[fn]:e}),children:[(0,r.BX)("jdiv",{className:_n,onClick:o,children:[(0,r.BX)("jdiv",{className:vn,children:[(0,r.tZ)("jdiv",{className:x()(yn,gn.Z.darkAvatar),style:n?{backgroundImage:`url(${n})`}:void 0}),(0,r.tZ)("jdiv",{className:Cn,children:t})]}),(0,r.tZ)("jdiv",{className:En,children:(0,r.tZ)(dn.Markdown,{theme:{link:bn,text:Cn},onLinkClick:s,qaId:"LABEL_INVITATION",children:i})})]}),(0,r.tZ)("jdiv",{className:hn,onClick:a,children:(0,r.tZ)(Ie.SvgIcon,{icon:un.Z,className:mn,color:"#959BA0"})})]});var Tn=n(38106);const Dn=({isShow:e,isOnline:t})=>{const{agentAvatarURL:n,agentName:i,text:o}=(()=>{const e=(0,Tn.m)();if(!e)return{agentAvatarURL:"",agentName:"",text:""};const{text:t,body:{avatar_url:n,display_name:r}}=e;return{agentAvatarURL:(0,_t.getAvatarApiURL)(n),agentName:null!=r?r:"",text:null!=t?t:""}})();return(0,r.tZ)(Sn,{agentName:i,agentAvatarURL:n,text:o,isShow:e,onInvitationClick:()=>{(0,se.showChat)(t,d.RouterEvent.Navigate),cn.ApiInvitationsManager.markInvitationsRead()},onCloseClick:()=>{(0,se.closeWindow)(),(0,ae.telemetry)("invite_close")},onMarkdownLinkClick:()=>{cn.ApiInvitationsManager.sendUrlClickTelemetry()}})};var wn=n(2982);const On=(e,t)=>{const n={maxWidth:"calc(100vw - 80px)",bottom:0},r={maxWidth:"calc(100vh - 40px)",left:40,transformOrigin:"bottom left"},i={maxWidth:"calc(100vh - 40px)",right:0,transformOrigin:"bottom right"};return{bottom:{0:Object.assign(Object.assign({},n),{left:40}),50:Object.assign(Object.assign({},n),{right:"50%",transform:"translateX(50%)"}),100:Object.assign(Object.assign({},n),{right:40})},left:{0:Object.assign({},r),50:Object.assign(Object.assign({},r),{top:"50%",transform:"rotate(-90deg) translateX(calc(-50% + 40px))"}),100:Object.assign(Object.assign({},r),{bottom:20,transform:"rotate(-90deg)"})},right:{0:Object.assign({},i),50:Object.assign(Object.assign({},i),{top:"50%",transform:"rotate(-90deg) translateX(calc(50% + 40px))"}),100:Object.assign(Object.assign({},i),{bottom:20,transform:"rotate(-90deg) translateX(100%)"})}}[e][t]};var An={container:"container__pfYF8",__isShow:"__isShow__jdkNN",__bottom:"__bottom__gSS19",__isDesignerEditor:"__isDesignerEditor__NuZkA",__right:"__right__Kg_VS",__left:"__left__v1cQL",__isWidgetTarget:"__isWidgetTarget__So4Oa",leafCont:"leafCont__qLSjE",copyContainer:"copyContainer__RlZaG",text:"text__jMTcQ",_noAd:"_noAd__ZA_P9"};const Mn=(0,i.forwardRef)(({children:e,widgetOrientation:t,widgetPadding:n,style:o,isShow:a,isDesignerEditor:s,isWidgetTarget:l},c)=>{const u=(0,i.useRef)(null),d=(0,i.useRef)(On(t,n)),[g,p]=(0,i.useState)((0,wn.getSavedLabelPosition)());return(0,i.useLayoutEffect)(()=>{const e=u.current;if(!e)return;const r=On(t,n),i=Object.assign(Object.assign({},r),{offsetWidth:e.offsetWidth});d.current=i,(0,wn.saveLabelPosition)(i),p(i)},[t,n,a]),(0,i.useImperativeHandle)(c,()=>u.current,[]),a?(0,r.tZ)("jdiv",Object.assign({ref:u,id:"jvLabelWrap",className:x()(An.container,[An[`__${t}`],{[An.__isShow]:a,[An.__isDesignerEditor]:s,[An.__isWidgetTarget]:l},"notranslate"]),translate:!1,style:Object.assign(Object.assign({},g),o)},(0,ot.locator)("LABEL"),{children:e})):null});Mn.displayName="LabelContainer";var In=n(13752),Rn={text:"text__5Brbt",__bottom:"__bottom__xl5rl",__right:"__right__Q8NB2",__left:"__left__CwaBi",__noCopyright:"__noCopyright__AvMcD",__isOffline:"__isOffline__BPFET",contentTransitionWrap:"contentTransitionWrap__Iizyh",fadeIn:"fadeIn__iwy1G"};const kn=({children:e,widgetOrientation:t,isOnline:n,hasCopyright:i})=>(0,r.tZ)("jdiv",Object.assign({className:x()(Rn.text,Rn.contentTransitionWrap,Rn[`__${t}`],{[Rn.__isOffline]:!n,[Rn.__noCopyright]:!i})},(0,ot.locator)("LABEL_TEXT_"+(n?"ONLINE":"OFFLINE")),{children:(0,r.tZ)(In.Text,{children:e})}));var Ln={leaf:"leaf__WYtbC",__right:"__right__uxSOa",__left:"__left__WktE8"};const Pn=({children:e,widgetOrientation:t})=>(0,r.tZ)("jdiv",{className:x()(Ln.leaf,[Ln[`__${t}`]]),children:e});var xn=n(30349),Nn=n(54446);const Fn=({href:e,text:t,className:n,linkClassName:i,textColor:o,isOnline:a,isBillRu:s,qaId:l})=>{const c=(0,r.tZ)(Ie.SvgIcon,{icon:s?xn.default:Nn.default,className:n,color:o,color2:a?"#18c139":"#62666c"});return e?(0,r.BX)("a",Object.assign({className:i,href:e,rel:"nofollow noopener noreferrer",target:"_blank"},(0,ot.locator)(`${l}_LINK`),{children:[null==t?void 0:t.start,c,null==t?void 0:t.end]})):c};var jn={container:"container__e_1F1",tooltipWrapper:"tooltipWrapper__wvjS1",__left:"__left__HNtxO",tooltip:"tooltip___Iw6S",__right:"__right__iyzzm",logo:"logo__EAJT5",icon:"icon__eXogW",link:"link__x8shD",__isBillRu:"__isBillRu__Lxc9i"};const Bn=({widgetOrientation:e,textColor:t,isOnline:n,isBillRu:o,onClick:a})=>{const s=(0,_t.getUTMLink)("label_tooltip"),l=(0,i.useMemo)(()=>{const{document:e}=(0,g.getPageWindow)(),t=e.getElementById("jivo_copyright");return Boolean(null==t?void 0:t.childNodes.length)},[]),[c,u]=l?(()=>{const{document:e}=(0,g.getPageWindow)(),t=e.getElementById("jivo_copyright");let n="",r="",i=!1;return t.childNodes.forEach(e=>{"#text"===e.nodeName&&(i?r+=e.textContent:n+=e.textContent),"A"===e.nodeName&&(i=!0)}),[n,r]})():(0,F.l10n)("businessCopyright",{0:"!x!"}).split("!x!");return(0,r.BX)("jdiv",{className:x()(jn.container,jn[`__${e}`]),children:[(0,r.tZ)("jdiv",Object.assign({className:jn.logo,onClick:a},(0,ot.locator)("LABEL_COPYRIGHT_LOGO"),{children:(0,r.tZ)(Fn,{textColor:t,className:x()(jn.icon,{[jn.__isBillRu]:o}),isBillRu:o,isOnline:n})})),(0,r.tZ)("jdiv",{className:jn.tooltipWrapper,children:(0,r.tZ)("jdiv",Object.assign({className:jn.tooltip},(0,ot.locator)("LABEL_COPYRIGHT_TOOLTIP"),{onClick:()=>{(0,ae.telemetry)("logo_click",{param1:"label"})},children:(0,r.tZ)(Fn,{href:s,text:{start:c,end:u},textColor:t,className:x()(jn.icon,{[jn.__isBillRu]:o}),linkClassName:jn.link,isBillRu:o,isOnline:n,qaId:"LABEL_COPYRIGHT"})}))})]})};var Un="icon__Nesoa";const Vn=({textColor:e})=>(0,r.tZ)(Ie.SvgIcon,{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h20v20H0z"/>\n        <path stroke="_COLOR1_" stroke-width="1.5" d="M3 3h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/>\n        <path stroke="_COLOR1_" stroke-width="1.5" d="M16.074 7.064l-6.01 4.01-6.01-4.01"/>\n    </g>\n</svg>\n',className:Un,color:e});var Wn=n(59699),Gn={hoverArea:"hoverArea__EiY98",menu:"menu__LairG",__left:"__left__xn0p_",__right:"__right__PuQHV",__bottom:"__bottom__ykpyR"};const Hn=({widgetOrientation:e,onClick:t})=>{const[n,o]=(0,i.useState)(!1);return(0,r.tZ)("jdiv",{className:Gn.hoverArea,onClick:t,onMouseOver:()=>{o(!0),(0,ae.telemetry)("label_buttons_show",void 0,{once:!0})},onMouseLeave:()=>{o(!1)},children:(0,r.tZ)("jdiv",{className:x()(Gn.menu,[Gn[`__${e}`]]),children:n?(0,r.tZ)(Wn.R,{children:(0,r.tZ)($e.c,{show:n})}):null})})},$n=()=>{const{app:e,features:t,userSettings:n,text:o,styles:a,hasCopyright:s,isBillRu:l,isHiddenByRules:c,isCustomLabel:u,isWidgetTarget:g,isDesignerEditor:p,isNotRender:f,isInvitation:h}=ln(),[m,_]=(0,i.useState)(!0),C=(0,i.useRef)(null),E=h?!h:m;return(0,i.useEffect)(()=>{C.current&&v.default.set(y.Component.LABEL,C.current),u&&t.enableSpaNavigate&&(0,sn.showCustomLabel)(!c)},[]),f?null:(0,r.BX)(r.HY,{children:[t.apiInvitation&&(0,r.tZ)(Dn,{isShow:h,isOnline:e.isOnline}),!u&&(0,r.tZ)(S.Z,Object.assign({name:y.Component.LABEL},(b=_,{startCallbacks:{[T.ScriptName.CLOSE_WIDGET]:()=>{b(!0)},[T.ScriptName.OPEN_WIDGET]:()=>{b(!0)},[T.ScriptName.MIN_WIDGET]:()=>{b(!1)}},endCallbacks:{[T.ScriptName.OPEN_WIDGET]:()=>{b(!1)}}}),{style:{display:"block",zIndex:2147483646,position:g?"static":"fixed"},duration:"left"===n.widgetOrientation?"600ms":"300ms",animationPostfix:n.widgetOrientation,children:(0,r.BX)(Mn,{ref:C,widgetOrientation:n.widgetOrientation,widgetPadding:n.widgetPadding,isShow:E,isDesignerEditor:p,isWidgetTarget:g,style:a.vars,children:[!e.isOnline&&(0,r.tZ)(Vn,{textColor:a.props.color}),(0,r.tZ)(Hn,{widgetOrientation:n.widgetOrientation,onClick:()=>{(0,se.showChat)(e.isOnline,d.RouterEvent.Navigate)}}),(0,r.tZ)(kn,{widgetOrientation:n.widgetOrientation,isOnline:e.isOnline,hasCopyright:s,children:o}),s&&(0,r.tZ)(Bn,{widgetOrientation:n.widgetOrientation,textColor:a.props.color,isOnline:e.isOnline,isBillRu:l,onClick:()=>{(0,se.showChat)(e.isOnline,d.RouterEvent.Navigate),(0,ae.telemetry)("logo_click",{param1:d.Route.LABEL})}}),(0,r.tZ)(Pn,{widgetOrientation:n.widgetOrientation,children:(0,r.tZ)(B.Leaf,{online:e.isOnline,backgroundColor:n.widgetColor2||n.widgetColor,orientation:n.widgetOrientation})})]})}))]});var b};var zn=n(7193),Zn=n(79814);const qn=()=>{const e=(0,D.useAppSelector)(le.selectWidgetOrientation),t=(0,D.useAppSelector)(le.selectWidgetPadding),n=(0,D.useAppSelector)(le.selectWidgetMobileOrientation),r=(0,D.useAppSelector)(At.selectDesktopOffsetBottom),o=(0,D.useAppSelector)(le.selectMobileOffsetBottom),a=(0,D.useAppSelector)(w.selectRoute),s=(0,D.useAppSelector)(le.selectCallHeaderText),l=(0,D.useAppSelector)(w.selectIsOnline),u=(0,D.useAppSelector)(he.o),p=u.user,f=(0,D.useAppSelector)(zn.selectProactive),h=(0,D.useAppSelector)(le.selectMobileProactive),m=(0,D.useAppSelector)(le.selectJoint),_=(0,D.useAppSelector)(le.selectLabelBubble),v=(0,D.useAppSelector)(At.selectCampaignPopupSettings).display,y=(0,D.useAppSelector)(le.selectDesigner),C=y.isMobileView||j.platform.isMobileOrTablet,E=!y.isMobileView&&j.platform.isDesktop,b=(0,D.useAppSelector)(w.selectHiddenByRules),{disableMobileBack:S}=(0,D.useAppSelector)(At.selectFeaturesSettings),{isWidgetTarget:T}=(0,R.useWidgetExtensionsContext)(),[O,A]=(0,i.useState)(!0),[M,I]=(0,i.useState)(Tt(p||1,n)),[k,L]=(0,i.useState)(E?(0,lt.getPowerButtonDesktopPosition)(e,t):null),P=m?m.im:null,x=(0,D.useAppSelector)(Zn.selectMessages),N=(0,D.useAppSelector)(Zn.selectUnreadMessages),F=Et(x,Boolean(s))+N.length,B=((e,t)=>{if(!e)return null;if(t&&t.text&&t.status!==ut.MessageStatus.READ){const e=(0,yt.getProactiveAgent)(t);return{text:t.text,agent:e,isMarkdown:t.isMarkdown}}return null})(h,f),{iconColor:U,powerButtonColorComputed:V}=Ot(),W=(0,g.getPageWindow)(),G=(e=>!!(j.platform.supports.iMessage&&e&&e.joint_id)&&(0,_t.getIMessageLink)(e.joint_id))(P),H=j.platform.isTablet?[d.Route.LABEL,d.Route.CHAT]:[d.Route.LABEL],$=W.document;let z=null;const Z=(0,Te.throttle)(e=>{z&&clearTimeout(z),!j.platform.isDesktop&&e&&A(!1),I(Tt(e||1,n)),e&&(z=setTimeout(()=>{A(!1)},200))},200),q=(0,i.useCallback)(e=>{y.isMobileView||(E?(0,se.showChat)(l,d.RouterEvent.Navigate,{param1:"from_pwr_desktop"}):St(s,e))},[s,y.isMobileView,E,l]);return(0,i.useEffect)(()=>{E&&L((0,lt.getPowerButtonDesktopPosition)(e,t))},[E,e,t]),(0,i.useEffect)(()=>{!j.platform.isDesktop&&p&&O&&(A(!1),I(Tt(p||1,n)))},[p,n,O]),(0,i.useEffect)(()=>{const e=new pt,t=()=>{e.checkPopState()};return ht.messageActions.deleteUnansweredOfflineSystemInvite(),j.platform.isDesktop&&(A(!1),I(Tt(p||1,n))),(0,c.addListener)(W,"scroll",Z,!0),(0,c.addListener)(W,"resize",Z,!0),j.platform.isIos&&W.visualViewport&&((0,c.addListener)(W.visualViewport,"scroll",Z,!0),(0,c.addListener)(W.visualViewport,"resize",Z,!0)),S||(0,c.addListener)(W,"popstate",t),j.platform.isTablet&&(0,c.addListener)($.body,"touchstart",wt),()=>{(0,c.removeEvent)(W,"scroll",Z),(0,c.removeEvent)(W,"resize",Z),(0,c.removeEvent)(W,"popstate",t),W.visualViewport&&((0,c.removeEvent)(W.visualViewport,"scroll",Z),(0,c.removeEvent)(W.visualViewport,"resize",Z)),(0,c.removeEvent)($.body,"touchstart",wt)}},[]),{isCallEnabled:(0,J.isCallbackEnabled)(),showLogo:(0,jt.isCopyrightEnabled)(),top:M.top||0,left:M.left||0,unreadMessageCount:F,popup:Boolean(B),iconColor:U,widgetMobileOrientation:n,desktopOffsetBottom:parseInt(String(r||0),10),mobileOffsetBottom:parseInt(String(o||0),10),powerButtonColor:V,zoom:u,linkOverlay:G,onOverlayClick:Dt,isOnline:l,route:a,onClick:q,hidden:O,isCustomLabel:(0,sn.hasCustomLabel)(),isDesktop:E,isPopupShow:v,isMobileOrTablet:C,isWidgetTarget:T,desktopPosition:k,designerOptions:y,allowedRoutes:H,labelBubble:_,hiddenByRules:b}};var Kn=n(28843),Yn="icons__Rb1g5",Jn="iconWrap__Q3TPy",Qn="_showLogo__c8q4I",Xn="_isCallEnabled__dyAGK",er="iconWrap2__CqaVJ",tr="iconWrap3__QwIlL",nr="jivoIcon__EJgkS",rr="logoIconCloud__YxYuJ",ir="envelopeIcon__tv9WW",or="callbackIcon__UpQmV";const ar=({showLogo:e=!1,isCallEnabled:t=!1,iconColor:n="",isOnline:i=!1})=>{const o=!(t&&!(0,J.isCallbackButtonEnabled)()),a={[Jn]:!0,[Xn]:!o,[Qn]:e},s=e=>{const t=i?'<svg width="30" height="31" viewBox="0 0 30 31" xmlns="http://www.w3.org/2000/svg"><path fill="_COLOR1_" d="M2.967 22.226l-.025.008s7.698 13.9 26.975 5.546c0 0-1.495-1.752-4.384-3.52a14.067 14.067 0 0 0 2.588-14.047c-2.655-7.297-10.7-11.07-17.964-8.425C2.89 4.433-.847 12.492 1.81 19.79c.313.863.703 1.677 1.157 2.436z" fill-rule="evenodd"/></svg>\n':'<svg width="25" height="20" viewBox="0 0 25 20" xmlns="http://www.w3.org/2000/svg"><path fill=\'_COLOR1_\' d="M22.5 5l-10 6.25L2.5 5V2.5l10 6.25 10-6.25V5zm0-5h-20A2.49 2.49 0 0 0 0 2.5v15A2.5 2.5 0 0 0 2.5 20h20a2.5 2.5 0 0 0 2.5-2.5v-15A2.5 2.5 0 0 0 22.5 0z"/></svg>\n',n=i?rr:ir;return(0,r.tZ)(Ie.SvgIcon,{icon:t,color:e,className:x()(n,Yn)})},l=()=>o?null:(0,r.tZ)("jdiv",{className:x()(Object.assign(Object.assign({},a),{[er]:!0})),children:s(n)});return(0,r.BX)(r.HY,{children:[(0,r.BX)(r.HY,{children:[(0,r.BX)("jdiv",{className:x()(Object.assign({},a)),children:[e?(0,r.tZ)(Ie.SvgIcon,{icon:'<svg width="10" height="35" viewBox="0 0 9 35" xmlns="http://www.w3.org/2000/svg"><path fill="_COLOR1_" d="M1.31 34.966H.975c-.295 0-.53-.09-.71-.27C.09 34.516 0 34.3 0 34.05v-2.33c0-.25.097-.465.288-.645.193-.18.42-.27.687-.27H1.3c1.776 0 3.223-1.37 3.238-3.06v-8.94H.975c-.236 0-.458-.09-.665-.27-.206-.18-.31-.395-.31-.645v-2.33c0-.223.104-.43.31-.625.207-.194.43-.292.665-.292h7.019c.266 0 .494.09.687.27.192.182.29.396.29.646V27.77c0 .032-.008.058-.01.09-.08 3.937-3.477 7.098-7.65 7.104zM.318 0C-.25 11.117 8.62 12.702 8.62 12.702 8.17.522.318 0 .318 0z"/></svg>\n',className:x()(nr,Yn),color:n}):null,o?s(n):null]}),l()]}),o?null:(0,r.tZ)("jdiv",{className:x()(Object.assign(Object.assign({},a),{[tr]:!0})),children:(0,r.tZ)(Ie.SvgIcon,{icon:Kn.default,color:n,className:x()(or,Yn)})})]})};var sr=n(42413),lr=n(54442),cr=n(92745),ur=n(66547),dr=n(97296);var gr=n(8145),pr=n(50339),fr="container__pfqdu",hr="__left__t0cSk",mr="__right__xe3eR",_r="__hasImage__JyqDJ",vr="__show__dpEbP",yr="__isWidgetConstructor__W_BSG",Cr="close__x_eIf",Er="wrapper__zWr55";const br=({show:e,children:t,orientation:n,design:i,appZoom:o,isWidgetConstructor:a,hasImage:s,onClick:l,onClose:c})=>{var u;return(0,r.BX)("jdiv",{className:x()(fr,{[vr]:e,[hr]:!a&&"left"===n,[mr]:a||"right"===n,[yr]:a,[_r]:s}),style:{zoom:o&&1!==o?.75:null,"--jv-mobile-proactive-color":null!==(u=null==i?void 0:i.textColor)&&void 0!==u?u:null,"--jv-mobile-proactive-background":(null==i?void 0:i.background)?(0,pr.buildBackground)(null==i?void 0:i.background):null},children:[(0,r.tZ)("jdiv",Object.assign({className:Cr,onClick:c},(0,ot.locator)("MOBILE_PROACTIVE_CLOSE"),{children:(0,r.tZ)(gr.Tw,{})})),(0,r.tZ)("jdiv",{className:Er,onClick:a?void 0:l,children:t})]})};var Sr="agent__GJcUG",Tr="avatar__IPD4s",Dr="name__pcjqJ";const wr=({name:e,avatarUrl:t,qaId:n})=>(0,r.BX)("jdiv",{className:Sr,children:[t?(0,r.tZ)("jdiv",Object.assign({className:Tr,style:{backgroundImage:`url(${t})`}},(0,ot.locator)(`${n}_AGENT_AVATAR`))):(0,r.tZ)(Ie.SvgIcon,{icon:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36">\n  <defs>\n    <circle id="a" cx="18" cy="18" r="18"/>\n  </defs>\n  <g fill="none" fill-rule="evenodd">\n    <mask id="b" fill="#fff">\n      <use xlink:href="#a"/>\n    </mask>\n    <use fill="#191D2E" opacity=".1" xlink:href="#a"/>\n    <path fill="#BFC0C5" fill-rule="nonzero" d="M27.588 29.805h-1.891a3.783 3.783 0 0 1-3.783-3.783v-1.215c.837-.995 1.437-2.171 1.81-3.414.039-.21.24-.313.375-.457.724-.725.866-1.946.323-2.816-.074-.132-.207-.247-.2-.41 0-1.11.006-2.22-.001-3.329-.03-1.338-.412-2.73-1.35-3.72-.758-.801-1.798-1.278-2.87-1.482-1.357-.259-2.775-.246-4.118.096-1.163.294-2.257.975-2.933 1.986-.598.878-.86 1.945-.905 2.996-.017 1.128-.004 2.26-.007 3.39.025.227-.167.38-.253.568-.512.928-.287 2.192.535 2.867.209.144.248.407.324.633a9.148 9.148 0 0 0 1.704 3.051v1.256a3.783 3.783 0 0 1-3.782 3.783H8.674S5.246 30.751 3 35.479v1.892a1.89 1.89 0 0 0 1.891 1.89h26.48a1.89 1.89 0 0 0 1.891-1.89v-1.892c-2.246-4.728-5.674-5.674-5.674-5.674z" mask="url(#b)"/>\n  </g>\n</svg>',className:Tr,qaId:`${n}_AGENT_AVATAR_PLACEHOLDER`}),(0,r.tZ)("jdiv",Object.assign({className:Dr},(0,ot.locator)(`${n}_AGENT_NAME`),{children:e}))]});var Or="iMessageLink__kkE98";const Ar=({href:e,onClick:t})=>(0,r.tZ)("a",{href:e,target:"_blank",rel:"nofollow noopener noreferrer",className:Or,onClick:t});var Mr="content__hEiGP",Ir="__large__CPLDX",Rr="mdWrapper__DQzO3",kr="image__viAO_",Lr="text__t6nDT",Pr="mdTitle__HSyV1",xr="mdText__Ct_gF",Nr="mdLink__p1A6b";const Fr=({text:e,imgSrc:t,isMarkdown:n,qaId:o})=>{const a=(0,i.useRef)(null),s=(0,i.useMemo)(()=>!!a.current&&("--jv-mobile-proactive-md-max-height"in a.current.style||a.current.style.setProperty("--jv-mobile-proactive-md-max-height","150px"),a.current.clientHeight>=150),[a.current]);return(0,r.BX)("jdiv",{className:x()(Mr,{[Ir]:s}),children:[t&&(0,r.tZ)("jdiv",Object.assign({className:kr,style:{backgroundImage:`url(${t})`}},(0,ot.locator)(`${o}_CONTENT_IMAGE`))),n?(0,r.tZ)(dn.Markdown,{ref:a,theme:{wrapper:Rr,heading:{h1:Pr},link:Nr,text:xr},qaId:`${o}_CONTENT_MARKDOWN`,children:e}):(0,r.tZ)(In.Text,{className:Lr,includeWrapper:!0,qaId:`${o}_CONTENT_TEXT`,children:e})]})},jr=()=>{(0,tt.useErrorCatcher)("MobileProactiveController");const{widgetMobileOrientation:e,proactiveContent:t,iMessageURL:n,agentAvatarURL:o,callHeaderText:a,appZoom:s,isWidgetConstructor:l}=(()=>{var e;const{isWidgetConstructor:t}=(0,I.useWidgetConstructorContext)(),n=(0,D.useAppSelector)(dr.T),r=(0,D.useAppSelector)(At.selectCampaignWidgetMobileProactive),i=Ut(null==n?void 0:n.campaignId),o=(0,D.useAppSelector)(At.selectWidgetMobileOrientation),a=(0,D.useAppSelector)(At.selectCallHeaderText),{app:s}=(0,D.useAppSelector)(he.o),l=(0,yt.getMobileProactiveContent)(n,r||(null==i?void 0:i.content.widget_settings),t);return{widgetMobileOrientation:o,proactiveContent:l,constructorProactive:r,iMessageURL:(0,ft.getJoints)().links.imUrl||null,agentAvatarURL:(null===(e=null==l?void 0:l.agent)||void 0===e?void 0:e.avatarUrl)?(0,_t.getAvatarApiURL)(l.agent.avatarUrl):"",callHeaderText:a,appZoom:s,isWidgetConstructor:t}})(),{text:c,agent:u,imgSrc:d,design:g,isMarkdown:p,isCampaign:f}=t,h=f?"MOBILE_PROACTIVE_CAMPAIGN":"MOBILE_PROACTIVE",[m,_]=(0,lr.useToggle)(!1),v=()=>{_(),setTimeout(()=>{(0,cr.Z)(),ur.default.set("close_time",Date.now()),(0,ae.telemetry)("invite_close")},200)};return(0,i.useEffect)(()=>{setTimeout(()=>{_()},200)},[]),(0,r.BX)(br,{show:m,orientation:e,design:g,appZoom:s,isWidgetConstructor:l,hasImage:Boolean(d),onClick:()=>{St(a,!0)},onClose:v,children:[n&&(0,r.tZ)(Ar,{href:n,onClick:()=>{(0,ae.telemetry)("powerbtn_open_im"),v()}}),u&&u.name&&(0,r.tZ)(wr,{name:u.name,avatarUrl:o,qaId:h}),(0,r.tZ)(Fr,{text:c,imgSrc:d,isMarkdown:p,qaId:h})]})};var Br=n(34948),Ur="wrap__A3wuE",Vr="_show__WTb5S",Wr="_popupShow__eF_gm",Gr="overlay__yEcFI",Hr="button__ZfPDJ",$r="__hide__gRGrE",zr="__inzoom__XvKgf",Zr="closeIconWrap__ZKKvK",qr="closeIcon__QJYOu",Kr="_hoverMenu__VTyxa",Yr="menuWrap__iNsOu",Jr="__hover__ZKXf7",Qr="_orientationRight__vzzy0",Xr="_orientationLeft__Rt73s",ei="_mobileDesigner__KSzoc",ti="_extensionsTarget__B3JXm",ni="_desktopOffsetBottom__LrXpb",ri="_mobileOffsetBottom__MVTYo";let ii=!1;const oi=()=>{const{showMobileMenu:e}=(0,D.useAppSelector)(we),{hidden:t,top:n,left:i,route:o,zoom:a,isCallEnabled:s,showLogo:l,unreadMessageCount:c,popup:u,iconColor:g,widgetMobileOrientation:p,desktopOffsetBottom:f,mobileOffsetBottom:h,powerButtonColor:m,desktopPosition:_,isOnline:v,linkOverlay:y,isCustomLabel:C,isMobileOrTablet:E,isWidgetTarget:b,isDesktop:S,isPopupShow:T,designerOptions:w,onClick:A,onOverlayClick:M}=qn(),I=(a.user||0)>1.1,R=E&&Boolean(h),k=S&&Boolean(f),L={[Ur]:!0,[Qr]:S?"right"===_:"right"===p,[Xr]:S?"left"===_:"left"===p,[Wr]:T,[Vr]:!t,[Kr]:S,[ei]:w&&w.isMobileView,[ni]:k,[ri]:R,[ti]:b,__jivoMobileButton:!(!E||I),__jivoDesktopButton:S},P={};return I?P.transform=`translate(${i}px,${n}px) scale(${a.app})`:1!==a.app&&(P.zoom=a.app),R&&(P["--jivoMobileOffsetBottom"]=`${null!=h?h:0}px`),k&&(P["--jivoDesktopOffsetBottom"]=`${null!=f?f:0}px`),(0,r.BX)("jdiv",Object.assign({className:x()(L),style:P},(0,ot.locator)("POWER_BUTTON_"+(v?"ONLINE":"OFFLINE")),{children:[u?(0,r.tZ)(jr,{}):null,y?(0,r.tZ)("a",{className:Gr,href:y,target:j.platform.isChromeIos?"_self":"_blank",rel:"nofollow noopener noreferrer",onPointerDown:M}):null,(0,r.BX)("jdiv",{className:x()({[Hr]:!0,[$r]:C||o!==d.Route.LABEL||!(j.platform.isTablet||j.platform.isDesktop)&&e,[zr]:I}),style:{background:m},onMouseEnter:()=>{S&&oe.pageStoreDispatch.setShowMobileMenu(!0)},onClick:()=>{A(e)},onTouchStart:()=>{ii=!1},onTouchMove:()=>{ii=!0},onTouchEnd:t=>{ii||(t.preventDefault(),A(e))},children:[c?(0,r.tZ)(sr.C,{show:!0,text:c,size:"large",top:-2,right:0}):null,(()=>{if(!j.platform.isTablet||!e)return(0,r.tZ)(O,{allowedRoutes:[d.Route.LABEL],children:(0,r.tZ)(ar,{showLogo:l,isCallEnabled:s,iconColor:g,isOnline:v})})})(),S||j.platform.isMobile||!e?null:(0,r.tZ)("jdiv",Object.assign({className:Zr},(0,me.onClickHandler)(()=>{_e.Router.setNext(d.Route.LABEL),oe.pageStoreDispatch.setShowMobileMenu(!1)},!0,!0),{children:(0,r.tZ)(Ie.SvgIcon,{icon:Br.default,color:g,className:qr})}))]}),(()=>{if(j.platform.isTablet||j.platform.isDesktop)return(0,r.tZ)(O,{allowedRoutes:[d.Route.LABEL],children:(0,r.tZ)("jdiv",{className:x()({[Yr]:!0,[Jr]:S}),children:(0,r.tZ)($e.c,{show:e})})})})()]}))},ai=()=>{(0,tt.useErrorCatcher)("PowerButtonContainer");const{designerOptions:e,route:t,zoom:n,allowedRoutes:o,isDesktop:a,labelBubble:s,hiddenByRules:l}=qn();if(e.isMobileView&&e.mobileRenderTarget){const t=(0,g.getPageWindow)().document.getElementById(e.mobileRenderTarget);return t?(0,i.createPortal)((0,r.tZ)(oi,{}),t):null}return t===d.Route.HIDDEN||n.user&&n.user>2||j.platform.isChatPage||a&&!s||l?null:(0,r.tZ)(O,{allowedRoutes:o,children:(0,r.tZ)(oi,{})})};n(95020);var si=n(14264),li=n(23116),ci=n(47361),ui=n(22866),di=n(13077),gi=n(41504),pi=n(8717),fi=n(49963),hi=n(74619),mi=n(83425),_i=n(25467);const vi=(0,a.createLogger)("VI"),yi=["purl","ptitle","navcount","visits","chats","visible","status","attr","cdata"];class Ci{constructor(e){this.net=null,this.isConnected=!1,this.inited=!1,this.isInvited=!1,this.needConnect=!1,this.changeCurrentKeysFn=(0,ci.debounce)(this.changeCurrentKeys.bind(this),100),this.setViKeys(e.keys),(0,vt.pageVisible)()?setTimeout(()=>this.init(),1e3):(0,c.listenVisibility)(this.onVisibilityChange.bind(this))}setNeedConnect(e){vi.warn("setNeedConnect",e),this.needConnect=e}onVisibilityChange(){vi.log("onVisibilityChange"),(0,vt.pageVisible)()&&!this.inited&&(this.changeCurrentKeysFn(),this.init(),this.inited=!0)}init(){if(this.openConnection()){if(vi.log("start init"),this.net&&(this.net.onopen=this.connectionOnOpen.bind(this),this.net.onget=this.onget.bind(this),this.net.onset=this.onset.bind(this),this.net.onclose=this.connectionOnClosed.bind(this),this.net.onerror=this.connectionOnError.bind(this),this.net.onfail=this.connectionOnFail.bind(this),this.net.ondrop=this.connectionOnDrop.bind(this)),this.cacheCurrentKeys=this.getAllCurrentKeys(),si.default.on("create",this.changeCurrentKeysFn),li.default.addListener("update",(0,ci.debounce)(this.checkClientAway.bind(this),de.AWAY_CLIENT_TIMEOUT)),(0,u.isWixContext)()){const e=(0,g.getPageWindow)().wix_context;e.addEventListener(e.Events.PAGE_NAVIGATION,this.changeCurrentKeysFn)}(0,c.listenVisibility)(()=>{this.changeCurrentKeysFn(),(0,vt.pageVisible)()&&this.openConnection()}),(0,re.getFeatures)().enableSpaNavigate&&new hi.Observer({onTitleChange:this.changeCurrentKeysFn,onUrlChange:this.changeCurrentKeysFn})}}checkClientAway(){li.default.isActive||(0,vt.pageVisible)()||this.closeConnection()}getURL(){const e=(0,re.getClient)(),{widgetId:t,viHost:n}=(0,re.getSystemSettings)();return`${Kt.EnvironmentManager.isProduction()||"https:"===(0,g.getProtocol)()?"wss":"ws"}://${n}/${t}?${e.visitorId}`}openConnection(){var e;return vi.warn("openConnection",this.isConnected,this.needConnect),this.isConnected||!this.needConnect?(vi.log("cant open connection"),!1):(this.net||(this.net=new window.ClientSocket),null===(e=this.net)||void 0===e||e.open(this.getURL()),!0)}closeConnection(){var e;vi.log("close connection"),this.isConnected&&(null===(e=this.net)||void 0===e||e.close())}connectionOnOpen(){vi.log("connection open"),this.isConnected=!0,this.changeCurrentKeysFn(),this.sendDynamicKeys()}connectionOnClosed(e){this.isConnected=!1,vi.log("connection close: ",e)}connectionOnError(e){vi.error("connection error: ",e)}connectionOnFail(e){(0,ae.telemetry)("visitors_fail",{param1:e})}connectionOnDrop(e){0!==e&&(l.appDispatchers.setVIReconnectTime((new Date).getTime()+e),vi.log("connection drop: ",e/1e3+"s"),setTimeout(()=>{mi.ConfigUtils.reloadConfig(this.openConnection.bind(this))},e))}setViKeys(e){this.keys=e,this.changeCurrentKeysFn()}getKeys(){return this.keys}getKey(e){return this.getKeys()[e]()}getAllCurrentKeys(){return Object.keys(this.getKeys()).reduce((e,t)=>(e[t]=this.getKey(t),e),{})}changeCurrentKeys(){const e=this.getKeys();this.isConnected&&JSON.stringify(this.cacheCurrentKeys)!==JSON.stringify(e)&&Object.keys(this.getKeys()).forEach(e=>{const t=this.getKey(e);this.cacheCurrentKeys[e]!==t&&this.set(e,t)})}sendDynamicKeys(){yi.forEach(e=>{this.set(e,this.getKey(e))})}sendAllKeys(e,t){vi.log("sendAllKey",this.getKeys()),Object.keys(this.getKeys()).forEach(n=>{var r,i;const o=this.cacheCurrentKeys[n];if(o||(this.cacheCurrentKeys[n]=this.getKey(n)),o){const a={room:t,to:e,key:n,value:o};null===(r=ui.default.getInstance())||void 0===r||r.saveViEvent(a),null===(i=this.net)||void 0===i||i.set(a)}})}set(e,t,n,r){var i,o;if(this.isConnected&&null!=t){this.cacheCurrentKeys[e]=t;const a={key:e,value:t};r&&(a.room=r),n&&(a.room=r),null===(i=ui.default.getInstance())||void 0===i||i.saveViEvent(a),null===(o=this.net)||void 0===o||o.set(a)}}onget(e){var t;if(null===(t=ui.default.getInstance())||void 0===t||t.saveViEvent(e),"*"===e.key||"all"===e.key){this.sendAllKeys(e.from,e.room);const t={startsec:()=>{const e=ur.default.get("enter_ts");return e&&(0,_i.getSecondsDiff)(e)}};Object.entries(t).forEach(([t,n])=>{const r=n();r&&this.set(t,r,e.from,e.room)})}else{const t=this.getKey(e.key);t&&this.set(e.key,t,e.from,e.room)}}onset(e){var t;const{isOnline:n,route:r}=(0,re.getApp)();null===(t=ui.default.getInstance())||void 0===t||t.saveViEvent(e),"invite"!==e.key||this.isInvited||(n||(0,pi.isChatClosedRoute)(r)&&(l.transitionDispatchers.startTransition(T.ScriptName.OPEN_WIDGET),l.appDispatchers.setAppRoute(d.Route.CHAT)),fi.connectionAdapter.checkConnection(()=>fi.connectionAdapter.sendEvent(new gi.StartChat(parseInt(e.value)))),this.isInvited=!0,setTimeout(()=>{this.isInvited=!1},de.APP_INVITE_TIME),(0,ae.telemetry)("visitors_invite",{param1:e.value}),(0,di.setRuleLocal)("isVisitorInvite"))}}const Ei=e=>(vi.log("run"),new Ci({keys:e}));var bi=n(73687);var Si=n(56026),Ti=n(10465),Di=n(90189);const wi=()=>{const e=(0,g.getPageWindow)(),{route:t,chatAccepted:n,chatStarted:r}=(0,D.useAppSelector)(w.selectApp),o=(0,i.useRef)((0,u.getCurrentPage)().title),{name:a,phone:s,email:l,description:c,clientId:d,utm:p,priorityAgentId:f,avatarUrl:h,customData:m,attributes:_}=(0,D.useAppSelector)(Nt.selectClient),v=(0,D.useAppSelector)(zn.selectProactive),y=Boolean(v.name),C=(0,D.useAppSelector)(Di.selectChats),E=(0,D.useAppSelector)(Di.selectChatsCount),b=C[C.length-1],S=(()=>{const e=(0,D.useAppSelector)(Zn.selectCurrentChatMessages);return(0,i.useMemo)(()=>{const t=e.filter(e=>[ct.MessageInitiator.AGENT,ct.MessageInitiator.AGENT_BOT].includes(e.from)),n=e.filter(e=>e.from===ct.MessageInitiator.CLIENT);return!t.length&&n.length>0},[e])})(),T={name:()=>a,phone:()=>s,email:()=>l,desc:()=>c,purl:()=>(0,u.isWixContext)()?e.wix_url:(new Si.Z).decode((0,u.getCurrentPage)().url),ptitle:()=>{let{title:t}=(0,u.getCurrentPage)();return t===(0,F.l10n)("lblNewMessage")&&(t=(null==o?void 0:o.current)||""),(0,u.isWixContext)()?e.wix_title:t},cid:()=>d?d.split(".")[0]:null,utm:()=>JSON.stringify(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},p.campaign&&{campaign:p.campaign}),p.source&&{source:p.source}),p.medium&&{medium:p.medium}),p.keyword&&{keyword:p.keyword}),p.term&&{keyword:p.term}),p.content&&{content:p.content})),status:()=>(({chatAccepted:e,chatStarted:t,proactiveShow:n,hasClientUnanswered:r})=>(0,J.isCallActive)()?"on_call":t&&e?"on_chat":t&&!e&&fi.connectionAdapter.isConnected()&&r?"invite_sent":n?"proactive_show":"on_site")({chatAccepted:n,chatStarted:r,proactiveShow:y,hasClientUnanswered:S}),navcount:()=>ur.default.get("pages_count"),visits:()=>bi.default.get("visits_count"),chats:()=>E,visible:()=>(0,vt.pageVisible)(),opened:()=>!(0,pi.isChatClosedRoute)(t),agentids:()=>JSON.stringify(n?b.joinedAgents:[]),botids:()=>JSON.stringify(n?b.joinedBots:[]),pa_id:()=>f?String(f):null,avatar:()=>h,wversion:()=>Kt.EnvironmentManager.getVersion(),cdata:()=>m?JSON.stringify(m):null,attr:()=>(0,Ti.x)(_)?null:JSON.stringify(_)};return T},Oi=()=>{(0,tt.useErrorCatcher)("VisitorsInsight");const e=(()=>{const{isOnline:e,route:t,viReconnectTime:n,maintenance:r}=(0,D.useAppSelector)(w.selectApp),{botmode:i}=(0,D.useAppSelector)(At.selectSystemSettings),{hideOffline:o}=(0,D.useAppSelector)(At.selectUserSettings),{newVisitorsInsight:a,disableMobile:s}=(0,D.useAppSelector)(At.selectFeaturesSettings);return Boolean(a&&!r&&!i&&!bi.default.get("is_blacklisted")&&!(0,u.isWixEditor)()&&!Ye.isDesignerEditor&&!(0,u.isAppCobrowse)()&&!(!e&&o)&&!(t===d.Route.HIDDEN)&&!(s&&j.platform.isMobileOrTablet)&&(!n||(new Date).getTime()>n))})(),t=wi(),n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{var r;e&&(null===(r=n.current)||void 0===r||r.setViKeys(t))},[t,e]),(0,i.useEffect)(()=>{var t,r;null===(t=n.current)||void 0===t||t.setNeedConnect(e),e?l.appDispatchers.setVIReconnectTime(null):null===(r=n.current)||void 0===r||r.closeConnection()},[e,n]),(0,i.useEffect)(()=>{var r;e&&(n.current=Ei(t),null===(r=n.current)||void 0===r||r.setNeedConnect(e))},[]),null},Ai=i.default.lazy(()=>n.e(829).then(n.bind(n,60484)).then(e=>({default:e.Cobrowse}))),Mi=()=>{const e=(()=>{const[e,t]=(0,i.useState)((0,g.getCobrowseHash)()||void 0);return(0,i.useEffect)(()=>{const e=()=>t((0,g.getCobrowseHash)());return(0,g.getPageWindow)().addEventListener("hashchange",e),()=>{(0,g.getPageWindow)().removeEventListener("hashchange",e)}},[]),e})();return e?(0,r.tZ)(i.Suspense,{fallback:null,children:(0,r.tZ)(Ai,{hash:e})}):void 0};var Ii=n(29854);const Ri=e=>e.extensions.target,ki=({children:e})=>{const t=(()=>{const e=(0,D.useAppSelector)(Ri);return{target:e,isWidgetTarget:Boolean(e),isWidgetExtensions:!0}})(),{target:n,isWidgetTarget:o}=t,{document:a}=(0,g.getPageWindow)(),s=o?a.getElementById(n):null,l=(0,r.tZ)(Ii.M.Provider,{value:t,children:e});return s?(0,i.createPortal)(l,s):l};var Li=n(56163);const Pi=({children:e})=>{const t=(()=>{const e=(0,D.useAppSelector)(At.selectCampaignWidgetMobileView),t=(0,D.useAppSelector)(At.selectCampaignWidgetPreview),n=(0,D.useAppSelector)(At.selectCampaignWidgetMessageFeed);return(0,i.useEffect)(()=>{l.appDispatchers.setHiddenByRules(!0),l.appDispatchers.setIsInputDisabled(!0)},[]),{campaignWidgetMessageFeed:n,isPreview:t,isMobileView:e,isWidgetConstructor:!0}})(),{isMobileView:n,isPreview:o}=t;return(0,r.BX)(Li.e.Provider,{value:t,children:[!o&&(0,r.tZ)("style",{children:"body > jdiv {display: none;} jdiv {--jv-background-globe: #ffffff; --jv-text-link: #367FEE; }"}),e,n&&(0,r.tZ)(jr,{})]})};var xi=n(17739),Ni=n(17097);const Fi=()=>{const e={target:(0,D.useAppSelector)(At.selectContactFormPreviewTarget),previewSettings:(0,D.useAppSelector)(At.selectContactFormPreviewSettings),isContactFormPreview:!0},{target:t}=e,{document:n}=(0,g.getPageWindow)(),o=t?n.getElementById(t):null;return o?(0,i.createPortal)((0,r.tZ)(Ni.h.Provider,{value:e,children:(0,r.tZ)(an,{children:(0,r.tZ)(xi.t,{})})}),o):null};var ji=n(8519);const Bi=({children:e})=>{const t=Kt.EnvironmentManager.isExtensionsEnable(),n=Kt.EnvironmentManager.isWidgetConstructor(),i=Kt.EnvironmentManager.isContactFormPreview();let o=e;return ji.j9?null:i?(0,r.tZ)(Fi,{}):(n&&(o=(0,r.tZ)(Pi,{children:o})),t&&(o=(0,r.tZ)(ki,{children:o})),(0,r.tZ)(r.HY,{children:o}))};var Ui=n(1451);const Vi=(0,n(25943).be)(),Wi=({children:e,onLocaleImportError:t})=>((0,i.useEffect)(()=>{const e=(0,g.getPageWindow)(),n=e=>{const{locale:n,retry:r}=e.detail;null==t||t({locale:n,retry:r})};return e.addEventListener("jvtolgeelocaleimporterror",n),()=>{e.removeEventListener("jvtolgeelocaleimporterror",n)}},[]),(0,r.tZ)(Ui.qF,{tolgee:Vi,children:e})),Gi=({children:e})=>(0,r.tZ)(Wi,{onLocaleImportError:e=>{(0,ae.telemetry)("tolgee_locale_import_error",{param1:e.locale,param2:e.retry?"retry":"no_retry"})},children:e}),Hi=()=>(0,r.tZ)(E.zt,{store:b.reduxStore,children:(0,r.tZ)(Gi,{children:(0,r.tZ)(Bi,{children:(0,r.BX)(an,{children:[(0,r.tZ)(kt,{}),(0,r.tZ)(ai,{}),j.platform.isMobileOrTablet||j.platform.isChatPage?(0,r.tZ)(Ke,{}):null,j.platform.isDesktop&&!j.platform.isChatPage&&(0,r.tZ)($n,{}),(()=>{if(!Xt.isSoundDisabled&&Xt.WebAudioDisabled)return(0,r.tZ)(Qt,{sounds:Xt.Sounds})})(),j.platform.isMobileOrTablet||j.platform.isChatPage?null:(0,r.tZ)(ge,{ref:e=>{e&&v.default.set(y.Component.WIDGET_CONTAINER,e)}}),(0,r.tZ)(qt,{}),(0,r.tZ)("jdiv",{className:"jv-pseudo-height"}),j.platform.isMobileOrTablet?null:(0,r.tZ)("jdiv",{className:"jv-mouse-track",ref:e=>{e&&v.default.set(y.Component.MOUSE_TRACK,e)}}),(0,r.tZ)(Mi,{}),(0,r.tZ)(Oi,{})]})})})});var $i=n(53182);const zi={setRenderTarget(e){return new Promise(t=>{oe.extensionsDispatch.setTarget(e),setTimeout(()=>t(),100)})},reset(){return new Promise(e=>{oe.extensionsDispatch.resetExtensions(),setTimeout(()=>e(),100)})}};let Zi=!1;const qi={updateConfig(e){const{isMobileView:t}=(0,re.getCampaignWidgetSettings)(),{img_src:n,img_position:r,text_color:i,background:o}=e,a=(e=>{const{prechat_buttons:t,text_color:n,background:r,img_src:i,img_position:o}=e;return[{from:"agent",from_id:1,text:(0,yt.getFormattedTextForProactiveCampaign)(e),type:"proactive",status:"read",body:{unsave:!0,is_markdown:!0,extra:{text_color:n,background:r,img_src:i,img_position:o}}},{body:{unsave:!0,prechats:t},type:"prechat",from:"form"}]})(e),s=(0,yt.getFormattedTextForProactiveCampaign)(e,!0);oe.campaignWidgetDispatch.setMessageFeed(a),oe.campaignWidgetDispatch.setMobileProactive({img_src:n,img_position:r,background:o,text_color:i,text:s}),Zi||t||qi.openWidget()},setMobileView(e){oe.campaignWidgetDispatch.setMobileView(e)},showWidgetGalleryPreview(e){oe.campaignWidgetDispatch.setPreview(e)},openWidget(){Zi=!0,_e.Router.next(d.RouterEvent.ToChat),l.transitionDispatchers.startTransition(T.ScriptName.OPEN_WIDGET)},closeWidget(){Zi=!1,_e.Router.next(d.RouterEvent.CloseWindow),l.transitionDispatchers.startTransition(T.ScriptName.CLOSE_WIDGET)},reset(){qi.closeWidget(),oe.campaignWidgetDispatch.reset()}},Ki={updateConfig(e){oe.contactFormPreviewDispatch.updateContactFormPreview({settings:e})},setRenderTarget(e){oe.contactFormPreviewDispatch.updateContactFormPreview({target:e})},reset(){oe.contactFormPreviewDispatch.reset()}};var Yi=n(39398),Ji=n(58406);const Qi=i.default.lazy(()=>n.e(829).then(n.bind(n,60484)).then(e=>({default:e.Cobrowse}))),Xi=(0,a.createLogger)("Jivo Widget");let eo=null;class to{constructor(){if(eo)return eo;eo=this,this.rootContainer=null,this.initialize(),this.sendInitialTelemetry()}static getInstance(){return eo}initialize(){(0,p.xJ)(),this.initStories(),this.initManagers(),this.initIntegrations(),this.initPublicApi(),(0,p.oD)()}initStories(){Xi.log("Initializing stories"),(0,p.Hh)(),(0,p.wH)(),(0,Ji.g)()}initManagers(){Xi.log("Initializing managers"),(0,p.y)(),(0,p.KI)(),Mt.i.init(),(0,p.a3)(),(0,p.rW)(),(0,p.XY)(),(0,p.I0)(),Yi.p.init()}initIntegrations(){Xi.log("Initializing integrations"),(0,p.Tc)(),(0,h.z)(),(0,m.r)(),(0,p.uF)(),f.default.requestCWAvailable(),(0,u.deleteNonce)()}initPublicApi(){Xi.log("Initializing public api"),(0,p.lE)(),(0,p.tk)(),(0,_.s)(),(0,$i.W)(),Kt.EnvironmentManager.isExtensionsEnable()&&((0,g.getPageWindow)()._widgetExtensionsAPI=zi),Kt.EnvironmentManager.isWidgetConstructor()&&((0,g.getPageWindow)()._widgetCampaignConstructorAPI=qi),Kt.EnvironmentManager.isContactFormPreview()&&((0,g.getPageWindow)()._contactFormPreviewAPI=Ki)}sendInitialTelemetry(){(0,p.cT)(),(0,p.Xn)()}start(){if(Xi.warn("start"),(0,u.isAppCobrowse)()){return void o((0,g.getPageWindow)().document.createElement("jdiv")).render((0,r.tZ)(i.Suspense,{fallback:null,children:(0,r.tZ)(Qi,{})}))}(0,p.KA)(),this.renderApp()}renderApp(){this.render(),l.appDispatchers.setAppStarted(!0),(0,p.GZ)(),(0,p.Bu)(),(0,p.G2)()}stop(){Xi.warn("stop"),(0,p.sT)()}render(){Xi.log("Rendering"),(0,C.callUserFunction)("onInitCallback");const e=(0,g.getPageWindow)(),t=e.document.body;this.rootContainer=e.document.createElement("jdiv"),(0,c.addListener)(e,"jBeforeunload",this.unmount.bind(this)),t.appendChild(this.rootContainer);const{isOnline:n,chatStarted:i,route:a}=(0,re.getApp)(),l=!(!n&&s.default.hide_offline&&i);if(Xi.log("RENDER",l),l){o(this.rootContainer).render((0,r.tZ)(Hi,{ref:e=>{v.default.set(y.Component.ROOT_COMPONENT,e)}})),(0,p.QD)()}a===d.Route.HIDDEN&&Xi.warn("Widget is hidden."),(0,C.callUserFunction)("onLoadCallback")}unmount(){Xi.log("Unmounting");const e=(0,g.getPageWindow)(),t=e.document.body;if(this.rootContainer){o(this.rootContainer).unmount(),this.rootContainer=null}const n=e.document.querySelectorAll("body > jdiv");n.length>0&&n.forEach(e=>t.removeChild(e)),(0,c.removeEvent)(e,"jBeforeunload",this.unmount.bind(this)),(0,C.callUserFunction)("onWidgetDestroy")}}},79010:function(e,t,n){"use strict";n.d(t,{tk:function(){return ve},lE:function(){return _e},Hh:function(){return Ce},G2:function(){return Fe},uF:function(){return Oe},XY:function(){return Ne},KI:function(){return Te},I0:function(){return Pe},y:function(){return Ae},a3:function(){return Re},xJ:function(){return ke},Tc:function(){return Me},GZ:function(){return we},wH:function(){return Le},QD:function(){return De},rW:function(){return Ie},$W:function(){return je},KA:function(){return me},Bu:function(){return Ee},cT:function(){return Se},Xn:function(){return be},sT:function(){return xe},oD:function(){return ye}});var r=n(10018),i=n(26754),o=n(44145),a=n(22866),s=n(66547),l=n(73687),c=n(95003),u=n(96367),d=n(14264),g=n(28723),p=n(21476),f=n(97490),h=n(71277),m=n(5735),_=n(50216),v=n(74890),y=n(16500),C=n(86383),E=n(8117),b=n(24344),S=n(42908),T=n(62096),D=n(26932),w=n(69882),O=n(16016),A=n(54415),M=n(45493),I=n(16026),R=n(90061),k=n(25528),L=n(49963),P=n(38042);const x=(0,R.createLogger)("ConnectionBuffer");var N=class{constructor(e){this.connectionManager=e,this.messages=[]}add(e){x.log("add",e),this.messages.push(e)}remove(e){x.log("remove",e),this.messages=this.messages.filter(t=>{const n=e,r=t;return n.private_id!==r.private_id||n.name!==r.name})}clear(){x.warn("clear"),this.messages=[]}flush(){x.log("flush"),this.messages.forEach(e=>{const t=e;"client_message_campaign"!==t.name&&this.connectionManager.send(t)}),this.clear()}find(e,t){return this.messages.find(n=>n[e]===t)}isEmpty(){return 0===this.messages.length}};const F=(0,R.createLogger)("ConnectionManager");var j=class{constructor(e,t){this.buffer=new N(this),this.receiver=new t(this),this.provider=new e(this)}open(e,t){return F.warn("open"),e&&this.receiver.setStartupCallback(e),this.provider.connect(t)}close(){F.warn("close"),this.provider.disconnect(),this.buffer.clear()}isOpen(){return this.provider&&this.provider.connected}send(e){F.warn("send",e),this.provider.send(e)}sendIfConnected(e){F.warn("sendIfConnected",e,`Connected: ${this.isOpen()}`),this.isOpen()&&this.send(e)}logSocketEvent(e){a.default.getInstance().saveSocketEvent(e)}flushBuffer(){F.warn("flushBuffer",this.buffer),this.buffer.isEmpty()||(this.buffer.flush(),(0,P.telemetry)("client_message_flush_buffer"))}},B=n(88319),U=n(80352),V=n(32183),W=n(45926);class G extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=G.name,this.provider=t}}class H extends G{constructor(e,t){super(e,t)}}class $ extends H{constructor(e,t){super(`Message parse error: ${e}`,t)}}class z extends H{constructor(e,t){super(`JC error: ${e}`,t)}}const Z=(0,R.createLogger)("ChatServerProvider");var q,K=class{constructor(e){this.name="ChatServerProvider",this.manager=e,this.url=this.getUrl(),this.connection=null,this.connected=!1,this.lastError=null}connect(e){return Z.log("connect, force:",e),new Promise((t,n)=>{try{this.needToConnect(e)&&this.setupConnection(t,n)}catch(e){Z.error(e),n(e)}})}disconnect(){Z.warn("disconnect",this.connection),this.connection&&(this.connection.off(),this.connection.close(),this.connection=null)}send(e){Z.log("send",this.connected,e);try{if(this.connection&&this.connected){let t=null;try{t=JSON.stringify(e)}catch(e){throw new $(e.message,this.name)}if(t)try{this.connection.send(t),this.manager.logSocketEvent(e)}catch(e){throw new z(e.message,this.name)}}else Z.warn("open connection",this.connected),this.manager.open(null,!0)}catch(e){this.handleSendError(e)}}setLastError(e){Z.warn("setLastError",e),this.lastError=e}handleSendError(e){(e instanceof z||e instanceof $)&&A.Monitoring.reportException(e)}setupConnection(e,t){Z.log("setupConnection"),this.connection=new B.Z(this.url),this.connection.on("open",e=>{this.connected=!0,this.manager.receiver.onConnect(e)}),this.connection.on("close",e=>{this.connected=!1,this.manager.receiver.onDisconnect(e)}),this.connection.on("error",e=>{this.manager.receiver.onError(e),t({ok:!1})}),this.connection.on("message",t=>{this.manager.receiver.onMessage(t),e({ok:!0})}),this.connection.open()}getUrl(){const{chatHost:e,siteId:t,widgetId:n}=(0,o.getSystemSettings)(),{visitorId:r}=(0,o.getClient)(),i=`/cometcn/${t}/${n}/${r}/${Date.now()}`;if(I.EnvironmentManager.isSelfhosted()){return`${(0,W.getProtocol)().includes("https")?"wss://":"ws://"}${e}${i}`}return`wss://${e}${i}`}needToConnect(e){const{recaptcha:t,disableMobile:n}=(0,o.getFeatures)(),r=(0,o.getApp)(),i=_.default.getInstance(),a=(0,o.getClient)();if(Z.log("needToConnect, force:",e),t&&i&&i.isBlocked())return Z.log("Recaptcha is blocked"),!1;if(!e&&r.maintenance)return Z.log("Maintenance mode on!"),!1;const s=(0,w.isWixEditor)()||I.EnvironmentManager.isDesignerEditor(),c=l.default.get("is_blacklisted"),u=r.route==f.Route.HIDDEN&&!e,d=U.platform.isMobileOrTablet&&n;if(s||c||u||d||(0,w.isAppCobrowse)())return Z.log("Connection disabled."),!1;if(3333==this.lastError)return Z.log("Connection disabled spam detected."),!1;if(e&&!this.connected)return Z.log("connection is forced"),!0;if(r.lastMsgTime){const e=(new Date).getTime(),t=Math.abs((e-r.lastMsgTime)/1e3);if(a.sessionId&&r.isOnline&&t<172800)return!0}return a.sessionId&&!r.chatStarted?(Z.warn("Connection disabled chat not started.",this.name),!1):this.connected||!(0,V.pageVisible)()?(Z.warn("Connection already open"),!1):(Z.log("is ok to connect."),!0)}},Y=n(11281),J=n(97778),Q=n(13077),X=n(34445);!function(e){e.DELETED="Deleted"}(q||(q={}));var ee=n(8717),te=n(12822),ne=n(88993),re=n(38106),ie=n(41504);const oe=(0,R.createLogger)("ChatServerReceiver");var ae=class{constructor(e){this.startupCallback=null,this.manager=e}onConnect(e){oe.warn("onConnect",e),this.checkRecaptchaIfNeeded(()=>{clearTimeout(this.maintenanceTimeout);const e=T.reduxStore.getState(),{app:t,chats:n,client:r,proactive:i,settings:o}=e,a=this.formatUTM(r.utm),s=(0,w.getCurrentPage)(),c={title:s.title,url:E.default.decodeString(s.url)},d=(0,ee.isContainerRoute)(t.route),p=n.length?n[n.length-1]:null;this.manager.send(new ie.Startup(c,U.platform.isMobileOrTablet,l.default.get("visits_count")-0,(0,V.pageVisible)(),d,p?p.id:null,I.EnvironmentManager.getVersion(),ne.i.getActiveTestsAsString(),r.sessionId?null:g.HistoryStore.get(),a,i,u.analytics.isAnalyticsIdAvaiable(),r,o.system,(0,re.m)())),D.appDispatchers.setLastChatStatus(X.ChatStatus.STARTUP),(0,Q.setRuleLocal)("sendStartupTime",(new Date).getTime())},()=>{this.manager.close()})}onDisconnect(e){if(oe.warn("onDisconnect",e),this.manager.close(),this.manager.provider.setLastError(e.code),this.setStartupCallback(null),(0,Q.setRuleLocal)("sendStartupTime",null),clearTimeout(this.maintenanceTimeout),e.reason===q.DELETED&&this.deleteClient(),1013===e.code){(0,te.enableMaintenance)();const e=Math.random()*J.MAINT_RECONNECT_TIMEOUT|0;oe.warn("Set maintenance reconnect timeout",e),this.maintenanceTimeout=setTimeout(()=>{this.manager.open(null,!0)},e)}3333===e.code&&(this.manager.buffer.clear(),(0,P.telemetry)("client_message_spam",void 0,{once:!0}))}onError(e){oe.warn("onError",e)}onMessage(e){oe.log("RECEIVER ON MESSAGE",e);let t=null;try{t=JSON.parse(e),oe.log("RECEIVER ON MESSAGE",t),this.manager.logSocketEvent(t)}catch(e){A.Monitoring.reportException(e)}try{const e=t;e.method&&e.params&&e.params.type&&Y.default[e.params.type]?Y.default[e.params.type](e.params.body):e.method&&Y.default[e.method]?Y.default[e.method](e):e.name&&Y.default[e.name]&&Y.default[e.name](t),!this.startupCallback||"startup_ok"!==e.name&&"resume_ok"!==e.name||(this.startupCallback(),this.setStartupCallback(null))}catch(e){A.Monitoring.reportException(e)}}setStartupCallback(e){oe.warn("setStartupCallback",e),this.startupCallback=e}formatUTM(e){const{campaign:t,source:n,medium:r,keyword:i,term:o,content:a}=e;if(t||n||r||i||o||a)return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t&&{campaign:t}),n&&{source:n}),r&&{medium:r}),i&&{keyword:i}),o&&{term:o}),a&&{content:a})}deleteClient(){D.clientDispatchers.resetClient(),D.appDispatchers.setChatAccepted(!1),D.appDispatchers.setChatStarted(!1),D.appDispatchers.setLastChatStatus(null),d.default.destroy()}checkRecaptchaIfNeeded(e,t){oe.log("checkRecaptchaIfNeeded"),(0,o.getFeatures)().recaptcha?_.default.getInstance().getJivoAntispamToken(e,t):e()}},se=n(42359),le=n(42634),ce=n(61811),ue=n(58406),de=n(24578),ge=n(68403),pe=n(74619),fe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const he=(0,R.createLogger)("App Utils"),me=()=>{he.log("resetting agents"),(0,o.getApp)().chatStarted||D.chatsDispatchers.setNoJoinedAgents()},_e=()=>{he.log("exposeJivoVersion"),(0,W.getPageWindow)().jivo_version=I.EnvironmentManager.getVersion()},ve=()=>{he.log("exposeApi"),(0,W.getPageWindow)().jivo_api=S.api},ye=()=>{he.log("subscribeToPageVisibilityChanges"),y.Z.subscribe(e=>{(0,w.isAppCobrowse)()||((0,de.reloadStories)(),(0,ue.g)()),e&&(C.TitleManager.cancelBlink(),Ne())})},Ce=()=>{const e=(0,o.getClient)();e.visitorId?he.log("Visitor id already exists:",e.visitorId):(e.visitorId=(0,O.generateGUIDCount)(4),he.log("New visitor id:",e.visitorId))},Ee=()=>{he.log("sendBundleLoadedTelemetry"),setTimeout(()=>{var e;(0,P.telemetry)("bundle_loaded",{param1:I.EnvironmentManager.getVersion(),param2:window.loaderContext.store.isNewCode?"newCode":"oldCode",param3:window.navigator.language,param4:(e=window.loaderContext.scriptSrc,(null==e?void 0:e.replace(/\/([A-Za-z0-9]{10})$/,""))||"")},ne.i.isEnabled()?void 0:{probability:"high"})},1e3)},be=()=>{he.log("sendLoadedInIframeTelemetry"),window.parent.window!=window.top&&(0,o.getApp)().route!==f.Route.HIDDEN&&(0,P.telemetry)("in_iframe_started",void 0,{probability:"medium"})},Se=()=>{he.log("sendLoadTimeTelemetry");const e=M.Z.getInstance();if(e&&U.platform.supports.localStorage){const t=e.store.loadTime;t&&((0,P.telemetry)("cdn_load_time",{param1:String(t)}),e.setInStore("loadTime",null))}},Te=()=>{he.log("initDebugDataCollector");const e=(0,o.getApp)(),t=(0,o.getClient)();new a.default(e,r.default,t,i.default,T.reduxStore,d.default)},De=()=>{he.log("initSoundManager"),(0,k.isSoundPlayerDisabled)()||h.default.initSoundPlayer()},we=()=>{var e;(0,ge.isPaidCustomer)()||(null===(e=r.default.campaigns)||void 0===e?void 0:e.length)?(m.default.init(),he.log("initRuleManager success")):he.log("initRuleManager failure")},Oe=()=>{(0,ge.isPaidCustomer)()?(he.log("initAnalytics success"),u.analytics.init()):he.log("initAnalytics failure")},Ae=()=>{he.log("initLoaderContextManager"),new M.Z(r.default.widget_id,c.default)},Me=()=>{if((0,o.getFeatures)().recaptcha){he.log("initRecaptcha");new _.default(r.default.recaptcha).addRecaptchaToPage()}},Ie=()=>{if(U.platform.isMobileOrChatpage)return;new ce.default(e=>{(0,b.callUserFunction)("onResizeCallback",e)}).checkHeight()},Re=()=>{he.log("initMonitoring"),A.Monitoring.init()},ke=()=>{he.log("initPolyfills"),v.Z.init()},Le=()=>{var e;he.log("initSession");const t=s.default.get("enter_ts"),n=(0,o.getClient)();if(!t){s.default.set("enter_ts",(new Date).getTime());const e=l.default.get("visits_count");l.default.set("visits_count",e?e+1:1,31556952);const t={href:(0,W.getPageWindow)().location.href,refer:(0,W.getPageWindow)().document.referrer};try{E.default.setUTM(Object.assign(Object.assign({},t),{setterFn:D.clientDispatchers.setUTM}))}catch(e){e instanceof Error&&(A.Monitoring.reportException(e,"setUtm"),(0,P.telemetry)("set_utm_error",{param1:JSON.stringify(t),param2:e.message}))}}if(null===(e=r.default.campaigns)||void 0===e?void 0:e.length){if((0,o.getApp)().route===f.Route.HIDDEN)return;const e=r.default.campaigns.reduce((e,t)=>{const n=se.StatsManager.get(t.campaign_id);return n||(se.StatsManager.create(t),e.push(t.campaign_id)),n&&!n.isSubmitted&&e.push(t.campaign_id),e},[]);e.length&&se.StatsManager.send({campaignIds:e},"visit")}const i=()=>{he.log("pushHistory"),g.HistoryStore.push({url:(0,w.getCurrentPage)().url,title:(0,w.getCurrentPage)().title})};n.sessionId||(i(),(0,o.getFeatures)().enableSpaNavigate&&new pe.Observer({onUrlChange:i}))},Pe=()=>{I.EnvironmentManager.isProduction()||I.EnvironmentManager.isPartnerApp()||fe(void 0,void 0,void 0,function*(){const{default:e}=yield n.e(308).then(n.bind(n,10517));(new e).installOnPage(),(0,b.callUserFunction)("onDevToolsInit")})},xe=()=>{D.appDispatchers.setAppRoute(f.Route.HIDDEN),h.default.disableSoundPlayer()},Ne=()=>{const e=(0,o.getClient)(),{recaptcha:t}=(0,o.getFeatures)();if(he.warn("initConnection"),L.connectionAdapter.getInstance()||L.connectionAdapter.setConnectionInstance(new j(K,ae)),t&&!e.captchaToken)return void he.warn("Wait for captcha to connect");const n=!!d.default.getClientSendedMessages().length,r=(0,o.getApp)(),i=!r.maintenance&&(r.isOnline&&n||e.sessionId||!r.isOnline&&r.chatStarted);he.warn("needToConnect",i),i&&!L.connectionAdapter.isConnected()&&L.connectionAdapter.openConnect()},Fe=()=>{U.platform.isChatPage&&(D.appDispatchers.setAppIsFocused(!0),p.Router.next(f.RouterEvent.Navigate),setTimeout(()=>{(0,le.addMessagesOnOpen)()},50))},je=()=>{const{campaignId:e}=(0,o.getProactive)(),{isIntroduced:t,eulaAccepted:n}=(0,o.getClient)();if(e&&!t){if(r.default.eula&&!n)return;se.StatsManager.send({campaignId:e},"contacts_fill")}}},13321:function(e,t,n){"use strict";n.r(t),n.d(t,{initPreactDevtools:function(){return o}});var r=n(16026),i=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const o=()=>{i(void 0,void 0,void 0,function*(){if(window.parent.__PREACT_DEVTOOLS__&&!r.EnvironmentManager.isProduction()){yield n.e(369).then(n.bind(n,14369));const e=yield Promise.resolve().then(n.bind(n,6400)),{options:t,Fragment:r,Component:i}=e;window.parent.__PREACT_DEVTOOLS__&&window.parent.__PREACT_DEVTOOLS__.attachPreact("10.25.4",t,{Fragment:r,PreactComponent:i})}if(r.EnvironmentManager.isDevelopment()){const e=yield n.e(208).then(n.bind(n,77442));window.parent.JSONFormatter=e.default}})}},58406:function(e,t,n){"use strict";n.d(t,{g:function(){return b}});var r,i,o=n(10018),a=n(62162),s=n(24578),l=n(95003),c=n(14762),u=n(44145),d=n(26932),g=n(94767),p=n(80352),f=n(45926),h=n(90061),m=n(97490),_=n(21476),v=n(61811),y=n(75998);!function(e){e.Left="left",e.Bottom="bottom",e.Right="right"}(r||(r={})),function(e){e[e.Left=0]="Left",e[e.Center=50]="Center",e[e.Bottom=100]="Bottom"}(i||(i={}));var C=n(7410);const E=(0,h.createLogger)("analytics"),b=()=>{const{isInputDisabled:e}=(0,u.getApp)(),{userToken:t,hasIntegration:n}=(0,u.getClient)();if(p.platform.isChatPage){const e=(0,f.getChatPageToken)();t!==e&&d.clientDispatchers.setUserToken(e)}n&&!o.default.joint&&d.clientDispatchers.setHasIntegration(!1);const h=o.default.callback_settings;if(h){const{separateForm:e,available:t}=(0,u.getCallback)();e!==h.separate_form&&d.callbackDispatchers.setSeparateForm(h.separate_form),!h.time&&t&&d.callbackDispatchers.setCallbackAvailable(!1)}if(E.log("initReduxStores",l.default),d.appDispatchers.initAppStore({isFocused:l.default.is_focused,isOnline:l.default.is_online,route:(0,s.needSyncRoute)()?l.default.route:_.Router.getCurrentRoute(),lastChatOpened:l.default.lastChatOpened,isInputDisabled:e,maintenance:o.default.maintenance,chatOpenByClient:!1,chatStarted:l.default.chat_started,chatAccepted:l.default.chat_accepted,lastMsgId:l.default.lastMsgId,lastMsgTime:l.default.lastMsgTime,started:l.default.started,viReconnectTime:l.default.viReconnectTime,didFreezeData:l.default.didFreezeData,lastChatStatus:l.default.lastChatStatus,quoteMsgId:l.default.quoteMsgId,hiddenByRules:l.default.hiddenByRules}),(0,C.fixClientIsIntroduced)(),p.platform.isMobileOrTablet){if(l.default.route==m.Route.HIDDEN)return}else{const{widgetOrientation:e,widgetPadding:t}=(0,u.getUserSettings)();!function(e,t){e===r.Right&&y.positionDispatch.setLeftOffset(""),e===r.Left&&y.positionDispatch.setRightOffset(""),e===r.Bottom&&(t===i.Left?y.positionDispatch.setRightOffset(""):y.positionDispatch.setLeftOffset(""));const n=v.default.getInstance();n&&n.checkHeight()}(e,t)}if(o.default.bots&&o.default.bots.length){const e=o.default.bots[0];d.botsDispatchers.addBot({avatarUrl:e.avatar_url||null,id:e.bot_id,name:e.display_name||null,title:e.title||null,isBot:!0,type:e.type}),e.disable_contact_form&&(0,o.setConfigParam)("disable_contact_form",1)}c.default.toReduxFormat().length&&(d.agentsDispatchers.initAgentStore(c.default.toReduxFormat()),d.botsDispatchers.initBotsStore(c.default.toReduxFormat())),d.messagesDispatchers.initMessagesStore(),d.chatsDispatchers.initChatsStore(),(0,s.reloadTransitionStore)();const b=(0,u.getProactive)();if(!b.text)return;const S=(0,g.getProactiveAgent)(b);E.warn("restore agent proactiveData",S),S&&(0,a.addProactiveAgent)(S)}},24344:function(e,t,n){"use strict";n.r(t),n.d(t,{callUserFunction:function(){return s}});var r=n(90061),i=n(45926),o=n(38042);const a=(0,r.createLogger)("CallUserFunction"),s=(e,t)=>{a.log(e,t);const n=`jivo_${e}`,r=(0,i.getPageWindow)();if("function"==typeof r[n])try{a.log(`Calling ${n}${t?" with params":""}`,t||""),r[n](t),(0,o.telemetry)(n,void 0,{probability:"one"})}catch(e){a.error(e)}}},12398:function(e,t,n){"use strict";n.r(t),n.d(t,{addClientTag:function(){return h},postClientTags:function(){return m},sendClientTags:function(){return y},sendTagsIfNeed:function(){return _}});var r=n(45007),i=n(73687),o=n(71047),a=n(86961),s=n(44145),l=n(26932),c=n(21922),u=n(3491),d=n(90061),g=n(58345),p=n(38042);const f=(0,d.createLogger)("CampaignHelpers"),h=e=>{if(!(0,c.h)(e))return;let t=(0,s.getClient)().tags;if((0,u.k)(t)){if(t.includes(e))return;t.push(e)}else t=[e];l.clientDispatchers.setClientTags(t.sort())},m=(e,t)=>{f.warn("postClientTags",e),(0,u.k)(e)&&e.length?a.default.postClientTags(e,(n,r)=>{var i,o;r&&(null==t||t(null===(o=null===(i=r.data)||void 0===i?void 0:i.result)||void 0===o?void 0:o.attached_tags_id),(0,p.telemetry)("set_tags_success")),n&&(null==t||t(!1),(0,p.telemetry)("set_tags_error",{param1:JSON.stringify(e),param2:n.status}))}):null==t||t(!1)},_=()=>{const{clientId:e,tags:t}=(0,s.getClient)(),n=i.default.get(o.TempKey.SENDED_TAGS);f.log("sendTagsIfNeed",e,n,t),e&&t&&!(0,r.wU)(t,n)&&y(t)},v=e=>{i.default.set(o.TempKey.SENDED_TAGS,e,604800)},y=e=>{m(e,t=>{if((0,u.k)(t)){t=t.sort();const n=i.default.get(o.TempKey.SENDED_TAGS)||[];if(t.length){const e=(0,g.unique)(n.sort().concat(t));v(e),l.clientDispatchers.setClientTags(e)}else v(e.sort())}})}},50339:function(e,t,n){"use strict";n.r(t),n.d(t,{buildBackground:function(){return r}});const r=e=>(e=>"string"!=typeof e)(e)?e.colors.reduce((e,[t,n],r,{length:i})=>e+=` ${t}${n?` ${n}%`:""}${r===i-1?")":","}`,`${e.type}-gradient(${e.direction},`):e},6254:function(e,t,n){"use strict";n.d(t,{$B:function(){return s},$k:function(){return l},LE:function(){return c},Zm:function(){return a},tq:function(){return o}});var r=n(97778),i=n(73687);const o=e=>Object.keys(e).map(t=>{return{name:t,value:(n=e[t],"boolean"==typeof n?""+(n?1:0):String(n).trim())};var n}),a=(e,t)=>Object.keys(t).reduce((n,r)=>(r in e||(n[r]=t[r]),n),{}),s=e=>Object.keys(e).reduce((t,n)=>{const r=e[n];return t[n]="number"==typeof r?String(r):r,t},{}),l=e=>{i.default.set("client_attributes_temp",e||null,e?r.ONE_DAY_DELAY:1)},c=()=>i.default.get("client_attributes_temp")},83425:function(e,t,n){"use strict";n.r(t),n.d(t,{ConfigUtils:function(){return c}});var r=n(10018),i=n(45926),o=n(38042),a=n(16026),s=n(95911);const l=(0,n(90061).createLogger)("ConfigUtils");const c=new class{constructor(){this.loadCount=0}reloadConfig(e){if(this.loadCount>5)return(0,o.telemetry)("config_limit",void 0,{once:!0}),void l.error("Reload config limit is reached!");let t=`${(0,i.getProtocol)()}${r.default.base_url}/script/widget/config/${r.default.widget_id}`;a.EnvironmentManager.isDevelopment()&&(t="/config.json"),t+=`?rnd=${Math.random()}`,l.log("Reloading config from",t,this.loadCount),(0,i.getPageWindow)().__jivoConfigOnLoad=t=>{if((null==t?void 0:t.isDeleted)||!t)return void l.log("Reload on deleted config",t);const n=t;(0,r.getViHost)()===n.vi_host&&(0,r.getCometHost)()===n.chat_host||(l.log("initConfig new config",n),n.lastStatus=r.default.lastStatus,(0,r.initConfig)(n),e(n)),l.log("jivoConfigOnLoad from reloadConfig")},s.xhrRequest.get(t,(e,t)=>{var n,r;if(e)return void l.log("Load config error",e);const o=t.data;try{l.log("Config is loaded",o),this.loadCount++,null===(r=(n=(0,i.getPageWindow)()).__jivoConfigOnLoad)||void 0===r||r.call(n,o)}catch(e){l.log("Config parse error",o,e)}})}}},41504:function(e,t,n){"use strict";n.r(t),n.d(t,{AcceptEula:function(){return m},AgentMessagesAck:function(){return l},AgentMessagesRead:function(){return c},ChatServerOutgoingMessage:function(){return r},ClientMessage:function(){return p},ClientServiceMessage:function(){return _},ClientTyping:function(){return g},Introduction:function(){return h},OfflineMessage:function(){return d},Rate:function(){return s},StartChat:function(){return u},Startup:function(){return i},UpdateCustomData:function(){return o},UpdateExternalInfo:function(){return f},UpdateUserToken:function(){return a},UrlChange:function(){return v}});class r{constructor(e){this.name=e}}class i extends r{constructor(e,t,n,r,i,o,a,s,l,c,u,d,g,p,f){super("startup"),this.jv_widget_id=p.widgetId?p.widgetId:void 0,this.site_id=p.siteId?p.siteId:void 0,this.current_page=e||void 0,this.is_mobile=t,this.visits_count=n||void 0,this.page_visible=r,this.chat_opened=i,this.chat_id=o||void 0,this.widget_version=a||void 0,this.abtest=s||void 0,this.history=l||void 0,this.new_utm=c||void 0,this.proactive_rule=this.getProactiveRule(u,f),this.visitor_id=g.visitorId?g.visitorId:void 0,this.jv_client_id=g.clientId?g.clientId:void 0,this.pa_id=g.priorityAgentId?g.priorityAgentId:void 0,this.custom_data=g.customData?g.customData:void 0,this.user_token=g.userToken?g.userToken:void 0,this.analytics=d||void 0,this.cap_token=g.captchaToken?g.captchaToken:void 0}getProactiveRule(e,t){var n;if(t)return{invitation_text:t.text,agent_id:t.body.agent_id,bot_id:t.body.bot_id,private_id:t.private_id,created_ts:Math.floor(t.created_ts/1e3),is_markdown:Boolean(null===(n=t.body)||void 0===n?void 0:n.is_markdown)};const{agentId:r,botId:i,text:o,privateId:a,createdTs:s,isMarkdown:l}=e,c={invitation_text:o,agent_id:r,bot_id:i,private_id:a,created_ts:s};return l&&(c.is_markdown=!0),o&&(r||i)&&a&&s?c:void 0}}class o extends r{constructor(e){super("update_custom_data"),this.custom_data=e}}class a extends r{constructor(e){super("update_user_token"),this.user_token=e}}class s extends r{constructor(e,t,n){super("rate"),this.rate=e,this.chat_id=t,this.comment=n}}class l extends r{constructor(e,t){super("agent_message_ack"),this.ack_msg_ids=e,this.chat_id=t}}class c extends r{constructor(e,t){super("agent_message_read"),this.msg_ids=e,this.chat_id=t}}class u extends r{constructor(e){super("start_chat"),this.invited_agent=e}}class d extends r{constructor(e,t,n,r,i,o,a,s){super("offline_message"),this.message=e,this.email=t,this.phone=n,this.client_name=r,this.cap_symbols=i,this.from_online=o,this.description=a,this.accept_eula=s}}class g extends r{constructor(e){super("client_typing"),this.typing=e}}class p extends r{constructor(e,t,n,r,i,o,a){super("client_message"),this.message=e,this.private_id=t,this.widget_department_id=n||null,this.is_prechat_btn=r||null,this.media=i||null,this.button_id=o||null,this.campaign=a||null}}class f extends r{constructor(e){super("update_external_info"),this.external_info=e}}class h extends r{constructor(e){super("introduction"),this.client_name=e.name,this.phone=e.phone,this.email=e.email,this.description=e.description,this.accept_eula=e.eula,this.accept_mailing=e.mailing}}class m extends r{constructor(){super("accept_eula")}}class _ extends r{constructor(e){super("client_service_message"),this.service="typing_insight",this.event="input_changed",this.new_val=e}}class v extends r{constructor(e,t){super("url_change"),this.url=e,this.title=t}}},49963:function(e,t,n){"use strict";n.r(t),n.d(t,{connectionAdapter:function(){return f}});var r=n(90061),i=n(45948),o=n(16026),a=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const s=(0,r.createLogger)("CONNECTION_ADAPTER",{style:"color: teal"});let l=null;const c=()=>{const e=null==l?void 0:l.isOpen();return s.log("isConnected",e),e||!1},u=(e,t)=>a(void 0,void 0,void 0,function*(){return o.EnvironmentManager.isWidgetConstructor()||o.EnvironmentManager.isContactFormPreview()||i.isPopupConstructor?Promise.resolve({ok:!0}):(s.log("openConnect","callback:",e,"force:",t),l.open(e,t))}),d=e=>{s.log("checkConnection",e,l),c()?null==e||e():u(e,!0)},g=e=>{s.log("removeFromBuffer"),null==l||l.buffer.remove(e)},p=(e,t)=>(s.log("findInBuffer"),null==l?void 0:l.buffer.find(e,t)),f={setConnectionInstance:e=>{l=e},getInstance:()=>l,isConnected:c,openConnect:u,checkConnection:d,checkConnectionWithTimeout:(e=3e3)=>new Promise((t,n)=>{let r=null,i=!1;r=setTimeout(()=>{i||(i=!0,r&&(clearTimeout(r),r=null),n(new Error("Connection timeout")))},e),d(()=>{i||(i=!0,r&&(clearTimeout(r),r=null),t(!0))})}),flushBuffer:()=>{s.log("flushBuffer"),null==l||l.flushBuffer()},addToBuffer:e=>{s.log("addToBuffer"),null==l||l.buffer.add(e)},removeFromBuffer:g,addToBufferOnce:e=>{s.log("addToBufferOnce");const t=null==l?void 0:l.buffer;t&&(p("name",e.name)&&g(e),t.add(e))},findInBuffer:p,sendEvent:e=>{s.log("sendEvent",e),null==l||l.send(e)},sendEventIfConnected:e=>{s.log("sendIfConnected",e),null==l||l.sendIfConnected(e)},setLastError:e=>{s.log("setLastError",e),null==l||l.provider.setLastError(e)},disconnect:()=>{s.log("disconnect"),null==l||l.close()}}},5895:function(e,t,n){"use strict";n.r(t),n.d(t,{checkForDelivered:function(){return g},sendOfflineTmpMessages:function(){return p}});var r=n(65465),i=n(54346),o=n(81152),a=n(6693),s=n(90061),l=n(44145),c=n(26932),u=n(38042);const d=(0,s.createLogger)("ConnectionHelpers"),g=e=>{const t=(0,l.getMessageByPrivateId)(e);t&&!t.msg_id&&(d.warn("checkForDelivered",t),c.messagesDispatchers.updateMessage({privateId:t.private_id,messageId:null},{status:o.MessageStatus.NOT_DELIVERED}),t.type!==o.MessageType.TEMPORARY&&(0,u.telemetry)("client_message_send_error",{param1:(0,l.getApp)().isOnline,param2:t.type,param3:(0,l.getClient)().isBlacklisted?"black":"timeout",param4:(0,l.getSystemSettings)().chatHost}))},p=()=>{const e=(0,l.getTemporaryMessages)(),{isInputDisabled:t}=(0,l.getApp)();e.length&&!t&&(d.log("sendOfflineTmpMessages",e),(0,i.callInitiateChat)(),e.forEach(e=>{r.messageActions.sendClientMessage({text:e.text,privateId:e.private_id}),setTimeout(()=>{g(e.private_id)},a.Timeouts.MESSAGE_SEND_ERROR_TIMEOUT)}))}},499:function(e,t,n){"use strict";n.r(t),n.d(t,{syncCSClientInfo:function(){return l}});var r=n(90061),i=n(44145),o=n(26932),a=n(5895),s=n(79523);const l=e=>{const t=(0,r.createLogger)("syncCSClientInfo");o.clientDispatchers.setHasIntegration(e.has_integration),o.clientDispatchers.setAssignedAgentId(e.assigned_agent_id||null);const n=(0,i.getClient)(),{mailing:l}=(0,i.getFeatures)(),c=e.name||e.client_name,u={description:n.description};if(n.email!==e.email&&(u.email=n.email),n.phone!==e.phone&&(u.phone=n.phone),n.name!==c&&(u.client_name=n.name),t.log("Potential introduction data:",u,n),u.email||u.phone||u.client_name){const{email:e,phone:r}=n.mailing;l&&e!==r&&(u.email||u.phone)?(t.log("Split email and phone, because mailing email and phone are different",u,n.mailing),u.email&&s.introduceActions.sendIntroduction(Object.assign(Object.assign({},u),{phone:null,mailing:e})),u.phone&&s.introduceActions.sendIntroduction(Object.assign(Object.assign({},u),{email:null,mailing:r}))):(u.mailing=l?e:null,s.introduceActions.sendIntroduction(u))}!n.email&&e.email&&o.clientDispatchers.setClientEmail(e.email),!n.phone&&e.phone&&o.clientDispatchers.setClientPhone(e.phone),!n.name&&c&&o.clientDispatchers.setClientName(c),(0,i.getApp)().isOnline||(0,a.sendOfflineTmpMessages)()}},9550:function(e,t,n){"use strict";n.r(t),n.d(t,{ContactsType:function(){return r}});const r={DURING_CHAT_NO_CLOSE:-1,DURING_CHAT:0,BEFORE_CHAT:1,DISABLED:2,SOCIAL:3}},93907:function(e,t,n){"use strict";n.d(t,{dc:function(){return l},OQ:function(){return d},Ql:function(){return u},ph:function(){return c},UJ:function(){return p},ql:function(){return g}});var r=n(10018),i=n(18276),o=n(82594),a=n(99915),s=n(38042);const l=({settings:e,departments:t,client:n,isEULA:i,isMailing:a})=>{const s={},l={},c=e.slice(),u=[];return e.forEach((e,d,{length:g})=>{const{show:p,name:f,required:h,attribute_type:m}=e;p&&(s[f]=((e,t,n)=>{var r,i;return n?t&&"checkbox"===t?(null===(r=n.attributes)||void 0===r?void 0:r[e])||!1:(null===(i=n.attributes)||void 0===i?void 0:i[e])||n[e]||"":""})(f,m,n),l[f]=((e,t,n)=>{const r=null!=t?t:e;return n?(0,o.l1)(o.z2[r]):o.z2[r]})(f,m,h),m&&u.push(f)),d===g-1&&((null==t?void 0:t.length)&&(s.departmentId=(null==n?void 0:n.departmentId)||t[0].id,l.departmentId=o.z2.departmentId,c.push({name:"departmentId",required:!0,show:!0})),1===r.default.contacts_ask&&(s.message=(null==n?void 0:n.inputText)||(null==n?void 0:n.lastMessage)||"",l.message=(0,o.l1)(o.z2.message),c.push({name:"message",required:!0,show:!0})),i&&(s.eula=!1,l.eula=o.z2.eula,c.push({name:"eula",required:!0,show:!1})),a&&(s.mailing=Boolean(n.mailing.email||n.mailing.phone)||!1,l.mailing=o.z2.mailing,c.push({name:"mailing",required:!1,show:!1})))}),{values:s,fields:c,attributeKeys:u,resolver:(0,o.A3)(l)}},c=e=>{switch(e){case"email":return(0,i.l10n)("lblYourEmail");case"phone":return(0,i.l10n)("lblYourPhone");case"message":return(0,i.l10n)("lblYourMessage");default:return(0,i.l10n)("lblIntroduceName")}},u=e=>{switch(e){case"email":return"email";case"number":return"number";case"message":return"textarea";case"list":return"list";case"checkbox":return"checkbox";case"date":return"date";default:return"text"}},d=()=>(0,a.R)().reduce((e,{show:t,name:n,required:r})=>e+(t?`${n}${r?"*":""};`:""),""),g=(e,t)=>{(0,s.telemetry)(e?"chat_introduce":"offline_sent_fail",{param1:"formSubmitFail",param2:d(),param3:JSON.stringify(t||null)})},p=e=>Object.entries(e).filter(([e])=>["name","phone","email"].includes(e)).every(([,e])=>!e)},7410:function(e,t,n){"use strict";n.r(t),n.d(t,{fixClientIsIntroduced:function(){return c},needIntroduceContacts:function(){return l}});var r=n(26932),i=n(44145),o=n(28071),a=n(10465);const s=(e,t)=>{if(e in t){const n=t[e];return!n||(0,a.x)(n)}return!1},l=()=>{const e=(0,i.getClient)(),{contactsSettings:t,contactsSettingsNew:n}=(0,i.getUserSettings)(),r=n||t&&Object.entries(t).map(([e,t])=>Object.assign({name:e},t));if(!r)return!1;return r.some(({name:t,show:n,required:r})=>{const i=n&&r;return t in e?i&&s(t,e):!(!(0,o.K)(e.attributes)||!(t in e.attributes))&&(i&&s(t,e.attributes))})},c=()=>{const{isIntroduced:e}=(0,i.getClient)();return!(!e||!l())&&(r.clientDispatchers.setIsIntroduced(!1),!0)}},91920:function(e,t,n){"use strict";n.r(t),n.d(t,{hasCustomLabel:function(){return i},showCustomLabel:function(){return o}});var r=n(45926);const i=()=>{const e=(0,r.getPageWindow)();return"function"==typeof e.jivo_onLoadCallback&&/jivo_custom_widget/gi.test(String(e.jivo_onLoadCallback))},o=e=>{const t=(0,r.getPageWindow)().jivo_cstm_widget;i()&&t&&(t.style.display=e?"block":"none")}},87826:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(26932),i=n(38042);const o=()=>{r.clientDispatchers.setEulaAccepted(!0),(0,i.telemetry)("eula_accepted")}},16026:function(e,t,n){"use strict";n.r(t),n.d(t,{EnvironmentManager:function(){return r}});const r=new class{constructor(){this.env="production",this.version="181.5.0",this.loaderVersion="0.1",this.branch="HEAD_fa15b64",this.allowedFiles=JSON.parse('[{"extension":"7z","mimeType":"application/x-7z-compressed"},{"extension":"aac","mimeType":"audio/aac"},{"extension":"aiff","mimeType":"audio/aiff"},{"extension":"amr","mimeType":"audio/amr"},{"extension":"avi","mimeType":"video/avi"},{"extension":"avi","mimeType":"video/x-msvideo"},{"extension":"css","mimeType":"text/css"},{"extension":"csv","mimeType":"text/csv"},{"extension":"djvu","mimeType":"image/vnd.djvu"},{"extension":"doc","mimeType":"application/msword"},{"extension":"docx","mimeType":"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{"extension":"epub","mimeType":"application/epub+zip"},{"extension":"gif","mimeType":"image/gif"},{"extension":"gz","mimeType":"application/gzip"},{"extension":"heic","mimeType":"image/heic"},{"extension":"heif","mimeType":"image/heif"},{"extension":"htm","mimeType":"text/html"},{"extension":"html","mimeType":"text/html"},{"extension":"ics","mimeType":"text/calendar"},{"extension":"ico","mimeType":"image/x-icon"},{"extension":"jpeg","mimeType":"image/jpeg"},{"extension":"jpg","mimeType":"image/jpeg"},{"extension":"json","mimeType":"application/json"},{"extension":"log","mimeType":"text/plain"},{"extension":"log","mimeType":""},{"extension":"mid","mimeType":"audio/midi"},{"extension":"mov","mimeType":"video/quicktime"},{"extension":"mp3","mimeType":"audio/mpeg"},{"extension":"mp4","mimeType":"application/mp4"},{"extension":"mp4","mimeType":"video/mp4"},{"extension":"mp4a","mimeType":"audio/mp4"},{"extension":"mpeg","mimeType":"video/mpeg"},{"extension":"odp","mimeType":"application/vnd.oasis.opendocument.presentation"},{"extension":"ods","mimeType":"application/vnd.oasis.opendocument.spreadsheet"},{"extension":"odt","mimeType":"application/vnd.oasis.opendocument.text"},{"extension":"oga","mimeType":"audio/ogg"},{"extension":"ogg","mimeType":"audio/ogg"},{"extension":"ogv","mimeType":"video/ogg"},{"extension":"ogg","mimeType":"video/ogg"},{"extension":"ogg","mimeType":"application/ogg"},{"extension":"opus","mimeType":"audio/ogg"},{"extension":"pdf","mimeType":"application/pdf"},{"extension":"ai","mimeType":"application/pdf"},{"extension":"png","mimeType":"image/png"},{"extension":"pkpass","mimeType":"application/vnd.apple.pkpass"},{"extension":"ppt","mimeType":"application/vnd.ms-powerpoint"},{"extension":"pptx","mimeType":"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{"extension":"psd","mimeType":"image/vnd.adobe.photoshop"},{"extension":"rar","mimeType":"application/vnd.rar"},{"extension":"rar","mimeType":"application/x-rar-compressed"},{"extension":"rtf","mimeType":"application/rtf"},{"extension":"stl","mimeType":"application/vnd.ms-pki.stl"},{"extension":"stl","mimeType":"application/x-navistyle"},{"extension":"svg","mimeType":"image/svg+xml"},{"extension":"tar","mimeType":"application/x-tar"},{"extension":"ttf","mimeType":"font/ttf"},{"extension":"tgs","mimeType":"application/x-gzip"},{"extension":"txt","mimeType":"text/plain"},{"extension":"usdz","mimeType":"model/vnd.usdz+zip"},{"extension":"vsd","mimeType":"application/vnd.visio"},{"extension":"wav","mimeType":"audio/wav"},{"extension":"wav","mimeType":"audio/wave"},{"extension":"weba","mimeType":"audio/webm"},{"extension":"webm","mimeType":"video/webm"},{"extension":"webp","mimeType":"image/webp"},{"extension":"wmv","mimeType":"video/x-ms-wmv"},{"extension":"xls","mimeType":"application/vnd.ms-excel"},{"extension":"xlsx","mimeType":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{"extension":"xml","mimeType":"text/xml"},{"extension":"zip","mimeType":"application/x-zip-compressed"},{"extension":"zip","mimeType":"application/zip"},{"extension":"yml","mimeType":"application/x-yaml"},{"extension":"yaml","mimeType":"application/x-yaml"},{"extension":"tiff","mimeType":"image/tiff"},{"extension":"tif","mimeType":"image/tiff"},{"extension":"cdr","mimeType":"image/cdr"},{"extension":"eps","mimeType":"image/x-eps"}]'),this.isDesigner=this._checkIfDesignerEditor(),this.isCampaignPopupConstructor=this._checkIfCampaignPopupConstructor(),this.isCampaignWidgetConstructor=this._checkIfCampaignWidgetConstructor(),this.isContactFormPreviewEnable=this._checkIfContactFormPreview(),this.isExtensions=this._checkIfWidgetExtensions()}isProduction(){return"production"===this.env}isTesting(){return"testing"===this.env}isDevelopment(){return"development"===this.env}isSelfhosted(){return Boolean(!1)}getVersion(){return this.version}getLoaderVersion(){return this.loaderVersion}getBranch(){return this.branch}getAllowedFileTypes(){return this.allowedFiles}getWindow(){return window.parent||window}isPartnerApp(){return this.getWindow().jivo_partner||!1}isDesignerEditor(){return this.isDesigner}isPopupConstructor(){return this.isCampaignPopupConstructor}isWidgetConstructor(){return this.isCampaignWidgetConstructor}isContactFormPreview(){return this.isContactFormPreviewEnable}isExtensionsEnable(){return this.isExtensions}isApp(){return new RegExp(/^(app|app3|app3alpha|app3beta)\.(jivosite\.com|jivo\.ru)$/i).test(this.getPageHost())}getPageHost(){return this.getWindow().location.host}isSignUpPage(){return new RegExp(/.*\/signup\.html/i).test(this.getWindow().location.pathname)}isRegPage(){return this.isProduction()?this.isApp()&&this.isSignUpPage():this.isSignUpPage()}isDesignerPage(){return Boolean(this.getWindow()._jivoDesigner)}isCampaignPopupConstructorPage(){return this.getWindow()._jivoCampaignPopupConstructor}isCampaignWidgetConstructorPage(){return this.getWindow()._jivoCampaignWidgetConstructor}isContactFormPreviewPage(){return this.getWindow()._jivoContactFormPreview}isExtensionsPage(){return this.getWindow()._jivoWidgetExtensions}isJsApiAvaiable(){return this.isApp()||this.isRegPage()||this.isSignUpPage()||this.isDesignerEditor()||this.isPopupConstructor()||this.isPartnerApp()}_checkIfCampaignPopupConstructor(){const e=this.isProduction(),t=e&&this.isApp();return Boolean(this.isCampaignPopupConstructorPage())&&(t||!e)}_checkIfCampaignWidgetConstructor(){const e=this.isProduction(),t=e&&this.isApp();return Boolean(this.isCampaignWidgetConstructorPage())&&(t||!e)}_checkIfWidgetExtensions(){const e=this.isProduction(),t=e&&this.isApp();return Boolean(this.isExtensionsPage())&&(t||!e)}_checkIfContactFormPreview(){const e=this.isProduction(),t=e&&this.isApp();return Boolean(this.isContactFormPreviewPage())&&(t||!e)}_checkIfDesignerEditor(){const e=this.isProduction(),t=e&&this.isApp();return this.isDesignerPage()&&(t||!e||this.isSelfhosted())}}},32915:function(e,t,n){"use strict";n.r(t),n.d(t,{isApiEnabled:function(){return u},paidRequired:function(){return c},setJointLink:function(){return g}});var r=n(10018),i=n(26932),o=n(2491),a=n(38042),s=n(16026),l=n(68403);const c={result:"error",reason:"Need paid account"},u=()=>(0,l.isPaidCustomer)()||s.EnvironmentManager.isJsApiAvaiable(),d={tg:"api_set_telegram_link",wa:"api_set_wa_link",vk:"api_set_vk_link"},g=(e,t)=>{var n;if(!(null===r.default||void 0===r.default?void 0:r.default.enable_custom_links))return{result:"error"};if(!u())return c;if(!(null===(n=null===r.default||void 0===r.default?void 0:r.default.joint)||void 0===n?void 0:n[t]))return{result:"error",reason:"You don't have this communication channel"};if(!(0,o.isValidHttpURL)(e))return{result:"error",reason:"Invalid link"};const s=(e=>{try{return encodeURI(e)}catch(t){return e}})(e.trim().replace(/(?:\r\n|\r|\n)/g,""));return i.featuresDispatchers.setJoint(Object.assign(Object.assign({},r.default.joint),{[t]:{customUrl:s}})),(0,a.telemetry)(d[t],void 0,{probability:"one"}),{result:"ok"}}},39398:function(e,t,n){"use strict";n.d(t,{p:function(){return m}});var r=n(44145),i=n(2491),o=n(45926);const a=(e,t)=>{const n=(0,o.getPageWindow)().btoa(t).split("").map(e=>e.charCodeAt(0).toString(2).padStart(8,"0")).join(""),r={0:"",1:"",separator:""};let i=e;i+=r.separator;for(const e of n)i+=r[e];return i+=r.separator,i};var s=n(49963),l=n(90061),c=n(18276);var u=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const d=(0,l.createLogger)("LinkInterceptor");let g=!1;const p=(e,t)=>{const n=(0,i.getURL)(e);return n?(n.searchParams.set("start",(e=>{const t=(0,o.getPageWindow)(),[n,r]=e.split(".");return t.btoa(`${n}.${r.slice(0,14)}`).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})(t)),n.toString()):e},f=e=>u(void 0,void 0,void 0,function*(){if(!e||!e.target)return;const t=e.target;if("A"===t.tagName){const n=t.href.includes("t.me"),r=t.href.includes("wa.me");if(!n&&!r)return;if(n&&t.href.includes("start="))return;e.preventDefault(),e.stopPropagation();const i=t.onclick,o=t.href,a=window.open("","_blank"),l=e=>{if(a)try{a.location.href=e}catch(t){a.location.replace(e)}};if(s.connectionAdapter.isConnected())l(m.getMetaLink(o));else try{yield s.connectionAdapter.checkConnectionWithTimeout(1500),l(m.getMetaLink(o))}catch(e){l(o)}i&&i.call(t,e)}}),h=()=>{const e=(0,o.getPageWindow)();e.removeEventListener("click",f),e.removeEventListener("jBeforeunload",h),g=!1},m={init:()=>{const e=(0,o.getJivoConfig)();if(!e.replace_omnichannel_links||g)return void d.log(e.replace_omnichannel_links?"LinkInterceptor already initialized.":"LinkInterceptor disabled.");const t=(0,o.getPageWindow)();t.addEventListener("click",f,!0),t.addEventListener("jBeforeunload",h),g=!0,d.log("LinkInterceptor enabled.")},getMetaLink:e=>{const{clientId:t}=(0,r.getClient)();return e.includes("t.me")?p(e,t):((e,t)=>{const n=(0,o.getJivoConfig)(),r=(0,i.getURL)(e);if(!r)return e;const s=r.searchParams.get("text")||n.wa_omnichannel_preset_message||(0,c.l10n)("wa_preset_message"),l=a(s,t);return r.searchParams.set("text",l),r.toString()})(e,t)}}},53130:function(e,t,n){"use strict";n.d(t,{O:function(){return a},f:function(){return s}});var r=n(44145),i=n(26932),o=n(38042);const a=e=>{const t=(0,r.getClient)(),n=t=>t in e&&Boolean(e[t]),a=Object.assign({},t.mailing);n("email")&&(a.email=!0),n("phone")&&(a.phone=!0),i.clientDispatchers.setMailing(a),(0,o.telemetry)("mailing_accepted",{param1:Object.keys(a).join(";")})},s=e=>{const t=(0,r.getClient)(),n=n=>n in e&&Boolean(e[n])&&t[n]!==e[n],a=t.mailing;n("email")&&(a.email=null),n("phone")&&(a.phone=null),i.clientDispatchers.setMailing(a),(0,o.telemetry)("mailing_rejected")}},18166:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});const r=(e,t)=>{const{values:[n,r],isMailingEnabled:i,mailing:o}=e;if(!i)return!1;const a=Boolean(o.email||o.phone),s=n!==t.email,l=r!==t.phone,c=s||l;return i&&(Boolean(n)||Boolean(r))&&(!a||a&&c)}},54091:function(e,t,n){"use strict";n.r(t),n.d(t,{bytesToMB:function(){return o},fileSize:function(){return i}});const r=["B","KB","MB","gB","tB"],i=(e=0,t=!1)=>{if(0===e)return"0";const n=Math.floor(Math.log(e)/Math.log(1024)),i=e/Math.pow(1024,n);return(t?Math.round(i):parseFloat(i.toFixed(2)).toString())+r[n]},o=e=>e/Math.pow(1024,2)},94767:function(e,t,n){"use strict";n.r(t),n.d(t,{getFormattedTextForProactiveCampaign:function(){return a},getMobileProactiveContent:function(){return l},getProactiveAgent:function(){return s}});var r=n(44145),i=n(10018),o=n(36148);const a=(e,t=!1)=>{const{title:n,text:r,img_src:i,img_position:o}=e,a=o&&["top","top_width"].includes(o),s=i&&!t?`\n\n![](${i})\n\n`:"";let l=s&&a?s:"";return n&&""!==n.trim()&&(l+=`# ${n}\n`),l+=r,s&&!a&&(l+=s),l},s=e=>e&&e.text?e.botId?(0,r.getBotById)(e.botId):e.agentId?(0,r.getAgentById)(e.agentId):null:null,l=(e,t,n=!1)=>{const r={text:"",agent:null,isMarkdown:!1,isCampaign:!1};if(!(n||i.default.mobile_proactive&&e&&e.status!==o.MessageStatus.READ))return r;const l=s(e);if(r.text=e.text,r.agent=n?null:l,r.isMarkdown=Boolean(e.isMarkdown),t){const{img_src:e,text_color:n,background:i}=t;r.isCampaign=!0,r.isMarkdown=!0,r.imgSrc=e,r.text=a(t,!0),r.design={textColor:n,background:i}}return r}},97490:function(e,t,n){"use strict";n.r(t),n.d(t,{Route:function(){return r},RouterEvent:function(){return i}});const r={HIDDEN:"hidden",LABEL:"label",LABEL_INVITATION:"label/invitation",DEPARTMENTS:"departments",INTRODUCE:"introduce",CHAT:"chat",CHAT_MIN:"chat/min",CHAT_SOCIAL:"chat/social",CHAT_INTRODUCE:"chat/introduce",CHAT_EVAL:"chat/eval",CHAT_CALL:"chat/call",CHAT_SETUP_CALL:"chat/setupcall",CALL:"call",CALL_POPUP:"call/popup",DEBUG:"debug"},i={Submit:"submit",Cancel:"cancel",CloseWindow:"closeWindow",Hide:"hide",Navigate:"navigate",Error:"error",ToChat:"toChat",ToCall:"toCall",ToSocial:"toSocial",ToIntroduce:"toIntroduce",ApiOpen:"apiOpen",ToDebug:"toDebug",ToLabelInvitation:"toLabelInvitation",ToCallPopup:"toCallPopup",ToCallSetup:"ToCallSetup"}},88263:function(e,t,n){"use strict";n.r(t),n.d(t,{routerService:function(){return i}});var r=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const i=new class{constructor(){this.router=null}getRouter(){return r(this,void 0,void 0,function*(){if(!this.router){const{Router:e}=yield Promise.resolve().then(n.bind(n,21476));this.router=e}return this.router})}next(e){return r(this,void 0,void 0,function*(){(yield this.getRouter()).next(e)})}setNext(e){return r(this,void 0,void 0,function*(){(yield this.getRouter()).setNext(e)})}getCurrentRoute(){const e=this.router;return(null==e?void 0:e.getCurrentRoute())||"label"}getPrevEvent(){return r(this,void 0,void 0,function*(){return(yield this.getRouter()).getPrevEvent()})}on(e,t){return r(this,void 0,void 0,function*(){(yield this.getRouter()).on(e,t)})}}},8717:function(e,t,n){"use strict";n.r(t),n.d(t,{isChatClosedRoute:function(){return l},isChatInputRoute:function(){return g},isChatRoute:function(){return d},isContainerRoute:function(){return s},isIntroduceRoute:function(){return u},isMinRoute:function(){return c},shouldRedirectToIntroduce:function(){return a}});var r=n(44145),i=n(9550),o=n(97490);const a=()=>{const{isOnline:e}=(0,r.getApp)(),{isIntroduced:t}=(0,r.getClient)(),{contactsAsk:n}=(0,r.getUserSettings)();return e&&!t&&n===i.ContactsType.BEFORE_CHAT},s=e=>![o.Route.LABEL,o.Route.LABEL_INVITATION,o.Route.HIDDEN].includes(e),l=e=>[o.Route.LABEL,o.Route.CHAT_MIN].includes(e),c=e=>e===o.Route.CHAT_MIN,u=e=>e===o.Route.INTRODUCE,d=e=>[o.Route.CHAT,o.Route.INTRODUCE,o.Route.DEPARTMENTS].includes(e),g=e=>[o.Route.CHAT,o.Route.CHAT_CALL].includes(e)},6222:function(e,t,n){"use strict";n.r(t),n.d(t,{addFrequencyDelay:function(){return a},isFrequencyDelay:function(){return s}});var r=n(73687),i=n(71047);const o={once_1h:3600,once_3h:10800,once_6h:21600,once_1d:86400},a=(e="once_1d",t)=>{r.default.set(`${i.CampaignsKeys.POPUP_DELAY}_${t}`,!0,o[e])},s=e=>Boolean(r.default.get(`${i.CampaignsKeys.POPUP_DELAY}_${e}`))},26683:function(e,t,n){"use strict";n.r(t),n.d(t,{getExternalDataValue:function(){return i}});var r=n(44145);const i=({name:e,comparator:t})=>{const n=(0,r.getClient)();if(!n.externalData)return;const i=n.externalData[e];return null!==i||"empty"===t?i:void 0}},10396:function(e,t,n){"use strict";n.r(t),n.d(t,{isDefaultProactive:function(){return i}});var r=n(45926);const i=e=>{const t=(0,r.getJivoConfig)();if(!t.rules)return!1;const n={online:{value:!0},time_on_page:{value:10,comparator:"greater"},time_after_close:{value:120,comparator:"greater"},time_after_invitation:{value:60,comparator:"greater"}},i=t.rules.find(t=>t.name===e);return!!i&&i.conditions.every(({condition:e,value:t,comparator:r})=>{const i=n[e];return!!i&&(("online"===e||i.comparator===r)&&i.value===t)})}},82024:function(e,t,n){"use strict";n.r(t),n.d(t,{isExternalDataCondition:function(){return r}});const r=e=>"external_data"===e.condition},25886:function(e,t,n){"use strict";n.r(t),n.d(t,{getJoints:function(){return s}});var r=n(44145),i=n(67597),o=n(80352),a=n(16217);const s=()=>{var e,t,n;const{joint:s}=(0,r.getFeatures)(),{powerButtonPhone:l}=(0,r.getUserSettings)(),{geoIp:c}=(0,r.getSystemSettings)();let u=0;const d={};return(0,a.isCallbackEnabled)()?(d.callback=!0,u++):l&&(d.cbUrl=l,u++),s?(s.sb&&u++,s.ig&&u++,(null===(e=s.fb)||void 0===e?void 0:e.joint_id)&&(d.fbUrl="https://m.me/"+s.fb.joint_id,u++),s.wa&&(d.waUrl=s.wa.customUrl||"https://wa.me/"+s.wa,u++),s.vk&&(s.vk.joint_id||s.vk.customUrl)&&(d.vkUrl=s.vk.customUrl?s.vk.customUrl:"https://vk.me/club"+s.vk.joint_id,u++),(null===(t=s.vb)||void 0===t?void 0:t.botname)&&(d.vbUrl="viber://pa?chatURI="+s.vb.botname,u++),s.tg&&(s.tg.customUrl||s.tg.botname)&&(d.tgUrl=s.tg.customUrl?s.tg.customUrl:(0,i.getTgLink)(c)+s.tg.botname,u++),s.max&&u++,o.platform.supports.iMessage&&(null===(n=s.im)||void 0===n?void 0:n.joint_id)&&(d.imUrl=`sms://open?service=iMessage&recipient=urn:biz:${s.im.joint_id}&biz-intent-id=click_in_jivo`,u++),{links:d,count:u}):{links:d,count:u}}},42359:function(e,t,n){"use strict";n.r(t),n.d(t,{StatsManager:function(){return p}});var r=n(73687),i=n(90061),o=n(54415),a=n(25467);const s=["chat_init","contacts_fill","email_sent","phone_sent","cta_click","poll_sent"],l=(e,t)=>e.includes(t),c="sended_stats",u=(0,i.createLogger)("StatsManager"),d=e=>r.default.get(`${c}_${e}`),g=(e,t)=>{const n=d(e);if(!n)return void u.warn(`Can't update. Sended stats for campaign #${e} not found.`);const i=Object.assign(Object.assign(Object.assign({},n),t),{events:t.events?`${n.events}${t.events};`:n.events});r.default.set(`${c}_${e}`,i,(0,a.getDiffTimestampToEnd)(i.end_ts))},p={create:e=>{d(e.campaign_id)?u.warn(`Can't create. Sended stats for campaign #${e.campaign_id} already exist.`):r.default.set(`${c}_${e.campaign_id}`,{events:"",end_ts:e.end_ts,isSubmitted:!1},(0,a.getDiffTimestampToEnd)(e.end_ts))},get:d,update:g,send:({campaignId:e,campaignIds:t},n)=>{const r=(e=>s.includes(e))(n);if(t){const e=[],i=t.filter(t=>{const r=d(t);return!r||!l(r.events,n)||(e.push(t),!1)});e.length>0&&u.warn(`${n} will not be sent for these campaigns.`,e,"Was sent previously."),i.length>0&&(o.Monitoring.reportStats(n,i),i.forEach(e=>g(e,{events:n,isSubmitted:r})))}else if(e){const t=d(e);if(t&&l(t.events,n))return void u.warn(`${n} will not be sent for this campaign.`,e,"Was sent previously.");o.Monitoring.reportStats(n,e),g(e,{events:n,isSubmitted:r})}}}},50188:function(e,t,n){"use strict";n.r(t),n.d(t,{WidgetStatus:function(){return g}});var r=n(10018),i=n(26932),o=n(44145),a=n(95911),s=n(90061),l=n(45926),c=n(40694),u=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const d=(0,s.createLogger)("StatusProvider");const g=new class{constructor(){d.log("init")}getUrl(){const{chatHost:e,siteId:t,widgetId:n}=(0,o.getSystemSettings)();return`${(0,l.getProtocol)()}//${e}/widget/status/${t}/${n}?rnd=${Math.random()}`}getStatus(e){return u(this,void 0,void 0,function*(){yield a.promisedRequest.get(this.getUrl()).then(t=>{var n;d.warn("response",t,e);const o=t.data;o.maintenance&&i.appDispatchers.setMaintenance(!0);const a=o.bots&&o.bots.length;if(a){const e=o.bots[0];i.botsDispatchers.addBot({avatarUrl:e.avatar_url||null,id:e.bot_id,name:e.display_name||null,title:e.title||null,type:e.type,isBot:!0}),e.disable_contact_form&&(0,r.setConfigParam)("disable_contact_form",1)}if(o.agents&&!o.agents.length&&(a&&(null===r.default||void 0===r.default?void 0:r.default.enable_bot_offline)?i.appDispatchers.setAppIsOnline(!0):i.appDispatchers.setAppIsOnline(!1)),null===(n=o.agents)||void 0===n?void 0:n.length)for(const e of o.agents){const t=(0,c.agentToReduxFormat)(e);i.agentsDispatchers.addAgent(t)}e(!0)}).catch(t=>{d.warn(t),e(!1)})})}}},38042:function(e,t,n){"use strict";n.r(t),n.d(t,{telemetry:function(){return g}});var r=n(10018),i=n(80352),o=n(44145),a=n(90061),s=n(40300),l=n(73163),c=n(88993);const u=(0,a.createLogger)("TELEMETRY_WIDGET"),d=(0,s.defineTelemetry)(),g=(e,t,n)=>{const a=(0,l.k)(e," ","_");if(r.default.disable_telemetry||!i.platform.isNotSearchSpider)return;const s=(0,o.getClient)(),g={event:a,widget_id:r.default.widget_id,chat_mode:r.default.chat_mode,site_id:r.default.site_id,device:i.platform.device,visitor_id:s.visitorId,widget_version:"181.5.0",shard:r.default.shard_id||"main"};if(c.i.isEnabled()){const{abtest_name:e,abtest_group:t}=c.i.getActiveTestsAsTelemetry();e&&t&&(g.abtest_name=e,g.abtest_group=t)}s.clientId&&(g.client_id=parseInt(s.clientId.split(".")[0],10)||0),t&&(u.log("event",a,"params",t),Object.assign(g,Object.keys(t).reduce((e,n)=>(e[n]=String(t[n]),e),{}))),d(a,g,n)}},21115:function(e,t,n){"use strict";n.d(t,{Jb:function(){return L},eP:function(){return k},mq:function(){return R}});var r=n(65465),i=n(24578),o=n(96367),a=n(81152),s=n(6693),l=n(47138),c=n(90061),u=n(31984),d=n(95911),g=n(50216),p=n(38042),f=n(21476),h=n(44145),m=n(24344),_=n(26932),v=n(79523),y=n(50402),C=n(10018),E=n(51e3),b=n(80352),S=n(18276),T=n(97490),D=n(8717),w=n(3296),O=n(1858),A=n(16217),M=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const I=()=>{const e=`${(0,S.l10n)("cw_unableToConnect")}\n${(0,S.l10n)("cw_errInfoText")}`;_.callbackDispatchers.setCallbackStatus(l.CallStatus.ERROR),_.callbackDispatchers.setCallbackError(e),_.messagesDispatchers.addMessage({text:e,type:a.MessageType.SYSTEM,from:a.MessageInitiator.SYSTEM,body:{type:a.MessageType.CALL,name:a.MessageName.CALL_END}})},R=({values:e,from:t,invitationText:n=""},s,d)=>{const g=(0,c.createLogger)("TELEPHONY: requestCallback",{style:"color: green;"});if(g.log("start",{phone:e.phone,from:t}),(0,A.isCallActive)())return void g.error("already in call");const y=(0,h.getClient)(),C=(0,h.getApp)(),D=(0,h.getFeatures)();v.introduceActions.sendIntroduction(e),(0,u.checkStartCall)({phone:e.phone,invitationText:n,clientToken:y.clientId,requestGRecaptchaToken:Boolean(D.recaptcha)},(n,c)=>{var u;if(n)return null==d||d(),I(),void(0,p.telemetry)("cw_call_error",{param1:"in request"});if((c=c.data)||(g.error("wrong response from telephony"),c={ok:!1,error_list:["wrong_response"]}),c.only_forward)return g.error("only forward"),null==d||d(),_.callbackDispatchers.setCallbackStatus(l.CallStatus.ERROR),void _.callbackDispatchers.setCallbackError((0,S.l10n)("cw_call_forward"));if(c.ok){g.log("success"),null==s||s();const{phoneCodeSubstring:n}=(0,E.Dg)(e.phone),c=(0,E.Av)((null===(u=(0,h.getCallbackSettings)())||void 0===u?void 0:u.countries)||[],{phoneCode:n,reverseSearch:!0});_.appDispatchers.setChatStarted(!0),_.appDispatchers.setChatAccepted(!0),_.callbackDispatchers.setCallbackStatus(l.CallStatus.WAIT),r.messageActions.handleContactsForm(),r.messageActions.systemCallMessage(`${(0,S.l10n)("cw_call_to")} ${(0,E.vt)(e.phone,c)}`,a.MessageName.CALL_MESSAGE_START),(0,m.callUserFunction)("onCallStart"),o.analytics.trackCallWidgetRequested(),(0,p.telemetry)("cw_start_call",{param1:t}),(0,i.reloadTransitionStore)()}else g.error("have response, but is not ok"),null==d||d(),I(),(0,p.telemetry)("cw_call_error",{param1:c.error_list.join(" ")}),c.work_time&&c.work_time.schedule&&((0,w.initDelayedCall)(c.work_time),f.Router.next(T.RouterEvent.ToCall),(0,p.telemetry)("cw_start_call",{param1:t})),b.platform.isMobileOrTablet||C.route!==T.Route.LABEL||f.Router.next(T.RouterEvent.Navigate)})},k=(e,t,n)=>M(void 0,[e,t,n],void 0,function*({values:e,dateTime:t},n,i){(0,c.createLogger)("TELEPHONY: requestDelayedCallback",{style:"color: green;"}).log("start",{phone:e.phone,dateTime:t});const f=(0,h.getClient)(),m=(0,h.getFeatures)(),[y,b]=(0,O.Vq)(t),T=f.clientId?f.clientId.split(".")[0]:"0",D=`/sites/${C.default.site_id}/widgets/${C.default.widget_id}/clients/${T}/telephony/callback/delayed`,A=m.recaptcha?yield g.default.getInstance().getGRecaptchaToken({action:"delayedCallback"}):null,M=Object.assign({phone:e.phone,callback_date:y,callback_time:b},A&&{callback_token:A});_.callbackDispatchers.setDelayedCallbackStatus(l.DelayedCallStatus.WAIT),v.introduceActions.sendIntroduction(e),d.xhrRequest.post((0,u.telephonyUrl)(D),(s,c)=>{var u,d;if(s||c&&!c.data)return null==i||i(),s||_.callbackDispatchers.setDelayedCallbackStatus(l.DelayedCallStatus.NOT_WORK_TIME),(0,p.telemetry)("delayed_query_error",{param1:null!==(u=JSON.stringify(s))&&void 0!==u?u:"No data"});const g=c.data,f=g.work_time,m=g.error_list;if(g.ok){null==n||n();const{phoneCodeSubstring:i}=(0,E.Dg)(e.phone),s=(0,E.Av)((null===(d=(0,h.getCallbackSettings)())||void 0===d?void 0:d.countries)||[],{phoneCode:i,reverseSearch:!0}),c="as_soon_as_possible"===b&&g.callback_started,u={asSoonAsPossibleMessage:`${(0,S.l10n)("cw_call_to")} ${(0,E.vt)(e.phone,s)}`,defaultMessage:`${(0,S.l10n)("callback_delayed_submit_success")}\n${(0,O.Ce)(t)}`};c&&(_.callbackDispatchers.setCallbackIsDelayed(!1),_.callbackDispatchers.setCallbackStatus(l.CallStatus.WAIT),r.messageActions.handleContactsForm()),r.messageActions.systemCallMessage(c?u.asSoonAsPossibleMessage:u.defaultMessage,a.MessageName.DELAYED_CALL_SUCCESS),_.callbackDispatchers.setDelayedCallbackStatus(l.DelayedCallStatus.SUCCESS),o.analytics.trackCallWidgetRequested()}if(f&&(0,w.initDelayedCall)(f),m){const e=(0,h.getCallback)();if(m.includes("max_requests_limit")&&_.callbackDispatchers.setDelayedCallbackStatus(l.DelayedCallStatus.MAX_REQUESTS_LIMIT),m.includes("bad_callback_time")){_.callbackDispatchers.setDelayedCallbackStatus(l.DelayedCallStatus.BAD_CALLBACK_TIME);const e=(0,O.jX)(M.callback_date,M.callback_time);_.callbackDispatchers.setDelayedPeriods(e)}const t=m.some(e=>/client_blacklist|global_blacklist|rate_limiter/.test(e));t&&_.callbackDispatchers.setDelayedCallbackStatus(l.DelayedCallStatus.BLOCKED),e.delayedStatus===l.DelayedCallStatus.WAIT&&_.callbackDispatchers.setDelayedCallbackStatus(l.DelayedCallStatus.NOT_WORK_TIME),_.callbackDispatchers.setCallbackStatus(!1)}},{headers:{"Content-Type":s.CONTENT_TYPE.X_WWW_FORM},body:M})}),L=()=>{const e=(0,S.l10n)("webrtc_video_text_message");(0,D.shouldRedirectToIntroduce)()&&_.clientDispatchers.setLastMessage(e),r.messageActions.sendClientMessage({text:e}),_.transitionDispatchers.startTransition(y.ScriptName.OPEN_WIDGET),f.Router.next(T.RouterEvent.ToChat)}},3296:function(e,t,n){"use strict";n.r(t),n.d(t,{initDelayedCall:function(){return o},resetDelayedCall:function(){return a}});var r=n(26932),i=n(1858);const o=e=>{r.callbackDispatchers.setCallbackAvailable(!0),r.callbackDispatchers.setDelayedTimezone(e.timezone_diff),r.callbackDispatchers.setCallbackIsDelayed(!0),r.callbackDispatchers.setDelayedPeriods((0,i.cV)(e.schedule))},a=()=>{r.callbackDispatchers.setDelayedTimezone(null),r.callbackDispatchers.setDelayedPeriods([]),r.callbackDispatchers.setCallbackIsDelayed(null),r.callbackDispatchers.setDelayedCallbackStatus(null)}},1858:function(e,t,n){"use strict";n.d(t,{Ce:function(){return c},Vq:function(){return u},cV:function(){return l},jX:function(){return d}});var r=n(44145),i=n(10018),o=n(18276);const a="|",s=(e,t)=>`${e}${a}${t}`,l=e=>e.flatMap(({date:e,intervals:t})=>t.map(t=>s(e,t))),c=(e,t="",n={month:"long",day:"numeric",hour:"numeric",minute:"numeric"})=>{const s=(0,i.getWidgetLocale)(),l=(new Date).getDate(),c=(0,o.l10n)("today"),u=new Date((new Date).setDate(l+1)).getDate(),d=(0,o.l10n)("callback_delayed_period_tomorrow"),g=(0,o.l10n)("callback_delayed_period_as_possible").toLowerCase(),p="as_soon_as_possible",[,f]=t.split(a),[h,m]=e.split(a),_=m===p,v=`${h} ${_&&(f&&f!==p)?f:m}`,{time:y,date:C,month:E,dateDetail:b}=(e=>{const t=(0,i.getWidgetLocale)(),n=e.replace(/\-/g,"/"),o=new Date(n).getTime();if(isNaN(o))return{time:0,date:0,month:0,dateDetail:new Date};const a=(0,r.getCallback)(),s=-(new Date).getTimezoneOffset(),l=a.delayedTimezone,c=new Date(o+60*(s-l)*1e3),u=c.getHours(),d=c.getMinutes(),g=c.getDate(),p=c.getMonth(),f=e=>e>9?e:`0${e}`,h=f(d);let m=`${f(u)}:${h}`;return"en"===t&&(m=c.toLocaleString(t,{hour:"numeric",minute:"numeric",hour12:!0})),{time:m,date:g,month:p,dateDetail:c}})(v);if(_)return g.charAt(0).toUpperCase()+g.slice(1);if(C!==l&&C!==u){return b.toLocaleString(s,n)}{const e=`, ${y}`;return C===l?`${c}${e}`:C===u?`${d}${e}`:`${C}.${E} ${e}`}},u=e=>e.split(a),d=(e,t)=>{const{delayedPeriods:n}=(0,r.getCallback)(),i=s(e,t);return n.filter(e=>e!==i)}},16217:function(e,t,n){"use strict";n.r(t),n.d(t,{fixInitAnimate:function(){return p},getSeconds:function(){return l},isCallActive:function(){return c},isCallbackButtonEnabled:function(){return d},isCallbackEnabled:function(){return u},isVideoCallEnabled:function(){return g}});var r=n(10018),i=n(97490),o=n(44145),a=n(18276),s=n(80352);const l=e=>[(0,a.l10n)("cw_form_second"),(0,a.l10n)("cw_form_seconds"),(0,a.l10n)("cw_form_secondd")][e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]],c=()=>["cw_wait","cw_connecting","cw_connected"].includes((0,o.getCallback)().status),u=()=>{if(!(null===r.default||void 0===r.default?void 0:r.default.callback_settings))return!1;const e=(0,o.getCallback)().available,{time:t,countries:n}=r.default.callback_settings;return!!(e&&t&&n&&n.length>0)||c()},d=()=>!!(null===r.default||void 0===r.default?void 0:r.default.callback_settings)&&Boolean(s.platform.isDesktop&&r.default.callback_settings.button),g=()=>{const{isOnline:e}=(0,o.getApp)(),{modules:t,enableRequestVideocall:n}=(0,o.getFeatures)();return(null==t?void 0:t.videoCall)&&n&&e},p=e=>{const t=(0,o.getCallback)().status;(0,o.getApp)().route===i.Route.CALL&&"cw_connected"===t&&(null==e||e())}},86383:function(e,t,n){"use strict";n.r(t),n.d(t,{TitleManager:function(){return u}});var r=n(90061),i=n(45926),o=n(18276);let a,s=(0,i.getDocumentTitle)(),l=!1;const c=e=>{const t=(0,r.createLogger)("TitleManager: changeTitle"),{document:n}=(0,i.getPageWindow)();t.log("Change title to:",e),n.title=e},u={blink:()=>{clearInterval(a),a=setInterval(()=>{let e="";l?e=s:(s=(0,i.getDocumentTitle)(),e=(0,o.l10n)("lblNewMessage")),c(e),l=!l},1e3)},cancelBlink:()=>{clearInterval(a);const e=(0,i.getDocumentTitle)();e!==s&&e!==(0,o.l10n)("lblNewMessage")&&(s=e),c(s),l=!1}}},45683:function(e,t,n){"use strict";n.r(t),n.d(t,{getAvatarApiURL:function(){return y},getAvatarURL:function(){return v},getChatServerHost:function(){return h},getEmojiURL:function(){return g},getEulaURL:function(){return E},getFlagIconURL:function(){return f},getIMessageLink:function(){return C},getPatternURL:function(){return p},getStaticURL:function(){return u},getUTMCallLogoLink:function(){return _},getUTMLink:function(){return m},getValidLink:function(){return d},getVkDomain:function(){return b}});var r=n(10018),i=n(45926),o=n(2491),a=n(44145),s=n(19221);const l=s.v9?"/public":"",c=()=>{const{locale:e}=r.default,t=(0,i.getPageWindow)().location.hostname.split("."),n=t[t.length-1];let o="https://www.jivochat.com";const a={ru_RU:"https://www.jivo.ru",be:"https://www.jivo.ru",kk:"https://www.jivo.ru",uk:"https://www.jivo.ru",pt:"https://www.jivochat.com.br",pt_BR:"https://www.jivochat.com.br",es:"https://www.jivochat.es",de:"https://www.jivochat.de",tr:"https://www.jivochat.com.tr",id:"https://www.jivochat.co.id"},s={de:"https://www.jivochat.de",cl:"https://www.jivochat.cl",bo:"https://www.jivochat.com.bo",co:"https://www.jivochat.com.co",ve:"https://www.jivochat.com.ve",pe:"https://www.jivochat.com.pe",mx:"https://www.jivochat.mx",ar:"https://www.jivochat.com.ar"};return a[e]&&(o=a[e]),s[n]&&(o=s[n]),o},u=(e,t=!1)=>{let n=e;return t&&(n+=`?rnd=${Date.now()}`),s.v9?n:`${(0,i.getProtocol)()}${r.default.base_url}${n}`},d=e=>(0,o.isValidHttpURL)(e)?e:`${(0,i.getProtocol)()}//${e}`,g=e=>u(`${l}/images/emoji/${e}.svg`),p=e=>u(`${l}/images/pattern/${e}.svg`),f=e=>u(`${l}/images/flags/${e}.png?v=1`),h=()=>{const{chatHost:e}=(0,a.getSystemSettings)();return s.z$?`${(0,i.getProtocol)()}//${e}`:`https://${e}`},m=e=>{const{location:{hostname:t}}=(0,i.getPageWindow)(),n="logo_on_popup"===e?"from_popup":"from_widget";return`${c()}/i_sa/?utm_source=${encodeURIComponent(t)}&utm_medium=link&utm_content=${e}&utm_campaign=${n}`},_=()=>{const{location:{host:e}}=(0,i.getPageWindow)();return`${c()}/calls?utm_source=${e}&utm_medium=link&utm_content=callback_popup&utm_campaign=self_ad`},v=(e,t)=>`${(0,i.getProtocol)()}${e}/avatars/${t}`,y=e=>e?e.includes("data:image")||e.includes("https://")?e:v(r.default.avatar_url,e):"",C=e=>`sms://open?service=iMessage&recipient=urn:biz:${e}&biz-intent-id=click_in_jivo`,E=(e=r.default.base_url)=>`${(0,i.getProtocol)()}${e}/script/eula/${r.default.widget_id}`,b=()=>"RU"===(0,r.getIpCountry)()?"ru":"com"},61811:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(75686),i=n(70859),o=n(2982),a=n(97778),s=n(90061),l=n(73262),c=n(45926),u=n(21951),d=n(75998),g=n(80352),p=n(44145);const f=(0,s.createLogger)("WindowResizeManager");let h=null;class m{constructor(e){if(h)return h;this.handler=(0,l.throttle)(this.resizeHandler.bind(this),100),(0,u.addListener)((0,c.getPageWindow)(),"resize",this.handler),h=this,this.onResize=e,this.lastHeight=null,this.container=null}static getInstance(){return h}destroy(){(0,u.removeEvent)((0,c.getPageWindow)(),"resize",this.handler)}checkHeight(){if(g.platform.isMobileOrChatpage)return;const e=(0,c.getPageWindow)().innerHeight-8,{height:t}=(0,p.getPosition)();t&&parseInt(t)>e&&d.positionDispatch.setWidgetHeight(e+"px")}resizeHandler(){const e=r.default.get(i.Component.WIDGET_CONTAINER);if(f.log("resizeHandler"),!e)return;if(e&&!e.style)return;this.container=e;const t=parseInt((0,o.getProperty)("right",e))||0,n=parseInt((0,o.getProperty)("left",e))||0,s=parseInt((0,o.getProperty)("height",e))||0,u=t+n+a.CHAT_WIDTH+28,p=(0,c.getPageWindow)().document.body.clientWidth,h=(0,c.getPageWindow)().innerHeight-30;if(u>p)d.positionDispatch.initPositionStore({height:s>h?h<a.MINIMAL_WIDGET_HEIGHT?`${a.MINIMAL_WIDGET_HEIGHT}px`:`${h}px`:`${s}px`,left:this.getNewValue(n,u,p,40),right:this.getNewValue(t,u,p,30)});else if(s>h){const e=h<a.MINIMAL_WIDGET_HEIGHT?`${a.MINIMAL_WIDGET_HEIGHT}px`:`${h}px`;d.positionDispatch.setWidgetHeight(e)}if(this.onResize){const t=getComputedStyle(e);t&&this.lastHeight!==t.height&&(this.onResize({width:a.CHAT_WIDTH+"px",height:t.height}),this.lastHeight=t.height)}g.platform.isSafari&&!g.platform.isMobileOrTablet&&(0,l.throttle)(this.updateKeyFrames,200)}updateKeyFrames(){this.container&&(0,o.updateKeyframes)(this.container)}getNewValue(e,t,n,r){if(!e)return null;let i=e-(t-n);return i<r&&(i=r),`${i}px`}}},92745:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(96367),i=n(44145);const o=()=>{const{campaignId:e,name:t}=(0,i.getProactive)();t&&(e?r.analytics.trackCampaignRejected(t):r.analytics.trackProactiveInvitationRejected(t))}},45691:function(e,t,n){"use strict";n.d(t,{F:function(){return g},Q:function(){return p}});var r=n(97778),i=n(50789),o=n(73687),a=n(44145),s=n(26932),l=n(6254),c=n(38042),u=n(10465),d=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const g=e=>d(void 0,void 0,void 0,function*(){var t,n,d,g,p;const{isExist:f,clientId:h}=(0,a.getClient)(),m=(0,l.tq)(e),{userToken:_,attributes:v}=(0,a.getClient)();if(o.default.get("client_attributes_internal_error"))return;const y=(0,l.$B)(e);if((0,l.$k)(y),!f||!h)return"skipped";try{o.default.set("client_attributes_warnings_errors",null,1);const e=yield i.ApiProvider.sendClientAttributes(Object.assign({attributes:JSON.stringify(m)},_&&{user_token:_}),h);let n=y;(null===(t=e.data)||void 0===t?void 0:t.warning_list)&&(o.default.set("client_attributes_warnings_errors",`warnings: ${JSON.stringify(e.data.warning_list)}`,r.ONE_DAY_DELAY),n=(0,l.Zm)(e.data.warning_list,y));const a=Object.assign(Object.assign({},v),n);return(0,u.x)(a)||s.clientDispatchers.setClientAttributes(Object.assign(Object.assign({},v),n)),(0,c.telemetry)("send_attributes_success"),e}catch(e){const t=e;(null===(n=t.data)||void 0===n?void 0:n.ok)||(429!==t.status&&500!==t.status||o.default.set("client_attributes_internal_error",!0,r.ATTRIBUTES_REQUEST_DELAY),(null===(d=t.data)||void 0===d?void 0:d.error_list)&&o.default.set("client_attributes_warnings_errors",`errors: ${JSON.stringify(t.data.error_list)}`,r.ONE_DAY_DELAY),(0,c.telemetry)("send_attributes_failed",{param1:String(t.status),param2:JSON.stringify((null===(g=t.data)||void 0===g?void 0:g.warning_list)||(null===(p=t.data)||void 0===p?void 0:p.error_list)||"")}))}finally{(0,l.$k)(null)}}),p=e=>{const t=o.default.get("client_attributes_warnings_errors"),n=o.default.get("client_attributes_internal_error");t||n||g(e)}},34930:function(e,t,n){"use strict";n.r(t),n.d(t,{closeWidget:function(){return h}});var r=n(66547),i=n(32183),o=n(44145),a=n(26932),s=n(24344),l=n(8717),c=n(90061),u=n(45926),d=n(80352),g=n(75998),p=n(92745);const f=(0,c.createLogger)("analytics"),h=()=>{if(f.log("closeWidget",(0,o.getApp)().route),a.appDispatchers.setAppIsFocused(!1),d.platform.isMobileOrTablet)(0,i.blurActiveElement)(),(0,s.callUserFunction)("onClose");else if((0,l.isMinRoute)((0,o.getApp)().route))(0,u.getPageWindow)().document.getElementById("jivo_custom_widget")||(0,s.callUserFunction)("onClose");else{const{name:e}=(0,o.getProactive)();e&&((0,p.Z)(),a.proactiveDispatchers.setName(null)),(0,s.callUserFunction)("onClose")}r.default.set("close_time",(new Date).getTime()),a.appDispatchers.setChatOpenByClient(!1),g.pageStoreDispatch.setShowMobileMenu(!1)}},59767:function(e,t,n){"use strict";n.r(t),n.d(t,{agentTyping:function(){return I},banClient:function(){return L},connectionClientTyping:function(){return A},connectionTypingInsight:function(){return w},messageState:function(){return T},needShowDepartments:function(){return R},updateChatAgent:function(){return k}});var r=n(36148),i=n(81152),o=n(6693),a=n(55329),s=n(44145),l=n(14264),c=n(15787),u=n(90061),d=n(26932),g=n(41504),p=n(49963),f=n(38042),h=n(8717),m=n(21476),_=n(97490),v=n(16016),y=n(14762),C=n(73687),E=n(97778),b=n(25467);const S=(0,u.createLogger)("Connection actions"),T=e=>{const t=e.private_id?l.default.getMessageByPrivateId(e.private_id):l.default.getMessageById(e.msg_id);if(S.log("messageState",e,t),!t)return void(0,f.telemetry)("message_state_no_msg",{param1:e.private_id,param2:String(e.msg_id),param3:String(e.chat_id)});const n=(0,s.getApp)(),o=(0,s.getClient)();if(t.get("from")===i.MessageInitiator.AGENT&&t.get("type")===i.MessageType.PROACTIVE&&d.messagesDispatchers.updateMessage({privateId:e.private_id,messageId:null},{msg_id:e.msg_id}),t.get("from")===i.MessageInitiator.CLIENT){const l=(0,s.getMessages)().filter(({status:e,from:t,msg_id:n})=>[r.MessageStatus.SENT,r.MessageStatus.SENDED].includes(e)&&t===i.MessageInitiator.CLIENT&&n).map(e=>e.msg_id),c=(e=>{switch(e){case r.MessageStatus.SENT:return r.MessageStatus.SENDED;case r.MessageStatus.SENDED:case r.MessageStatus.DELIVERED:return r.MessageStatus.DELIVERED}})(e.status);if(d.messagesDispatchers.updateMessages({messageIds:l,privateIds:null},{status:c}),d.messagesDispatchers.updateMessage({privateId:e.private_id,messageId:null},{status:c,chat_id:e.chat_id,msg_id:e.msg_id}),t.get("type")==i.MessageType.TEMPORARY&&o.isIntroduced&&!n.isOnline&&[r.MessageStatus.SENT,r.MessageStatus.DELIVERED].includes(e.status)){S.log("messageState replace temp form message",t);const n="sent"===e.status?r.MessageStatus.SENT:r.MessageStatus.DELIVERED;d.messagesDispatchers.updateMessage({privateId:e.private_id,messageId:null},{type:i.MessageType.MESSAGE,status:n,chat_id:e.chat_id,msg_id:e.msg_id}),d.clientDispatchers.setInputText("")}return(0,a.prechatSetUsed)(!1),d.clientDispatchers.setLastMessage(""),void(e.chat_id&&d.chatsDispatchers.setCurrentChatId(e.chat_id))}};let D="";const w=e=>{(0,s.getFeatures)().typingInsight&&D!==e&&(D=e,(0,c.connectionReadyForMessages)()&&p.connectionAdapter.sendEvent(new g.ClientServiceMessage(e)))};let O=0;const A=e=>{const t=e?1:0;O!==t&&(O=t,(0,c.connectionReadyForMessages)()&&p.connectionAdapter.sendEvent(new g.ClientTyping(t)))};let M;const I=(e,t=!1)=>{const n=t?o.Timeouts.BOT_TYPING:o.Timeouts.AGENT_TYPING;e?M=setTimeout(()=>{I(!1,t)},n):clearTimeout(M),d.chatsDispatchers.setAgentTyping(e)},R=()=>{d.clientDispatchers.updateClient({departmentId:null});const{route:e}=(0,s.getApp)(),{departments:t}=(0,s.getUserSettings)();t&&(0,h.isChatRoute)(e)&&(m.Router.setNext(_.Route.DEPARTMENTS),d.appDispatchers.setAppRoute(_.Route.DEPARTMENTS))},k=e=>{const t=e.params,n=(0,s.getAgentById)(+t.from_id);if(S.warn("updateChatAgent",n),n){const e=y.default.getAgentById(+t.from_id);e&&e.set("body.state",t.type),d.messagesDispatchers.addMessage({type:"system",body:{from_id:t.from_id,action:t.type,type:"chat"},msg_id:t.msg_id,chat_id:t.chat_id,private_id:(0,v.generateGUID)()})}else S.error("updateChatAgent: No agent info in agents store.")},L=e=>{const t=e?(0,b.getSecondsDiff)(1e3*e):E.ONE_DAY_DELAY;S.log("banClient",t),C.default.set("is_blacklisted",!0,t)}},81073:function(e,t,n){"use strict";n.r(t),n.d(t,{sendClientAttributes:function(){return l}});var r=n(45691),i=n(6254),o=n(10465),a=n(45926);const s=(0,n(73262).throttle)(()=>{const e=(0,a.getJivoConfig)(),t=(0,i.LE)();e.enable_client_attributes&&t&&!(0,o.x)(t)&&(0,r.Q)(t)},3e3),l=()=>{s()}},79523:function(e,t,n){"use strict";n.r(t),n.d(t,{introduceActions:function(){return p}});var r=n(96367),i=n(10018),o=n(90061),a=n(44145),s=n(24344),l=n(26932),c=n(49963),u=n(41504),d=n(38042);const g=e=>{const t=(0,o.createLogger)("IntroduceActions: sendIntroduction"),{eulaAccepted:n}=(0,a.getClient)(),{eula:r}=(0,a.getSystemSettings)(),{mailing:i}=(0,a.getFeatures)(),s={name:e.name||e.client_name||null,phone:e.phone||null,email:e.email||null,description:e.description||null};t.log("Normalized data:",s),l.clientDispatchers.setClientContacts(s);const d=new u.Introduction(Object.assign(Object.assign({},s),{eula:!(!r||!n)||null,mailing:!(!i||!e.mailing)||null}));c.connectionAdapter.sendEventIfConnected(d)},p={setClientContactInfo:(e,t=!1,n=!1)=>{(0,o.createLogger)("IntroduceActions: setClientContactInfo").warn(e,t,n),g(e),t||(l.clientDispatchers.setIsIntroduced(!0),r.analytics.trackGaveContacts(),n&&(0,d.telemetry)("introduce",{param1:String(i.default.contacts_ask),param2:JSON.stringify({name:Boolean(e.client_name||e.name),department_id:e.departmentId,email:Boolean(e.email),phone:Boolean(e.phone)})}),(0,s.callUserFunction)("onIntroduction"))},sendIntroduction:g}},12822:function(e,t,n){"use strict";n.r(t),n.d(t,{checkMaintenance:function(){return _},enableMaintenance:function(){return h},getNewConfig:function(){return m}});var r=n(26932),i=n(83425),o=n(49963),a=n(75998),s=n(90061),l=n(65465),c=n(44145),u=n(73687),d=n(58406),g=n(24578),p=n(97778);const f=(0,s.createLogger)("maintenance actions"),h=()=>{f.log("Maintenance mode is on"),r.appDispatchers.setMaintenance(!0),r.callbackDispatchers.setCallbackAvailable(!1),l.messageActions.addMaintenanceMessage()},m=()=>{i.ConfigUtils.reloadConfig(e=>{f.log("Site is moved",e),e&&(a.systemSettingsDispatch.refresh(),r.appDispatchers.setMaintenance(!1),r.appDispatchers.setIsInputDisabled(!1),l.messageActions.deleteMaintenanceMessage()),(0,g.reloadStories)(),(0,d.g)(),o.connectionAdapter.isConnected()&&o.connectionAdapter.disconnect(),(0,c.getApp)().isOnline&&setTimeout(()=>{o.connectionAdapter.openConnect(()=>{},!0)},5e3)})},_=()=>{const{maintenance:e,lastChatStatus:t,isOnline:n}=(0,c.getApp)(),r=u.default.get("maintenance_time");!e||n||t||r||(u.default.set("maintenance_time",Date.now(),p.ONE_DAY_DELAY),setTimeout(()=>{m()},3e3))}},42634:function(e,t,n){"use strict";n.r(t),n.d(t,{acceptProactive:function(){return R},addMessagesOnOpen:function(){return w},deleteProactiveMessage:function(){return k},markInvitationAnswered:function(){return I},pushRateForm:function(){return D},readProactive:function(){return M},readSystemMessages:function(){return O},saveLastProactive:function(){return A}});var r=n(26754),i=n(65465),o=n(81152),a=n(44145),s=n(26932),l=n(14264),c=n(12822),u=n(96367),d=n(36148),g=n(79814),p=n(34930),f=n(21476),h=n(97490),m=n(50402),_=n(78692),v=n(42359),y=n(48999),C=n(12398),E=n(54346),b=n(90061),S=n(38042);const T=(0,b.createLogger)("Messages actions"),D=(e,t,n)=>{s.messagesDispatchers.destroyByType(o.MessageType.RATE_FORM),s.messagesDispatchers.addMessage({type:o.MessageType.RATE_FORM,from:o.MessageInitiator.SYSTEM,chat_id:e,created_ts:n?n+1e3:(new Date).getTime(),body:{submited:!1,rate:null,comment:null,closed:!1}}),(0,S.telemetry)("rate_form_add",{param1:String(e),param2:t}),u.analytics.trackRateForm("add")},w=()=>{i.messageActions.addMessagesOnOpen((0,a.getApp)().isOnline),(0,c.checkMaintenance)()},O=()=>{const e=(0,a.getSystemUnread)();if(!e.length)return;const t=e.map(e=>e.private_id);s.messagesDispatchers.updateMessages({privateIds:t,messageIds:null},{status:d.MessageStatus.READ})},A=()=>{var e,t,n;const i=l.default.getLastProactive();if(!i)return;const o=i.toJSON(),a=null===(e=o.body)||void 0===e?void 0:e.is_markdown,c=null===(t=o.body)||void 0===t?void 0:t.agent_info,u=null===(n=o.body)||void 0===n?void 0:n.extra,d=c||r.default;o.body={agent_info:d,is_markdown:a||null,extra:u||null},s.messagesDispatchers.deleteMessageByPrivateId(o.private_id),s.messagesDispatchers.addMessage(o),s.messagesDispatchers.initMessagesStore()},M=()=>{const e=(0,a.getProactive)();e.text&&e.status!==d.MessageStatus.READ&&(s.messagesDispatchers.updateMessage({privateId:e.privateId,messageId:null},{status:d.MessageStatus.READ}),s.proactiveDispatchers.setStatus(d.MessageStatus.READ))},I=()=>{const{name:e,campaignId:t}=(0,a.getProactive)();if(s.proactiveDispatchers.setPrechats(null),e){if(t){v.StatsManager.send({campaignId:t},"chat_init");const e=(0,y.QF)(t);(null==e?void 0:e.tag_id)&&((0,C.addClientTag)(e.tag_id),(0,C.sendTagsIfNeed)())}R(),s.proactiveDispatchers.setName(null),(0,S.telemetry)("invite_accepted")}if((0,E.checkTrackClientAnswer)(),_.ApiInvitationsManager.isInitialized()&&_.ApiInvitationsManager.hasInvitations()){const e=["startup_ok","resume_ok"].includes((0,a.getApp)().lastChatStatus);_.ApiInvitationsManager.markInvitationsAnswered(e)}},R=()=>{const{campaignId:e,name:t}=(0,a.getProactive)();t&&(e?u.analytics.trackCampaignAccepted(t):u.analytics.trackProactiveInvitationAccepted(t))},k=e=>{const t=(0,g.getMessagesByType)((0,a.getMessages)(),o.MessageType.PROACTIVE).find(e=>{var t;return!0===(null===(t=e.body)||void 0===t?void 0:t.unsave)});t&&(T.log("deleteProactiveMessage",t),s.messagesDispatchers.deleteMessageByPrivateId(t.private_id),s.proactiveDispatchers.resetProactive(),e&&(s.chatsDispatchers.setNoJoinedAgents(),f.Router.next(h.RouterEvent.CloseWindow),s.transitionDispatchers.startTransition(m.ScriptName.CLOSE_WIDGET)),(0,p.closeWidget)())}},85074:function(e,t,n){"use strict";n.r(t),n.d(t,{beforeNavigateToChat:function(){return w},callbackEnabled:function(){return T},closeWindow:function(){return I},getRouteChatMin:function(){return S},isChatMinAvailable:function(){return D},navigateToChat:function(){return M},needShowPrechats:function(){return O},onOpenChat:function(){return b},showChat:function(){return E},showDepartmentsIfPossible:function(){return A}});var r=n(10018),i=n(26754),o=n(96367),a=n(97490),s=n(26932),l=n(42634),c=n(65465),u=n(44145),d=n(50402),g=n(38042),p=n(24344),f=n(1092),h=n(8717),m=n(1667),_=n(47138),v=n(80352),y=n(88263),C=n(75998);const E=(e,t,n)=>{if(s.appDispatchers.setAppIsFocused(!0),s.appDispatchers.setChatOpenByClient(!0),y.routerService.next(t),s.transitionDispatchers.startTransition(d.ScriptName.OPEN_WIDGET),t!==a.RouterEvent.ToCall){e?o.analytics.trackChatOpenedByClick():o.analytics.trackOfflineFormOpenedByClick(),(0,l.addMessagesOnOpen)();const t=(0,u.getProactive)();t.text&&t.prechats&&c.messageActions.addPrechatMessage();const r=(0,u.getSystemSettings)().botmode?{param4:"1"}:{};n&&Object.assign(r,n),(0,g.telemetry)("widget_click",r)}},b=()=>{(0,u.getApp)().isOnline?o.analytics.trackChatOpenedByClick():o.analytics.trackOfflineFormOpenedByClick(),(0,p.callUserFunction)("onOpen")},S=()=>D()?a.Route.CHAT_MIN:(0,u.getCallback)().status===_.CallStatus.CONNECTED?a.Route.CALL:a.Route.LABEL,T=()=>{var e;const t=r.default.callback_settings;return!!((null==t?void 0:t.time)&&(null==t?void 0:t.countries)&&(null===(e=null==t?void 0:t.countries)||void 0===e?void 0:e.length))},D=()=>{const{labelBubble:e}=(0,u.getUserSettings)(),t=i.default,n=t.agent_id||t.bot_id,r="join"==t.state;return(0,u.getApp)().chatAccepted&&(0,u.getApp)().isOnline&&n&&r&&!v.platform.isMobileOrTablet&&(0,u.getCallback)().status!==_.CallStatus.CONNECTED&&!e},w=()=>{s.appDispatchers.setAppIsFocused(!0),s.appDispatchers.setChatOpenByClient(!0),C.pageStoreDispatch.setShowMobileMenu(!1),c.messageActions.deleteUnansweredOfflineSystemInvite(),c.messageActions.addPrechatMessage(),c.messageActions.offlineSystemInvite()},O=()=>{const{isOnline:e,chatStarted:t}=(0,u.getApp)(),n=(0,u.getLastClientMessage)();return e&&(!n||!t)},A=()=>{const{chatStarted:e,isOnline:t}=(0,u.getApp)(),{isIntroduced:n,departmentId:r}=(0,u.getClient)(),{contactsAsk:o,departments:a}=(0,u.getUserSettings)(),s=i.default,l=a&&(0,m.k)(r)&&!s.agent_id&&!e&&t;return 1===o?n&&l:l},M=e=>{let t=a.RouterEvent.ToChat;if(((0,h.shouldRedirectToIntroduce)()||A())&&(t=a.RouterEvent.Navigate),!e)return s.appDispatchers.setAppIsFocused(!0),c.messageActions.addPrechatMessage(),E((0,u.getApp)().isOnline,t),b(),void(0,f.D8)("chat");w(),E((0,u.getApp)().isOnline,t),b(),(0,g.telemetry)("powerbtn_open_chat")},I=e=>{e?e():y.routerService.next(a.RouterEvent.CloseWindow)}},2903:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var r=n(48999),i=n(44145),o=n(16016),a=n(49963);const s=({campaign_id:e,clientAnswer:t,image:n})=>{var s,l;const c=(0,r.QF)(e),u=(0,i.getApp)();if(!c)return;const d=null===(l=null===(s=c.content)||void 0===s?void 0:s.popup_settings)||void 0===l?void 0:l.screens[0],g={campaign_id:e,tag_id:c.tag_id,type:c.type,title:null==d?void 0:d.title,subtitle:null==d?void 0:d.subtitle,text:null==d?void 0:d.text,has_image:Boolean(null==d?void 0:d.img_src)},p={name:"client_message_campaign",message:g.title||g.text,private_id:(0,o.generateGUID)(),media:{type:"photo",width:(null==n?void 0:n.width)||0,height:(null==n?void 0:n.height)||0,file:(null==d?void 0:d.img_src)||"https://files.jivosite.com/campaigns/images/template-1-img.webp",address:Object.assign(Object.assign({referral_type:"campaign"},g),{client_answer:t})}};a.connectionAdapter.sendEvent(p),u.isOnline||a.connectionAdapter.addToBufferOnce(p)}},70859:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return r}});const r={ROOT_COMPONENT:"RootComponent",DRAG:"Drag",INTRODUCE:"Introduce",WIDGET_CONTAINER:"WidgetContainer",INPUT:"Input",AUTORESIZER:"autoResizer",CHAT_INPUT:"ChatInput",CHAT_INTRODUCE:"ChatIntroduce",SCROLL_CONTAINER:"ScrollContainer",PRECHAT:"PrechatMessage",LABEL:"Label",HEADER:"Header",MORE_BUTTON:"MoreButton",MOUSE_TRACK:"MouseTrack",CHAT_BODY:"ChatBody",SOUND_AGENT_MESSAGE:"SOUND_AGENT_MESSAGE",SOUND_NOTIFICATION:"SOUND_NOTIFICATION",SOUND_OUTGOING_MESSAGE:"SOUND_OUTGOING_MESSAGE",MESSAGES_CONTAINER:"MESSAGES_CONTAINER",MOBILE_CONTAINER:"MOBILE_CONTAINER",RATE_FORM:"RateForm",PROACTIVE_MESSAGE:"PROACTIVE_MESSAGE"}},50402:function(e,t,n){"use strict";n.r(t),n.d(t,{ScriptName:function(){return r}});const r={OPEN_WIDGET:"OPEN_WIDGET",CLOSE_WIDGET:"CLOSE_WIDGET",MINIMIZE_WIDGET:"MINIMIZE_WIDGET",MAXIMIZE_WIDGET:"MAXIMIZE_WIDGET",MIN_WIDGET:"MIN_WIDGET"}},17097:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});const r=n(98661).default.createContext({target:"",previewSettings:[],isContactFormPreview:!1})},56163:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});const r=n(98661).default.createContext({campaignWidgetMessageFeed:[],isWidgetConstructor:!1,isMobileView:!1,isPreview:!1})},80797:function(e,t,n){"use strict";n.r(t),n.d(t,{useWidgetConstructorContext:function(){return o}});var r=n(98661),i=n(56163);const o=()=>(0,r.useContext)(i.e)},29854:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const r=n(98661).default.createContext({target:"",isWidgetTarget:!1,isWidgetExtensions:!1})},13551:function(e,t,n){"use strict";n.r(t),n.d(t,{useWidgetExtensionsContext:function(){return o}});var r=n(98661),i=n(29854);const o=()=>(0,r.useContext)(i.M)},36581:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});const r={angel:"1f607",unicorn_face:"1f984",confused:"1f615",rage:"1f621",imp:"1f608",disappointed:"1f61e",kissing_heart:"1f618",yum:"1f60b",disappointed_relieved:"1f625",weary:"1f629",grin:"1f601",laughing:"1f606",wink:"1f609",sunglasses:"1f60e",neutral_face:"1f610",winking_eye:"1f61c",hushed:"1f62e",thumbsup:"1f44d",thumbsdown:"1f44e",smile:"1f603"}},97778:function(e,t,n){"use strict";n.r(t),n.d(t,{API_INVITES_CACHE_TIME:function(){return u},APP_INVITE_TIME:function(){return i},ATTRIBUTES_REQUEST_DELAY:function(){return O},AWAY_CLIENT_TIMEOUT:function(){return r},CACHE_KEY:function(){return d},CAMPAIGN_TEXT_HEIGHT:function(){return s},CHAT_WIDTH:function(){return y},DEFAULT_WIDGET_HEIGHT:function(){return E},HEADER_HEIGHT:function(){return g},INPUT_HEIGHT:function(){return p},INPUT_MOBILE_HEIGHT:function(){return f},LABEL_HEIGHT:function(){return C},MAINT_RECONNECT_TIMEOUT:function(){return h},MAX_ALLOWED_USER_ZOOM:function(){return T},MAX_ATTRIBUTE_NUMBER_LENGTH:function(){return w},MAX_ATTRIBUTE_STRING_LENGTH:function(){return D},MAX_EXTENDED_FILE_SIZE:function(){return _},MAX_FILE_SIZE:function(){return m},MAX_IMAGE_WIDTH:function(){return b},MINIMAL_WIDGET_HEIGHT:function(){return v},MIN_IMG_WH:function(){return S},MP_AGENT_HEIGHT:function(){return c},MP_LINE_HEIGHT:function(){return l},ONE_DAY_DELAY:function(){return A},PROACTIVE_MAX_HEIGHT:function(){return a},PROACTIVE_TEXT_LIMIT:function(){return o}});const r=144e5,i=8e3,o=50,a=74,s=90,l=19,c=28,u=18e5,d="api_invites",g=70,p=106,f=56,h=3e5,m=10485760,_=5*m,v=402,y=336,C=40,E=496,b=234,S=70,T=1.03,D=100,w=9,O=300,A=86400},10018:function(e,t,n){"use strict";var r;n.r(t),n.d(t,{default:function(){return A},getCometHost:function(){return T},getConfig:function(){return D},getIpCountry:function(){return y},getViHost:function(){return S},getWidgetLocale:function(){return O},initConfig:function(){return b},setConfigParam:function(){return w}}),function(e){e.ONLINE="online",e.OFFLINE="offline"}(r||(r={}));var i,o,a,s=n(9550),l=n(45926),c=n(52028),u=n(16026),d=n(45948),g=n(3491),p=n(10465),f=n(80352),h=n(41189),m=n(23400);const _=(0,l.getPageWindow)();let v=_.jivo_config;const y=()=>{var e,t;return null===(t=null===(e=v.geoip)||void 0===e?void 0:e.split(";"))||void 0===t?void 0:t[0]};switch(u.EnvironmentManager.isSelfhosted()?n.p=`${_.location.protocol}${v.base_url}/`:n.p=`https:${v.base_url}/`,v.chat_mode){case r.ONLINE:case 1:v.chat_mode=r.ONLINE;break;case r.OFFLINE:case 0:v.chat_mode=r.OFFLINE}v.bots&&Boolean(v.enable_bot_offline)&&(v.chat_mode=r.ONLINE),v.callback_settings||(v.callback_settings={}),v.contacts_settings||(v.contacts_settings={name:{show:!1,required:!1},email:{show:!0,required:!0},phone:{show:!1,required:!1}});const C="online"===v.chat_mode;v.enable_client_attributes?((0,g.k)(v.contacts_settings)?(v.contacts_settings_new=v.contacts_settings,v.contacts_settings=(0,m.Ks)(v.contacts_settings)):v.contacts_settings_new=(0,m.sJ)(v.contacts_settings),v.contacts_settings_new&&(C&&v.contacts_ask===s.ContactsType.DISABLED&&!(0,m.zW)(v.contacts_settings_new)&&(v.contacts_settings_new=v.contacts_settings_new.map(e=>"email"===e.name?Object.assign(Object.assign({},e),{show:!0,required:!0}):e)),C||(0,m.zW)(v.contacts_settings_new)||(v.contacts_settings_new=(0,m.Zo)(v.contacts_settings_new)))):(v.contacts_settings=(0,g.k)(v.contacts_settings)?(0,m.Ks)(v.contacts_settings):v.contacts_settings,C&&v.contacts_ask===s.ContactsType.DISABLED&&!(0,m.zW)(v.contacts_settings)&&(v.contacts_settings=Object.assign(Object.assign({},v.contacts_settings),{email:{show:!0,required:!0}})),C||(0,m.zW)(v.contacts_settings)||(v.contacts_settings=(0,m.Zo)(v.contacts_settings)),v.contacts_settings=(0,m.cs)(v.contacts_settings)),v.contacts_settings&&v.contacts_ask===s.ContactsType.BEFORE_CHAT&&((null===(i=v.contacts_settings.phone)||void 0===i?void 0:i.show)||(null===(o=v.contacts_settings.email)||void 0===o?void 0:o.show)||(null===(a=v.contacts_settings.name)||void 0===a?void 0:a.show)||v.contacts_settings.email&&(v.contacts_settings.email.show=!0)),v.widget_color2||"#383345"!=v.widget_color||(v.widget_color="#2F324A",v.widget_color2="#424867",v.power_gradient=1),v.bubble_color||(v.bubble_color="green"),"[object Object]"===Object.prototype.toString.call(_.wix_context)&&"[object Object]"===Object.prototype.toString.call(_.jivo_wix)&&Object.assign(v,_.jivo_wix),_.jivo_in_wix_iframe&&(v.widget_orientation="bottom"),c.isDesignerEditor&&Object.assign(v,_._desingerConfig),(0,p.x)(v.joint)&&delete v.joint,v.joint&&"RU"===y()&&(delete v.joint.ig,delete v.joint.fb),v.disable_botmode&&(v.botmode=null);const E=u.EnvironmentManager.isWidgetConstructor();(f.platform.isChatPage||d.isPopupConstructor||E)&&(v.campaigns=null),E&&(v.chat_mode="online"),h.V.chatPageYClients&&(v.enable_full_cp=1,v.disable_filetransfer=1,v.enable_reply=0);const b=e=>window.parent.jivo_config=v=e,S=()=>null==v?void 0:v.vi_host,T=()=>null==v?void 0:v.chat_host,D=()=>v,w=(e,t)=>{const n=v;n[e]=t,b(n)},O=()=>{const e=v.locale;return e.includes("_")?e.split("_")[0]:e};var A=v},23400:function(e,t,n){"use strict";n.d(t,{Ks:function(){return o},Zo:function(){return c},cs:function(){return a},sJ:function(){return s},zW:function(){return l}});var r=n(3491),i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const o=e=>e.reduce((e,t)=>{var{name:n}=t,r=i(t,["name"]);return e[n]=r,e},{}),a=e=>["name","email","phone","description"].reduce((t,n)=>{const r=e[n];return r&&(t[n]=r),t},{}),s=e=>Object.keys(e).map(t=>Object.assign({name:t},e[t])),l=e=>{var t,n,i;return(0,r.k)(e)?e.some(({name:e,show:t,required:n})=>"email"===e&&t&&n||"phone"===e&&t&&n):Boolean((null===(t=e.phone)||void 0===t?void 0:t.show)&&(null===(n=e.phone)||void 0===n?void 0:n.required)||(null===(i=e.email)||void 0===i?void 0:i.show)&&e.email.required)},c=e=>{var t,n,i,a;if((0,r.k)(e)){const r=o(e);return!(null===(t=r.email)||void 0===t?void 0:t.show)&&(null===(n=r.phone)||void 0===n?void 0:n.show)?e.map(e=>"phone"===e.name?Object.assign(Object.assign({},e),{show:!0,required:!0}):e):e.map(e=>"email"===e.name?Object.assign(Object.assign({},e),{show:!0,required:!0}):e)}return!(null===(i=e.email)||void 0===i?void 0:i.show)&&(null===(a=e.phone)||void 0===a?void 0:a.show)?Object.assign(Object.assign({},e),{phone:{show:!0,required:!0}}):Object.assign(Object.assign({},e),{email:{show:!0,required:!0}})}},47367:function(e,t,n){"use strict";n.d(t,{aQ:function(){return d},mh:function(){return l},Al:function(){return u},Nn:function(){return c}});var r=n(73163),i=n(10018);const o={RU:"dmy",BY:"dmy",KZ:"dmy",UA:"dmy",US:"dmy",GB:"dmy",DE:"dmy",BE:"dmy",BR:"dmy",HU:"ymd",DK:"dmy",IT:"dmy",ES:"dmy",CA:"ymd",NL:"dmy",NO:"dmy",PL:"ymd",PT:"dmy",RS:"dmy",SK:"ymd",SI:"ymd",FI:"ymd",FR:"dmy",CZ:"ymd",CH:"dmy",SE:"ymd"},a={RU:".",BY:".",KZ:".",UA:".",US:"-",GB:"/",DE:".",BE:"/",BR:"/",HU:"-",DK:"-",IT:"/",ES:"/",CA:"-",NL:"-",NO:".",PL:"-",PT:"-",RS:".",SK:"-",SI:"-",FI:"-",FR:".",CZ:"-",CH:".",SE:"-"},s=(0,i.getIpCountry)(),l=()=>{const e="YYYY-MM-DD",t=o[s],n=a[s];if(!t)return e;switch(t){case"dmy":return`DD${n}MM${n}YYYY`;case"ymd":return`YYYY${n}MM${n}DD`;default:return e}},c=e=>["RU","BY","KZ","UA"].includes(s)?e.replace("DD","").replace("MM","").replace("YYYY",""):e,u=e=>{const t=(0,r.k)((0,r.k)(e,".","-"),"/","-");return"-"===t[2]?t.split("-").reverse().join("-"):t},d=e=>{if(!e)return e;const t=o[s],n=a[s];if(!t)return e;const i=(0,r.k)(e,"-",n);return"dmy"===t?i.split(n).reverse().join(n):i}},82594:function(e,t,n){"use strict";n.d(t,{A3:function(){return Se},l1:function(){return be},z2:function(){return Ee}});var r=n(55760),i=n(59885),o=n(94633),a=n.n(o);const s=Object.prototype.toString,l=Error.prototype.toString,c=RegExp.prototype.toString,u="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",d=/^Symbol\((.*)\)(.*)$/;function g(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?`"${e}"`:e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return u.call(e).replace(d,"Symbol($1)");const r=s.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+l.call(e)+"]":"RegExp"===r?c.call(e):null}function p(e,t){let n=g(e,t);return null!==n?n:JSON.stringify(e,function(e,n){let r=g(this[e],t);return null!==r?r:n},2)}function f(e){return null==e?[]:[].concat(e)}let h,m,_,v=/\$\{\s*(\w+)\s*\}/g;h=Symbol.toStringTag;class y{constructor(e,t,n,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[h]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],f(e).forEach(e=>{if(C.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}m=Symbol.hasInstance,_=Symbol.toStringTag;class C extends Error{static formatError(e,t){const n=t.label||t.path||"this";return t=Object.assign({},t,{path:n,originalPath:t.path}),"string"==typeof e?e.replace(v,(e,n)=>p(t[n])):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r,i){const o=new y(e,t,n,r);if(i)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[_]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,C)}static[m](e){return y[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let E={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{const i=null!=r&&r!==n?` (cast from the value \`${p(r,!0)}\`).`:".";return"mixed"!==t?`${e} must be a \`${t}\` type, but the final value was: \`${p(n,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${p(n,!0)}\``+i}},b={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},S={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},T={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},D={isValue:"${path} field must be ${value}"},w={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},O={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},A={notType:e=>{const{path:t,value:n,spec:r}=e,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${p(n,!0)}\``;if(n.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${p(n,!0)}\``}return C.formatError(E.notType,e)}};Object.assign(Object.create(null),{mixed:E,string:b,number:S,date:T,object:w,array:O,boolean:D,tuple:A});const M=e=>e&&e.__isYupSchema__;class I{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,o="function"==typeof n?n:(...e)=>e.every(e=>e===n);return new I(e,(e,t)=>{var n;let a=o(...e)?r:i;return null!=(n=null==a?void 0:a(t))?n:t})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map(e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!M(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const R="$",k=".";class L{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===R,this.isValue=this.key[0]===k,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?R:this.isValue?k:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,r.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}L.prototype.__isYupRef=!0;const P=e=>null==e;function x(e){function t({value:t,path:n="",options:r,originalValue:i,schema:o},a,s){const{name:l,test:c,params:u,message:d,skipAbsent:g}=e;let{parent:p,context:f,abortEarly:h=o.spec.abortEarly,disableStackTrace:m=o.spec.disableStackTrace}=r;function _(e){return L.isRef(e)?e.getValue(t,p,f):e}function v(e={}){const r=Object.assign({value:t,originalValue:i,label:o.spec.label,path:e.path||n,spec:o.spec,disableStackTrace:e.disableStackTrace||m},u,e.params);for(const e of Object.keys(r))r[e]=_(r[e]);const a=new C(C.formatError(e.message||d,r),t,r.path,e.type||l,r.disableStackTrace);return a.params=r,a}const y=h?a:s;let E={path:n,parent:p,type:l,from:r.from,createError:v,resolve:_,options:r,originalValue:i,schema:o};const b=e=>{C.isError(e)?y(e):e?s(null):y(v())},S=e=>{C.isError(e)?y(e):a(e)};if(g&&P(t))return b(!0);let T;try{var D;if(T=c.call(E,t,E),"function"==typeof(null==(D=T)?void 0:D.then)){if(r.sync)throw new Error(`Validation test of type: "${E.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(T).then(b,S)}}catch(e){return void S(e)}b(T)}return t.OPTIONS=e,t}function N(e,t,n,i=n){let o,a,s;return t?((0,r.forEach)(t,(r,l,c)=>{let u=l?r.slice(1,r.length-1):r,d="tuple"===(e=e.resolve({context:i,parent:o,value:n})).type,g=c?parseInt(u,10):0;if(e.innerType||d){if(d&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${s}" must contain an index to the tuple element, e.g. "${s}[0]"`);if(n&&g>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${r}, in the path: ${t}. because there is no value at that index. `);o=n,n=n&&n[g],e=d?e.spec.types[g]:e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${s} which is a type: "${e.type}")`);o=n,n=n&&n[u],e=e.fields[u]}a=u,s=l?"["+r+"]":"."+r}),{schema:e,parent:o,parentPath:a}):{parent:o,parentPath:t,schema:e}}class F extends Set{describe(){const e=[];for(const t of this.values())e.push(L.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new F(this.values())}merge(e,t){const n=this.clone();return e.forEach(e=>n.add(e)),t.forEach(e=>n.delete(e)),n}}function j(e,t=new Map){if(M(e)||!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let r=0;r<e.length;r++)n[r]=j(e[r],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[r,i]of e.entries())n.set(r,j(i,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const r of e)n.add(j(r,t))}else{if(!(e instanceof Object))throw Error(`Unable to clone ${e}`);n={},t.set(e,n);for(const[r,i]of Object.entries(e))n[r]=j(i,t)}return n}class B{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new F,this._blacklist=new F,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(E.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=j(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation(t=>{e.tests.forEach(e=>{t.test(e.OPTIONS)})}),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce((t,n)=>n.resolve(t,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,r,i;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(i=e.disableStackTrace)?i:this.spec.disableStackTrace})}cast(e,t={}){let n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&P(i))return i;let o=p(e),a=p(i);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". \n\nattempted value: ${o} \n`+(a!==o?`result of cast: ${a}`:""))}return i}_cast(e,t){let n=void 0===e?e:this.transforms.reduce((t,n)=>n.call(this,t,e,this),e);return void 0===n&&(n=this.getDefault(t)),n}_validate(e,t={},n,r){let{path:i,originalValue:o=e,strict:a=this.spec.strict}=t,s=e;a||(s=this._cast(s,Object.assign({assert:!1},t)));let l=[];for(let e of Object.values(this.internalTests))e&&l.push(e);this.runTests({path:i,value:s,originalValue:o,options:t,tests:l},n,e=>{if(e.length)return r(e,s);this.runTests({path:i,value:s,originalValue:o,options:t,tests:this.tests},n,r)})}runTests(e,t,n){let r=!1,{tests:i,value:o,originalValue:a,path:s,options:l}=e,c=e=>{r||(r=!0,t(e,o))},u=e=>{r||(r=!0,n(e,o))},d=i.length,g=[];if(!d)return u([]);let p={value:o,originalValue:a,path:s,options:l,schema:this};for(let e=0;e<i.length;e++){(0,i[e])(p,c,function(e){e&&(Array.isArray(e)?g.push(...e):g.push(e)),--d<=0&&u(g)})}}asNestedTest({key:e,index:t,parent:n,parentPath:r,originalParent:i,options:o}){const a=null!=e?e:t;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const s="number"==typeof a;let l=n[a];const c=Object.assign({},o,{strict:!0,parent:n,value:l,originalValue:i[a],key:void 0,[s?"index":"key"]:a,path:s||a.includes(".")?`${r||""}[${s?a:`"${a}"`}]`:(r?`${r}.`:"")+e});return(e,t,n)=>this.resolve(c)._validate(l,c,t,n)}validate(e,t){var n;let r=this.resolve(Object.assign({},t,{value:e})),i=null!=(n=null==t?void 0:t.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise((n,o)=>r._validate(e,t,(e,t)=>{C.isError(e)&&(e.value=t),o(e)},(e,t)=>{e.length?o(new C(e,t,void 0,void 0,i)):n(t)}))}validateSync(e,t){var n;let r,i=this.resolve(Object.assign({},t,{value:e})),o=null!=(n=null==t?void 0:t.disableStackTrace)?n:i.spec.disableStackTrace;return i._validate(e,Object.assign({},t,{sync:!0}),(e,t)=>{throw C.isError(e)&&(e.value=t),e},(t,n)=>{if(t.length)throw new C(t,e,void 0,void 0,o);r=n}),r}isValid(e,t){return this.validate(e,t).then(()=>!0,e=>{if(C.isError(e))return!1;throw e})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(e){if(C.isError(e))return!1;throw e}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"==typeof t?t.call(this,e):j(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=x({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=x({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(e=E.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=E.notNull){return this.nullability(!1,e)}required(e=E.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=E.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=x(t),i=t.exclusive||t.name&&!0===n.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter(e=>{if(e.OPTIONS.name===t.name){if(i)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0}),n.tests.push(r),n}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let n=this.clone(),r=f(e).map(e=>new L(e));return r.forEach(e=>{e.isSibling&&n.deps.push(e.key)}),n.conditions.push("function"==typeof t?new I(r,t):I.fromOptions(r,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=x({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=E.oneOf){let n=this.clone();return e.forEach(e=>{n._whitelist.add(e),n._blacklist.delete(e)}),n.internalTests.whiteList=x({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}notOneOf(e,t=E.notOneOf){let n=this.clone();return e.forEach(e=>{n._blacklist.add(e),n._whitelist.delete(e)}),n.internalTests.blacklist=x({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:r,optional:i,nullable:o}=t.spec;return{meta:r,label:n,optional:i,nullable:o,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(e=>({name:e.OPTIONS.name,params:e.OPTIONS.params})).filter((e,t,n)=>n.findIndex(t=>t.name===e.name)===t)}}}B.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])B.prototype[`${e}At`]=function(t,n,r={}){const{parent:i,parentPath:o,schema:a}=N(this,t,n,r.context);return a[e](i&&i[o],Object.assign({},r,{parent:i,path:t}))};for(const e of["equals","is"])B.prototype[e]=B.prototype.oneOf;for(const e of["not","nope"])B.prototype[e]=B.prototype.notOneOf;const U=()=>!0;class V extends B{constructor(e){super("function"==typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:U},e))}}function W(){return new G}V.prototype;class G extends B{constructor(){super({type:"boolean",check(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"==typeof e}}),this.withMutation(()=>{this.transform((e,t,n)=>{if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e})})}isTrue(e=D.isValue){return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test(e){return P(e)||!0===e}})}isFalse(e=D.isValue){return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test(e){return P(e)||!1===e}})}default(e){return super.default(e)}defined(e){return super.defined(e)}optional(){return super.optional()}required(e){return super.required(e)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(e){return super.nonNullable(e)}strip(e){return super.strip(e)}}W.prototype=G.prototype;const H=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function $(e){var t,n;const r=H.exec(e);return r?{year:z(r[1]),month:z(r[2],1)-1,day:z(r[3],1),hour:z(r[4]),minute:z(r[5]),second:z(r[6]),millisecond:r[7]?z(r[7].substring(0,3)):0,precision:null!=(t=null==(n=r[7])?void 0:n.length)?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:z(r[10]),minuteOffset:z(r[11])}:null}function z(e,t=0){return Number(e)||t}let Z=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,q=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,K=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Y=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"),J=e=>P(e)||e===e.trim(),Q={}.toString();function X(){return new ee}class ee extends B{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),"string"==typeof e}}),this.withMutation(()=>{this.transform((e,t,n)=>{if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===Q?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||E.required,name:"required",skipAbsent:!0,test:e=>!!e.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(e=>"required"!==e.OPTIONS.name),e))}length(e,t=b.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t=b.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t=b.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"==typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||b.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&i||-1!==t.search(e)})}email(e=b.email){return this.matches(Z,{name:"email",message:e,excludeEmptyString:!0})}url(e=b.url){return this.matches(q,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=b.uuid){return this.matches(K,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,n,r="";return e&&("object"==typeof e?({message:r="",allowOffset:t=!1,precision:n}=e):r=e),this.matches(Y,{name:"datetime",message:r||b.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||b.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const n=$(e);return!!n&&!!n.z}}).test({name:"datetime_precision",message:r||b.datetime_precision,params:{precision:n},skipAbsent:!0,test:e=>{if(!e||null==n)return!0;const t=$(e);return!!t&&t.precision===n}})}ensure(){return this.default("").transform(e=>null===e?"":e)}trim(e=b.trim){return this.transform(e=>null!=e?e.trim():e).test({message:e,name:"trim",test:J})}lowercase(e=b.lowercase){return this.transform(e=>P(e)?e:e.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>P(e)||e===e.toLowerCase()})}uppercase(e=b.uppercase){return this.transform(e=>P(e)?e:e.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>P(e)||e===e.toUpperCase()})}}X.prototype=ee.prototype;class te extends B{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&!(e=>e!=+e)(e)}}),this.withMutation(()=>{this.transform((e,t,n)=>{if(!n.spec.coerce)return e;let r=e;if("string"==typeof r){if(r=r.replace(/\s/g,""),""===r)return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)})})}min(e,t=S.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e,t=S.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e,t=S.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e,t=S.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(e=S.positive){return this.moreThan(0,e)}negative(e=S.negative){return this.lessThan(0,e)}integer(e=S.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(e=>P(e)?e:0|e)}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform(t=>P(t)?t:Math[e](t))}}te.prototype;let ne=new Date("");function re(){return new ie}class ie extends B{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation(()=>{this.transform((e,t,n)=>!n.spec.coerce||n.isType(e)||null===e?e:(e=function(e){const t=$(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(n=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}(e),isNaN(e)?ie.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let n;if(L.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(e,t=T.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(n)}})}max(e,t=T.max){let n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(n)}})}}function oe(e,t){let n=1/0;return e.some((e,r)=>{var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0}),n}function ae(e){return(t,n)=>oe(e,t)-oe(e,n)}ie.INVALID_DATE=ne,re.prototype=ie.prototype,re.INVALID_DATE=ne;const se=(e,t,n)=>{if("string"!=typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(e){}return n.isType(r)?r:e};function le(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=le(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=le(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(le)}):"optional"in e?e.optional():e}let ce=e=>"[object Object]"===Object.prototype.toString.call(e);function ue(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(e=>-1===n.indexOf(e))}const de=ae([]);function ge(e){return new pe(e)}class pe extends B{constructor(e){super({type:"object",check(e){return ce(e)||"function"==typeof e}}),this.fields=Object.create(null),this._sortErrors=de,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let i=this.fields,o=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(r).filter(e=>!this._nodes.includes(e))),s={},l=Object.assign({},t,{parent:s,__validating:t.__validating||!1}),c=!1;for(const e of a){let n=i[e],a=e in r;if(n){let i,o=r[e];l.path=(t.path?`${t.path}.`:"")+e,n=n.resolve({value:o,context:t.context,parent:s});let a=n instanceof B?n.spec:void 0,u=null==a?void 0:a.strict;if(null!=a&&a.strip){c=c||e in r;continue}i=t.__validating&&u?r[e]:n.cast(r[e],l),void 0!==i&&(s[e]=i)}else a&&!o&&(s[e]=r[e]);a===e in s&&s[e]===r[e]||(c=!0)}return c?s:r}_validate(e,t={},n,r){let{from:i=[],originalValue:o=e,recursive:a=this.spec.recursive}=t;t.from=[{schema:this,value:o},...i],t.__validating=!0,t.originalValue=o,super._validate(e,t,n,(e,i)=>{if(!a||!ce(i))return void r(e,i);o=o||i;let s=[];for(let e of this._nodes){let n=this.fields[e];n&&!L.isRef(n)&&s.push(n.asNestedTest({options:t,key:e,parent:i,parentPath:t.path,originalParent:o}))}this.runTests({tests:s,value:i,originalValue:o,options:t},n,t=>{r(t.sort(this._sortErrors).concat(e),i)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[e,t]of Object.entries(this.fields)){const r=n[e];n[e]=void 0===r?t:r}return t.withMutation(t=>t.setFields(n,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(n=>{var r;const i=this.fields[n];let o=e;null!=(r=o)&&r.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),t[n]=i&&"getDefault"in i?i.getDefault(o):void 0}),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=function(e,t=[]){let n=[],i=new Set,o=new Set(t.map(([e,t])=>`${e}-${t}`));function s(e,t){let a=(0,r.split)(e)[0];i.add(a),o.has(`${t}-${a}`)||n.push([t,a])}for(const t of Object.keys(e)){let n=e[t];i.add(t),L.isRef(n)&&n.isSibling?s(n.path,t):M(n)&&"deps"in n&&n.deps.forEach(e=>s(e,t))}return a().array(Array.from(i),n).reverse()}(e,t),n._sortErrors=ae(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e,t=[]){return this.clone().withMutation(n=>{let r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),r)})}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return le(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter(([t,n])=>e.includes(t)&&e.includes(n)))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let i=(0,r.getter)(e,!0);return this.transform(o=>{if(!o)return o;let a=o;return((e,t)=>{const n=[...(0,r.normalizePath)(t)];if(1===n.length)return n[0]in e;let i=n.pop(),o=(0,r.getter)((0,r.join)(n),!0)(e);return!(!o||!(i in o))})(o,e)&&(a=Object.assign({},o),n||delete a[e],a[t]=i(o)),a})}json(){return this.transform(se)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||w.exact,test(e){if(null==e)return!0;const t=ue(this.schema,e);return 0===t.length||this.createError({params:{properties:t.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=w.noUnknown){"boolean"!=typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=ue(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=w.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const n={};for(const r of Object.keys(t))n[e(r)]=t[r];return n})}camelCase(){return this.transformKeys(i.camelCase)}snakeCase(){return this.transformKeys(i.snakeCase)}constantCase(){return this.transformKeys(e=>(0,i.snakeCase)(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[i,o]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[i]})),n.fields[i]=o.describe(t)}return n}}ge.prototype=pe.prototype;class fe extends B{constructor(e){super({type:"array",spec:{types:e},check(e){return Array.isArray(e)}}),this.innerType=void 0,this.innerType=e}_cast(e,t){const n=super._cast(e,t);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const i=n.map((e,n)=>{const i=this.innerType.cast(e,Object.assign({},t,{path:`${t.path||""}[${n}]`}));return i!==e&&(r=!0),i});return r?i:n}_validate(e,t={},n,r){var i;let o=this.innerType,a=null!=(i=t.recursive)?i:this.spec.recursive;null!=t.originalValue&&t.originalValue,super._validate(e,t,n,(i,s)=>{var l;if(!a||!o||!this._typeCheck(s))return void r(i,s);let c=new Array(s.length);for(let n=0;n<s.length;n++){var u;c[n]=o.asNestedTest({options:t,index:n,parent:s,parentPath:t.path,originalParent:null!=(u=t.originalValue)?u:e})}this.runTests({value:s,tests:c,originalValue:null!=(l=t.originalValue)?l:e,options:t},n,e=>r(e.concat(i),s))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(se)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!M(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+p(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e,t=O.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t){return t=t||O.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t){return t=t||O.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t))}compact(e){let t=e?(t,n,r)=>!e(t,n,r):e=>!!e;return this.transform(e=>null!=e?e.filter(t):e)}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);if(t.innerType){var r;let i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),n.innerType=t.innerType.describe(i)}return n}}fe.prototype;class he extends B{constructor(e){super({type:"tuple",spec:{types:e},check(e){const t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),this.withMutation(()=>{this.typeError(A.notType)})}_cast(e,t){const{types:n}=this.spec,r=super._cast(e,t);if(!this._typeCheck(r))return r;let i=!1;const o=n.map((e,n)=>{const o=e.cast(r[n],Object.assign({},t,{path:`${t.path||""}[${n}]`}));return o!==r[n]&&(i=!0),o});return i?o:r}_validate(e,t={},n,r){let i=this.spec.types;super._validate(e,t,n,(o,a)=>{var s;if(!this._typeCheck(a))return void r(o,a);let l=[];for(let[n,r]of i.entries()){var c;l[n]=r.asNestedTest({options:t,index:n,parent:a,parentPath:t.path,originalParent:null!=(c=t.originalValue)?c:e})}this.runTests({value:a,tests:l,originalValue:null!=(s=t.originalValue)?s:e,options:t},n,e=>r(e.concat(o),a))})}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);return n.innerType=t.spec.types.map((t,n)=>{var r;let i=e;return null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),t.describe(i)}),n}}he.prototype;function me(e,t,n){if(!e||!M(e.prototype))throw new TypeError("You must provide a yup schema constructor function");if("string"!=typeof t)throw new TypeError("A Method name must be provided");if("function"!=typeof n)throw new TypeError("Method function must be provided");e.prototype[t]=n}var _e=n(51e3),ve=n(97778),ye=n(99915),Ce=n(47367);me(X,"email",function(e="Invalid email"){return this.test("test-email",e,function(t){const{path:n,createError:r}=this;if(t){const i=t.trim();return Boolean(i.match(/^([a-zA-Z\d-_]+([+.][a-zA-Z\d-_]+)*)@(([a-zA-Z\d][a-zA-Z\d-_.]*[a-zA-Z\d])|([a-zA-Z\d]))\.([a-zA-Z\d]{2,})$/i))||r({path:n,message:e})}return!0})}),me(X,"name",function(e="Invalid name"){return this.test("test-name",e,function(t){const{path:n,createError:r}=this;if(t){const i=t.trim();return i.length>0&&i.length<=100||r({path:n,message:e})}return!0})}),me(X,"phone",function(e="Invalid phone number"){return this.test("test-phone",e,function(t){const{path:n,createError:r}=this;if(t){const i=t.trim();if(this.parent.country){const t=this.parent.country,{cleanValue:o,formattedValue:a}=(0,_e.Dg)(i,t);return(0,_e.KS)(o,a,t)&&!((e,t)=>{const n=e.substring(t.length);return/^(\d)\1*$/.test(n)})(o,t.phone_code)||r({path:n,message:e})}return i.length>=6&&i.length<=20&&Boolean(i.match(/^\+?[0-9() -]+$/i))||r({path:n,message:e})}return!0})}),me(X,"numberAttribute",function(e="Invalid number attribute"){return this.test("test-number-attribute",e,function(t){const{path:n,createError:r}=this;if(t){const i=t.trim();return/^\d+$/g.test(i)||r({path:n,message:e})}return!0})}),me(X,"listAttribute",function(e="Invalid list attribute"){return this.test("test-list-attribute",e,function(t){var n;const{path:r,createError:i}=this,o=(0,ye.R)().find(e=>e.name===this.path);return!(o&&o.required&&(null===(n=o.settings)||void 0===n?void 0:n.options)&&t)||(o.settings.options.includes(t)||i({path:r,message:e}))})}),me(X,"dateAttribute",function(e="Invalid date attribute"){return this.test("test-date-attribute",e,function(t){const{path:n,createError:r}=this;return!t||((e=>{const t=(0,Ce.Al)(e);if(10!==t.length)return!1;const[n,r,i]=t.split("-").map(Number),o=(new Date).getFullYear(),a=29===new Date(n,1,29).getDate();return n>=o-200&&n<=o+100&&r>=1&&r<=12&&(a&&2===r?i>=1&&i<=29:2===r?i>=1&&i<=28:i>=1&&i<=31)})(t)||r({path:n,message:e}))})});const Ee={name:X().name(),email:X().email(),phone:X().phone(),description:X().trim().min(1),departmentId:X().required(),message:X().trim().min(1).required(),textarea:X().trim(),eula:W().isTrue(),mailing:W(),string:X().trim().strict(!0).max(ve.MAX_ATTRIBUTE_STRING_LENGTH),number:X().numberAttribute().max(ve.MAX_ATTRIBUTE_NUMBER_LENGTH),period:X(),list:X().listAttribute(),checkbox:W(),date:X().dateAttribute()},be=e=>"boolean"===e.type?e.oneOf([!0],"Required"):e.required(),Se=e=>ge(e)},58345:function(e,t,n){"use strict";n.r(t),n.d(t,{chunkArray:function(){return i},difference:function(){return a},unique:function(){return o}});var r=n(57919);const i=(e,t)=>{const n=[];let r=0;for(;r<e.length;)n.push(e.slice(r,r+t)),r+=t;return n},o=e=>Array.from(new Set(e)),a=(e,t)=>{if((0,r.o)(t))return e;const n=new Set(t);return e.filter(e=>!n.has(e))}},47361:function(e,t,n){"use strict";n.r(t),n.d(t,{debounce:function(){return l}});var r=n(28071);const i=null!==n.g&&"object"==typeof n.g&&n.g.Object===Object&&n.g,o=null!==globalThis&&"object"==typeof globalThis&&globalThis.Object===Object&&globalThis,a="object"==typeof self&&null!==self&&self.Object===Object&&self,s=o||i||a||Function("return this")();function l(e,t,n){let i,o,a,l,c,u,d=0,g=!1,p=!1,f=!0;const h=!t&&0!==t&&"function"==typeof s.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){const n=i,r=o;return i=o=void 0,d=t,l=e.apply(r,n),l}function _(e,t){return h?(s.cancelAnimationFrame(c),s.requestAnimationFrame(e)):setTimeout(e,t)}function v(e){const n=e-u;return void 0===u||n>=t||n<0||p&&e-d>=a}function y(){const e=Date.now();if(v(e))return C(e);c=_(y,function(e){const n=e-d,r=t-(e-u);return p?Math.min(r,a-n):r}(e))}function C(e){return c=void 0,f&&i?m(e):(i=o=void 0,l)}function E(...e){const n=Date.now(),r=v(n);if(i=e,o=this,u=n,r){if(void 0===c)return function(e){return d=e,c=_(y,t),g?m(e):l}(u);if(p)return c=_(y,t),m(u)}return void 0===c&&(c=_(y,t)),l}return t=+t||0,(0,r.K)(n)&&(g=!!n.leading,p="maxWait"in n,a=p?Math.max(+n.maxWait||0,t):a,f="trailing"in n?!!n.trailing:f),E.cancel=function(){var e;void 0!==c&&(e=c,h?s.cancelAnimationFrame(e):clearTimeout(e)),d=0,i=u=o=c=void 0},E.flush=function(){return void 0===c?l:C(Date.now())},E.pending=function(){return void 0!==c},E}},32183:function(e,t,n){"use strict";n.r(t),n.d(t,{addClass:function(){return D},addNewLine:function(){return A},blurActiveElement:function(){return k},getComputedStyleAll:function(){return C},getDomMessageByPrivateId:function(){return x},getElementPosition:function(){return O},getInnerHeight:function(){return E},getInnerWidth:function(){return b},getNextSiblingNodeFocus:function(){return S},getScrollBarWidth:function(){return y},hasClass:function(){return T},isInput:function(){return M},isInputFocused:function(){return L},isParentA:function(){return R},isParentHasElement:function(){return P},isTextArea:function(){return I},isVisible:function(){return v},pageVisible:function(){return _},removeClass:function(){return w}});var r=n(58345),i=n(76784),o=n(60277),a=n(45926),s=n(3491),l=n(80352),c=n(75686),u=n(70859);let d;const g="classList"in document.documentElement,p=e=>e.offsetHeight,f=e=>(0,s.k)(e)?e:e.replace(/^\s+|\s+$/g,"").split(/\s+/),h=e=>f(e.className),m=(e,t)=>{const n=t.join(" ");e.className!==n&&(e.className=n,p(e))},_=()=>"visibilityState"in document?"visible"===document.visibilityState:"webkitVisibilityState"in document&&"visible"===document.webkitVisibilityState,v=e=>Boolean(e&&e.offsetWidth>0&&e.offsetHeight>0),y=()=>{var e;if(l.platform.isMobileOrTablet)return 0;if(void 0!==d)return d;const t=document.createElement("div");if(t.style.visibility="hidden",t.style.width="100px",!document||!document.body)return d;document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const i=r.offsetWidth;return null===(e=t.parentNode)||void 0===e||e.removeChild(t),d=n-i,d},C=(e,t,n)=>"getComputedStyle"in window?window.getComputedStyle(e,n)[t]:e.style[t],E=e=>{const t=C(e,"paddingTop"),n=C(e,"paddingBottom");return e.clientHeight-parseFloat(t)-parseFloat(n)},b=e=>{const t=C(e,"paddingLeft"),n=C(e,"paddingRight");return e.clientWidth-parseFloat(t)-parseFloat(n)},S=e=>{var t;if(13===(null==e?void 0:e.keyCode)||"Enter"===e.key){const n=(null===(t=e.currentTarget)||void 0===t?void 0:t.parentNode).nextElementSibling;let r=n.querySelector("input");if(r||(r=n.querySelector("jdiv")||n.querySelector("textarea")),!r)return;if(M(r.tagName)&&r.focus)r.focus();else{const e=l.platform.isTablet?"touchstart":"click",t=document.createEvent("MouseEvents");t.initEvent(e,!0,!0),r.dispatchEvent(t)}}},T=(e,t)=>g?e.classList.contains(t):""!==e.className&&h(e).includes(t),D=(e,t)=>{if(g)f(t).forEach(t=>{e&&e.classList.add(t)},f(t)),e&&p(e);else{const n=h(e),r=(0,i.G)(n,f(t));m(e,r)}},w=(e,t)=>{if(g)f(t).forEach(t=>{null==e||e.classList.remove(t)},f(t)),e&&p(e);else{const n=h(e),i=(0,r.difference)(n,f(t));m(e,i)}},O=e=>{let t={width:0,height:0,top:0,left:0,windowWidth:0,windowHeight:0,minLeft:0};if(!e)return t;if(e.getBoundingClientRect){const n=e.getBoundingClientRect();t=n.toJSON?(0,o.extend)(t,n.toJSON()):t=n}t.width=e.offsetWidth,t.height=e.offsetHeight;const n=e.ownerDocument.defaultView;return t.windowWidth=(null==n?void 0:n.innerWidth)||0,t.windowHeight=(null==n?void 0:n.innerHeight)||0,t},A=(e,t)=>{if(!e)return!1;const n=e.selectionStart,r=t.substring(0,n||void 0),i=t.substring(n,t.length);return n!==e.value.length?(e.value=`${r}\r\n${i}`,e.setSelectionRange(n,n)):(e.value+="\r\n",e.scrollTop=e.scrollHeight),e.value},M=e=>!!e&&["input","textarea"].includes(e.toLowerCase()),I=e=>!!e&&"textarea"===e.toLowerCase(),R=e=>e&&"A"===e.tagName,k=()=>{const e=(0,a.getPageWindow)().document.activeElement;(null==e?void 0:e.blur)&&e.blur()},L=()=>{const e=(0,a.getPageWindow)().document.activeElement;return Boolean(e&&M(null==e?void 0:e.tagName))},P=(e,t)=>Boolean(t.contains(e)),x=e=>{var t;return null===(t=c.default.get(u.Component.MESSAGES_CONTAINER))||void 0===t?void 0:t.querySelector(`jdiv[jv-private-id="${e}"`)}},52161:function(e,t,n){"use strict";n.r(t),n.d(t,{escape:function(){return a}});const r=/[&<>"']/g,i=RegExp(r.source),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=e=>i.test(e)?e.replace(r,e=>o[e]):e},90970:function(e,t,n){"use strict";n.r(t),n.d(t,{isArrayEqual:function(){return i}});var r=n(45007);const i=(e,t)=>e.length===t.length&&e.length===e.filter((e,n)=>(0,r.wU)(e,t[n])).length},43417:function(e,t,n){"use strict";n.r(t),n.d(t,{onClickHandler:function(){return o}});var r=n(80352);const i=r.platform.isMobileOrTablet&&r.platform.supports.touch?"onTouchEnd":"onClick",o=(e,t=!0,n=!1,r=!1)=>({[i]:i=>{n&&i.preventDefault(),t&&(i.stopPropagation(),i.stopImmediatePropagation()),r||null==e||e(i)}})},30633:function(e,t,n){"use strict";n.r(t),n.d(t,{EMOJI_REGEX:function(){return r}});const r=/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g},938:function(e,t,n){"use strict";n.r(t),n.d(t,{sortBy:function(){return r}});const r=(e,t)=>{if(!(null==e?void 0:e.length)||!t)return[];const n=e=>"function"==typeof t?t(e):e[t];return e.slice().sort((e,t)=>{const r=n(e),i=n(t);return r>i?1:r<i?-1:0})}},73262:function(e,t,n){"use strict";function r(e,t,n){let r,i,o,a,s=0;n||(n={});const l=function(){s=!1===(null==n?void 0:n.leading)?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){const c=Date.now();s||!1!==(null==n?void 0:n.leading)||(s=c);const u=t-(c-s);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(i,o),r||(i=o=null)):r||!1===(null==n?void 0:n.trailing)||(r=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c}n.r(t),n.d(t,{throttle:function(){return r}})},25467:function(e,t,n){"use strict";n.r(t),n.d(t,{getDiffTimestampToEnd:function(){return i},getDiffTimestampToTomorrow:function(){return r},getSecondsDiff:function(){return o}});const r=()=>Math.floor((new Date).setHours(24,0,0,0)/1e3-Date.now()/1e3),i=e=>e?Math.floor(e-Date.now()/1e3):2592e3,o=e=>{const t=Date.now()-e;return Math.floor((t<0?-1*t:t)/1e3)}},2491:function(e,t,n){"use strict";n.r(t),n.d(t,{getURL:function(){return r},isValidHttpURL:function(){return i}});const r=e=>{try{return new URL(e)}catch(e){return}},i=(e,t)=>{const n=r(e);return!!n&&(t?t(n):/^https?:$/.test(n.protocol))}},99915:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(10018);const i=()=>{const{contacts_settings:e}=r.default;return Object.keys(r.default.contacts_settings).map(t=>Object.assign({name:t},e[t]))},o=()=>{var e;return r.default.enable_client_attributes&&null!==(e=r.default.contacts_settings_new)&&void 0!==e?e:i()}},36148:function(e,t,n){"use strict";n.r(t),n.d(t,{MessageStatus:function(){return r}});const r={SENT:"sent",SENDED:"sended",DELIVERED:"delivered",READ:"read",SEEN:"seen",NOT_DELIVERED:"notDelivered",FAILED:"failed",DELETED:"deleted",EMPTY:null}},4231:function(e,t,n){"use strict";n.r(t),n.d(t,{useClickOutside:function(){return o}});var r=n(98661),i=n(84565);const o=(e,t,n=window.parent.document)=>{(0,r.useEffect)(()=>{if((0,i.m)(t)){const r=n=>{e.current&&!e.current.contains(n.target)&&t(n)};return n.addEventListener("mousedown",r),n.addEventListener("touchstart",r),()=>{n.removeEventListener("mousedown",r),n.removeEventListener("touchstart",r)}}},[e,t,n])}},83549:function(e,t,n){"use strict";n.r(t),n.d(t,{useErrorCatcher:function(){return a}});var r=n(30396),i=n(54415),o=n(84565);function a(e,t){const[n,a]=(0,r.cO)((t,n)=>{let r=` (in ${e} component)`;r+=` ${n.componentStack}`,i.Monitoring.reportException(t,r)});if(n)return(0,o.m)(t)?null==t?void 0:t({error:n,resetError:a}):t}},95421:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(98661),i=n(45926),o=n(54442);const a=(0,i.getPageWindow)(),s=()=>{const[e,t]=(0,o.useToggle)(a.navigator.onLine);return(0,r.useEffect)(()=>{const e=()=>t();return a.addEventListener("online",e),a.addEventListener("offline",e),()=>{a.removeEventListener("online",e),a.removeEventListener("offline",e)}},[]),e}},39733:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var r=n(98661);function i(e,t){const n=function(){const e=(0,r.useRef)(!0);return e.current?(e.current=!1,!0):e.current}();(0,r.useEffect)(()=>{if(!n)return e()},t)}},53769:function(e,t,n){"use strict";n.r(t),n.d(t,{maskPattern:function(){return r.y}});var r=n(80369)},75998:function(e,t,n){"use strict";n.r(t),n.d(t,{campaignPopupDispatch:function(){return m},campaignWidgetDispatch:function(){return _},contactFormPreviewDispatch:function(){return y},extensionsDispatch:function(){return v},pageStoreDispatch:function(){return h},positionDispatch:function(){return p},systemSettingsDispatch:function(){return C},zoomDispatch:function(){return f}});var r=n(65849),i=n(62096),o=n(51344),a=n(16587),s=n(61547),l=n(84348),c=n(6727),u=n(35073),d=n(62241),g=n(12580);const p=(0,r.DE)(o.positionActions,i.reduxStore.dispatch),f=(0,r.DE)(a.zoomActions,i.reduxStore.dispatch),h=(0,r.DE)(g.pageStoreActions,i.reduxStore.dispatch),m=(0,r.DE)(s.campaignPopupActions,i.reduxStore.dispatch),_=(0,r.DE)(l.campaignWidgetActions,i.reduxStore.dispatch),v=(0,r.DE)(u.extensionsActions,i.reduxStore.dispatch),y=(0,r.DE)(c.contactFormPreviewActions,i.reduxStore.dispatch),C=(0,r.DE)(d.systemActions,i.reduxStore.dispatch)},24111:function(e,t,n){"use strict";n.r(t),n.d(t,{useAppDispatch:function(){return i},useAppSelector:function(){return o}});var r=n(45007);const i=()=>(0,r.I0)(),o=r.v9},65138:function(e,t,n){"use strict";n.r(t),n.d(t,{selectApp:function(){return r},selectChatStarted:function(){return s},selectHiddenByRules:function(){return c},selectIsFocused:function(){return a},selectIsInDrag:function(){return d},selectIsInputDisabled:function(){return l},selectIsOnline:function(){return o},selectMaintenance:function(){return u},selectRoute:function(){return i}});const r=e=>e.app,i=e=>r(e).route,o=e=>r(e).isOnline,a=e=>r(e).isFocused,s=e=>r(e).chatStarted,l=e=>r(e).isInputDisabled,c=e=>r(e).hiddenByRules,u=e=>r(e).maintenance,d=e=>r(e).isInDrag},88996:function(e,t,n){"use strict";n.d(t,{Fl:function(){return i},rN:function(){return o},xy:function(){return r}});const r=e=>e.callback,i=e=>r(e).available,o=e=>e.settings.user.callbackButtonColor},90189:function(e,t,n){"use strict";n.r(t),n.d(t,{selectAgentJoinedIds:function(){return h},selectAgents:function(){return u},selectAgentsByStatus:function(){return g},selectBotJoinedIds:function(){return f},selectBots:function(){return d},selectBotsByStatus:function(){return p},selectChats:function(){return s},selectChatsCount:function(){return c},selectCurrentChat:function(){return l}});var r=n(19119),i=n(66311),o=n(58345),a=n(21922);const s=e=>e.chats,l=e=>{const t=s(e);return t[t.length-1]},c=(0,r.P1)([i.selectMessages],e=>{const t=e.filter(({chat_id:e})=>(0,a.h)(e));return(0,o.unique)(t.map(e=>e.chat_id)).length}),u=e=>e.agents,d=e=>e.bots,g=e=>(0,r.P1)([u],t=>t.filter(({state:t})=>t===e)),p=e=>(0,r.P1)([d],t=>t.filter(({state:t})=>t===e)),f=(0,r.P1)([d],e=>e.filter(({state:e})=>"join"===e).map(({id:e})=>e)),h=(0,r.P1)([u],e=>e.filter(e=>"join"===e.state).map(e=>e.id))},97979:function(e,t,n){"use strict";n.r(t),n.d(t,{selectClient:function(){return r},selectClientEmail:function(){return i},selectClientEulaAccepted:function(){return o},selectClientMailing:function(){return a},selectClientPhone:function(){return s}});const r=e=>e.client,i=e=>r(e).email,o=e=>r(e).eulaAccepted,a=e=>r(e).mailing,s=e=>r(e).phone},79814:function(e,t,n){"use strict";n.r(t),n.d(t,{getMessagesByType:function(){return f},isAgentSystemMessage:function(){return g},selectAgentMessages:function(){return c},selectAgentMessagesByStatus:function(){return u},selectAgentMessagesCount:function(){return d},selectByMsgId:function(){return y},selectByPrivateId:function(){return v},selectClientMessages:function(){return l},selectCobrowseMessage:function(){return E},selectContactFormMessage:function(){return m},selectCurrentChatMessages:function(){return S},selectFormIntroduceText:function(){return h},selectLastBlockMessage:function(){return b},selectMessages:function(){return a},selectMessagesByPrivateIds:function(){return C},selectRateFormMessage:function(){return _},selectSendedMessages:function(){return s},selectUnreadMessages:function(){return p}});var r=n(19119),i=n(81152),o=n(90189);const a=e=>e.messages,s=(0,r.P1)([a],e=>e.filter(({status:e})=>e===i.MessageStatus.SENT)),l=(0,r.P1)([a],e=>e.filter(({from:e})=>e===i.MessageInitiator.CLIENT)),c=(0,r.P1)([a],e=>e.filter(({from:e})=>[i.MessageInitiator.AGENT,i.MessageInitiator.AGENT_BOT].includes(e))),u=e=>(0,r.P1)([c],t=>t.filter(({from:t,status:n})=>t===i.MessageInitiator.AGENT&&n===e)),d=e=>c(e).length,g=e=>[i.MessageType.FOR_TEST,i.MessageType.WEB_RTC_CALL,i.MessageType.LISTPICKER,i.MessageType.FORM,i.MessageType.PREFORM,i.MessageType.PRECHAT,i.MessageType.SYSTEM,i.MessageType.INVOICE].includes(e),p=(0,r.P1)([a],e=>e.filter(({from:e,status:t,type:n})=>[i.MessageInitiator.AGENT,i.MessageInitiator.AGENT_BOT].includes(e)&&![i.MessageStatus.SEEN,i.MessageStatus.READ,i.MessageStatus.NOT_DELIVERED,i.MessageStatus.DELETED].includes(t)&&!g(n))),f=(e,t)=>e.filter(e=>e.type===t),h=(0,r.P1)([a],e=>e.filter(e=>e.type===i.MessageType.PREFORM&&e.from===i.MessageInitiator.FORM)[0]),m=(0,r.P1)([a],e=>f(e,i.MessageType.FORM)[0]),_=(0,r.P1)([a],e=>f(e,i.MessageType.RATE_FORM)[0]),v=e=>(0,r.P1)([a],t=>t.find(t=>t.private_id===e)),y=e=>(0,r.P1)([a],t=>t.find(t=>t.msg_id===+e)),C=e=>(0,r.P1)([a],t=>t.filter(t=>e.includes(t.private_id))),E=e=>(0,r.P1)([a],t=>t.find(t=>t.type===i.MessageType.COBROWSE&&t.body&&t.body.type===i.MessageType.COBROWSE&&t.body.address===e)),b=(0,r.P1)([a],e=>{const t=e.length>0?e[e.length-1]:void 0;if(t)return t.type===i.MessageType.LISTPICKER&&t.body&&"force_reply"in t.body?t:void 0}),S=(0,r.P1)([a,o.selectCurrentChat],(e,t)=>t?e.filter(e=>e.chat_id===t.id):[])},97296:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});const r=e=>e.proactive},79105:function(e,t,n){"use strict";n.r(t),n.d(t,{selectAvatarUrl:function(){return S},selectBillRu:function(){return C},selectBubbleColor:function(){return I},selectCallHeaderText:function(){return y},selectCallbackSettings:function(){return f},selectCampaignPopupSettings:function(){return l},selectCampaignWidget:function(){return c},selectCampaignWidgetMessageFeed:function(){return P},selectCampaignWidgetMobileProactive:function(){return L},selectCampaignWidgetMobileView:function(){return R},selectCampaignWidgetPreview:function(){return k},selectCampaigns:function(){return w},selectContactFormPreviewSettings:function(){return F},selectContactFormPreviewTarget:function(){return N},selectContactsSettings:function(){return d},selectContactsSettingsNew:function(){return g},selectDepartments:function(){return u},selectDesignerMobileView:function(){return x},selectDesktopOffsetBottom:function(){return h},selectDisableFiletransfer:function(){return D},selectEula:function(){return T},selectFeaturesSettings:function(){return a},selectGeoIP:function(){return E},selectLocale:function(){return p},selectMailing:function(){return A},selectMobileProactive:function(){return M},selectPermissionSettings:function(){return s},selectRateSettings:function(){return m},selectSettings:function(){return r},selectSystemSettings:function(){return o},selectTypingInsight:function(){return O},selectUserSettings:function(){return i},selectWidgetId:function(){return b},selectWidgetMobileOrientation:function(){return v},selectWidgetOrientation:function(){return _}});const r=e=>e.settings,i=e=>r(e).user,o=e=>r(e).system,a=e=>r(e).features,s=e=>r(e).permissions,l=e=>r(e).campaignPopup,c=e=>r(e).campaignWidget,u=e=>i(e).departments,d=e=>i(e).contactsSettings,g=e=>i(e).contactsSettingsNew,p=e=>i(e).locale,f=e=>i(e).callback,h=e=>i(e).desktopOffsetBottom,m=e=>i(e).rateSettings,_=e=>i(e).widgetOrientation,v=e=>i(e).widgetMobileOrientation,y=e=>i(e).callHeaderText,C=e=>o(e).billRu,E=e=>o(e).geoIp,b=e=>o(e).widgetId,S=e=>o(e).avatarUrl,T=e=>a(e).eula,D=e=>a(e).disableFiletransfer,w=e=>a(e).campaigns,O=e=>a(e).typingInsight,A=e=>a(e).mailing,M=e=>a(e).mobileProactive,I=e=>i(e).bubbleColor,R=e=>e.settings.campaignWidget.isMobileView,k=e=>e.settings.campaignWidget.isPreview,L=e=>e.settings.campaignWidget.mobileProactive,P=e=>e.settings.campaignWidget.messageFeed,x=e=>e.settings.designer.isMobileView,N=e=>e.settings.contactFormPreview.target,F=e=>e.settings.contactFormPreview.settings},42601:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});const r=e=>e.zoom},35073:function(e,t,n){"use strict";n.r(t),n.d(t,{extensions:function(){return a},extensionsActions:function(){return s}});var r=n(8327);const i={target:""},o=(0,r.oM)({name:"extensions",initialState:i,reducers:{setTarget(e,t){e.target=t.payload},resetExtensions(){return i}}}),a=o.reducer,s=o.actions},12580:function(e,t,n){"use strict";n.r(t),n.d(t,{pageStore:function(){return i},pageStoreActions:function(){return o}});const r=(0,n(8327).oM)({name:"pageStore",initialState:{showMobileMenu:!1},reducers:{setShowMobileMenu(e,t){e.showMobileMenu=t.payload}}}),i=r.reducer,o=r.actions},51344:function(e,t,n){"use strict";n.r(t),n.d(t,{position:function(){return i},positionActions:function(){return o}});const r=(0,n(8327).oM)({name:"position",initialState:{height:null,left:null,right:null},reducers:{initPositionStore(e,t){return t.payload},setWidgetHeight(e,t){e.height=t.payload},setLeftOffset(e,t){e.left=t.payload},setRightOffset(e,t){e.right=t.payload}}}),i=r.reducer,o=r.actions},61547:function(e,t,n){"use strict";n.r(t),n.d(t,{campaignPopup:function(){return a},campaignPopupActions:function(){return s}});var r=n(8327);const i={target:"",previewTargetDesktop:"",previewTargetMobile:"",theme:{type:"white",color:"#FFFFFF"},screens:[],activeScreen:0,display:!1,isMobileView:!1,isGalleryView:!1,campaignId:null,clientAnswerId:null,enableNotifications:null,onSubmitActionCallback:null,answerData:null},o=(0,r.oM)({name:"campaignPopup",initialState:i,reducers:{updateCampaignPopup(e,t){return Object.assign(Object.assign({},e),t.payload)},setActiveScreen(e,t){e.activeScreen=t.payload},setDisplay(e,t){e.display=t.payload},setClientAnswerId(e,t){e.clientAnswerId=t.payload},reset(){return i}}}),a=o.reducer,s=o.actions},84348:function(e,t,n){"use strict";n.r(t),n.d(t,{campaignWidget:function(){return a},campaignWidgetActions:function(){return s}});var r=n(8327);const i={isMobileView:!1,isPreview:!1,mobileProactive:null,messageFeed:[]},o=(0,r.oM)({name:"campaignWidget",initialState:i,reducers:{setMobileView(e,t){e.isMobileView=t.payload},setPreview(e,t){e.isPreview=t.payload},setMobileProactive(e,t){e.mobileProactive=t.payload},setMessageFeed(e,t){e.messageFeed=t.payload},reset(){return i}}}),a=o.reducer,s=o.actions},6727:function(e,t,n){"use strict";n.r(t),n.d(t,{contactFormPreview:function(){return a},contactFormPreviewActions:function(){return s}});var r=n(8327);const i={target:"",settings:[]},o=(0,r.oM)({name:"contactFormPreview",initialState:i,reducers:{updateContactFormPreview(e,t){return Object.assign(Object.assign({},e),t.payload)},reset(){return i}}}),a=o.reducer,s=o.actions},62241:function(e,t,n){"use strict";n.r(t),n.d(t,{initialState:function(){return s},system:function(){return c},systemActions:function(){return u}});var r=n(8327),i=n(52628),o=n(10018);const a=e=>({abSegment:e.ab_segment,apiDomain:e.api_domain,apiHost:e.api_host,avatarUrl:e.avatar_url,baseUrl:e.base_url,botmode:!!e.botmode,buildNumber:e.build_number,chatHost:e.chat_host,configUpdatedTs:e.config_updated_ts,cookieDomain:e.cookie_domain,geoIp:e.geoip,hostBlacklist:e.host_blacklist,premium:e.options,siteId:e.site_id,unverified:e.unverified||0,viHost:e.vi_host,widgetId:e.widget_id,billRu:!!e.bill_ru,eula:e.eula||null}),s=a(o.default),l=(0,r.oM)({name:"system",initialState:s,reducers:{reset:()=>s,refresh:()=>a((0,o.getConfig)()),update:(e,t)=>Object.assign(Object.assign({},(0,i.Vk)(e)),t.payload)}}),c=l.reducer,u=l.actions},16587:function(e,t,n){"use strict";n.r(t),n.d(t,{zoom:function(){return i},zoomActions:function(){return o}});const r=(0,n(8327).oM)({name:"zoom",initialState:{user:null,page:null,app:null},reducers:{setZoomSettings(e,t){Object.assign(e,t.payload)}}}),i=r.reducer,o=r.actions},40694:function(e,t,n){"use strict";n.r(t),n.d(t,{agentToReduxFormat:function(){return r}});const r=e=>({avatarUrl:e.avatar_url,id:e.agent_id||e.bot_id,name:e.display_name||null,title:e.title||null,isBot:!!e.bot_id,state:e.state||null,type:e.type||null,isUpdateFromBot:e.isUpdateFromBot||null})},38106:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(81152),i=n(44145);const o=()=>{const e=(0,i.getMessages)().filter(e=>{var t;return e.type===r.MessageType.MESSAGE&&(null===(t=e.body)||void 0===t?void 0:t.customerIO)});return e.length?e.slice(-1)[0]:null}},38669:function(e,t,n){"use strict";n.r(t),n.d(t,{Button:function(){return d},OmniMenu:function(){return b}});var r=n(16584),i=n(98661),o=n(94184),a=n.n(o),s=n(8145),l=n(53400),c={button:"button__shkJ8",link:"link__HnImy",__primary:"__primary__cDSPL",__disabled:"__disabled__rYDBp",__outline:"__outline__chB3C",__sm:"__sm__QmX9V",__md:"__md__HgvkF",__lg:"__lg__ZYQjK",__rounded:"__rounded__aP_Sk",__fullWidth:"__fullWidth__ZRgaz",__end:"__end__Z4Ez_",loadingIcon:"loadingIcon__tTdc3"},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const d=(0,i.forwardRef)((e,t)=>{var{children:n,className:i,variant:o="primary",type:d="button",size:g="sm",justify:p="start",fullWidth:f=!1,rounded:h=!1,loading:m=!1,disabled:_=!1,icon:v,qaId:y}=e,C=u(e,["children","className","variant","type","size","justify","fullWidth","rounded","loading","disabled","icon","qaId"]);const E="link"===d?"a":"jdiv";return(0,r.BX)(E,Object.assign({},C,{ref:t,className:a()(c.button,c[`__${o}`],c[`__${g}`],{[c.link]:"link"===d,[c.__rounded]:h,[c.__disabled]:m||_,[c.__fullWidth]:f,[c.__end]:"end"===p},i)},(0,l.locator)(y),{children:[m?(0,r.tZ)(s.Ho,{color:"#ffffff",className:c.loadingIcon}):v,n&&(0,r.tZ)("span",{children:n})]}))});d.displayName="Button";var g=n(74784),p=n(18276),f="item__MJzAI",h="icon__hRHPu",m="text__DGMeb",_="subtitle__m2ags";const v=({className:e,title:t,subtitle:n,link:i,icon:o,onClick:s,qaId:c})=>{const{l10n:u}=(0,p.useL10N)(),d=(0,r.BX)("jdiv",Object.assign({className:a()(f,e),onClick:s},(0,l.locator)(c),{children:[o&&(0,r.tZ)(g.SvgIcon,{icon:o,className:h}),(0,r.BX)("jdiv",{className:m,children:[u(t),n&&(0,r.tZ)("jdiv",{className:_,children:n})]})]}));return i?(0,r.tZ)("a",Object.assign({href:i,target:"_blank",rel:"nofollow noopener noreferrer"},(0,l.locator)(`${c}_LINK`),{children:d})):d};const y={tg:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 12C0 5.373 5.373 0 12 0s12 5.373 12 12-5.373 12-12 12S0 18.627 0 12Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12ZM12.43 8.859c-1.167.485-3.5 1.49-6.998 3.014-.568.226-.866.447-.893.663-.046.366.412.51 1.034.705.085.027.173.054.263.084.613.199 1.437.432 1.865.441.389.008.823-.152 1.302-.48 3.268-2.207 4.955-3.322 5.061-3.346.075-.017.179-.039.249.024.07.062.063.18.056.212-.046.193-1.84 1.862-2.77 2.726-.29.269-.495.46-.537.504-.094.097-.19.19-.282.279-.57.548-.996.96.024 1.632.49.323.882.59 1.273.856.427.291.853.581 1.405.943.14.092.274.187.405.28.497.355.944.673 1.496.623.32-.03.652-.331.82-1.23.397-2.126 1.179-6.73 1.36-8.628a2.112 2.112 0 0 0-.02-.472.506.506 0 0 0-.172-.325c-.143-.117-.365-.142-.465-.14-.451.008-1.143.249-4.476 1.635Z" fill="#54A6E4"/></svg>',wa:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M.564 11.896c-.001 2.023.528 3.998 1.533 5.74l-1.63 5.949 6.089-1.597a11.482 11.482 0 0 0 5.487 1.398h.006c6.329 0 11.481-5.15 11.484-11.481a11.408 11.408 0 0 0-3.361-8.122A11.412 11.412 0 0 0 12.048.416C5.718.416.566 5.566.564 11.896" fill="url(#a)"/><path d="M.153 11.892c0 2.096.547 4.142 1.588 5.946L.054 24l6.306-1.654a11.887 11.887 0 0 0 5.685 1.448h.005c6.556 0 11.894-5.336 11.896-11.892a11.82 11.82 0 0 0-3.48-8.414A11.823 11.823 0 0 0 12.05 0C5.493 0 .156 5.335.153 11.892Zm3.756 5.635-.235-.374a9.857 9.857 0 0 1-1.512-5.26c.002-5.45 4.438-9.884 9.892-9.884a9.824 9.824 0 0 1 6.99 2.899 9.824 9.824 0 0 1 2.894 6.993c-.002 5.45-4.438 9.885-9.888 9.885h-.004a9.875 9.875 0 0 1-5.032-1.379l-.362-.214-3.742.982 1-3.648Z" fill="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.077 6.92c-.223-.494-.457-.504-.67-.513-.173-.008-.37-.007-.569-.007-.198 0-.52.074-.793.372-.272.297-1.04 1.016-1.04 2.479s1.065 2.876 1.214 3.074c.148.198 2.056 3.295 5.077 4.487 2.511.99 3.022.793 3.567.743.545-.05 1.76-.718 2.007-1.413.247-.694.247-1.288.173-1.413-.074-.124-.272-.198-.57-.347-.297-.148-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.198.297-.767.966-.94 1.164-.174.199-.347.224-.645.075-.297-.15-1.254-.463-2.39-1.475-.884-.788-1.48-1.761-1.654-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.447-.52.148-.174.198-.298.297-.496.099-.199.05-.372-.025-.521-.074-.149-.652-1.619-.916-2.206Z" fill="#fff"/><defs><linearGradient id="a" x1="12" y1="23.585" x2="12" y2=".416" gradientUnits="userSpaceOnUse"><stop stop-color="#20B038"/><stop offset="1" stop-color="#60D66A"/></linearGradient><linearGradient id="b" x1="12" y1="24" x2="12" y2="0" gradientUnits="userSpaceOnUse"><stop stop-color="#F9F9F9"/><stop offset="1" stop-color="#fff"/></linearGradient></defs></svg>',vb:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.811 2.34c-.596-.55-3.006-2.299-8.375-2.323 0 0-6.33-.382-9.417 2.45C1.302 4.184.697 6.698.633 9.815.57 12.933.487 18.775 6.118 20.358h.006l-.004 2.418s-.036.978.608 1.178c.78.242 1.237-.502 1.981-1.304.409-.44.973-1.086 1.398-1.58 3.85.324 6.813-.417 7.149-.527.777-.252 5.177-.816 5.893-6.657.739-6.02-.357-9.829-2.338-11.545Z" fill="#fff"/><path d="M19.559 3.557c-.504-.458-2.68-1.825-7.222-1.845 0 0-5.377-.354-7.987 2.01C2.897 5.158 2.407 7.29 2.354 9.895c-.054 2.603-.332 7.576 4.43 8.899l-.021 4.016c0 .227.036.382.165.414.093.023.233-.025.352-.144.761-.765 3.199-3.705 3.199-3.705 3.27.213 5.873-.432 6.152-.524.66-.212 4.229-.518 4.833-5.397.624-5.029-.23-8.461-1.905-9.896Z" fill="#7360F2"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.529 7.788a.304.304 0 0 1 .319-.288c.626.033 1.147.223 1.519.607.37.382.55.916.582 1.558a.304.304 0 1 1-.606.03c-.027-.55-.178-.923-.413-1.166-.233-.242-.59-.395-1.114-.422a.304.304 0 0 1-.287-.32Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.068 6.152a.304.304 0 0 1 .325-.28c1.275.093 2.301.529 3.049 1.344.74.809 1.09 1.814 1.065 2.993a.304.304 0 0 1-.607-.014c.023-1.04-.283-1.888-.906-2.568-.62-.678-1.49-1.065-2.645-1.15a.304.304 0 0 1-.28-.325Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.532 4.597a.304.304 0 0 1 .306-.301c1.762.012 3.251.599 4.447 1.764 1.206 1.176 1.802 2.776 1.817 4.763a.304.304 0 1 1-.607.005c-.014-1.862-.568-3.294-1.634-4.333-1.075-1.048-2.41-1.58-4.027-1.592a.304.304 0 0 1-.302-.306Z" fill="#fff"/><path d="M12.892 13.746s.427.036.657-.247l.447-.564c.217-.279.738-.457 1.249-.173.383.218.754.456 1.113.711.339.25 1.033.829 1.035.829.33.279.407.689.182 1.12l-.002.01c-.248.43-.563.817-.932 1.148-.005.002-.005.004-.009.006-.32.269-.636.421-.946.458a1.263 1.263 0 0 1-.541-.053l-.01-.015c-.478-.135-1.275-.472-2.603-1.204-.769-.42-1.5-.902-2.187-1.445a11.464 11.464 0 0 1-.984-.872l-.033-.033-.033-.034-.033-.033-.033-.033c-.31-.31-.6-.639-.872-.983a15.514 15.514 0 0 1-1.445-2.187c-.733-1.328-1.07-2.125-1.204-2.603l-.015-.01a1.26 1.26 0 0 1-.053-.541c.038-.31.191-.625.458-.948.002-.003.004-.003.007-.008.33-.37.718-.684 1.148-.932l.009-.002c.432-.225.842-.149 1.12.18.003.002.58.696.829 1.035.255.36.493.731.71 1.114.285.51.107 1.033-.172 1.249l-.564.448c-.285.23-.247.656-.247.656s.835 3.16 3.954 3.956Z" fill="#fff"/></svg>',vk:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><mask id="a" width="14" height="14" x="1" y="1" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="#fff" d="M14.9307 1H1.06934v14H14.9307V1Z"/></mask><g mask="url(#a)"><path fill="#07F" d="M1.06934 7.72c0-3.16784 0-4.75175.97437-5.73588C3.01809 1 4.58633 1 7.7228 1h.55446c3.13644 0 4.70474 0 5.67904.98412.9744.98413.9744 2.56804.9744 5.73588v.56c0 3.1678 0 4.7518-.9744 5.7359C12.982 15 11.4137 15 8.27726 15H7.7228c-3.13647 0-4.70471 0-5.67909-.9841-.97437-.9841-.97437-2.5681-.97437-5.7359v-.56Z"/><path fill="#fff" d="M8.44475 11.0859c-3.15925 0-4.96122-2.18754-5.0363-5.82754h1.58251c.05198 2.67166 1.21862 3.80333 2.14271 4.03666V5.25836h1.49015v2.30415c.91254-.09916 1.87118-1.14915 2.19458-2.30415h1.4902c-.2484 1.42334-1.288 2.47333-2.0273 2.90499.7393.35 1.9234 1.26584 2.3739 2.92255h-1.6404c-.3523-1.10838-1.23009-1.96588-2.39098-2.08255v2.08255h-.17907Z"/></g></svg>',ig:'<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.004.75c-4.698 0-6.072.005-6.34.027-.964.08-1.564.232-2.217.557-.504.25-.901.54-1.293.947C1.44 3.022 1.007 3.934.85 5.018c-.076.526-.098.633-.102 3.321-.002.896 0 2.075 0 3.657 0 4.694.005 6.066.027 6.333.078.938.225 1.528.537 2.174a4.74 4.74 0 0 0 3.072 2.51c.464.12.976.185 1.634.216.279.012 3.12.021 5.962.021 2.842 0 5.684-.003 5.956-.017.761-.036 1.203-.096 1.692-.222a4.711 4.711 0 0 0 3.073-2.515c.305-.63.46-1.243.53-2.132.016-.194.022-3.285.022-6.371 0-3.088-.007-6.173-.022-6.367-.071-.903-.226-1.51-.542-2.153a4.46 4.46 0 0 0-.963-1.32c-.744-.71-1.654-1.143-2.74-1.3-.525-.076-.63-.098-3.32-.103h-3.662Z" fill="url(#a)"/><path d="M12.004.75c-4.698 0-6.072.005-6.34.027-.964.08-1.564.232-2.217.557-.504.25-.901.54-1.293.947C1.44 3.022 1.007 3.934.85 5.018c-.076.526-.098.633-.102 3.321-.002.896 0 2.075 0 3.657 0 4.694.005 6.066.027 6.333.078.938.225 1.528.537 2.174a4.74 4.74 0 0 0 3.072 2.51c.464.12.976.185 1.634.216.279.012 3.12.021 5.962.021 2.842 0 5.684-.003 5.956-.017.761-.036 1.203-.096 1.692-.222a4.711 4.711 0 0 0 3.073-2.515c.305-.63.46-1.243.53-2.132.016-.194.022-3.285.022-6.371 0-3.088-.007-6.173-.022-6.367-.071-.903-.226-1.51-.542-2.153a4.46 4.46 0 0 0-.963-1.32c-.744-.71-1.654-1.143-2.74-1.3-.525-.076-.63-.098-3.32-.103h-3.662Z" fill="url(#b)"/><path d="M11.998 3.693c-2.256 0-2.54.01-3.425.05-.885.04-1.489.18-2.017.386a4.068 4.068 0 0 0-1.472.958 4.078 4.078 0 0 0-.959 1.471c-.206.529-.346 1.133-.386 2.017-.04.886-.05 1.17-.05 3.426 0 2.256.01 2.539.05 3.425.041.884.181 1.488.387 2.016a4.07 4.07 0 0 0 .958 1.472c.462.462.925.747 1.471.96.529.205 1.133.345 2.017.385.886.04 1.17.05 3.426.05 2.256 0 2.538-.01 3.425-.05.884-.04 1.489-.18 2.017-.386a4.066 4.066 0 0 0 1.471-.959c.462-.462.746-.925.959-1.471.204-.529.344-1.133.386-2.017.04-.886.05-1.169.05-3.425s-.01-2.54-.05-3.426c-.042-.884-.182-1.488-.386-2.016a4.078 4.078 0 0 0-.959-1.472 4.062 4.062 0 0 0-1.471-.958c-.53-.206-1.134-.346-2.019-.386-.886-.04-1.168-.05-3.425-.05h.002Zm-.745 1.497h.745c2.219 0 2.482.008 3.358.048.81.037 1.25.172 1.542.286.388.15.664.33.955.621.29.29.47.568.622.956.113.292.249.732.286 1.542.04.876.048 1.139.048 3.356 0 2.217-.008 2.48-.048 3.356-.037.81-.172 1.25-.286 1.543a2.57 2.57 0 0 1-.622.954c-.29.29-.567.47-.955.621-.292.115-.732.25-1.542.287-.876.04-1.14.048-3.358.048s-2.481-.009-3.357-.048c-.81-.038-1.25-.173-1.543-.287a2.573 2.573 0 0 1-.955-.621c-.29-.291-.471-.567-.622-.955-.114-.293-.25-.732-.286-1.542-.04-.876-.048-1.14-.048-3.358 0-2.219.008-2.48.048-3.356.037-.81.172-1.25.286-1.543.15-.388.331-.665.622-.955.29-.291.568-.471.955-.622.293-.114.733-.25 1.543-.287.767-.034 1.064-.045 2.612-.046v.002Zm5.18 1.38a.997.997 0 1 0 0 1.993.997.997 0 0 0 0-1.994Zm-4.435 1.164A4.267 4.267 0 1 0 12 16.268a4.267 4.267 0 0 0 0-8.534Zm0 1.497a2.77 2.77 0 1 1 0 5.54 2.77 2.77 0 0 1 0-5.54Z" fill="#fff"/><defs><radialGradient id="a" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0 -22.2992 20.7456 0 6.725 24.983)"><stop stop-color="#FD5"/><stop offset=".1" stop-color="#FD5"/><stop offset=".5" stop-color="#FF543E"/><stop offset="1" stop-color="#C837AB"/></radialGradient><radialGradient id="b" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(78.678 -2.958 -.659) scale(9.96792 41.0985)"><stop stop-color="#3771C8"/><stop offset=".128" stop-color="#3771C8"/><stop offset="1" stop-color="#60F" stop-opacity="0"/></radialGradient></defs></svg>',im:'<svg width="76.5" height="76.5" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg">\n  <path fill="#0076ff" d="M22.5 45C10.0736 45 0 34.9264 0 22.5S10.0736 0 22.5 0 45 10.0736 45 22.5 34.9264 45 22.5 45zm-.038-14.2213c6.3812 0 11.5542-4.177 11.5542-9.3295 0-5.1526-5.173-9.3295-11.5543-9.3295-6.3812 0-11.5542 4.177-11.5542 9.3295 0 3.1476 1.9304 5.931 4.8874 7.6207l.0752.0424a.1523.1523 0 0 1 .0745.1016c.2544 1.2152-1.4097 2.3051-2.5218 3.0324 3.6862.232 5.546-1.2438 6.0782-1.7276.9024.1827 1.9882.26 2.9607.26z"/>\n  <path fill="#ffffff" stroke="#ffffff" stroke-width="2" d="M22.462 30.7787c6.3812 0 11.5542-4.177 11.5542-9.3295 0-5.1526-5.173-9.3295-11.5543-9.3295-6.3812 0-11.5542 4.177-11.5542 9.3295 0 3.1476 1.9304 5.931 4.8874 7.6207l.0752.0424a.1524.1524 0 0 1 .0745.1016c.2544 1.2152-1.4097 2.3051-2.5218 3.0324 3.6862.232 5.546-1.2438 6.0782-1.7276.9024.1827 1.9882.26 2.9607.26z"/>\n</svg>',fb:'<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient x1="50%" y1="3.556%" x2="50%" y2="97.988%" id="a"><stop stop-color="#00C6FF" offset="0%"/><stop stop-color="#0371FF" offset="100%"/></linearGradient></defs><path d="M7.5 0C3.375 0 0 3.105 0 6.938c0 2.16 1.065 4.087 2.737 5.362l.046 2.7 2.587-1.41-.022-.008a8.106 8.106 0 0 0 2.152.293c4.125 0 7.5-3.105 7.5-6.938C15 3.106 11.625 0 7.5 0zm.773 9.307L6.405 7.335l-3.78 1.972L6.66 5.085l1.935 1.853 3.637-1.853-3.96 4.222z" transform="translate(1)" fill="url(#a)"/></svg>',max:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 49 49">\n  <rect width="48" height="48" x=".460938" y=".957031" fill="url(#a)" rx="24"/>\n  <path fill="#fff" fill-rule="evenodd" d="M24.7644 38.8497c-2.7543 0-4.0343-.4021-6.2593-2.0105-1.4073 1.8094-5.8639 3.2234-6.0582.8042 0-1.8162-.4021-3.3508-.8578-5.0262-.5429-2.0641-1.1594-4.3628-1.1594-7.6935 0-7.9548 6.5274-13.9393 14.261-13.9393 7.7404 0 13.8053 6.2794 13.8053 14.013.0125 3.6568-1.4264 7.1692-4.0008 9.7662-2.5744 2.597-6.074 4.0665-9.7308 4.0861Zm.1139-20.9895c-3.7663-.1943-6.7016 2.4126-7.3516 6.5006-.5361 3.3843.4155 7.5058 1.2264 7.7202.3887.0939 1.3671-.6969 1.977-1.3068 1.0084.6967 2.1827 1.115 3.4044 1.213 1.8759.0902 3.7124-.5591 5.1147-1.8085 1.4023-1.2494 2.2584-2.9991 2.3844-4.873.0733-1.8778-.5934-3.7093-1.8568-5.1005-1.2633-1.3912-3.0223-2.2308-4.8985-2.3383v-.0067Z" clip-rule="evenodd"/>\n  <defs>\n    <linearGradient id="a" x1="13.5284" x2="53.9962" y1="63.0252" y2="45.7695" gradientUnits="userSpaceOnUse">\n      <stop stop-color="#43D6FF"/>\n      <stop offset=".5" stop-color="#3838FF"/>\n      <stop offset=".98659" stop-color="#8F3FFF"/>\n    </linearGradient>\n  </defs>\n</svg>\n'};var C="container__yyNEO",E="item__YQ6TU";const b=({items:e,qaId:t})=>(0,r.tZ)("jdiv",Object.assign({className:C},(0,l.locator)(`${t}_CONTAINER`),{children:e.map(({title:e,subtitle:n,link:i,icon:o,onClick:a},s)=>(0,r.tZ)(v,{className:E,title:e,subtitle:n,link:i,icon:o?y[o]:void 0,onClick:a,qaId:`${t}_ITEM_${o?o.toUpperCase():s+1}`},e))}))},8145:function(e,t,n){"use strict";n.d(t,{B0:function(){return _},Tw:function(){return u},YA:function(){return p},Ho:function(){return l}});var r=n(16584),i=(n(98661),n(94184)),o=n.n(i),a=n(74784),s="icon__EccxI";const l=({className:e,color:t})=>(0,r.tZ)(a.SvgIcon,{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="_COLOR1_"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg>',color:t,className:o()(s,e)});var c="icon__SJ2uG";const u=({className:e,style:t})=>(0,r.tZ)("jdiv",{className:o()(c,e),style:t});var d=n(53400),g={dots:"dots__CR9aD",__pulse:"__pulse__SDCvK",dot:"dot__ohRUE",pulse:"pulse__RNXnW",__wave:"__wave__Ag6J3",wave:"wave__MAeS9",__pulseWave:"__pulseWave__uAAms"};const p=({className:e,animation:t,qaId:n})=>(0,r.BX)("jdiv",Object.assign({className:o()(g.dots,{[g[`__${t}`]]:Boolean(t)},e)},(0,d.locator)(n),{children:[(0,r.tZ)("jdiv",{className:g.dot}),(0,r.tZ)("jdiv",{className:g.dot}),(0,r.tZ)("jdiv",{className:g.dot})]}));var f="container__h38cE",h="icon__si7B4",m="dots___Jp_w";const _=({className:e,color:t="#18C139"})=>(0,r.BX)("jdiv",{className:o()(f,e),style:{"--jv-dots-icon-color":t},children:[(0,r.tZ)(a.SvgIcon,{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="89" height="72">\n  <g fill="_COLOR1_" fill-rule="evenodd">\n    <path fill-rule="nonzero" d="M73.237 53.784L60.17 46.72c-4.356-2.38-4.504-.818-9.081 4.09-1.108 1.19-3.175 4.313-5.611 3.718-5.095-1.264-14.618-8.774-17.72-12.195-1.476-1.636-7.825-9.443-7.899-11.972-.148-3.866 8.269-5.8 5.537-13.161L19.564 4.038C14.1-8.602-1.182 11.623.073 21.066c3.248 23.275 43.78 60.9 66.372 48.482 5.02-2.825 11.813-12.715 6.792-15.764z"/>\n  </g>\n</svg>',color:t,className:h}),(0,r.tZ)(p,{className:m,animation:"pulse"})]});n(18276)},35520:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var r=n(16584),i=n(98661),o=n(53400);const a=({icon:e,isHover:t,color:n,color2:r,hoverColor:i,style:o})=>{let a=encodeURIComponent(e);const s=new RegExp("_COLOR1_","ig"),l=new RegExp("_COLOR2_","ig"),c=t?i:n;return c&&(a=a.replace(s,c.replace("#","%23"))),r&&(a=a.replace(l,r.replace("#","%23"))),Object.assign({backgroundImage:`url("data:image/svg+xml,${a}")`},o)},s=({icon:e,title:t,className:n,color:s,color2:l,hoverColor:c,style:u,qaId:d})=>{const[g,p]=(0,i.useState)(!1),f=e=>c&&p(e);return(0,r.tZ)("jdiv",Object.assign({className:n,title:t,style:a({icon:e,color:s,color2:l,hoverColor:c,isHover:g,style:u})},(0,o.locator)(d),{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)}))}},74784:function(e,t,n){"use strict";n.r(t),n.d(t,{QRCode:function(){return g},SvgIcon:function(){return r.l},SvgMaskIcon:function(){return l}});var r=n(35520),i=n(16584),o=n(98661),a=n(53400);const s=e=>{const t=`url("data:image/svg+xml,${encodeURIComponent(e)}") no-repeat center center`;return{"-webkit-mask":t,mask:t}},l=({icon:e,className:t,qaId:n})=>(0,i.tZ)("jdiv",Object.assign({className:t,style:s(e)},(0,a.locator)(n)));var c=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const u=e=>{const t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return new Promise(e=>{const n=new FileReader;n.onload=t=>{var n;e(null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.result)},n.readAsDataURL(t)})};var d=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const g=({link:e,settings:t,image:r,qaId:s})=>{const l=(0,o.useRef)(null),g=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var n;l.current&&(n=l.current,c(void 0,[n,{link:e,settings:t,image:r}],void 0,function*(e,{image:t,link:n,settings:r}){if(t){const e=yield u(t);r.image=e}e.update(Object.assign({data:n},r))}))},[e,t,r]),(0,o.useEffect)(()=>{d(void 0,void 0,void 0,function*(){const i=(yield Promise.all([n.e(206).then(n.t.bind(n,91915,23))]))[0].default;if(r){const e=yield u(r);t.image=e}l.current=new i(Object.assign({data:e},t)),g.current&&l.current.append(g.current)})},[]),(0,i.tZ)("jdiv",Object.assign({ref:g},(0,a.locator)(s)))}},19221:function(e,t,n){"use strict";n.d(t,{Mw:function(){return r},v9:function(){return i},z$:function(){return o}});const r=!0,i=!1,o=Boolean(!1)},16393:function(e,t,n){"use strict";n.r(t),n.d(t,{round:function(){return r}});const r=(e,t=0)=>{const n=Math.pow(10,t);return Math.round(Number(e)*n)/n}},86107:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});const r=e=>{if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");const t={};for(const[n,r]of e)t[n]=r;return t}},78466:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(1667),i=n(57919),o=n(3491);const a=(e,t,n)=>{var a;return(0,r.k)(e)?n:((e,t,n)=>{if(0===t.length)return n;let o=e;for(let e=0;e<t.length;e++){if((0,r.k)(o))return n;o=o[t[e]]}return(0,i.o)(o)?n:o})(e,(0,o.k)(t)?t:null!==(a=t.match(/([^[.\]])+/g))&&void 0!==a?a:[],n)}},52429:function(e,t,n){"use strict";n.r(t),n.d(t,{fromEntries:function(){return r.s},get:function(){return i.U}});var r=n(86107),i=n(78466)},80352:function(e,t,n){"use strict";n.r(t),n.d(t,{platform:function(){return j}});var r=n(45926);const i=(0,r.getPageWindow)(),o=i.navigator.userAgent.toLowerCase(),a=/mobile/.test(o),s=/tablet/.test(o),l=/windows/.test(o),c=l&&/phone/.test(o),u=l&&/touch/.test(o)&&!c&&!/trident/.test(o),d=/android/.test(o),g=d&&a,p=d&&!a,f=/blackberry|bb10|rim/.test(o),h=f&&!s,m=f&&s,_=/mac/.test(o),v=/iphone/.test(o),y=/ipod/.test(o),C=/ipad/.test(o)||/macintosh/.test(o)&&"ontouchend"in i,E=v||y||C,b=_&&!E,S=/opera|opr|presto/.test(o),T=S&&/mini|opios/.test(o),D=/firefox/.test(o),w=/chrome/.test(o),O=/crios/.test(o),A=/safari/.test(o)&&!w&&!O,M=/edge/.test(o),I=g||v||y||c||h,R=C||p||m||u,k=I||R,L=!I&&!R,P=Boolean(i.jivo_chat_page),x=k||P,N=-1===o.search(/google/gi)&&-1===o.search(/\+http:\/\/yandex\.com\/bots/gi)&&-1===o.search(/\+http:\/\/www\.cloudflare\.com\/always-online/gi)&&-1===o.search(/linespider\//gi),F={version:(e=>{const t=e.match(/windows nt (\d+\.\d+)/),n=e.match(/mac os x (\d+[._]\d+[._]\d+)?/),r=e.match(/os (\d+[._]\d+[._]?\d*)/),i=e.match(/android (\d+(\.\d+)*)/);if(t){const e=t[1];return{"10.0":"10/11",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP"}[e]||e||"0"}return n?(n[1]||"").replace(/_/g,".")||"0":r?r[1].replace(/_/g,".")||"0":i&&i[1]||"0"})(o)};_&&A&&(F.safariVersion=(e=>{const t=e.match(new RegExp(/version\/(\d{0,2}.?){0,3} safari/));return t?t[0].replace(/version\//,"").replace(/ safari/,""):null})(o));const j={os:F,supports:{touch:"ontouchstart"in i,pointer:"PointerEvent"in i,passive:(()=>{const e=(0,r.getPageWindow)();let t=!1;const n={get passive(){t=!0}},i=()=>{};return e.addEventListener("test",i,n),e.removeEventListener("test",i,n),t})(),localStorage:(()=>{const e=(0,r.getPageWindow)();try{return e.localStorage.setItem("testLocalStorage","ok"),e.localStorage.removeItem("testLocalStorage"),!0}catch(e){return!1}})(),appleBusinessChat:b&&F.version>="10.15",iMessage:(E||C)&&F.version>="11.3",webAnimationsAPI:Boolean(i.KeyframeEffect),cssVariables:(()=>{var e,t,n,i;const o=(0,r.getPageWindow)();return o.CSS?null===(t=(e=o.CSS).supports)||void 0===t?void 0:t.call(e,"(--test: 0)"):window.CSS&&(null===(i=(n=window.CSS).supports)||void 0===i?void 0:i.call(n,"(--test: 0)"))})()},device:L?"desktop":R?"tablet":"mobile",isNotSearchSpider:N,isWindows:l,isMac:b,isIos:E,isAndroid:d,isMobile:I,isTablet:R,isOpera:S,isOperaMini:T,isFirefox:D,isChrome:w,isChromeIos:O,isSafari:A,isEdge:M,isMobileOrTablet:k,isMobileOrChatpage:x,isDesktop:L,isChatPage:P,isWindowsPhone:c}},17662:function(e,t,n){"use strict";n.r(t),n.d(t,{isArray:function(){return u.k},isDate:function(){return p},isEmpty:function(){return m.x},isFunction:function(){return r.m},isHTMLCollection:function(){return l.i},isNil:function(){return i.k},isNodeList:function(){return c.M},isNull:function(){return o},isNumber:function(){return s.h},isNumeric:function(){return h.k},isObject:function(){return d.K},isRegExp:function(){return f},isString:function(){return g},isUndefined:function(){return a.o}});var r=n(84565),i=n(1667);const o=e=>null===e;var a=n(57919),s=n(21922),l=n(5369),c=n(12598),u=n(3491),d=n(28071);const g=e=>"string"==typeof e||e instanceof String,p=e=>e instanceof Date,f=e=>e instanceof RegExp;var h=n(91457),m=n(10465)},3491:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=e=>Array.isArray(e)},10465:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var r=n(1667),i=n(28071),o=n(3491);const a=e=>""===e||(0,r.k)(e)||(0,i.K)(e)&&0===Object.keys(e).length||(0,o.k)(e)&&0===e.length},84565:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});const r=e=>"function"==typeof e},5369:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});const r=e=>e instanceof HTMLCollection},1667:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=e=>null==e},12598:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const r=e=>e instanceof NodeList},21922:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});const r=e=>"number"==typeof e||e instanceof Number},91457:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(21922);const i=e=>{let t=e;return(0,r.h)(t)||(t=Number(t)),!Number.isNaN(t)&&Number.isFinite(t)}},28071:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});const r=e=>null!==e&&("object"==typeof e||"function"==typeof e)&&!Array.isArray(e)},57919:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});const r=e=>void 0===e},73163:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=(e,t,n)=>e.split(t).join(n)},35333:function(e,t,n){"use strict";n.r(t),n.d(t,{each:function(){return a}});var r=n(28071),i=n(12598),o=n(5369);const a=(e,t,n)=>{const a=n?function(e,r,i){return t.call(n,e,r,i)}:t;return Array.isArray(e)&&e.forEach(a),(0,r.K)(e)&&Object.entries(e).forEach(([e,t],n,r)=>a(t,e,r)),((0,i.M)(e)||(0,o.i)(e))&&Array.from(e).forEach(a),e}},45926:function(e,t,n){"use strict";n.r(t),n.d(t,{getChatPageToken:function(){return u},getCobrowseHash:function(){return l},getDocumentTitle:function(){return o},getJivoConfig:function(){return c},getPageWindow:function(){return i},getProtocol:function(){return a},hasExternalEmojiProcessor:function(){return s}});var r=n(19221);const i=()=>window.parent||window,o=()=>{const{document:{title:e}}=i();return"string"==typeof e?e:""},a=()=>{let e=i().location.protocol;return r.z$&&"http:"===e||["http","https"].includes(e)||(e="https:"),e},s=()=>{const e=i();return Boolean(e._wpemojiSettings||e.twemoji)},l=()=>{var e,t;return null===(t=null===(e=i().location.hash)||void 0===e?void 0:e.split("jvhs_"))||void 0===t?void 0:t[1]},c=()=>i().jivo_config,u=()=>{try{const e=new URLSearchParams(i().location.search).get("token");if(e)return decodeURIComponent(e)}catch(e){console.error(e)}}},54442:function(e,t,n){"use strict";n.r(t),n.d(t,{useToggle:function(){return i}});var r=n(98661);const i=e=>{const[t,n]=(0,r.useState)(Boolean(e));return[t,e=>n(t=>null!=e?e:!t)]}},25943:function(e,t,n){"use strict";n.d(t,{D0:function(){return f},G3:function(){return m},be:function(){return p},oz:function(){return h}});var r=n(73163),i=n(40066);const o=["be","cs","da","de","el","en-US","es","fi","fr","id","it","ja","kk","nl","nl-NL","no","pl","pt","pt-BR","ro","ru-RU","sv","tr","uk","zh"];var a=n(45926),s=n(90061),l=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const c=(0,s.createLogger)("TOLGEE_RETRY_IMPORT"),u=(e,t,...r)=>l(void 0,[e,t,...r],void 0,function*(e,t,r=!1){try{return yield n(99082)(`./${e}.json`)}catch(n){c.error(n);const i=(0,a.getPageWindow)(),o=new CustomEvent("jvtolgeelocaleimporterror",{detail:{locale:e,retry:r}});return i.dispatchEvent(o),t>0?u(e,t-1,!0):{}}});let d=null,g="";const p=()=>{if(d)return d;const e=(0,i.xn)().use((0,i.lY)()).init({defaultLanguage:g||"en-US",staticData:o.reduce((e,t)=>(e[t]=()=>u(t,1),e),{})});return d=e,d},f=e=>{const t=p(),n=t.getLanguage(),i=(0,r.k)(e,"_","-");n!==i&&t.changeLanguage(i)},h=e=>{e&&(g=e,"nl_bg"===g&&(g="nl-NL"),g=(0,r.k)(g,"_","-"))},m=()=>p().getLanguage()},18276:function(e,t,n){"use strict";n.r(t),n.d(t,{changeLocale:function(){return l},getLocale:function(){return c},l10n:function(){return s},setDefaultLocale:function(){return o.oz},useL10N:function(){return u}});var r=n(45926),i=n(1451),o=n(25943);const a=(e,t)=>{const n=((e,t)=>{var n;const i=null===(n=(0,r.getPageWindow)().jivo_config)||void 0===n?void 0:n.custom_langpack;if(!i||!i[e])return e;let o=i[e].replace(/&quot;/g,'"').replace(/&#039;/g,"'");return t?(Object.keys(t).forEach(e=>{o=o.replace(`{${e}}`,String(t[e]))}),o):o})(e,t);return n===e?((e,t)=>{const n=(0,o.be)();return(t?n.t(e,t):n.t(e)).replace(/&nbsp;/g,"")})(e,t):n},s=(e,t)=>a(e,t),l=o.D0,c=o.G3,u=()=>{const{t:e,isLoading:t}=(0,i.qM)();return{l10n:(t,n)=>{const{custom_langpack:i}=(0,r.getJivoConfig)();if(i&&i[t]){let e=i[t].replace(/&quot;/g,'"').replace(/&#039;/g,"'");return n?(Object.keys(n).forEach(t=>{e=e.replace(`{${t}}`,String(n[t]))}),e):e}return n?e(t,n):e(t)},isLoading:t}}},8519:function(e,t,n){"use strict";n.d(t,{j9:function(){return s}});var r=n(19221);const i=(0,n(45926).getPageWindow)(),o=/^(app|app3|app3alpha|app3beta)\.(jivosite\.com|jivo\.ru)$/i.test(i.location.host),a=(/.*\/signup\.html/i.test(i.location.pathname),r.Mw&&o),s="_jivoOmniButtonConstructor"in i&&i._jivoOmniButtonConstructor&&(a||!r.Mw)},41189:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(80352),i=n(86107),o=n(45926);const a=(0,i.s)(new URLSearchParams((0,o.getPageWindow)().location.search)),s={chatPageYClients:r.platform.isChatPage&&"jivo_ys"in a}},90061:function(e,t,n){"use strict";n.r(t),n.d(t,{createLogger:function(){return s},lastLogs:function(){return o},setLogsEnabled:function(){return l}});var r=n(19221);let i=!1;const o=[],a=(e,t,n)=>{const{name:a,style:s="",parentContext:l=!1}=n;if(l)return void window.parent.console[e].apply(window.parent.console,t);if(!i)return;let c=`[${a}]:`;"error"===e&&(c=`${c} ERROR`),(e=>{10===o.length&&o.shift(),o.push(e.toString().substring(0,60))})(t);const u=[c,...t];s&&!r.Mw&&u.unshift("%c%s",s),console[e].apply(console,u)},s=(e,t)=>({log:(...n)=>a("log",n,Object.assign({name:e},t)),info:(...n)=>a("info",n,Object.assign({name:e},t)),warn:(...n)=>a("warn",n,Object.assign({name:e},t)),error:(...n)=>a("error",n,Object.assign({name:e},t))}),l=e=>{i=e}},26613:function(e,t,n){"use strict";n.r(t),n.d(t,{isCopyrightEnabled:function(){return i}});const r=(0,n(45926).getJivoConfig)(),i=()=>!(r.unverified||r.options&&r.hide_ad)},40300:function(e,t,n){"use strict";n.r(t),n.d(t,{defineTelemetry:function(){return f},getTelemetryState:function(){return p}});var r,i,o=n(45926),a=n(90061);const s={one:1,low:5,medium:10,high:15},l=(null===(r=(0,o.getJivoConfig)())||void 0===r?void 0:r.telemetry_host)||(null===(i=window.qs)||void 0===i?void 0:i.telemetryHost)||"telemetry.jivosite.com",c=`${(0,o.getProtocol)()}//${l}/w`,u=(0,a.createLogger)("TELEMETRY_DEFINE"),d={},g=[],p=()=>({reportedEvents:d,lastEvents:g}),f=(e=c)=>(u.warn(`Telemetry defined with URL: ${e}`),(t,n,r)=>{5===g.length&&g.shift(),g.push(t.substring(0,60));const i=(0,o.getPageWindow)();if("sendBeacon"in i.navigator){if((null==r?void 0:r.once)&&d[t])return;if(!(!(null==r?void 0:r.probability)||Math.random()<=.01*s[r.probability]))return;i.navigator.sendBeacon(e,JSON.stringify(n)),d[t]||(d[t]=!0)}else u.warn("sendBeacon is not supported")})},53400:function(e,t,n){"use strict";n.r(t),n.d(t,{locator:function(){return i}});var r=n(19221);const i=e=>r.Mw||!e?void 0:{"data-qa-id":e}},99413:function(e){e.exports=/[\0-\x1F\x7F-\x9F]/},73189:function(e){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},35045:function(e){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},29369:function(e){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},37666:function(e,t,n){"use strict";
/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(98661);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useSyncExternalStore,a=r.useRef,s=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=a(null);if(null===d.current){var g={hasValue:!1,value:null};d.current=g}else g=d.current;d=l(function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==u&&g.hasValue){var t=g.value;if(u(t,e))return a=t}return a=e}if(t=a,i(o,e))return t;var n=r(e);return void 0!==u&&u(t,n)?(o=e,t):(o=e,a=n)}var o,a,s=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,u]);var p=o(e,d[0],d[1]);return s(function(){g.hasValue=!0,g.value=p},[p]),c(p),p}},31103:function(e,t,n){"use strict";e.exports=n(37666)},63417:function(e,t){(function(){var n;n=(()=>{var e={6143:function(e,t){!function(e){"use strict";e.createStatelessFSM=(e,t,n,r)=>{const i={context:n,prevValue:null,get value(){return e.value},set value(t){e.value=t},states:t,transition(e){null==r||r.log("FSM: received event",e);const t=this.states[this.value][e];if(!t)return null==r||r.warn(`FSM: there is no state for transition on ${this.value} state`),!1;try{const e="unknown"===t?o(this.states.unknown,this.context):t;return e===this.value?(null==r||r.log("FSM: there are not state changes"),!1):(null==r||r.log(`FSM: transition from ${this.value} to ${e}`),this.prevValue=this.value,this.value=e,this.value)}catch(e){return null==r||r.error(`FSM: transition failed, rollback to ${this.value} state`),!1}}},o=(e,t)=>{if(null==r||r.log("FSM: handling unknown state"),!e)throw Error("Transitions from unknown state are not provided");let n=null;for(const i in e){const o=e[i];if(null==o?void 0:o(t)){null==r||r.log(`FSM: the state ${i} matches conditions`),n=i;break}}if(!n){const e="FSM: cannot make transition from unknown state";throw null==r||r.error(e),Error(e)}return n};return i},Object.defineProperty(e,"__esModule",{value:!0})}(t)},6185:function(e,t){!function(e){"use strict";class t{constructor(e){this.content=e,this.observers=new Set}notify(){for(const e of this.observers)e(this.content)}watch(e){this.observers.add(e)}unwatch(e){this.observers.delete(e)}clear(){this.observers.clear()}get value(){return this.content}set value(e){this.content=e,this.notify()}}e.obs=e=>new t(e),Object.defineProperty(e,"__esModule",{value:!0})}(t)},1206:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,l=e.map([t,n],function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===s)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach(function(t){r[t]=e[t]})};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(t.prototype,null),n&&a(t,n),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(92)),i=l(n(93)),o=l(n(94)),a=l(n(95)),s=l(n(17));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach(function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)}),r>0){var a=Object.keys(n),l=s.default.find(a,function(e){return t.isOS(e)});if(l){var c=this.satisfies(n[l]);if(void 0!==c)return c}var u=s.default.find(a,function(e){return t.isPlatform(e)});if(u){var d=this.satisfies(n[u]);if(void 0!==d)return d}}if(o>0){var g=Object.keys(i),p=s.default.find(g,function(e){return t.isBrowser(e,!0)});if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=c,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},9091:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(209),i=n(7998),o=n(1150),a=n(4106),s=n(2957),l=n(141),c=n(125),u=n(245),d="The agent status update failed by timeout.",g="You try to perform multiple ACD operations at the same time. This can lead to an unexpected behavior of the application.",p="You probably use the same credentials in the different browsers or multiple browsers windows. This error can also occur when you make a request, reload the page and receive response after the page reloads.",f="Wrong ACD status name {0}";class h{static get newUUID(){return(new r.default).toString()+"_"+h._connectionId}static setConnectionId(e){this._connectionId=e}static removeConnectionId(){this._connectionId=void 0}static setStatus(e){return new Promise((t,n)=>{h._checkBeforeRun(i.OperatorACDStatuses[e],n);const r=h.newUUID;u.default.callRemoteFunction(a.RemoteFunction.setOperatorACDStatus,e,r),this._acdRequests.push({resolve:t,reject:n,timer:window.setTimeout(()=>{h._acdRequests=h._acdRequests.filter(e=>e.uuid!==r),n(d)},58e3),uuid:r,status:e})})}static getStatus(){return new Promise((e,t)=>{h._checkBeforeRun(void 0,t);const n=h.newUUID;u.default.callRemoteFunction(a.RemoteFunction.getOperatorACDStatus,n),this._acdRequests.push({resolve:e,reject:t,timer:window.setTimeout(()=>{h._acdRequests=h._acdRequests.filter(e=>e.uuid!==n),t(d)},58e3),uuid:n})})}static onError(e,t,n){const{actor:r,actorIdx:i}=h._getActorByUUID(e);r&&(clearTimeout(r.timer),r.reject(new Error(s.Utils.strFormat(f,r.status||"get operation"))),h._acdRequests.splice(0,i+1))}static onStatusUpdated(e,t,n){h._checkConnectionId(t);const{actor:r,actorIdx:i}=h._getActorByUUID(t);if(r){if(clearTimeout(r.timer),0!==i)for(let t=0;t<i;t++)clearTimeout(h._acdRequests[t].timer),h._acdRequests[t].reject(new Error(s.Utils.strFormat("The {0} status is set in the code after {1}. The {0} status is ignored.",r.status||"get operation",e)));void 0===r.status||r.status===e?r.resolve(e):r.reject(new Error(s.Utils.strFormat("The {0} status is not acceptable for the current agent state. The agent is {1} now. Please, check the ACD module documentation for details.",r.status,e))),h._acdRequests.splice(0,i+1)}c.Client.getInstance().dispatchEvent({name:l.Events.ACDStatusUpdated,id:h._getConnectonIdFromUUID(t),status:e,description:n})}static _checkBeforeRun(e,t){h._connectionId||t(new Error("You cannot set an agent status before login.")),h._acdRequests.length>0&&(o.LogManager.get().writeMessage(o.LogCategory.CLIENT,"ACD",o.LogLevel.WARNING,g),c.Client.getInstance().dispatchEvent({name:l.Events.ACDError,code:5,message:g})),void 0===e||Object.values(i.OperatorACDStatuses).includes(e)||t(new Error(s.Utils.strFormat(f,e)))}static _getActorByUUID(e){let t=-1;return{actor:this._acdRequests.find((n,r)=>{if(n.uuid===e)return t=r,!0}),actorIdx:t}}static _getConnectonIdFromUUID(e){const t=e.split("_");return 1===t.length||"gw"===t[1]?h._connectionId:t[1]}static _checkConnectionId(e){var t;const n=e.split("_");1!==n.length&&n[1]===(null===(t=h._connectionId)||void 0===t?void 0:t.split("_")[0])||(c.Client.getInstance().dispatchEvent({name:l.Events.ACDError,code:6,message:p}),o.LogManager.get().writeMessage(o.LogCategory.CLIENT,"ACD",o.LogLevel.WARNING,p))}}t.default=h,h._acdRequests=[]},2089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(209),i=n(7998),o=n(1150),a=n(4106),s=n(2957),l=n(141),c=n(125),u=n(245),d="The agent status update failed by timeout.",g="You try to perform multiple ACD operations at the same time. This can lead to an unexpected behavior of the application.",p="You probably use the same credentials in the different browsers or multiple browsers windows. This error can also occur when you make a request, reload the page and receive response after the page reloads.",f="Wrong ACD status name {0}";class h{static get newUUID(){return(new r.default).toString()+"_"+h._connectionId}static setConnectionId(e){this._connectionId=e}static removeConnectionId(){this._connectionId=void 0}static setStatus(e){return new Promise((t,n)=>{h._checkBeforeRun(i.OperatorACDStatuses[e],n);const r=h.newUUID;u.default.callRemoteFunction(a.RemoteFunction.setOperatorMessagingStatus,e,r),this._acdRequests.push({resolve:t,reject:n,timer:window.setTimeout(()=>{h._acdRequests=h._acdRequests.filter(e=>e.uuid!==r),n(d)},58e3),uuid:r,status:e})})}static getStatus(){return new Promise((e,t)=>{h._checkBeforeRun(void 0,t);const n=h.newUUID;u.default.callRemoteFunction(a.RemoteFunction.getOperatorMessagingStatus,n),this._acdRequests.push({resolve:e,reject:t,timer:window.setTimeout(()=>{h._acdRequests=h._acdRequests.filter(e=>e.uuid!==n),t(d)},58e3),uuid:n})})}static onError(e,t,n){const{actor:r,actorIdx:i}=h._getActorByUUID(e);r&&(clearTimeout(r.timer),r.reject(new Error(s.Utils.strFormat(f,r.status||"get operation"))),h._acdRequests.splice(0,i+1))}static onStatusUpdated(e,t,n){h._checkConnectionId(t);const{actor:r,actorIdx:i}=h._getActorByUUID(t);if(r){if(clearTimeout(r.timer),0!==i)for(let t=0;t<i;t++)clearTimeout(h._acdRequests[t].timer),h._acdRequests[t].reject(new Error(s.Utils.strFormat("The {0} status is set in the code after {1}. The {0} status is ignored.",r.status||"get operation",e)));void 0===r.status||r.status===e?r.resolve(e):r.reject(new Error(s.Utils.strFormat("The {0} status is not acceptable for the current agent state. The agent is {1} now. Please, check the ACD module documentation for details.",r.status,e))),h._acdRequests.splice(0,i+1)}c.Client.getInstance().dispatchEvent({name:l.Events.SQMessagingStatusUpdated,id:h._getConnectonIdFromUUID(t),status:e,description:n})}static _checkBeforeRun(e,t){h._connectionId||t(new Error("You cannot set an agent status before login.")),h._acdRequests.length>0&&(o.LogManager.get().writeMessage(o.LogCategory.CLIENT,"ACD",o.LogLevel.WARNING,g),c.Client.getInstance().dispatchEvent({name:l.Events.SQError,code:5,message:g})),void 0===e||Object.values(i.OperatorACDStatuses).includes(e)||t(new Error(s.Utils.strFormat(f,e)))}static _getActorByUUID(e){let t=-1;return{actor:this._acdRequests.find((n,r)=>{if(n.uuid===e)return t=r,!0}),actorIdx:t}}static _getConnectonIdFromUUID(e){const t=e.split("_");return 1===t.length||"gw"===t[1]?h._connectionId:t[1]}static _checkConnectionId(e){var t;const n=e.split("_");1!==n.length&&n[1]===(null===(t=h._connectionId)||void 0===t?void 0:t.split("_")[0])||(c.Client.getInstance().dispatchEvent({name:l.Events.SQError,code:6,message:p}),o.LogManager.get().writeMessage(o.LogCategory.CLIENT,"ACD",o.LogLevel.WARNING,p))}}t.default=h,h._acdRequests=[]},3947:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Authenticator=t.AuthenticatorState=void 0;const i=n(1150),o=n(84),a=n(4106),s=n(575),l=n(125),c=n(9091),u=n(4758),d=n(2089),g=n(245);var p;!function(e){e[e.IDLE=0]="IDLE",e[e.IN_PROGRESS=1]="IN_PROGRESS"}(p=t.AuthenticatorState||(t.AuthenticatorState={}));class f{constructor(){this.FAIL_CODE_SECOND_STAGE=301,this.FAIL_CODE_ONE_TIME_KEY=302,this._displayName=null,this._username=null,this._authorized=!1,this.currentState=p.IDLE,this.logger=i.LogManager.get().createLogger(i.LogCategory.SIGNALING,this._traceName()),g.default.setRPCHandler(s.RemoteEvent.loginFailed,(e,t)=>{this.onLoginFailed(e,t)}),g.default.setRPCHandler(s.RemoteEvent.loginSuccessful,(e,t)=>{this.onLoginSuccesful(e,t)}),g.default.setRPCHandler(s.RemoteEvent.refreshOauthTokenFailed,e=>{this.handler.onRefreshTokenFailed(e)}),g.default.setRPCHandler(s.RemoteEvent.refreshOauthTokenSuccessful,e=>{this.handler.onRefreshTokenSuccess(e.OAuth)}),g.default.addHandler(this)}static get(){return void 0===this.inst&&(this.inst=new f),this.inst}setHandler(e){this.handler=e}onLoginFailed(e,t){switch(this.currentState=p.IDLE,e){case this.FAIL_CODE_ONE_TIME_KEY:this.handler.onOneTimeKeyGenerated(t);break;case this.FAIL_CODE_SECOND_STAGE:this.handler.onSecondStageInitiated();break;default:this.handler.onLoginFailed(e)}}onLoginSuccesful(e,t){this.currentState=p.IDLE,this._authorized=!0,o.PCFactory.get().iceConfig=t.iceConfig,c.default.setConnectionId(t.connectionId),d.default.setConnectionId(t.connectionId),l.Client.getInstance().setConnectionData(null,t.connectionId),this._displayName=e,this.handler.onLoginSuccessful(e,t.OAuth)}get displayName(){return this._displayName}basicLogin(e,t,n){if(this.currentState!=p.IDLE)return void this.logger.error("Login operation already in progress");this._username=e,this.currentState=p.IN_PROGRESS;let r=t;if("md5"===n.credentialType){const n=e.split("@")[0];r=u.Md5.hashStr(`${n}:voximplant.com:${t}`).toString()}g.default.callRemoteFunction(a.RemoteFunction.login,e,r,n)}tokenLogin(e,t){this.currentState==p.IDLE?(this._username=e,this.currentState=p.IN_PROGRESS,g.default.callRemoteFunction(a.RemoteFunction.login,e,"",t)):this.logger.error("Login operation already in progress")}tokenRefresh(e,t,n){n?g.default.callRemoteFunction(a.RemoteFunction.refreshOauthToken,e,{refreshToken:t,deviceToken:n}):g.default.callRemoteFunction(a.RemoteFunction.refreshOauthToken,e,t)}loginUsingOneTimeKey(e,t,n){this.logger.info("loginWithOneTimeKey running for "+e),this.currentState==p.IDLE?(this._username=e,this.currentState=p.IN_PROGRESS,g.default.callRemoteFunction(a.RemoteFunction.loginUsingOneTimeKey,e,t,n)):this.logger.error("Login operation already in progress. loginWithOneTimeKey is canceled")}loginStage2(e,t,n){this.logger.info("loginWithCode running for "+e),this.currentState==p.IDLE?(this._username=e,this.currentState=p.IN_PROGRESS,g.default.callRemoteFunction(a.RemoteFunction.loginStage2,e,t,n)):this.logger.error("Login operation already in progress. loginWithCode is canceled.")}generateOneTimeKey(e){this.logger.info("requestOneTimeLoginKey running for "+e),this.currentState==p.IDLE?(this.currentState=p.IN_PROGRESS,g.default.callRemoteFunction(a.RemoteFunction.loginGenerateOneTimeKey,e)):this.logger.error("Login operation already in progress. requestOneTimeLoginKey is canceled.")}username(){return this._username}authorized(){return this._authorized}onSignalingConnected(){}onSignalingConnectionFailed(e){}onSignalingClosed(){this.currentState=p.IDLE,this._authorized=!1,this._displayName=null,this._username=null}onMediaConnectionFailed(){this.currentState=p.IDLE}ziAuthorized(e){this._authorized=e}_traceName(){return"Authenticator"}}r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"setHandler",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"onLoginFailed",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"onLoginSuccesful",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"basicLogin",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"tokenLogin",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"tokenRefresh",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"loginUsingOneTimeKey",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"loginStage2",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"generateOneTimeKey",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"username",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"authorized",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"onSignalingConnected",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"onSignalingConnectionFailed",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"onSignalingClosed",null),r([i.LogManager.d_trace(i.LogCategory.AUTHENTICATOR)],f.prototype,"onMediaConnectionFailed",null),t.Authenticator=f},3869:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1150),i=n(9165),o=n(6518),a=n(9551),s=n(9023),l=n(125),c=n(1206);var u;!function(e){let t,n;function u(e,t,n){let r=e;return"object"!=typeof r&&(r={}),r[t]={ideal:n},r}function d(e,t){return new a.SignalingDTMFSender(t)}function g(){return new Promise(e=>{e(!1)})}function p(e){let t=!1,n=!1;return e.audioEnabled&&(t=!0,e.audioInputId&&(t=u(t,"deviceId",e.audioInputId))),e.videoEnabled&&(n=!0,e.videoSettings&&(n=e.videoSettings),e.videoInputId&&(n=u(n,"deviceId",e.videoInputId))),{peerIdentity:null,audio:t,video:n}}function f(){n=navigator.mozGetUserMedia?t.Firefox:navigator.webkitGetUserMedia?t.Webkit:t.Safari}!function(e){e[e.Firefox=1]="Firefox",e[e.Webkit=2]="Webkit",e[e.Edge=3]="Edge",e[e.Safari=4]="Safari"}(t||(t={})),c.getParser(window.navigator.userAgent),e.isIphone=function(){return!(!l.Client.getInstance().config().experiments||!l.Client.getInstance().config().experiments.emulate_ios)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)},e.isIpad=function(){return!(!l.Client.getInstance().config().experiments||!l.Client.getInstance().config().experiments.emulate_ios)||navigator.userAgent.match(/iPad/i)||navigator.maxTouchPoints>0&&n===t.Safari},e.isScreenSharingSupported=function(){return n===t.Firefox||n===t.Webkit||n===t.Safari&&0===navigator.maxTouchPoints},e.getWSVendor=function(e=!0){switch(n||f(),n){case t.Firefox:return"firefox";case t.Webkit:return"chrome";case t.Safari:return"safari";default:return""}},e.init=function(){switch(n||f(),n&&r.LogManager.get().writeMessage(r.LogCategory.RTC,"Core",r.LogLevel.INFO,"Detected browser "+t[n]),e.getDTMFSender=d,e.screenSharingSupported=g,n){case t.Firefox:e.attachMedia=i.FF.attachStream,e.detachMedia=i.FF.detachStream,e.getScreenMedia=i.FF.getScreenMedia,e.getRTCStats=i.FF.getRTCStats,e.screenSharingSupported=i.FF.screenSharingSupported,e.getDTMFSender=i.FF.getDTMFSender;break;case t.Webkit:e.attachMedia=o.Webkit.attachStream,e.detachMedia=o.Webkit.detachStream,e.getScreenMedia=o.Webkit.getScreenMedia,e.getRTCStats=o.Webkit.getRTCStats,e.screenSharingSupported=o.Webkit.screenSharingSupported,e.getDTMFSender=o.Webkit.getDTMFSender;break;case t.Safari:e.attachMedia=s.Safari.attachStream,e.detachMedia=s.Safari.detachStream,e.getScreenMedia=s.Safari.getScreenMedia,e.getRTCStats=s.Safari.getRTCStats,e.screenSharingSupported=s.Safari.screenSharingSupported,e.getDTMFSender=s.Safari.getDTMFSender;break;default:r.LogManager.get().writeMessage(r.LogCategory.RTC,"Core",r.LogLevel.INFO,"Unsupported browser "+navigator.userAgent)}e.composeConstraints=p}}(u||(u={})),t.default=u},9165:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FF=void 0;const r=n(9551),i=n(1150);class o{static attachStream(e){let t=e.element;void 0===t.srcObject?t.mozSrcObject=e.stream:t.srcObject=e.stream}static detachStream(e){let t=e.element;void 0===t.srcObject?t.mozSrcObject=null:t.srcObject=null,t.src=""}static screenSharingSupported(){return new Promise((e,t)=>{"https:"==window.location.protocol?e(!0):e(!1)})}static getScreenMedia(){const e={audio:!1,video:{mediaSource:"window"}};return i.LogManager.get().writeMessage(i.LogCategory.USERMEDIA,"[constraints]",i.LogLevel.TRACE,JSON.stringify(e)),navigator.mediaDevices.getUserMedia(e)}static getRTCStats(e){return new Promise((t,n)=>{e.getStats(null).then(e=>{let n=[];e.forEach(e=>{"inbound-rtp"!=e.type&&"outbound-rtp"!=e.type||n.push(e)}),t({raw:n,formatted:o.prepareRTCStats(e)})}).catch(n)})}static prepareRTCStats(e){let t=[];return e.forEach(e=>{"outbound-rtp"===e.type||e.isRemote?t.push(Object.assign(e,{framesPerSecond:e.framesPerSecond?e.framesPerSecond:e.framerateMean,encoderBitrate:e.bitrateMean})):t.push(e)}),t}static getDTMFSender(e,t){const n=/Firefox\/([0-9\.]+)(?:\s|$)/,i=navigator.userAgent;if(n.test(i)&&+n.exec(i)[1].split(".")[0]>=53){const t=e.getSenders().map(e=>{if(e.track&&"audio"===e.track.kind&&e.dtmf)return e.dtmf});if(t.length>0)return t[0]}return new r.SignalingDTMFSender(t)}_traceName(){return"FF"}}t.FF=o},9023:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Safari=void 0;const r=n(9551),i=n(1150);class o{static attachStream(e){try{e.element.srcObject=e.stream}catch(t){i.LogManager.get().writeMessage(i.LogCategory.USERMEDIA,"Safari: ",i.LogLevel.WARNING,`attachStream() has failed: ${JSON.stringify(t)}. MediaRenderer.element is ${null==e?void 0:e.element} and MediaRenderer.stream is ${null==e?void 0:e.stream}`)}}static detachStream(e){e.pauseElement(),e.element.src=""}static getDTMFSender(e,t){return new r.SignalingDTMFSender(t)}static getScreenMedia(){return navigator.mediaDevices.getDisplayMedia({audio:!1,video:!0})}static screenSharingSupported(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?Promise.resolve(!0):Promise.resolve(!1)}static getRTCStats(e){return new Promise((t,n)=>{let r=[];e.getStats(null).then(e=>{e.forEach(e=>{if("ssrc"==e.type){let t={};t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,r.push(t)}}),t({raw:r,formatted:o.prepareRTCStats(e)})}).catch(n)})}static prepareRTCStats(e){let t=[];return e.forEach(e=>{"track"!==e.type||e.kind?"outbound-rtp"===e.type||"inbound-rtp"===e.type?t.push(Object.assign(e,{trackId:e.mediaTrackId})):t.push(e):t.push(Object.assign(e,{kind:e.id.includes("audio")?"audio":e.id.includes("video")?"video":void 0}))}),t}_traceName(){return"Safari"}}t.Safari=o},9551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignalingDTMFSender=void 0;const r=n(4106),i=n(245);t.SignalingDTMFSender=class{constructor(e){this._id=e}insertDTMF(e,t,n){(""+e).split("").forEach(e=>this.sendKey(e))}sendKey(e){let t;t="*"==e?10:"#"==e?11:parseInt(e),(t>=0||t<=11)&&i.default.callRemoteFunction(r.RemoteFunction.sendDTMF,this._id,t)}_traceName(){return"SignalingDTMFSender"}}},6518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Webkit=void 0;const r=n(9551),i=n(125),o=n(1150);class a{static attachStream(e){let t=e.element;try{t.srcObject=e.stream;const n=i.Client.getInstance()._defaultSinkId;null!=n&&"function"==typeof t.setSinkId&&t.setSinkId(n)}catch(e){o.LogManager.get().writeMessage(o.LogCategory.USERMEDIA,"Webkit: ",o.LogLevel.WARNING,JSON.stringify(e))}}static detachStream(e){e.element.srcObject=null,e.pauseElement(),e.element.src=""}static getDTMFSender(e,t){if(!e.createDTMFSender)return new r.SignalingDTMFSender(t);{let t=[];if(e.getLocalStreams().forEach(e=>{e.getAudioTracks().forEach(e=>{t.push(e)})}),t.length)return e.createDTMFSender(t[0])}}static screenSharingSupported(){return-1!==navigator.userAgent.indexOf("Android")?Promise.resolve(!1):new Promise((e,t)=>{if(navigator.getDisplayMedia)e(!0);else if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)e(!0);else{const t=r=>{r.origin===window.location.origin&&"VoximplantWebsdkExtensionLoaded"===r.data&&(window.removeEventListener("message",t),clearTimeout(n),e(!0))};window.addEventListener("message",t),window.postMessage("VoximplantWebsdkCheckExtension","*");const n=setTimeout(()=>{window.removeEventListener("message",t),e(!1)},800)}})}static getScreenMedia(e=!1){return navigator.getDisplayMedia?navigator.getDisplayMedia({video:!0,audio:e}):navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia({video:!0,audio:e}):new Promise((t,n)=>{window.postMessage("voximplantWebsdkGetSourceId","*");const r=i=>{if(i.data&&i.origin===window.location.origin&&i.data.result){if("err"===i.data.result)return n(new Error(i.data.reason));if("ok"===i.data.result&&void 0!==i.data.sourceId){window.removeEventListener("message",r);const a={audio:e,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080,chromeMediaSourceId:i.data.sourceId},optional:[{googTemporalLayeredScreencast:!0}]}};o.LogManager.get().writeMessage(o.LogCategory.USERMEDIA,"[constraints]",o.LogLevel.INFO,JSON.stringify(a)),navigator.mediaDevices.getUserMedia(a).then(e=>{t(e)},e=>{n(e)})}}};window.addEventListener("message",r)})}static getRTCStats(e){return new Promise((t,n)=>{let r=[];e.getStats(null).then(e=>{e.forEach(e=>{"outbound-rtp"!=e.type&&"inbound-rtp"!=e.type||r.push(e)}),t({raw:r,formatted:a.prepareRTCStats(e)})}).catch(n)})}static prepareRTCStats(e){let t=[];return e.forEach(e=>{"inbound-rtp"===e.type&&e.isRemote?t.push(Object.assign(e,{type:"remote-inbound-rtp"})):"outbound-rtp"===e.type&&e.isRemote?t.push(Object.assign(e,{type:"remote-outbound-rtp"})):t.push(e)}),t}_traceName(){return"Webkit"}}t.Webkit=a},4610:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCall=t.CallMode=t.CallState=void 0;const i=n(3576),o=n(2282),a=n(1150),s=n(4106),l=n(3385),c=n(9411),u=n(245);var d;!function(e){e[e.ALERTING="ALERTING"]="ALERTING",e[e.PROGRESSING="PROGRESSING"]="PROGRESSING",e[e.CONNECTED="CONNECTED"]="CONNECTED",e[e.UPDATING="UPDATING"]="UPDATING",e[e.STOPPING="STOPPING"]="STOPPING",e[e.ENDED="ENDED"]="ENDED"}(d=t.CallState||(t.CallState={})),function(e){e[e.P2P=0]="P2P",e[e.SERVER=1]="SERVER"}(t.CallMode||(t.CallMode={}));class g extends i.EventTarget{constructor(e){super(),this.remoteMuteState=!0,this.logger=a.LogManager.get().createLogger(a.LogCategory.CALL,`Call ${e}`)}id(){return this.settings?this.settings.id:"new"}number(){return this.settings.number}displayName(){return this.settings.displayName}getCallDuration(){return Date.now()-this.startTime}headers(){return this.settings.extraHeaders}state(){return this.settings.state}checkCallMode(e){return this.settings.mode==e}hangup(e){this.logger.info("hangup()"),this.settings.state==d.CONNECTED||this.settings.state==d.UPDATING||this.settings.state==d.PROGRESSING?u.default.callRemoteFunction(s.RemoteFunction.disconnectCall,this.settings.id,c.AbstractCallManager.cleanHeaders(e)):this.settings.state==d.ALERTING&&u.default.callRemoteFunction(s.RemoteFunction.rejectCall,this.settings.id,!0,c.AbstractCallManager.cleanHeaders(e))}mutePlayback(){this.logger.info("mutePlayback()"),this.remoteMuteState=!1,this.getEndpoints().forEach(e=>{e.mediaRenderers.forEach(e=>{e.setVolume(0)})})}unmutePlayback(){this.logger.info("unmutePlayback()"),this.remoteMuteState=!0,this.getEndpoints().forEach(e=>{e.mediaRenderers.forEach(e=>{e.setVolume(1)})})}restoreRMute(){this.settings.active&&this.getEndpoints().forEach(e=>{e.mediaRenderers.forEach(e=>{e.setVolume(this.remoteMuteState?1:0)})})}sendInfo(e,t,n){this.logger.info(`sendInfo(${e}, ${JSON.stringify(t)})`);let r,i,o=e.indexOf("/");-1==o?(r="application",i=e):(r=e.substring(0,o),i=e.substring(o+1)),u.default.callRemoteFunction(s.RemoteFunction.sendSIPInfo,this.settings.id,r,i,t,c.AbstractCallManager.cleanHeaders(n))}sendMessage(e){this.logger.info("sendMessage()"),this.sendInfo(l.Constants.ZINGAYA_IM_MIME_TYPE,e,{})}addEventListener(e,t){super.addEventListener(e,t)}on(e,t,n){super.on(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}off(e,t){super.off(e,t)}dispatchEvent(e){this.settings.state!==d.UPDATING||e.name!==o.CallEvents.Updated&&e.name!==o.CallEvents.UpdateFailed||this._setState(d.CONNECTED),super.dispatchEvent(e)}onConnected(e,t){if(this.signalingConnected)return!!this.checkState([d.PROGRESSING,d.ALERTING],"onConnected")&&(this._setState(d.CONNECTED),this.startTime=Date.now(),this.dispatchEvent({name:"Connected",call:this,headers:e}),!0)}onFailed(e,t,n){return this.dispatchEvent({name:"Failed",call:this,headers:n,code:e,reason:t}),this._setState(d.ENDED),!0}_setState(e){const t={call:this,old:this.settings.state,new:e,name:o.CallEvents.StateUpdated};return this.settings.state=e,this.dispatchEvent(t),e}checkState(e,t){if(e)if("string"!=typeof e){let n=!1,r=e;for(let e=0;e<r.length;e++)r[e]==this.settings.state&&(n=!0);if(!n)return this.logger.warning("Received "+t+" in invalid state "+this.settings.state),!1}else if(this.settings.state!=e)return this.logger.warning("Received "+t+" in invalid state "+this.settings.state),!1;return!0}}r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"number",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"displayName",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"headers",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"checkCallMode",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"hangup",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"mutePlayback",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"unmutePlayback",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"restoreRMute",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"sendInfo",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"sendMessage",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"addEventListener",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"on",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"removeEventListener",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"off",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"dispatchEvent",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"onConnected",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"onFailed",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"_setState",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],g.prototype,"checkState",null),t.AbstractCall=g},9411:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCallManager=void 0;const i=n(3385),o=n(1150),a=n(125),s=n(575),l=n(245),c=n(4610),u=n(2282),d=n(141);class g{constructor(){this.protocolVersion="3",this._h264first=!1,this.iceServers={},this.wsConfMap=new WeakMap,this.confEpManagerMap=new WeakMap,this.endpointManagers=new WeakMap,this._calls={},this._calls={},l.default.addHandler(this),l.default.setRPCHandler(s.RemoteEvent.onICEConfig,(e,t)=>{this.onICEResult(e,!0,t)}),l.default.setRPCHandler(s.RemoteEvent.onICEConfigFailed,e=>{this.onICEResult(e,!1)}),l.default.setRPCHandler(s.RemoteEvent.handleRejectReinvite,(e,t,n)=>{this.handleRejectReinvite(e,t,n)}),l.default.setRPCHandler(s.RemoteEvent.handleConnectionDisconnected,(e,t,n)=>{this.handleConnectionDisconnected(e,t,n)}),l.default.setRPCHandler(s.RemoteEvent.handleConnectionFailed,(e,t,n,r)=>{this.handleConnectionFailed(e,t,n,r)}),l.default.setRPCHandler(s.RemoteEvent.handleSIPInfo,(e,t,n,r,i)=>{this.handleSIPInfo(e,t,n,r,i)}),l.default.setRPCHandler(s.RemoteEvent.handleSipEvent,e=>{this.handleSipEvent(e)})}removeCall(e){delete this._calls[e]}get numCalls(){return this._numCalls}static cleanHeaders(e){let t={};for(let n in e)"X-"!=n.substring(0,2)&&n!=i.Constants.CALL_DATA_HEADER||(t[n]=e[n]);return t}static addCustomDataToHeaders(e){return void 0!==e.customData&&(void 0===e.extraHeaders&&(e.extraHeaders={}),e.extraHeaders["VI-CallData"]=e.customData),e}async handleConnectionFailed(e,t,n,r){let i=this.findCall(e,"handleConnectionFailed");i&&"object"==typeof i&&(await this.removeCall(e),a.Client.getInstance().stopProgressTone(),i.onFailed(t,n,r))}getEndpointManager(e){return this.endpointManagers.get(e)}onICEResult(e,t,n){if(t){let t=n;if(window.__VIIceServer__&&n){const e=/(stun:|turn:)(.*)*:(\d*)(\?transport=)?(tcp|udp)?/gm,r="$1"+window.__VIIceServer__+":$3$4$5";t=n.map(t=>(Array.isArray(t.urls)?t.urls=t.urls.map(t=>t.replace(e,r)):t.urls=t.urls.replace(e,r),t))}this.iceServers[e]=t,this.logger.info(`ice servers ${this.iceServers[e]}`);const r=this.findCall(e,"onICEResult");r&&(r.peerConnection.setConfiguration?r.peerConnection.setConfiguration(Object.assign(Object.assign({},r.peerConnection.getConfiguration()),{iceServers:t})):this.logger.info("Failed to set ICE config due to RTCPeerConnection doesn't have the setConfiguration method"))}}checkMaximumCallCount(){if(Object.keys(this._calls).length>199)throw new Error("The max calls number limit has been reached.")}handleConnectionDisconnected(e,t,n){let r=this.findCall(e,"handleConnectionDisconnected");r&&(a.Client.getInstance().stopProgressTone(),r.onDisconnected(t,n).then(()=>this.removeCall(e)).catch(t=>{this.logger.error(`Cannot remove the call ${e}: ${t.message}`)}))}handleSIPInfo(e,t,n,r,i){let o=this.findCall(e,"handleSIPInfo");o&&o.onInfo(o,t,n,r,i)}handleSipEvent(e){}onSignalingConnected(){}onSignalingClosed(){for(let e in this._calls)this._calls.hasOwnProperty(e)&&(this._calls[e].hangup(),this._calls[e].onFailed(409,"Connection Closed",{}));this._calls={}}onSignalingConnectionFailed(e){}onMediaConnectionFailed(){}handleRejectReinvite(e,t,n){let r=this.findCall(e,"handleReinvite");r&&(r.peerConnection.revertEnablingVideo(),r.dispatchEvent({code:20,call:r}))}async hangupAllCalls(){const e=Object.values(this._calls).map(e=>new Promise(t=>{const n=setTimeout(()=>{this.logger.info(`The timeout of disconnected event for the call ${e.id()} has reached.`),this.removeCall(e.id()),e.settings.state=c.CallState.ENDED,t()},1500);e.on(u.CallEvents.Disconnected,()=>{clearTimeout(n),t()},{once:!0}),e.hangup();const r=this.endpointManagers.get(e);null==r||r.getEndpoints().forEach(e=>r.destructEndpoint(e.id))}));await Promise.all(e)}patchAudioMixConf(e,t){var n;if(e.settings.isConference&&t){this.logger.info("patchAudioMixConf(): workaround for mixed audio conferences");const t=null===(n=e.peerConnection.getTransceivers())||void 0===n?void 0:n[0].receiver.track;if(t){e.settings.mixedAudioTrackID=t.id;const n=(()=>{const e=document.createElement("audio");return e.autoplay=!0,e.id=t.id,e.style.display="none",e.srcObject=new MediaStream([t]),e})();document.body.appendChild(n),n.play().catch(e=>{this.logger.warning(`Cannot start audio track: ${t.id}. ${e.message}`),a.Client.getInstance().dispatchEvent({name:d.Events.PlaybackError,element:n,error:e})})}}}}r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"handleConnectionFailed",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"onICEResult",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"handleConnectionDisconnected",null),r([o.LogManager.d_trace(o.LogCategory.CALLEXSERVER)],g.prototype,"handleSIPInfo",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"handleSipEvent",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"onSignalingConnected",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"onSignalingClosed",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"onSignalingConnectionFailed",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g.prototype,"handleRejectReinvite",null),r([o.LogManager.d_trace(o.LogCategory.CALLMANAGER)],g,"addCustomDataToHeaders",null),t.AbstractCallManager=g},3308:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Call=void 0;const i=n(2282),o=n(3385),a=n(1150),s=n(84),l=n(308),c=n(3869),u=n(4106),d=n(125),g=n(7272),p=n(4610),f=n(2957),h=n(9002),m=n(245),_=n(9699);var v=g.default.AudioDeviceManager,y=g.default.StreamManager;const C=n(8237),E=n(787);class b extends p.AbstractCall{constructor(e,t,n,r){super(e),this._audioSenderTransform=f.Utils.getDefaultStreamTransformer(),this._videoSenderTransform=f.Utils.getDefaultStreamTransformer(),this.signalingConnected=!1,this.settings=r,this.settings.id=e,this.settings.displayName=t,this.settings.mode=p.CallMode.P2P,this.settings.active=!0,this.settings.usedSinkId=null,this.settings.incoming=n,this.settings.state=n?p.CallState.ALERTING:p.CallState.PROGRESSING,d.Client.getInstance().config(),this.settings.audioDirections={sendAudio:!0},this.settings.videoDirections="boolean"==typeof r.video?{sendVideo:r.video,receiveVideo:!0}:r.video,this.settings.hasEarlyMedia=!1,r.audioSenderTransform&&(this._audioSenderTransform=r.audioSenderTransform),r.videoSenderTransform&&(this._videoSenderTransform=r.videoSenderTransform),navigator.mediaDevices.addEventListener("devicechange",this.onDeviceChange.bind(this))}async onDeviceChange(){if(!this)return;const e=v.get(),t=e.getDefaultAudioSettings(),n=[],r=[];(await navigator.mediaDevices.enumerateDevices()).forEach(e=>{let t={id:e.deviceId,name:e.label,group:e.groupId};"audiooutput"===e.kind?r.push(t):"audio"!==e.kind&&"audioinput"!==e.kind||n.push(t)}),this.logger.info(`Current audio input devices list: ${JSON.stringify(n)}`),this.logger.info(`Current audio output devices list: ${JSON.stringify(r)}`);let i=(e,t)=>{var n,r,i;let o;return t&&(o=null===(n=e.find(e=>e.id===t))||void 0===n?void 0:n.id),o||(o=null===(r=e.find(e=>"default"===e.id))||void 0===r?void 0:r.id),o||(o=null===(i=e[0])||void 0===i?void 0:i.id),o};const o=i(n,t.inputId),a=i(r,t.outputId);this.logger.info(`Input device id - ${o} will be active`),this.logger.info(`Output device id - ${a} will be active`),this.state()!==p.CallState.ENDED&&await e.setCallAudioSettings(this,{inputId:o,outputId:a}),await e.setDefaultAudioSettings({inputId:o,outputId:a})}get promise(){return this._promise}get peerConnection(){return this._peerConnection}set peerConnection(e){this._peerConnection=e}get stateValue(){return this.settings.state}active(){return this.settings.active}_setActive(e){const t={call:this,old:this.settings.active,new:e,name:i.CallEvents.ActiveUpdated};return this.settings.active=e,this.dispatchEvent(t),this.muteIncomingStreams(e),e}muteIncomingStreams(e){this.getEndpoints().forEach(t=>{t.mediaRenderers.forEach(t=>{t.stream.getTracks().forEach(t=>{t.enabled=e})})})}answer(e,t,n,r){if(this.logger.info(`answer(\n        ${JSON.stringify(e)},\n        ${JSON.stringify(t)},\n        ${JSON.stringify(n)},\n        H264first: ${Boolean(r)},\n      )`),void 0!==e&&(void 0!==t&&"object"==typeof t||(t={}),t[o.Constants.CALL_DATA_HEADER]=e),void 0!==n&&(n={sendVideo:d.Client.getInstance().config().videoSupport,receiveVideo:d.Client.getInstance().config().videoSupport}),this.settings.state!=p.CallState.ALERTING)throw new Error("WRONG_CALL_STATE");if(n&&"object"==typeof n){const e={sendVideo:!1,receiveVideo:!0};this._peerConnection.setVideoFlags(Object.assign(Object.assign({},e),n))}this.dispatchEvent({name:"AnswerAccepted",call:this})}decline(e){if(this.logger.info("decline()"),this.settings.state!=p.CallState.ALERTING)throw new Error("WRONG_CALL_STATE");m.default.callRemoteFunction(u.RemoteFunction.rejectCall,this.settings.id,!1,l.CallManager.cleanHeaders(e))}reject(e){if(this.logger.info("reject()"),this.settings.state!=p.CallState.ALERTING)throw new Error("WRONG_CALL_STATE");m.default.callRemoteFunction(u.RemoteFunction.rejectCall,this.settings.id,!0,l.CallManager.cleanHeaders(e))}hangup(e){this.settings.state!==p.CallState.STOPPING&&this.settings.state!==p.CallState.ENDED?(super.hangup(e),this.logger.info(`Call ${this.settings.id} is disconnected by the user`),this._setState(p.CallState.STOPPING),Object.keys(l.CallManager.get().calls).some(e=>e!==this.settings.id)||(this.logger.info(`There are no other calls ${JSON.stringify(Object.keys(l.CallManager.get().calls))}, clean local streams`),y.clearUmCache().then(()=>{this.logger.info("Streams from cache have been stopped.")}))):this.logger.info(`Call ${this.settings.id} is stopping or has already stopped`)}sendTone(e){this.logger.info(`sendTone(${e})`),this.settings.active&&this._peerConnection.sendDTMF(e)}isMicrophoneMuted(){const e=this.peerConnection.getMicrophoneState();return this.logger.info(`isMicrophoneMuted: ${e}`),e}muteMicrophone(){this.logger.info("muteMicrophone()"),this.peerConnection.muteMicrophone(!0)}unmuteMicrophone(){this.logger.info("unmuteMicrophone()"),this.peerConnection.muteMicrophone(!1)}showRemoteVideo(e=!0){throw new Error("Deprecated: please use CSS to display each Media Renderer")}setRemoteVideoPosition(e,t){throw new Error("Deprecated: please use CSS to position '#voximplantcontainer' element")}setRemoteVideoSize(e,t){throw new Error("Deprecated: please use CSS to set size of '#voximplantcontainer' element")}setVideoSettings(e,t,n){throw new Error("Deprecated: please use the Hardware interface instead")}getVideoElementId(){throw new Error("Deprecated: please use the Media Renderer interface instead")}onDisconnected(e,t){return new Promise((n,r)=>{const i=g.default.StreamManager.get()._getScreenSharing(this);if(i&&i.forEach(e=>{g.default.StreamManager.get()._clearScreenSharing(this,e)}),!this.checkState([p.CallState.CONNECTED,p.CallState.ALERTING,p.CallState.PROGRESSING,p.CallState.UPDATING,p.CallState.STOPPING],"onDisconnected"))return r(new Error(`Call in the wrong state ${this.state()}`)),!1;this._setState(p.CallState.ENDED),n(!0),this.dispatchEvent({name:"Disconnected",call:this,headers:e,params:t})})}onStopRinging(){return!!this.checkState([p.CallState.PROGRESSING,p.CallState.CONNECTED],"onStopRinging")&&(this.dispatchEvent({name:"ProgressToneStop",call:this}),!0)}onRingOut(){return!!this.checkState(p.CallState.PROGRESSING,"onRingOut")&&(this.dispatchEvent({name:"ProgressToneStart",call:this}),!0)}onTransferComplete(){return!!this.checkState(p.CallState.CONNECTED,"onTransferComplete")&&(this.dispatchEvent({name:"TransferComplete",call:this}),!0)}onTransferFailed(){return!!this.checkState(p.CallState.CONNECTED,"onTransferFailed")&&(this.dispatchEvent({name:"TransferFailed",call:this}),!0)}onInfo(e,t,n,r,i){if(e.stateValue==p.CallState.CONNECTED||e.stateValue==p.CallState.PROGRESSING||e.stateValue==p.CallState.ALERTING||e.stateValue==p.CallState.UPDATING){let a=t+"/"+n;if(a==o.Constants.ZINGAYA_IM_MIME_TYPE)this.dispatchEvent({name:"onSendMessage",call:this,text:r});else if(a==o.Constants.P2P_SPD_FRAG_MIME_TYPE){let t=JSON.parse(r);for(let n in t)void 0!==e&&void 0!==e.peerConnection?e.peerConnection.addRemoteCandidate(t[n][1],t[n][0]):this.logger.info("Candidate skipped. Connection not created yet.")}else a===o.Constants.VI_CONF_PARTICIPANT_INFO_ADDED||a===o.Constants.VI_CONF_PARTICIPANT_INFO_REMOVED||a===o.Constants.VI_CONF_PARTICIPANT_INFO_UPDATED||this.dispatchEvent({name:"InfoReceived",call:this,body:r,headers:i,mimeType:a});return!0}this.logger.warning("received handleSIPInfo for call: "+e.id()+" in invalid state: "+e.state())}setActive(e){return this.logger.info(`setActive(${e})`),new Promise((t,n)=>{e!==this.settings.active?this.settings.state==p.CallState.CONNECTED?(this._setActive(e),this.peerConnection.hold(!e),C.CallPromiseResolver.add(this,{resolve:t,reject:n,dispatchEvent:E.dispatchUpdatedEvent.bind(null,this)})):((0,E.dispatchUpdatedEvent)(this,!1,_.CallFailedUpdateReasons.holdCallInWrongState),n({name:i.CallEvents.UpdateFailed,code:11,call:this})):t((0,E.dispatchUpdatedEvent)(this,!1,_.CallFailedUpdateReasons.sameActiveState(e)))})}canStartSendingCandidates(){void 0===this._peerConnection&&(this._peerConnection=s.PCFactory.get().peerConnections[this.settings.id]),this._peerConnection.canStartSendingCandidates()}sendVideo(e){if(this.logger.info(`sendVideo(${e})`),"boolean"!=typeof e)return Promise.reject((0,E.dispatchUpdatedEvent)(this,!1,_.CallFailedUpdateReasons.wrongTypeOfArgument(e)));if(!this.active())return Promise.reject((0,E.dispatchUpdatedEvent)(this,!1,_.CallFailedUpdateReasons.mediaOnHold));let t=this.peerConnection?this.peerConnection.getTransceivers().filter(e=>{var t;return"video"===(null===(t=e.sender.track)||void 0===t?void 0:t.kind)}):[];const n=g.default.StreamManager.get()._getScreenSharing(this)||[];return this.peerConnection?e&&n.length?new Promise((t,r)=>{C.CallPromiseResolver.add(this,{resolve:t,reject:r,dispatchEvent:E.dispatchUpdatedEvent.bind(null,this)}),this.settings.videoDirections.sendVideo||(this.settings.videoDirections.sendVideo=!0);const i=n[0];g.default.StreamManager.get()._clearScreenSharing(this,i).then(()=>g.default.StreamManager.get().getCallStream(this,!0)).then(t=>{let n=t.getVideoTracks();this.peerConnection.replaceSharingToVideo(n[0],"video"),this.settings.videoDirections.sendVideo=e}).catch(e=>{C.CallPromiseResolver.reject(this,e)})}):!0===this.settings.videoDirections.sendVideo&&e||!1===this.settings.videoDirections.sendVideo&&!e&&!t.length?(this.logger.info("Resolve sendVideo() without enableVideo()"),Promise.resolve({call:this,name:i.CallEvents.Updated,result:!0})):new Promise((t,n)=>{this.logger.info(`Going to call enableVideo(${e})`),this.settings.videoDirections.sendVideo=e,this.peerConnection.enableVideo(e),C.CallPromiseResolver.add(this,{dispatchEvent:E.dispatchUpdatedEvent.bind(null,this),resolve:t,reject:n})}):Promise.resolve({call:this,name:i.CallEvents.Updated,result:!0})}sendMedia(e,t){return this._setState(p.CallState.UPDATING),null==e&&(e=this.settings.audioDirections.sendAudio),null==t&&(t=this.settings.videoDirections.sendVideo),this.peerConnection.sendMedia(e,t).then(n=>(null!=t&&(this.settings.videoDirections.sendVideo=t),null!=e&&(this.settings.audioDirections.sendAudio=e),n))}shareScreen(e,t){return void 0===e&&void 0===t||this.logger.warning("The `showLocalView` and `replaceVideo` arguments of the `shareScreen` method are deprecated since v4.6.0. The `shareScreen` method now replaces local and sent video with screen sharing by default, sending video and sharing screen now unavailable.\nTo send both video and screen sharing in a conference, use the `joinAsSharing` method to join as a separate screen sharing member."),this.logger.info("shareScreen()"),this.settings.state!==p.CallState.CONNECTED?Promise.reject((0,E.dispatchUpdatedEvent)(this,!1,"Call is not connected.")):this.active()?new Promise((e,t)=>{g.default.StreamManager.get()._getScreenSharing(this).length&&(this.logger.warning("Screen sharing already active."),t(new Error("Screen sharing already active."))),c.default.isScreenSharingSupported()?g.default.StreamManager.get()._newScreenSharing(this).then(n=>{if(this.settings.videoDirections.sendVideo){let t=[];n.stream.getTracks().forEach(e=>{"video"===e.kind&&t.push(this.peerConnection.replaceSharingToVideo(e,"sharing"))}),Promise.all(t).then(()=>{this.peerConnection.restoreMute(),e((0,E.dispatchUpdatedEvent)(this,!0))})}else this.peerConnection.addCustomMedia(n.stream),C.CallPromiseResolver.add(this,{resolve:t=>{this.peerConnection.restoreMute(),g.default.StreamManager.get().isLocalVideoRequested&&g.default.StreamManager.get().updateLocalVideo("sharing"),e(t)},reject:t,dispatchEvent:E.dispatchUpdatedEvent.bind(null,this)})}).catch(e=>{this.logger.warning(e.message),t(e)}):(this.logger.warning("Sorry, this browser does not support screen sharing."),t(new Error("Sorry, this browser does not support screen sharing.")))}):Promise.reject((0,E.dispatchUpdatedEvent)(this,!1,_.CallFailedUpdateReasons.mediaOnHold))}stopSharingScreen(){return this.logger.info("stopSharingScreen()"),this.active()?new Promise((e,t)=>{const n=g.default.StreamManager.get()._getScreenSharing(this);if(n){let r=n.length;n.forEach(n=>{g.default.StreamManager.get()._clearScreenSharing(this,n).then(()=>{this.settings.videoDirections.sendVideo?(g.default.StreamManager.get().updateCallStream(this),C.CallPromiseResolver.add(this,{resolve:e,reject:t,dispatchEvent:E.dispatchUpdatedEvent.bind(null,this)})):(this.peerConnection.removeCustomMedia(n.stream),C.CallPromiseResolver.add(this,{resolve:t=>{this.settings.videoDirections.sendVideo&&this.settings.simulcast&&this.settings.isConference&&this.peerConnection.getTransceivers().forEach(e=>{if("inactive"!==e.currentDirection&&e.sender.track&&"video"===e.sender.track.kind){const t=f.Utils.buildSimulcastLayers({trackSettings:e.sender.track.getSettings(),trackType:"video",profileName:this.settings.simulcastProfileName});this.peerConnection.setEncodingsParams(e,t)}}),n.stream=void 0,r--,r<=0&&(g.default.StreamManager.get().updateLocalVideo("video"),this.peerConnection.restoreMute(),e(t))},reject:t,dispatchEvent:E.dispatchUpdatedEvent.bind(null,this)}))}).catch(e=>{this.logger.warning(e.message),t(e)})})}else this.logger.warning("Sorry, screen sharing not started yet."),t(new Error("Sorry, screen sharing not started yet."))}):Promise.reject((0,E.dispatchUpdatedEvent)(this,!1,_.CallFailedUpdateReasons.mediaOnHold))}getRemoteAudioStreams(){throw new Error("Deprecated: please use the Media Renderer interface of each call instead")}getRemoteVideoStreams(){throw new Error("Deprecated: please use the Media Renderer interface of each call instead")}useAudioOutput(e){throw new Error("Deprecated: please use the Media Renderer interface of each call instead")}getAudioElementId(){throw new Error("Deprecated: please use the Media Renderer interface of each call instead")}runIncomingReInvite(e,t){if(this.settings.state===p.CallState.UPDATING)m.default.callRemoteFunction(u.RemoteFunction.rejectReInvite,this.settings.id,{});else{this._setState(p.CallState.UPDATING);const n=l.CallManager.get().isSDPHasVideo(t);this.peerConnection.handleRemoteOffer(e,t,n).then(()=>{this.peerConnection.restoreMute(),this.peerConnection.restoreVideoSending()})}}setActiveForce(e){this._setActive(e)}getEndpoints(){return l.CallManager.get().getEndpointManager(this).getEndpoints()}scaleVideoResolutionDownBy(e){const t=[];return this.peerConnection.getTransceivers().forEach(n=>{if(n.currentDirection&&-1!==n.currentDirection.indexOf("send")||n.direction&&-1!==n.direction.indexOf("send")){const r=n.sender.getParameters();-1!=e?r.encodings[0].scaleResolutionDownBy=e:delete r.encodings[0].scaleResolutionDownBy,t.push(n.sender.setParameters(r))}}),Promise.all(t)}get audioSenderTransform(){return this._audioSenderTransform}set audioSenderTransform(e){this._audioSenderTransform=e,this.peerConnection&&this.peerConnection.updateSenderTransformers()}get videoSenderTransform(){return this._videoSenderTransform}set videoSenderTransform(e){this._videoSenderTransform=e,this.peerConnection&&this.peerConnection.updateSenderTransformers()}get audioMediaTrackTransform(){return this._audioMediaTrackTransform}set audioMediaTrackTransform(e){this._audioMediaTrackTransform=e,this.peerConnection&&this.peerConnection.updateSenderTrackTransformers()}get videoMediaTrackTransform(){return this._videoMediaTrackTransform}set videoMediaTrackTransform(e){this._videoMediaTrackTransform=e,this.peerConnection&&this.peerConnection.updateSenderTrackTransformers()}_traceName(){return"Call"}}r([(0,h.debounceDecorator)(200)],b.prototype,"onDeviceChange",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"active",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"_setActive",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"answer",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"decline",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"reject",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"hangup",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"sendTone",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"isMicrophoneMuted",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"muteMicrophone",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"unmuteMicrophone",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"showRemoteVideo",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"setRemoteVideoPosition",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"setRemoteVideoSize",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"setVideoSettings",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"getVideoElementId",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"onDisconnected",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"onStopRinging",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"onRingOut",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"onTransferComplete",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"onTransferFailed",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"onInfo",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"setActive",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"canStartSendingCandidates",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"sendVideo",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"shareScreen",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"stopSharingScreen",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"getRemoteAudioStreams",null),r([a.LogManager.d_trace(a.LogCategory.CALL)],b.prototype,"getRemoteVideoStreams",null),r([a.LogManager.d_trace(a.LogCategory.CLIENT)],b.prototype,"useAudioOutput",null),r([a.LogManager.d_trace(a.LogCategory.CLIENT)],b.prototype,"getAudioElementId",null),r([a.LogManager.d_trace(a.LogCategory.CLIENT)],b.prototype,"runIncomingReInvite",null),r([a.LogManager.d_trace(a.LogCategory.CLIENT)],b.prototype,"setActiveForce",null),t.Call=b},6081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallError=void 0,function(e){e[e.NUMBER_IS_BUSY=486]="NUMBER_IS_BUSY",e[e.TERMINATED=487]="TERMINATED",e[e.INVALID_NUMBER=404]="INVALID_NUMBER",e[e.NUMBER_IS_UNAVAILABLE=480]="NUMBER_IS_UNAVAILABLE",e[e.REJECTED=603]="REJECTED",e[e.INSUFFICIENT_FUNDS=402]="INSUFFICIENT_FUNDS",e[e.ACCESS_DENIED=403]="ACCESS_DENIED",e[e.NOT_CONNECTED_TO_VOXIMPLANT=1003]="NOT_CONNECTED_TO_VOXIMPLANT",e[e.NOT_AUTHORIZED=1004]="NOT_AUTHORIZED",e[e.HTTP_NOT_SECURE=1008]="HTTP_NOT_SECURE"}(t.CallError||(t.CallError={}))},2282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallEvents=void 0,function(e){e[e.Connected="Connected"]="Connected",e[e.Disconnected="Disconnected"]="Disconnected",e[e.Failed="Failed"]="Failed",e[e.ProgressToneStart="ProgressToneStart"]="ProgressToneStart",e[e.ProgressToneStop="ProgressToneStop"]="ProgressToneStop",e[e.MessageReceived="onSendMessage"]="MessageReceived",e[e.InfoReceived="InfoReceived"]="InfoReceived",e[e.TransferComplete="TransferComplete"]="TransferComplete",e[e.TransferFailed="TransferFailed"]="TransferFailed",e[e.ICETimeout="ICETimeout"]="ICETimeout",e[e.RTCStatsReceived="RTCStatsReceived"]="RTCStatsReceived",e[e.CallStatsReceived="CallStatsReceived"]="CallStatsReceived",e[e.MediaElementCreated="MediaElementCreated"]="MediaElementCreated",e[e.MediaElementRemoved="MediaElementRemoved"]="MediaElementRemoved",e[e.ICECompleted="ICECompleted"]="ICECompleted",e[e.Updated="Updated"]="Updated",e[e.PendingUpdate="PendingUpdate"]="PendingUpdate",e[e.UpdateFailed="UpdateFailed"]="UpdateFailed",e[e.LocalVideoStreamAdded="LocalVideoStreamAdded"]="LocalVideoStreamAdded",e[e.EndpointAdded="EndpointAdded"]="EndpointAdded",e[e.EndpointRemoved="EndpointRemoved"]="EndpointRemoved",e[e.StateUpdated="StateUpdated"]="StateUpdated",e[e.ActiveUpdated="ActiveUpdated"]="ActiveUpdated",e[e.QualityIssueCodecMismatch="QualityIssueCodecMismatch"]="QualityIssueCodecMismatch",e[e.QualityIssueHighMediaLatency="QualityIssueHighMediaLatency"]="QualityIssueHighMediaLatency",e[e.QualityIssueICEDisconnected="QualityIssueICEDisconnected"]="QualityIssueICEDisconnected",e[e.QualityIssueLocalVideoDegradation="QualityIssueLocalVideoDegradation"]="QualityIssueLocalVideoDegradation",e[e.QualityIssueLowBandwidth="QualityIssueLowBandwidth"]="QualityIssueLowBandwidth",e[e.QualityIssueNoAudioSignal="QualityIssueNoAudioSignal"]="QualityIssueNoAudioSignal",e[e.QualityIssuePacketLoss="QualityIssuePacketLoss"]="QualityIssuePacketLoss",e[e.SharingStopped="SharingStopped"]="SharingStopped"}(t.CallEvents||(t.CallEvents={}))},304:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.CallExMedia=void 0;const i=n(3308),o=n(1150),a=n(4106),s=n(3385),l=n(125),c=n(7272),u=n(245),d=n(3421);class g extends i.Call{answer(e,t,n,r){return super.answer(e,t,n,r),void 0!==e&&(void 0!==t&&"object"==typeof t||(t={}),t[s.Constants.CALL_DATA_HEADER]=e),this._answerHeaders=t,l.Client.getInstance().config(),new Promise((e,t)=>{this._answerPromise=e,this.settings.videoDirections={sendVideo:"object"==typeof n&&n.sendVideo,receiveVideo:!0},r&&(this.rearangeCodecs=d.CodecSorterHelpers.H264Sorter);const i=()=>{c.default.StreamManager.get().getCallStream(this).then(e=>{this._peerConnection.fastAddCustomMedia(e),this._peerConnection.getLocalAnswer().then(e=>{const t={mids:this.peerConnection.getMidKinds()};u.default.callRemoteFunction(a.RemoteFunction.acceptCall,this.id(),this._answerHeaders,e.sdp,t),this._peerConnection._fixFFSoundBug(),this._answerPromise()}).catch(()=>{})}).catch(e=>t(e))};this._peerConnection?i():setTimeout(i,600)})}_traceName(){return"CallExMedia"}}r([o.LogManager.d_trace(o.LogCategory.CALL)],g.prototype,"answer",null),t.CallExMedia=g},8748:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.CallExServer=void 0;const i=n(3308),o=n(308),a=n(1150),s=n(4106),l=n(4610),c=n(245);class u extends i.Call{constructor(e,t,n,r){super(e,t,n,r),this.settings.mode=l.CallMode.SERVER}answer(e,t){super.answer(e,t);const n={mids:this.peerConnection.getMidKinds()};c.default.callRemoteFunction(s.RemoteFunction.acceptCall,this.settings.id,o.CallManager.cleanHeaders(t),n)}_traceName(){return"CallExServer"}}r([a.LogManager.d_trace(a.LogCategory.CALLEXSERVER)],u.prototype,"answer",null),t.CallExServer=u},9699:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallFailedUpdateReasons=void 0,t.CallFailedUpdateReasons={mediaOnHold:"Operation cannot be performed due to the call is not active",holdCallInWrongState:"Trying to make the call inactive in the wrong state",sameActiveState:e=>"Call already "+(e?"active":"inactive"),wrongTypeOfArgument:e=>`An argument for the sendVideo() method should be boolean type. Has received ${e}`}},308:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.CallManager=void 0;const i=n(2282),o=n(2957),a=n(3947),s=n(3385),l=n(1150),c=n(84),u=n(125),d=n(6746),g=n(4106),p=n(575),f=n(3421),h=n(8879),m=n(7272);var _=m.default.StreamManager;const v=n(6278),y=n(9411),C=n(304),E=n(8748),b=n(9574),S=n(4610),T=n(9553),D=n(245);class w extends y.AbstractCallManager{constructor(){super(),this._calls={},this.logger=l.LogManager.get().createLogger(l.LogCategory.SIGNALING,this._traceName()),D.default.setRPCHandler(p.RemoteEvent.handleIncomingConnection,(e,t,n,r,i,o)=>{this.handleIncomingConnection(e,t,n,r,i,o)}),D.default.setRPCHandler(p.RemoteEvent.handleConnectionConnected,(e,t,n,r,i)=>{this.handleConnectionConnected(e,t,n,i)}),D.default.setRPCHandler(p.RemoteEvent.handleRingOut,e=>{this.handleRingOut(e)}),D.default.setRPCHandler(p.RemoteEvent.stopRinging,e=>{this.stopRinging(e)}),D.default.setRPCHandler(p.RemoteEvent.handleTransferStarted,e=>{this.handleTransferStarted(e)}),D.default.setRPCHandler(p.RemoteEvent.handleTransferComplete,e=>{this.handleTransferComplete(e)}),D.default.setRPCHandler(p.RemoteEvent.handleTransferFailed,e=>{this.handleTransferFailed(e)}),D.default.setRPCHandler(p.RemoteEvent.handleReInvite,(e,t,n,r)=>{this.handleInReinvite(e,t,n,r)}),D.default.setRPCHandler(p.RemoteEvent.handleAcceptReinvite,(e,t,n,r)=>{this.handleReinvite(e,t,n,r)}),D.default.setRPCHandler(p.RemoteEvent.startEarlyMedia,(e,t,n,r)=>{const i=this.findCall(e,"startEarlyMedia");i&&(i.settings.hasEarlyMedia=!0),this.startEarlyMedia(e,t,n,r)})}static get(){return void 0===this.inst&&(this.inst=new w),this.inst}get calls(){return this._calls}getCallInstance(e,t,n,r){const i="3"==this.protocolVersion?new C.CallExMedia(e,t,n,r):new E.CallExServer(e,t,n,r);return this.endpointManagers.set(i,new b.default(i)),this._calls[e]=i,i}call(e){this.checkMaximumCallCount();let t={number:null,video:{sendVideo:!1,receiveVideo:!0},isAudio:!1,customData:null,extraHeaders:{},wiredLocal:!0,wiredRemote:!0,H264first:this._h264first,VP8first:!1,forceActive:!1,extraParams:{}},n=o.Utils.mixObjectToLeft(t,e);n=w.addCustomDataToHeaders(n);let r=o.Utils.generateUUID();if(this._calls[r])throw this.logger.error("Call "+r+" already exists"),new Error("Internal error");const i=this.getCallInstance(r,a.Authenticator.get().displayName,!1,n);n.H264first&&(i.rearangeCodecs=f.CodecSorterHelpers.H264Sorter);let l=!1;return i.settings.active=!0,Object.keys(this._calls).length>1&&!n.forceActive&&(i.setActiveForce(!1),l=!0),void 0===n.extraHeaders[s.Constants.DIRECT_CALL_HEADER]&&"2"==this.protocolVersion?D.default.callRemoteFunction(g.RemoteFunction.createCall,-1,n.number,n.video,r,null,null,n.extraHeaders,n.extraParams):c.PCFactory.get().setupDirectPC(r,d.PeerConnectionMode.P2P,e.video,l).then(e=>{if(i.peerConnection=c.PCFactory.get().peerConnections[r],this.checkCallStateAndClosePC(i))return;const t={mids:i.peerConnection.getMidKinds()};D.default.callRemoteFunction(g.RemoteFunction.createCall,-1,n.number,!0,r,null,null,n.extraHeaders,"",e.sdp,t)}).catch(e=>{this.handleConnectionFailed(i.id(),403,"Media access denied",{})}),i.sendVideo(n.video.sendVideo||!1).catch(()=>{}),i}callConference(e){var t;this.checkMaximumCallCount();let n={number:null,video:{sendVideo:!1,receiveVideo:!1},customData:null,extraHeaders:{},wiredLocal:!0,wiredRemote:!0,H264first:this._h264first,VP8first:!1,forceActive:!1,extraParams:{},simulcast:!1},r=o.Utils.mixObjectToLeft(n,e);r=w.addCustomDataToHeaders(r);let i=o.Utils.generateUUID();if(this._calls[i])throw this.logger.error("Call "+i+" already exists"),new Error("Internal error");const s=this.getCallInstance(i,a.Authenticator.get().displayName,!1,r);r.H264first&&(s.rearangeCodecs=f.CodecSorterHelpers.H264ConfSorter);let l=!1;s.settings.active=!0,s.settings.isConference=!0,Object.keys(this._calls).length>1&&!r.forceActive&&(s.setActiveForce(!1),l=!0);const u=c.PCFactory.get();if(null===(t=u.iceConfig)||void 0===t?void 0:t.iceServers){const e=u.iceConfig.iceServers.filter(({credential:e})=>!e);u.iceConfig.iceServers=e}return u.setupDirectPC(i,d.PeerConnectionMode.CONFERENCE,e.video,l).then(e=>{if(s.peerConnection=c.PCFactory.get().peerConnections[i],this.checkCallStateAndClosePC(s))return;const t={mids:s.peerConnection.getMidKinds()};D.default.callRemoteFunction(g.RemoteFunction.callConference,-1,r.number,!0,i,null,null,r.extraHeaders,"",e.sdp,t)}).catch(e=>{this.handleConnectionFailed(s.id(),403,"Media access denied",{})}),s.sendVideo(r.video.sendVideo||!1),this.confEpManagerMap.set(s,new T.ConferenceEndpointManager(s)),this.wsConfMap.set(s,new v.ConfSignaling(s)),s}getConferenceEndpointManager(e){return this.confEpManagerMap.get(e)}getConfSignaling(e){return this.wsConfMap.get(e)}isSDPHasVideo(e){const t=e.indexOf("m=video");if(-1===t)return!1;const n=e.indexOf("a=sendrecv",t),r=e.indexOf("a=sendonly",t),i=e.indexOf("m=",t);return-1!==n&&(n<i||-1===i)||-1!==r&&(r<i||-1===i)}transferCall(e,t){let n=[e,t];for(let e=0;e<n.length;e++){let t=this._calls[n[e].id()];if(!t)return void this.logger.error("trying to transfer unknown call "+t.id());if(t.stateValue!=S.CallState.CONNECTED)return void this.logger.error("trying to transfer call "+t.id()+" in state "+t.state())}D.default.callRemoteFunction(g.RemoteFunction.transferCall,e.id(),t.id())}async removeCall(e){var t,n;const r=this._calls[e];if(super.removeCall(e),(null==r?void 0:r.settings.isConference)&&(null==r?void 0:r.settings.mixedAudioTrackID)){const e=document.getElementById(r.settings.mixedAudioTrackID);e&&(null===(t=e.removeAttribute)||void 0===t||t.call(e,"src"),e.srcObject=null,null===(n=e.parentElement)||void 0===n||n.removeChild(e))}await m.default.StreamManager.get().updateLocalVideo(),Object.values(this._calls).some(e=>e.state()!==S.CallState.ENDED)||_.clearUmCache().then(()=>{this.logger.info("Streams from cache have been stopped.")})}setProtocolVersion(e){this.protocolVersion=e}useVideoSource(e){let t=Object.keys(this._calls).length;return new Promise((n,r)=>{for(let i in this._calls)if(this._calls.hasOwnProperty(i)){const o=this._calls[i];m.default.CameraManager.get().setCallVideoSettings(o,Object.assign(Object.assign({},m.default.CameraManager.get().getCallVideoSettings(o)),{cameraId:e})),m.default.StreamManager.get().updateCallStream(o).then(e=>{t--,t<=0&&n()},e=>{r(e)})}})}setVideoSettings(e){let t=Object.keys(this._calls).length;return new Promise((n,r)=>{0===t&&n();for(let i in this._calls)if(this._calls.hasOwnProperty(i)){const o=this._calls[i];m.default.CameraManager.get().setCallVideoSettings(o,m.default.CameraManager.legacyParamConverter(e)).then(e=>{t--,t<=0&&n()},e=>{r(e)})}})}useAudioSource(e){let t=Object.keys(this._calls).length;return new Promise((n,r)=>{0===t&&n();for(let i in this._calls)if(this._calls.hasOwnProperty(i)){const o=this._calls[i];m.default.AudioDeviceManager.get().setCallAudioSettings(o,Object.assign(Object.assign({},m.default.AudioDeviceManager.get().getCallAudioSettings(o)),{inputId:e})).then(e=>{t--,t<=0&&n()},e=>{r(e)})}})}handleIncomingConnection(e,t,n,r,i,o){if(this._calls[e])throw this.logger.error("Call "+e+" already exists"),new Error("Internal error");const a=h.SDPMuggle.detectDirections(i).some(e=>"video"===e.type&&("sendonly"===e.direction||"sendrecv"===e.direction));let s={number:t,extraHeaders:r,video:a,isAudio:!a,wiredLocal:!0,wiredRemote:!0,forceActive:!1};const l=this.getCallInstance(e,n,!0,s);this._h264first&&(l.rearangeCodecs=f.CodecSorterHelpers.H264Sorter);let d=!1;l.settings.active=!0,Object.keys(this._calls).length>1&&(l.setActiveForce(!1),d=!0);let g=[];h.SDPMuggle.checkIsVimsSectionExistsIn(i)&&!window.__VIIceServer__||(g=this.iceServers[e],h.SDPMuggle.checkIsVimsSectionExistsIn(i)||(l.settings.isDirect=!0));let p=i;l.settings.incoming&&(p=h.SDPMuggle.fixSetupSection(p)),l.settings.isDirect&&(p=h.SDPMuggle.recoverVideoFmts(p,this.logger)),c.PCFactory.get().incomeDirectPC(e,{receiveVideo:!0,sendVideo:!0},p,d,g).then(o=>{l.peerConnection=o,u.Client.getInstance().onIncomingCall(e,t,n,r,this.isSDPHasVideo(i))}),l.sysOn("AnswerAccepted",e=>{!l.settings.isConference&&o&&this.endpointManagers.get(l).setMIDInfo(o)}),this.handleConfirmingIncomingConnection(l)}handleConfirmingIncomingConnection(e){e.settings.state!==S.CallState.ENDED&&D.default.callRemoteFunction(g.RemoteFunction.confirmIncomingConnection,e.id())}handleRingOut(e){let t=this.findCall(e,"handleRingOut");t&&(u.Client.getInstance().playProgressTone(!0),t.onRingOut(),t.canStartSendingCandidates())}async handleConnectionConnected(e,t,n,r){let i=this.findCall(e,"handleConnectionConnected");if(i){this.logger.info(`handleConnectionConnected(), received SDP: \n${n}`),!i.settings.isConference&&r&&this.endpointManagers.get(i).setMIDInfo(r),this.patchAudioMixConf(i,r),n&&!h.SDPMuggle.checkIsVimsSectionExistsIn(n)&&(i.settings.isDirect=!0),i.signalingConnected=!0,i.canStartSendingCandidates(),i.onConnected(t,n);try{await m.default.StreamManager.get().updateLocalVideo()}catch(e){this.logger.error(`handleConnectionConnected(): updating local video has failed ${JSON.stringify(e)}`)}if(void 0!==n&&n.length>0){const e=n.indexOf("m=video");if(-1!==e){const t=n.indexOf("a=sendrecv",e),r=n.indexOf("a=sendonly",e),i=n.indexOf("a=recvonly",e),o=n.indexOf("a=inactive",e);-1===t&&-1===r&&-1===i&&-1===o&&(n+="a=inactive\r\n")}i.settings.hasEarlyMedia||i.peerConnection.processRemoteAnswer(t,n)}}}startEarlyMedia(e,t,n,r){let i=this.findCall(e,"startEarlyMedia");i&&(this.logger.info(`startEarlyMedia(), received SDP: \n${n}`),i.settings.hasEarlyMedia=!0,void 0!==n&&(i.peerConnection.processRemoteAnswer(t,n),!i.settings.isConference&&r)&&this.endpointManagers.get(i).setMIDInfo(r),u.Client.getInstance().stopProgressTone())}stopRinging(e){let t=this.findCall(e,"stopRinging");t&&(t.canStartSendingCandidates(),u.Client.getInstance().stopProgressTone(),t.onStopRinging())}handleTransferStarted(e){}handleTransferComplete(e){let t=this.findCall(e,"handleTransferComplete");t&&t.onTransferComplete()}handleTransferFailed(e){let t=this.findCall(e,"handleTransferFailed");t&&t.onTransferFailed()}async handleReinvite(e,t,n,r){let i=this.findCall(e,"handleReinvite");if(!i)return;!i.settings.isConference&&r&&i.active()&&await this.getEndpointManager(i).setMIDInfo(r);const o=this.isSDPHasVideo(n);let a=n;i.settings.isDirect&&(a=h.SDPMuggle.recoverVideoFmts(a,this.logger)),i.peerConnection.handleReinvite(t,a,o)}handleInReinvite(e,t,n,r){let o=this.findCall(e,"handleReinvite");o&&(this.logger.info(`handleInReinvite(), received SDP: \n${n}`),this.getEndpointManager(o).setMIDInfo(r).then(()=>{let e=n;o.settings.incoming&&(e=h.SDPMuggle.fixSetupSection(e)),o.settings.isDirect&&(e=h.SDPMuggle.recoverVideoFmts(e,this.logger)),o.runIncomingReInvite(t,e),o.dispatchEvent({name:i.CallEvents.PendingUpdate,result:!0,call:o})}))}checkCallStateAndClosePC(e){const t=e.state();return(t===S.CallState.STOPPING||t===S.CallState.ENDED)&&(this.logger.info(`Call ${e.id()} in ${t} state. PeerConnection will be closed.`),e.peerConnection.close(),!0)}findCall(e,t){let n=this._calls[e];return""===e&&(n=this._calls[Object.keys(this._calls)[0]]),void 0===n?null:n}recalculateNumCalls(){this._numCalls=0;for(let e in this._calls)this._calls.hasOwnProperty(e)&&this._numCalls++}icerestart(){Object.values(this._calls).forEach(e=>{let t=e.peerConnection.impl.iceConnectionState;this.logger.info(`ICE connection state is ${t} for call ${e.id()}`),e.settings.isDirect&&e.settings.incoming||"stable"!==e.peerConnection.impl.signalingState||"failed"!==t&&"disconnected"!==t||e.peerConnection._runReinvite(!0)})}_traceName(){return"CallManager"}}r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"call",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"removeCall",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"useVideoSource",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"setVideoSettings",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"useAudioSource",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleIncomingConnection",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleRingOut",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleConnectionConnected",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"stopRinging",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleTransferStarted",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleTransferComplete",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleTransferFailed",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleReinvite",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"handleInReinvite",null),r([l.LogManager.d_trace(l.LogCategory.CALLMANAGER)],w.prototype,"findCall",null),t.CallManager=w},8237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallPromiseResolver=void 0;class n{static add(e,t){const n=this.callPromisesMap.get(e)||[];this.callPromisesMap.set(e,n.concat(t)),this.setCallPromiseTimeout(e,t)}static remove(e){const t=this.callPromisesMap.get(e);if(t){this.callPromisesMap.delete(e);for(const e of t)this.clearCallPromiseTimeout(e)}}static resolve(e){var t;const n=this.callPromisesMap.get(e);if(n){for(const e of n){const n=null===(t=e.dispatchEvent)||void 0===t?void 0:t.call(e,!0);e.resolve(n)}this.remove(e)}}static reject(e,t){var n;const r=this.callPromisesMap.get(e);if(r){for(const e of r){const r=null===(n=e.dispatchEvent)||void 0===n?void 0:n.call(e,!1,t);e.reject(r)}this.remove(e)}}static setCallPromiseTimeout(e,t){const n=setTimeout(()=>{this.reject(e,"Handling a reinvite has timed out")},3e3);this.timeoutIdMap.set(t,n)}static clearCallPromiseTimeout(e){const t=this.timeoutIdMap.get(e);t&&(clearTimeout(t),this.timeoutIdMap.delete(e))}}t.CallPromiseResolver=n,n.callPromisesMap=new WeakMap,n.timeoutIdMap=new WeakMap},9144:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Endpoint=void 0;const r=n(3576),i=n(8597),o=n(1150);class a extends r.EventTarget{constructor(e=!0){super(),this.isDefault=e,this.sipUri="",this.displayName="",this.userName="",this.wasAdded=!1,this.mediaRenderers=[],this.addDefaultEventListener(i.EndpointEvents.RemoteMediaAdded,e=>{e.mediaRenderer.renderDefault()}),this.logger=o.LogManager.get().createLogger(o.LogCategory.ENDPOINT,`${this._traceName()} ${this.id}`)}enableAll(){this.mediaRenderers.map(e=>e.enable())}disableAll(){this.mediaRenderers.map(e=>e.disable())}useAudioOutput(e){this.logger.info(`useAudioOutput(${e})`),this.mediaRenderers&&this.mediaRenderers.forEach(t=>t.useAudioOutput(e))}updateInfo(e){this.place=e.place,this.sipUri=e.sipURI,this.displayName=e.displayName,this.userName=e.username}_traceName(){return"Endpoint"}}t.Endpoint=a},8597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointEvents=void 0,function(e){e.InfoUpdated="InfoUpdated",e.Removed="Removed",e.RemoteMediaAdded="RemoteMediaAdded",e.RemoteMediaRemoved="RemoteMediaRemoved",e.RemoteMediaUpdated="RemoteMediaUpdated",e.RTCStatsReceived="RTCStatsReceived",e.VoiceStart="VoiceStart",e.VoiceEnd="VoiceEnd",e.MediaRenderDisabled="MediaRenderDisabled",e.MediaRenderEnabled="MediaRenderEnabled"}(t.EndpointEvents||(t.EndpointEvents={}))},9574:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});const i=n(9144),o=n(3992),a=n(2282),s=n(8597),l=n(7222),c=n(8707),u=n(308);class d{constructor(e){this.call=e,this.transceiverBucket=[],this.displayRules={new:{audio:["default"],video:["default"]}},this.transceiverEndpointHashMap=new WeakMap,this.activeEndpoints=new Map,this.activeMR=new Map,this.mutex=new o.TaskMutex,this.endpointInfo={endpoints:{},reinviteCauses:[]}}setDisplayRules(e){throw new Error("not implemented")}setMIDInfo(e){const t=JSON.parse(e);t.endpoints[""]&&(t.endpoints[this.call.id()]=t.endpoints[""],delete t.endpoints[""]);const n=this.diffEndpoints(t);this.endpointInfo=t;for(let e in n.added)n.added.hasOwnProperty(e)&&this.constructEndpoint(e,n.added[e]);for(let e in n.removed)n.removed.hasOwnProperty(e)&&this.destructEndpoint(e);for(let e in n.changed)if(n.changed.hasOwnProperty(e)){const r=this.activeEndpoints.get(e);for(let i in n.changed[e].midDiff.added)n.changed[e].midDiff.added.hasOwnProperty(i)&&this.transceiverBucket.forEach(n=>{n.mid===i&&this.createNewMR(n,r,t.endpoints[e].mids)});for(let i in n.changed[e].midDiff.changed)if(n.changed[e].midDiff.changed.hasOwnProperty(i)){const o=this.activeMR.get(i);o?(o.kind=n.changed[e].midDiff.changed[i],r.dispatchEvent({name:s.EndpointEvents.RemoteMediaUpdated,call:this.call,endpoint:r,mediaRenderer:o})):this.transceiverBucket.forEach(n=>{n.mid===i&&this.createNewMR(n,r,t.endpoints[e].mids)})}for(let i in n.changed[e].midDiff.removed)if(n.changed[e].midDiff.removed.hasOwnProperty(i)){let n=t.endpoints[e].mids;if("ViewerCall"===this.call._traceName()&&Object.keys(n).find(e=>"audio"===n[e])){const e=this.activeMR.get(i);e&&(e.kind="audio",e.stream.getVideoTracks().forEach(t=>{t.stop(),e.stream.removeTrack(t)}),this.activeMR.delete(i)),r.dispatchEvent({name:s.EndpointEvents.RemoteMediaUpdated,call:this.call,endpoint:r,mediaRenderer:e})}else{const e=this.activeMR.get(i);this.removeMediaRenderer(r,e),this.activeMR.delete(i)}}}}updateTransceiver(e){if(!e.mid)return;this.transceiverBucket.find(t=>t===e)||this.transceiverBucket.push(e);const t=this.searchEndpointByMid(e.mid);t&&this.createNewMR(e,t.endpoint,t.mids)}getEndpointInfo(){return this.endpointInfo}destructEndpoint(e){const t=this.activeEndpoints.get(e);t&&(t.mediaRenderers.forEach(e=>{t.dispatchEvent({name:s.EndpointEvents.RemoteMediaRemoved,call:this.call,endpoint:t,mediaRenderer:e}),e.mids.forEach(e=>this.activeMR.delete(e)),e.clear()}),this.activeEndpoints.delete(e),t.dispatchEvent({name:s.EndpointEvents.Removed,call:this.call,endpoint:t}),this.call.dispatchEvent({name:a.CallEvents.EndpointRemoved,call:this.call,endpoint:t}))}makeMids(e){const t={};return c.default.parse(e).media.forEach((e,n)=>{const r=e.attr.find(e=>"mid"===e.name);t[r?r.value:n]=e.descr.media}),{endpoints:{[this.call.id()]:{place:0,type:"call",mids:t}},reinviteCauses:[]}}constructEndpoint(e,t,n=!1){const r=new i.Endpoint(n);let o;r.id=e,o=this.call.settings.isConference?this.getDataForConference({id:e,place:t.place}):{id:e,place:t.place,displayName:this.call.settings.displayName,sipURI:"",username:""},r.updateInfo(o),this.activeEndpoints.set(e,r),this.call.dispatchEvent({name:a.CallEvents.EndpointAdded,endpoint:r,call:this.call}),this.transceiverBucket.forEach(e=>this.updateTransceiver(e))}getDataForConference({id:e,place:t}){const n={id:e,place:t,displayName:"",sipURI:"",username:""},r=this.endpointInfo.reinviteCauses.find(t=>t.id===e);return r&&(r.displayName&&(n.displayName=r.displayName),r.sipURI&&(n.sipURI=r.sipURI),r.username&&(n.username=r.username)),n}diffMids(e,t){const n={added:{},changed:{},removed:{},unchanged:{}};let r=!1;for(let i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?e[i]!==t[i]?(n.changed[i]=t[i],r=!0):n.unchanged[i]=t[i]:(n.added[i]=t[i],r=!0));for(let i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(n.removed[i]=e[i],r=!0);return{result:r,diff:n}}searchEndpointByMid(e){for(let t in this.endpointInfo.endpoints)if(this.endpointInfo.endpoints.hasOwnProperty(t)&&this.endpointInfo.endpoints[t].mids[e])return{endpoint:this.activeEndpoints.get(t),mids:this.endpointInfo.endpoints[t].mids};return null}getEndpoints(){return Array.from(this.activeEndpoints.values())}diffEndpoints(e){const t={added:{},changed:{},removed:{},unchanged:{}};for(let n in e.endpoints)if(e.endpoints.hasOwnProperty(n))if(this.endpointInfo.endpoints.hasOwnProperty(n)){const r=this.diffMids(this.endpointInfo.endpoints[n].mids,e.endpoints[n].mids);r.result?t.changed[n]=Object.assign(Object.assign({},e.endpoints[n]),{midDiff:r.diff}):t.unchanged[n]=e.endpoints[n]}else t.added[n]=e.endpoints[n];for(let n in this.endpointInfo.endpoints)this.endpointInfo.endpoints.hasOwnProperty(n)&&!e.endpoints.hasOwnProperty(n)&&(t.removed[n]=this.endpointInfo.endpoints[n]);return t}createNewMR(e,t,n){if(!e.mid)return;this.transceiverEndpointHashMap.set(e,t);const r=this.mediaRendererFabric(e,n);r&&(r.conferenceEpManagerUpdateState=()=>{var e;null===(e=u.CallManager.get().getConferenceEndpointManager(this.call))||void 0===e||e.updateState()},r.conferenceEpManagerUpdateRenderSize=()=>{var e;null===(e=u.CallManager.get().getConferenceEndpointManager(this.call))||void 0===e||e.updateRenderSize()},this.activeMR.set(e.mid,r),t.mediaRenderers.push(r),t.dispatchEvent({name:s.EndpointEvents.RemoteMediaAdded,call:this.call,endpoint:t,mediaRenderer:r}))}mediaRendererFabric(e,t){if(e.mid){if(this.activeMR.has(e.mid))return null;if("ViewerCall"!==this.call._traceName())return new l.MediaRenderer({stream:new MediaStream([e.receiver.track]),kind:t[e.mid],transceivers:[e],mids:[e.mid]});{const n=Object.keys(t),r=this.transceiverBucket.filter(e=>n.includes(e.mid));if("audio"===t[e.mid])return n.length>r.length?null:2===n.length&&n.length===r.length?new l.MediaRenderer({stream:new MediaStream([r[0].receiver.track,r[1].receiver.track]),kind:"video",transceivers:[r[0],r[1]],mids:[r[0].mid,r[1].mid]}):new l.MediaRenderer({stream:new MediaStream([e.receiver.track]),kind:"audio",transceivers:[e],mids:[e.mid]});if("video"===t[e.mid]||"sharing"===t[e.mid]){let i=n.find(e=>"audio"===t[e]),o=this.activeMR.get(i),a=r.find(e=>e.mid===i);if(o&&o.element instanceof HTMLVideoElement)return o.kind="video",o.stream.addTrack(e.receiver.track),o.element.srcObject=o.stream,o.transceivers=[e,a],o.mids=[e.mid,a.mid],o;if(o){let n=this.transceiverEndpointHashMap.get(e);this.removeMediaRenderer(n,o);const r=new l.MediaRenderer({stream:new MediaStream([a.receiver.track,e.receiver.track]),kind:t[e.mid],transceivers:[e],mids:[e.mid]});return this.activeMR.set(i,r),r}if(!o&&r.find(e=>e.mid===i)){const n=new l.MediaRenderer({stream:new MediaStream([a.receiver.track,e.receiver.track]),kind:t[e.mid],transceivers:[e],mids:[e.mid]});return this.activeMR.set(i,n),n}return new l.MediaRenderer({stream:new MediaStream([e.receiver.track]),kind:t[e.mid],transceivers:[e],mids:[e.mid]})}}}}removeMediaRenderer(e,t){e.mediaRenderers=e.mediaRenderers.filter(e=>e.id!==t.id),e.dispatchEvent({name:s.EndpointEvents.RemoteMediaRemoved,call:this.call,endpoint:e,mediaRenderer:t}),t.clear()}}r([(0,o.queueDecorator)()],d.prototype,"setDisplayRules",null),r([(0,o.queueDecorator)()],d.prototype,"setMIDInfo",null),r([(0,o.queueDecorator)()],d.prototype,"updateTransceiver",null),t.default=d},6497:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.SharingCall=void 0;const i=n(1150),o=n(3947),a=n(3902),s=n(4610),l=n(3385),c=n(245),u=n(4106),d=n(125),g=n(575),p=n(3869);class f extends s.AbstractCall{constructor(e,t){super(e),this.signalingConnected=!1,this.settings={id:e,displayName:o.Authenticator.get().displayName,mode:s.CallMode.P2P,number:t.number,video:{sendVideo:!0,receiveVideo:!1},customData:null,extraHeaders:t.extraHeaders,wiredLocal:!0,wiredRemote:!0,H264first:!0,VP8first:!1,forceActive:!1,usedSinkId:null,extraParams:{},active:!0,state:s.CallState.PROGRESSING,audioDirections:{sendAudio:t.audioDirections.sendAudio},videoDirections:{sendVideo:!0,receiveVideo:!1},hasEarlyMedia:!1,incoming:!1,simulcast:!1,isConference:!0,simulcastProfileName:"general"};const n=new RTCPeerConnection;let r;n?this.getNewScreenSharing().then(t=>{if(null!==t.stream){const i=t.stream.getVideoTracks()[0],o=t.stream.getAudioTracks()[0]||"audio";n.addTransceiver(o,{direction:"sendonly",streams:[t.stream]}),n.addTransceiver(i,{direction:"sendonly",streams:[t.stream]}),n.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!1}).then(e=>(r=e,n.setLocalDescription(e))).then(()=>{this.peerConnection=n,c.default.callRemoteFunction(u.RemoteFunction.callConference,-1,this.settings.number,!0,e,null,null,this.settings.extraHeaders,"",r.sdp,{mids:{0:"audio",1:"sharing"}})}).catch(()=>{this.handleConnectionFailed(1001,"",{})})}else this.handleConnectionFailed(1001,"",{})}):this.handleConnectionFailed(1001,"",{}),this.setHandlers()}getEndpoints(){return[]}getNewScreenSharing(){return new Promise((e,t)=>{p.default.getScreenMedia(this.settings.audioDirections.sendAudio).then(t=>{const n={stream:t,renderer:null};t.getTracks().forEach(e=>{e.onended=()=>{this.hangup()}}),e(n)}).catch(e=>{this.logger.error(`Media access denied: ${e?e.message||e.name||e:"unknown"}`),t(e)})})}setHandlers(){c.default.setRPCHandler(g.RemoteEvent.handleRejectReinvite,(e,t,n)=>{e===this.settings.id&&this.handleRejectReinvite()}),c.default.setRPCHandler(g.RemoteEvent.handleConnectionDisconnected,(e,t,n)=>{e===this.settings.id&&this.handleConnectionDisconnected(e,t,n)}),c.default.setRPCHandler(g.RemoteEvent.handleConnectionFailed,(e,t,n,r)=>{e===this.settings.id&&this.handleConnectionFailed(t,n,r)}),c.default.setRPCHandler(g.RemoteEvent.handleSIPInfo,(e,t,n,r,i)=>{e===this.settings.id&&this.handleSIPInfo(t,n,r,i)}),c.default.setRPCHandler(g.RemoteEvent.handleConnectionConnected,(e,t,n)=>{e===this.settings.id&&this.handleConnectionConnected(t,n)}),c.default.setRPCHandler(g.RemoteEvent.handleReInvite,(e,t,n)=>{e===this.settings.id&&this.handleInReinvite(t,n)}),c.default.setRPCHandler(g.RemoteEvent.handleAcceptReinvite,(e,t,n)=>{e===this.settings.id&&this.handleReinvite(n)})}handleRejectReinvite(){this.dispatchEvent({code:20,call:this})}handleInReinvite(e,t){return new Promise(n=>{this.logger.info(`handleInReinvite(), received SDP: \n${t}`);const r=new RTCSessionDescription({sdp:t,type:"offer"});this.peerConnection.setRemoteDescription(r).then(()=>this.peerConnection.createAnswer()).then(t=>{this.peerConnection.setLocalDescription(t).then(()=>{this.restoreRMute(),c.default.callRemoteFunction(u.RemoteFunction.acceptReInvite,this.settings.id,e,t.sdp,{mids:{0:"audio",1:"sharing"}}),n()})}).catch(e=>{this.dispatchEvent({name:"SDP",origin:"handleInReinvite",sdp:this.peerConnection.localDescription,description:`answer_reject: ${e.message}`}),this.logger.error(e),n()})})}handleConnectionConnected(e,t){return new Promise(n=>{this.logger.info(`handleConnectionConnected(), received SDP: \n${t}`),void 0!==t&&"have-local-offer"===this.peerConnection.signalingState?(this.signalingConnected=!0,this.onConnected(e,t),this.processRemoteAnswer(t).then(()=>n()).catch(e=>{this.logger.error(e),n()})):(this.logger.error(`handleConnectionConnected: Wrong connection state ${this.peerConnection.signalingState} or empty SDP`),n())})}handleConnectionDisconnected(e,t,n){d.Client.getInstance().stopProgressTone(),this.peerConnection.getTransceivers().forEach(e=>{const t=e.sender.track;e.sender.replaceTrack(null).then(()=>{t&&(t.onended=null,t.onmute=null,t.stop()),e.direction="inactive"})}),this.onDisconnected(t,n).catch(t=>{this.logger.error(`Cannot remove the call ${e}: ${t.message}`)})}handleSIPInfo(e,t,n,r){this.onInfo(this,e,t,n,r)}handleReinvite(e){return new Promise(t=>{this.logger.info(`handleReinvite(), received SDP: \n${e}`),this.processRemoteAnswer(e).then(()=>t()).catch(e=>{this.logger.error(e),t()})})}handleConnectionFailed(e,t,n){d.Client.getInstance().stopProgressTone(),this.onFailed(e,t,n)}onDisconnected(e,t){return new Promise((n,r)=>{this._setState(s.CallState.ENDED),this.dispatchEvent({name:"Disconnected",call:this,headers:e,params:t}),n(!0)})}onInfo(e,t,n,r,i){return t+"/"+n==l.Constants.ZINGAYA_IM_MIME_TYPE?this.dispatchEvent({name:"onSendMessage",call:this,text:r}):this.dispatchEvent({name:"InfoReceived",call:this,body:r,headers:i,mimeType:t+"/"+n}),!0}processRemoteAnswer(e){return new Promise((t,n)=>{if(void 0!==e&&e.length>0){let r={sdp:e,type:a.RTCSdpType.answer};this.peerConnection.setRemoteDescription(r).then(()=>{this.restoreRMute(),t()}).catch(e=>{this.dispatchEvent({name:"SDP",origin:"_processRemoteAnswer",sdp:this.peerConnection.localDescription,description:`answer_reject: ${e.message}`}),n(e)})}else n()})}_traceName(){return"ViewerCall"}}r([i.LogManager.d_trace(i.LogCategory.CALL)],f.prototype,"handleConnectionFailed",null),r([i.LogManager.d_trace(i.LogCategory.CALL)],f.prototype,"onDisconnected",null),t.SharingCall=f},4211:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6497),i=n(2957),o=n(4610),a=n(2282),s=n(1150);class l{constructor(){this.calls=new Map,this.logger=s.LogManager.get().createLogger(s.LogCategory.SIGNALING,"SharingCallManager")}static get(){var e;return null!==(e=this.inst)&&void 0!==e||(this.inst=new l),this.inst}findCall(e){return this.calls.get(e)}call(e){const t=i.Utils.generateUUID(),n=new r.SharingCall(t,e);return this.calls.set(t,n),n}removeCall(e){this.calls.delete(e)}async hangupAllCalls(){const e=Array.from(this.calls.values()).map(e=>new Promise(t=>{const n=setTimeout(()=>{this.logger.info(`The timeout of disconnected event for the call ${e.id()} has reached.`),this.removeCall(e.id()),e.settings.state=o.CallState.ENDED,t()},1500);e.on(a.CallEvents.Disconnected,()=>{clearTimeout(n),t()},{once:!0}),e.hangup()}));await Promise.all(e)}}t.default=l},8582:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerCall=void 0;const i=n(1150),o=n(3947),a=n(9774),s=n(3902),l=n(4610),c=n(3385);class u extends l.AbstractCall{constructor(e,t){super(e),this.signalingConnected=!1,this.settings={id:e,displayName:o.Authenticator.get().displayName,mode:l.CallMode.P2P,number:t.number,video:{sendVideo:!1,receiveVideo:!0},customData:null,extraHeaders:t.extraHeaders,wiredLocal:!0,wiredRemote:!0,H264first:!0,VP8first:!1,forceActive:!1,usedSinkId:null,extraParams:{},active:!0,state:l.CallState.PROGRESSING,audioDirections:{sendAudio:!1},videoDirections:{sendVideo:!1,receiveVideo:!0},hasEarlyMedia:!1,incoming:!1,simulcast:!1,isConference:!0,simulcastProfileName:"general"}}getEndpoints(){return a.ViewerManager.get().getEndpointManager(this).getEndpoints()}onDisconnected(e,t){return new Promise((n,r)=>{this._setState(l.CallState.ENDED);const i=a.ViewerManager.get().getEndpointManager(this);i.getEndpoints().forEach(e=>{i.destructEndpoint(e.id)}),this.dispatchEvent({name:"Disconnected",call:this,headers:e,params:t}),n(!0)})}onInfo(e,t,n,r,i){return t+"/"+n==c.Constants.ZINGAYA_IM_MIME_TYPE?this.dispatchEvent({name:"onSendMessage",call:this,text:r}):this.dispatchEvent({name:"InfoReceived",call:this,body:r,headers:i,mimeType:t+"/"+n}),!0}processRemoteAnswer(e){return new Promise((t,n)=>{if(void 0!==e&&e.length>0){let r={sdp:e,type:s.RTCSdpType.answer};this.peerConnection.setRemoteDescription(r).then(()=>{this.restoreRMute(),t()}).catch(e=>{this.dispatchEvent({name:"SDP",origin:"_processRemoteAnswer",sdp:this.peerConnection.localDescription,description:`answer_reject: ${e.message}`}),n(e)})}else n()})}_traceName(){return"ViewerCall"}}r([i.LogManager.d_trace(i.LogCategory.CALL)],u.prototype,"onDisconnected",null),t.ViewerCall=u},9774:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerManager=void 0;const i=n(1150),o=n(2957),a=n(4106),s=n(575),l=n(9411),c=n(8582),u=n(9574),d=n(3992),g=n(245),p=n(9553),f=n(6278);class h extends l.AbstractCallManager{constructor(){super(),this.peerConnectionManagers=new WeakMap,this.mutex=new d.TaskMutex,this._calls={},this.logger=i.LogManager.get().createLogger(i.LogCategory.SIGNALING,this._traceName()),g.default.setRPCHandler(s.RemoteEvent.handleConnectionConnected,(e,t,n,r,i)=>{this.handleConnectionConnected(e,t,n,i)}),g.default.setRPCHandler(s.RemoteEvent.handleReInvite,(e,t,n,r)=>{this.handleInReinvite(e,t,n,r)}),g.default.setRPCHandler(s.RemoteEvent.handleAcceptReinvite,(e,t,n)=>{this.handleReinvite(e,t,n)}),g.default.setRPCHandler(s.RemoteEvent.startEarlyMedia,(e,t,n)=>{this.startEarlyMedia(e,t,n)})}static get(){return void 0===this.inst&&(this.inst=new h),this.inst}get calls(){return this._calls}joinAsViewer(e){let t=o.Utils.generateUUID();if(this._calls[t])throw this.logger.error("Call "+t+" already exists"),new Error("Internal error");const n=new c.ViewerCall(t,e);this._calls[t]=n;const r=h.get().calls[t],i=new RTCPeerConnection;let s;return i.addEventListener("track",e=>this.onAddTrack(e,n)),i?(i.addTransceiver("audio",{direction:"recvonly"}),i.addTransceiver("video",{direction:"recvonly"}),i.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(e=>(s=e,i.setLocalDescription(e))).then(()=>{n.peerConnection=i,this.endpointManagers.set(n,new u.default(n)),g.default.callRemoteFunction(a.RemoteFunction.callConference,-1,n.settings.number,!0,t,null,null,n.settings.extraHeaders,"",s.sdp)}).catch(()=>{h.get().handleConnectionFailed(r.settings.id,1001,"",{})})):h.get().handleConnectionFailed(r.settings.id,1001,"",{}),this.confEpManagerMap.set(n,new p.ConferenceEndpointManager(n)),this.wsConfMap.set(n,new f.ConfSignaling(n)),n}getConferenceEndpointManager(e){return this.confEpManagerMap.get(e)}getConfSignaling(e){return this.wsConfMap.get(e)}_traceName(){return"ViewerManager"}findCall(e,t){let n=this._calls[e];return""===e&&(n=this._calls[Object.keys(this._calls)[0]]),void 0===n?null:n}handleConnectionConnected(e,t,n,r){return new Promise(i=>{let o=this.findCall(e,"handleConnectionConnected");o?(this.logger.info(`handleConnectionConnected(), received SDP: \n${n}`),this.patchAudioMixConf(o,r),void 0!==n&&"have-local-offer"===o.peerConnection.signalingState?(o.signalingConnected=!0,o.onConnected(t,n),o.processRemoteAnswer(n).then(()=>i()).catch(e=>{this.logger.error(e),i()})):(this.logger.error(`handleConnectionConnected: Wrong connection state ${o.peerConnection.signalingState} or empty SDP`),i())):i()})}startEarlyMedia(e,t,n){return new Promise(t=>{let r=this.findCall(e,"startEarlyMedia");r?(this.logger.info(`startEarlyMedia(), received SDP: \n${n}`),void 0!==n&&"have-local-offer"===r.peerConnection.signalingState?(r.settings.hasEarlyMedia=!0,r.processRemoteAnswer(n).then(()=>t()).catch(e=>{this.logger.error(e),t()})):(this.logger.error(`handleConnectionConnected: Wrong connection state ${r.peerConnection.signalingState} or empty SDP`),t())):t()})}handleReinvite(e,t,n){return new Promise(t=>{let r=this.findCall(e,"handleReinvite");r?(this.logger.info(`handleReinvite(), received SDP: \n${n}`),r.processRemoteAnswer(n).then(()=>t()).catch(e=>{this.logger.error(e),t()})):t()})}handleInReinvite(e,t,n,r){return new Promise(i=>{const o=this.findCall(e,"handleInReinvite");o?(this.logger.info(`handleInReinvite(), received SDP: \n${n}`),this.getEndpointManager(o).setMIDInfo(r).then(()=>{const e=new RTCSessionDescription({sdp:n,type:"offer"});return o.peerConnection.setRemoteDescription(e)}).then(()=>o.peerConnection.createAnswer()).then(e=>{o.peerConnection.setLocalDescription(e).then(()=>{o.restoreRMute(),g.default.callRemoteFunction(a.RemoteFunction.acceptReInvite,o.settings.id,t,e.sdp),i()})}).catch(e=>{o.dispatchEvent({name:"SDP",origin:"handleInReinvite",sdp:o.peerConnection.localDescription,description:`answer_reject: ${e.message}`}),this.logger.error(e),i()})):i()})}onAddTrack(e,t){if(t){const n=h.get().getEndpointManager(t);n&&n.updateTransceiver(e.transceiver)}}}r([i.LogManager.d_trace(i.LogCategory.CALLMANAGER)],h.prototype,"findCall",null),r([(0,d.queueDecorator)()],h.prototype,"handleConnectionConnected",null),r([(0,d.queueDecorator)()],h.prototype,"startEarlyMedia",null),r([(0,d.queueDecorator)()],h.prototype,"handleReinvite",null),r([(0,d.queueDecorator)()],h.prototype,"handleInReinvite",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],h.prototype,"onAddTrack",null),t.ViewerManager=h},787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchUpdatedEvent=void 0;const r=n(2282);t.dispatchUpdatedEvent=(e,t,n)=>{var i;const o=Object.assign({name:r.CallEvents.Updated,result:t,call:e},n&&{reason:n});return null===(i=null==e?void 0:e.dispatchEvent)||void 0===i||i.call(e,o),o}},125:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const i=n(7998),o=n(141),a=n(2957),s=n(3947),l=n(3869),c=n(1150),u=n(84),d=n(308),g=n(3576),p=n(4106),f=n(575),h=n(6230),m=n(209),_=n(7272),v=n(9091),y=n(2089),C=n(304),E=n(8582),b=n(9774),S=n(245),T=n(6081),D=n(4211),w=n(4007),O=n(8879),A=n(164),M=n(4893);class I extends g.EventTarget{constructor(){if(super(),this._connected=!1,this.progressToneScript={US:"440@-19,480@-19;*(2/4/1+2)",RU:"425@-19;*(1/3/1)"},this.playingNow=!1,this.serversList=[],this.level=100,this.micRequired=!1,this.videoConstraints=null,this.progressToneCountry="US",this.progressTone=!0,this.node=i.ConnectionNode.NODE_1,this.enableTrace=!1,this.showDebugInfo=!1,this.showWarnings=!1,this.RTCsupported=!1,this._deviceEnumAPI=!1,this._h264first=!1,this._VP8first=!1,this.limitVCodecs=void 0,this.limitACodecs=void 0,this._alreadyInitialized=!1,I.instance)throw new Error("Error - use Voximplant.getInstance()");I.instance=this,this._promises={},l.default.init(),u.PCFactory.get().requireMedia=!1,this.voxCallManager=d.CallManager.get(),this.voxViewerManager=b.ViewerManager.get(),this.setLogLevelAll(c.LogLevel.NONE),S.default.setRPCHandler(f.RemoteEvent.onPCStats,(e,t)=>{u.PCFactory.get().getPeerConnect(e)&&this.dispatchEvent({name:"NetStatsReceived",stats:t})}),this.logger=c.LogManager.get().createLogger(c.LogCategory.CLIENT,this._traceName()),this._defaultSinkId=null,this.loginState=A.LoginState.LOGGED_OFF}get version(){return"4.7.6-2772"}static getInstance(){return void 0===I.instance&&(I.instance=new I),I.instance}playProgressTone(e=!1){(!e||e&&this.progressTone)&&null!==this.progressToneScript[this.progressToneCountry]&&(this.playingNow||this.playToneScript(this.progressToneScript[this.progressToneCountry]),this.playingNow=!0)}stopProgressTone(){this.playingNow&&(this.stopPlayback(),this.playingNow=!1)}onIncomingCall(e,t,n,r,i){this.dispatchEvent({name:o.Events.IncomingCall,call:d.CallManager.get().calls[e],headers:r,video:i})}get alreadyInitialized(){return this._alreadyInitialized}init(e){return new Promise(async(t,n)=>{this.alreadyInitialized&&n(new Error("WebSDK already initialized")),this._alreadyInitialized=!0,this._config=void 0!==e?e:{},void 0!==this._config.progressToneCountry&&(this.progressToneCountry=this._config.progressToneCountry),!0!==this._config.progressTone&&(this.progressTone=!1),void 0!==this._config.serverIp&&(this.serverIp=this._config.serverIp),void 0!==this._config.node&&(this.node=this._config.node),void 0!==this._config.enableTrace&&(this.enableTrace=this._config.enableTrace),void 0!==this._config.showDebugInfo&&(this.showDebugInfo=this._config.showDebugInfo),!1!==this._config.showWarnings&&(this.showWarnings=!0),"string"==typeof this._config.videoContainerId&&(this.remoteVideoContainerId=this._config.videoContainerId),"string"==typeof this._config.remoteVideoContainerId&&(this.remoteVideoContainerId=this._config.remoteVideoContainerId),"string"==typeof this._config.localVideoContainerId&&(this.localVideoContainerId=this._config.localVideoContainerId),!1!==this._config.micRequired&&(this.micRequired=!0),void 0!==this._config.videoSupport?this.videoSupport=this._config.videoSupport:this.videoSupport=!1,void 0===this._config.queueType&&(this._config.queueType=i.QueueTypes.ACD),void 0!==this._config.H264first&&(this._h264first=this._config.H264first,d.CallManager.get()._h264first=this._h264first),void 0!==this._config.VP8first&&(this._VP8first=this._config.VP8first);const r=Number(this._config.rtcStatsCollectionInterval);if(isNaN(r)?d.CallManager.get().rtcStatsCollectionInterval=M.DEFAULT_COLLECT_INTERVAL:d.CallManager.get().rtcStatsCollectionInterval=r>0?Math.max(a.Utils.floorTo(r,500),M.MIN_COLLECT_INTERVAL):0,void 0!==I.getInstance().config().experiments&&void 0!==I.getInstance().config().experiments.rtcStatsInquiryInterval?d.CallManager.get().rtcStatsInquiryInterval=I.getInstance().config().experiments.rtcStatsInquiryInterval:d.CallManager.get().rtcStatsInquiryInterval=500,!this._config.protocolVersion||"2"!==this._config.protocolVersion&&"3"!==this._config.protocolVersion?this._callProtocolVersion="3":(this._callProtocolVersion=this._config.protocolVersion,d.CallManager.get().setProtocolVersion(this._callProtocolVersion)),this._config.prettyPrint&&c.LogManager.get().setPrettyPrint(this._config.prettyPrint),this.showWarnings&&this.setLogLevelAll(c.LogLevel.WARNING),this.showDebugInfo&&this.setLogLevelAll(c.LogLevel.INFO),this.enableTrace&&this.setLogLevelAll(c.LogLevel.TRACE),this.logger.info(`SDK version: ${this.version}`),this.logger.info(`init(${JSON.stringify(this._config)})`),["node"].filter(t=>void 0===(null==e?void 0:e[t])).forEach(e=>{this.logger.warning(`Option "${e}" is missing in init config. It is required in the next release. For more details see https://voximplant.com/docs/getting-started/platform/web#initialize-the-sdk`)}),!window.isSecureContext){const e="getUserMedia() and other APIs required for the access to the user media devices are not available on insecure origins. You need to switch the application to a secure origin, such as HTTPS.";throw this.logger.error(e),Error(e)}if(this._config.experiments&&this._config.experiments.ignorewebrtc)this.RTCsupported=!0;else if("undefined"!=typeof webkitRTCPeerConnection||void 0!==this.mozRTCPeerConnection||"undefined"!=typeof RTCPeerConnection||"undefined"!=typeof RTCIceGatherer)if("undefined"!=typeof mozRTCPeerConnection)try{new mozRTCPeerConnection({iceServers:[]}),this.RTCsupported=!0}catch(e){}else this.RTCsupported=!0;if(!this.RTCsupported)throw n(new Error("NO_WEBRTC_SUPPORT")),new Error("NO_WEBRTC_SUPPORT");var l;if(void 0!==this._config.videoConstraints){this.videoConstraints=this._config.videoConstraints;const e=_.default.CameraManager.legacyParamConverter(this._config.videoConstraints);try{await _.default.CameraManager.get().setDefaultVideoSettings(e)}catch(t){n(new Error(`WebSDK cannot set ${JSON.stringify(e)} as the default video settings`))}}null!=window.location.href.match(/^file\:\/{3}.*$/g)&&void 0!==console.error&&this.showWarnings&&console.error("WebRTC requires application to be loaded from a web server"),this.voxAuth=s.Authenticator.get(),this.voxAuth.setHandler({onLoginSuccessful:(e,t)=>{this.loginState=A.LoginState.LOGGED_IN;const n={name:o.Events.AuthResult,displayName:e,result:!0,tokens:t};this._resolvePromise("login",n),this.dispatchEvent(n)},onLoginFailed:e=>{this.loginState=A.LoginState.LOGGED_OFF;const t={name:o.Events.AuthResult,code:e,result:!1};this._rejectPromise("login",t),this.dispatchEvent(t)},onSecondStageInitiated:()=>{const e={name:o.Events.AuthResult,code:301,result:!1};this._rejectPromise("login",e),this.dispatchEvent(e)},onOneTimeKeyGenerated:e=>{const t={name:o.Events.AuthResult,key:e,code:i.AuthResultCode.OneTimeKeyReceived,result:!1};this._resolvePromise("loginkey",t),this.dispatchEvent(t)},onRefreshTokenFailed:e=>{const t={name:o.Events.RefreshTokenResult,code:e,result:!1};this.dispatchEvent(t)},onRefreshTokenSuccess:e=>{const t={name:o.Events.RefreshTokenResult,tokens:e,result:!0};this.dispatchEvent(t)}}),S.default.addHandler(this),S.default.setRPCHandler(f.RemoteEvent.sipRegisterSuccessful,(e,t)=>{this.dispatchEvent({name:"SIPRegistrationSuccessful",id:e,sipuri:t})}),S.default.setRPCHandler(f.RemoteEvent.onACDStatus,(e,t,n,r)=>{v.default.onStatusUpdated(t,n,r)}),S.default.setRPCHandler(f.RemoteEvent.SQMessagingStatusUpdated,(e,t,n,r)=>{y.default.onStatusUpdated(t,n,r)}),S.default.setRPCHandler(f.RemoteEvent.onSQStatusError,(e,t,n,r)=>{y.default.onError(t,n,r),v.default.onError(t,n,r)}),S.default.setRPCHandler(f.RemoteEvent.sipRegisterFailed,(e,t,n,r)=>{this.dispatchEvent({name:"SIPRegistrationFailed",id:e,sipuri:t,status:n,reason:r})}),S.default.setRPCHandler(f.RemoteEvent.unregisterPushTokenResult,e=>{h.PushService.updatePromiseResult(e)}),S.default.setRPCHandler(f.RemoteEvent.registerPushTokenResult,e=>{h.PushService.updatePromiseResult(e)}),l=setInterval(()=>{"undefined"!=typeof document&&(clearInterval(l),this.dispatchEvent({name:o.Events.SDKReady,version:this.version}),t({name:o.Events.SDKReady,version:this.version}))},100)})}getErrorCall(e,t,n,r){const i="viewer"===e?new E.ViewerCall(a.Utils.generateUUID(),t):new C.CallExMedia(a.Utils.generateUUID(),s.Authenticator.get().displayName,!1,t);return setTimeout(()=>{i.onFailed(n,r,{})},500),i}isHttps(){return"https:"===window.location.protocol||"localhost"===window.location.hostname||window.location.href.includes("127.0.0.1")}call(e,t,n,r){void 0===t&&void 0===n&&void 0===r||this.logger.warning("useVideo, customData, extraHeaders are deprecated since 4.6.0. Please use the same parameter in the CallSettings instead."),this.logger.info(`call(${JSON.stringify(e)}, ${JSON.stringify(t)})`);let i={H264first:this._h264first,VP8first:this._VP8first};switch("string"==typeof e||"number"==typeof e?("object"==typeof t&&(t.receiveVideo=!0),i={number:e,video:t,customData:n,extraHeaders:r}):("object"==typeof e.video&&(e.video.receiveVideo=!0),i=e),typeof i.video){case"boolean":i.isAudio=!i.video,i.video={sendVideo:i.video,receiveVideo:!0};break;case"object":i.isAudio=!i.video.receiveVideo&&!i.video.sendVideo;break;case"undefined":i.isAudio=!0,i.video={sendVideo:!1,receiveVideo:!0}}if(!this.isHttps())return this.getErrorCall("call",i,T.CallError.HTTP_NOT_SECURE,"Sorry, the connection to this site is not secure, so the WebRTC call is prohibited. Please, use https:// instead");try{return a.Utils.checkCA(),this.voxCallManager.call(i)}catch(e){return this.getErrorCall("call",i,+e.code,e.message)}}callConference(e,t,n,r){void 0===t&&void 0===n&&void 0===r||this.logger.warning("useVideo, customData, extraHeaders are deprecated since 4.6.0. Please use the same parameter in the CallSettings instead."),this.logger.info(`callConference(callSettings: ${JSON.stringify(e)}, useVideo: ${JSON.stringify(t)})`);let i={H264first:this._h264first,VP8first:this._VP8first};switch("string"==typeof e||"number"==typeof e?("object"==typeof t&&(t.receiveVideo=!0),i={number:e,video:t,customData:n,extraHeaders:r}):("object"==typeof e.video&&(e.video.receiveVideo=!0),i=e),typeof i.video){case"boolean":i.video={sendVideo:i.video,receiveVideo:!0};break;case"undefined":i.video={sendVideo:!1,receiveVideo:!0}}if(i.isConference=!0,!this.isHttps())return this.getErrorCall("conf",i,T.CallError.HTTP_NOT_SECURE,"Sorry, the connection to this site is not secure, so the WebRTC call is prohibited. Please, use https:// instead");try{return a.Utils.checkCA(),this.voxCallManager.callConference(i)}catch(e){return console.error(e),this.getErrorCall("conf",i,+e.code,e.message)}}joinAsSharing(e,t=!1,n){this.logger.info(`joinAsSharing(${e})`);let r={number:e,audioDirections:{sendAudio:t},extraHeaders:n};if(!this.isHttps())return this.getErrorCall("sharing",r,T.CallError.HTTP_NOT_SECURE,"Sorry, the connection to this site is not secure, so the WebRTC call is prohibited. Please, use https:// instead");try{return a.Utils.checkCA(),D.default.get().call(r)}catch(e){return this.getErrorCall("call",r,+e.code,e.message)}}joinAsViewer(e,t){this.logger.info(`joinAsViewer(${e})`);let n={number:e,extraHeaders:t};if(!this.isHttps())return this.getErrorCall("viewer",n,T.CallError.HTTP_NOT_SECURE,"Sorry, the connection to this site is not secure, so the WebRTC call is prohibited. Please, use https:// instead");try{return a.Utils.checkCA(),this.voxViewerManager.joinAsViewer(n)}catch(e){return this.getErrorCall("viewer",n,+e.code,e.message)}}config(){return this._config}async connect(){return void 0===this._config&&this.logger.warning("Please, run Voximplant init before connect."),S.default.connect(this._config.queueType,this._config.serverIp,this._config.node)}async disconnect(){this.logger.info("disconnect()"),await Promise.all([D.default.get().hangupAllCalls(),b.ViewerManager.get().hangupAllCalls(),d.CallManager.get().hangupAllCalls()]),S.default.currentState()!==S.VoxSignalingState.IDLE?(await S.default.disconnect(),this.loginState=A.LoginState.LOGGED_OFF,_.default.StreamManager.get().clear(),S.default.removeRPCHandler(f.RemoteEvent.onCallRemoteFunctionError),S.default.removeRPCHandler(f.RemoteEvent.handleError)):this.dispatchEvent({name:o.Events.ConnectionClosed})}setOperatorACDStatus(e){return this.logger.info(`setOperatorACDStatus(${e})`),v.default.setStatus(e)}setOperatorSQMessagingStatus(e){if(this._config.queueType==i.QueueTypes.SmartQueue)return this.logger.info(`setOperatorSQMessagingStatus (${e})`),y.default.setStatus(e);Promise.reject("This function only enabled in SmartQueue. You should set QueueType to QueueTypes.SmartQueue in the ClientConfig")}getOperatorACDStatus(){return v.default.getStatus()}getOperatorSQMessagingStatus(){return y.default.getStatus()}login(e,t,n){return this.logger.info(`login(${e}, ${t?"***":void 0}, {receiveCalls: ${n&&n.receiveCalls}})`),this.loginState=A.LoginState.LOGGING_IN,new Promise((r,i)=>{this._promises.login={resolve:r,reject:i},n=void 0!==n?n:{},this.checkConnection(),this._config.experiments&&this._config.experiments.mediaServer&&(n.mediaServer=this._config.experiments.mediaServer),this.voxAuth.basicLogin(e,t,n)})}loginWithCode(e,t,n){return this.loginState=A.LoginState.LOGGING_IN,new Promise((r,i)=>{this._promises.login={resolve:r,reject:i},n=void 0!==n?n:{},n=Object.assign(Object.assign({},n),{serverPresenceControl:!1}),this.checkConnection(),this.voxAuth.loginStage2(e,t,n)})}loginWithToken(e,t,n){return this.logger.info(`loginWithToken(${e}, '***', {receiveCalls: ${n&&n.receiveCalls}})`),this.loginState=A.LoginState.LOGGING_IN,new Promise((r,i)=>{this._promises.login={resolve:r,reject:i},n=void 0!==n?n:{},(n=Object.assign(Object.assign({},n),{serverPresenceControl:!1})).accessToken=t,this.checkConnection(),this.voxAuth.tokenLogin(e,n)})}tokenRefresh(e,t,n){return this.logger.info(`tokenRefresh(${e})`),new Promise((r,i)=>{const a=e=>{e.result?r(e):i(e),this.off(o.Events.RefreshTokenResult,a)};this.on(o.Events.RefreshTokenResult,a),this.voxAuth.tokenRefresh(e,t,n)})}requestOneTimeLoginKey(e){return new Promise((t,n)=>{this._promises.loginkey={resolve:t,reject:n},this.checkConnection(),this.voxAuth.generateOneTimeKey(e)})}loginWithOneTimeKey(e,t,n){return this.logger.info(`loginWithOneTimeKey(${e}, '***' , {receiveCalls: ${n&&n.receiveCalls}})`),this.loginState=A.LoginState.LOGGING_IN,new Promise((r,i)=>{this._promises.login={resolve:r,reject:i},n=void 0!==n?n:{},n=Object.assign(Object.assign({},n),{serverPresenceControl:!1}),this.checkConnection(),this.voxAuth.loginUsingOneTimeKey(e,t,n)})}connected(){return this._connected}showLocalVideo(e=!0,t,n){return void 0===t&&void 0===n||this.logger.warning("showLocalVideo: mirror and detachCamera parameters are deprecated! And do not lead to desired behavior."),this.logger.info(`showLocalVideo(${e}, ${t}, ${n})`),e?_.default.StreamManager.get().showLocalVideo():_.default.StreamManager.get().hideLocalVideo()}setLocalVideoPosition(e,t){throw new Error("Deprecated: please use CSS to position '#voximplantlocalvideo' element")}setLocalVideoSize(e,t){throw new Error("Deprecated: please use CSS to set size of '#voximplantlocalvideo' element")}setVideoSettings(e,t,n){_.default.CameraManager.get().setDefaultVideoSettings(_.default.CameraManager.legacyParamConverter(e)),d.CallManager.get().setVideoSettings(e).then(()=>{t&&t(null)},e=>{n&&n(null)})}setVideoBandwidth(e){this.logger.info(`setVideoBandwidth(${e})`),this.checkConnection(),u.PCFactory.get().setBandwidthParams(e),S.default.callRemoteFunction(p.RemoteFunction.setDesiredVideoBandwidth,e)}playToneScript(e,t=!1){this.logger.info(`playToneScript('***', ${t})`),a.Utils.playToneScript(e,t)}stopPlayback(){this.logger.info("stopPlayback()"),a.Utils.stopPlayback()&&this.dispatchEvent({name:o.Events.PlaybackFinished})}volume(e){throw new Error("Deprecated: please use the Media Renderer interface of each call instead")}audioSources(){throw Error("Deprecated: please use Hardware module to manipulate devices")}videoSources(){throw Error("Deprecated: please use Hardware module to manipulate devices")}audioOutputs(){throw Error("Deprecated: please use Hardware module to manipulate devices")}useAudioSource(e,t,n){const r=_.default.AudioDeviceManager.get().getDefaultAudioSettings();return _.default.AudioDeviceManager.get().setDefaultAudioSettings(Object.assign(Object.assign({},r),{inputId:e})),new Promise((r,i)=>d.CallManager.get().useAudioSource(e).then(()=>{t&&t(null),r(null)},e=>{n&&n(e),i(e)}))}useVideoSource(e,t,n){const r=_.default.CameraManager.get().getDefaultVideoSettings();return _.default.CameraManager.get().setDefaultVideoSettings(Object.assign(Object.assign({},r),{cameraId:e})),new Promise((r,i)=>d.CallManager.get().useVideoSource(e).then(()=>{t&&t(null),r(null)},e=>{n&&n(e),i(e)}))}useAudioOutput(e){return new Promise((t,n)=>{"chrome"!==l.default.getWSVendor(!0)&&n(new Error("Unsupported browser. Only Google Chrome 49 and above.")),this._defaultSinkId=e,t()})}attachRecordingDevice(e,t){c.LogManager.get().writeMessage(c.LogCategory.CLIENT,"DEPRECATED",c.LogLevel.ERROR,"Now all media connection on demand. There is no reason do it by hand."),e&&e(null)}detachRecordingDevice(){_.default.StreamManager.get().clear()}setCallActive(e,t=!0){return e.setActive(t)}sendVideo(e=!0){c.LogManager.get().writeMessage(c.LogCategory.CLIENT,"DEPRECATED",c.LogLevel.ERROR,"This function deprecated. Use Call.sendVideo() instead.")}isRTCsupported(){try{const e=new RTCPeerConnection;if(void 0===navigator.getUserMedia&&void 0===navigator.mediaDevices.getUserMedia)throw new Error("No getUserMedia");return e.addTransceiver("audio"),e.getTransceivers().forEach(e=>{if(!e.stopped&&"stopped"!==e.direction&&"stopped"!==e.currentDirection&&(e.sender.replaceTrack(null),e.direction="sendrecv",void 0===e.currentDirection))throw new Error("No currentDirection")}),e.close(),!0}catch(e){return!1}}transferCall(e,t){this.logger.info(`transferCall(${e}, ${e})`);try{a.Utils.checkCA(),this.voxCallManager.transferCall(e,t)}catch(n){this.voxCallManager.handleConnectionFailed(e.id(),+n.message,"",{}),this.voxCallManager.handleConnectionFailed(t.id(),+n.message,"",{})}}setLogLevel(e,t){c.LogManager.get().setLogLevel(e,t)}onSignalingConnected(){this._connected=!0;const e={name:o.Events.ConnectionEstablished};this._resolvePromise("connect",e),this.dispatchEvent(e)}async onSignalingClosed(){var e;this._connected=!1,Object.keys(null!==(e=this._promises)&&void 0!==e?e:{}).forEach(e=>{const t=(e=>{switch(e){case"login":case"loginkey":return String(o.Events.AuthResult);default:return e}})(e),n={name:t,code:i.AuthResultCode.ConnectionClosed,result:!1};this._rejectPromise(e,n),t===String(o.Events.AuthResult)&&this.dispatchEvent(n)}),this.loginState=A.LoginState.LOGGED_OFF,this.progressTone&&this.stopProgressTone(),await this.disconnect()}onSignalingConnectionFailed(e){this._connected=!1,this._rejectPromise("connect",event)}onMediaConnectionFailed(){}getCall(e){return d.CallManager.get().calls[e]}removeCall(e){d.CallManager.get().removeCall(e)}screenSharingSupported(){return l.default.screenSharingSupported()}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}on(e,t,n){super.on(e,t)}off(e,t){super.off(e,t)}registerForPushNotificatuons(e){return this.logger.info("Deprecated registerForPushNotificatuons()"),h.PushService.register(e)}registerForPushNotifications(e){return this.logger.info("registerForPushNotifications()"),h.PushService.register(e)}unregisterForPushNotificatuons(e){return this.logger.info("Deprecated unregisterForPushNotificatuons()"),h.PushService.unregister(e)}unregisterForPushNotifications(e){return this.logger.info("unregisterForPushNotifications()"),h.PushService.unregister(e)}handlePushNotification(e){return this.logger.info("handlePushNotification()"),h.PushService.incomingPush(e)}getGUID(){return(new m.default).toString()}enableSilentLogging(e){c.LogManager.get().shadowLogging=e}clearSilentLog(){c.LogManager.get().clearSilentLog()}getSilentLog(){return c.LogManager.get().getSLog()}setLoggerCallback(e){c.LogManager.get().setLoggerCallback(e)}getClientState(){const e=S.default.currentState();return e===S.VoxSignalingState.RECONNECTING?c.ClientState.RECONNECTING:e==S.VoxSignalingState.CONNECTING||e==S.VoxSignalingState.WSCONNECTED?c.ClientState.CONNECTING:e==S.VoxSignalingState.CLOSING||e==S.VoxSignalingState.IDLE?c.ClientState.DISCONNECTED:e==S.VoxSignalingState.CONNECTED?this.loginState==A.LoginState.LOGGING_IN?c.ClientState.LOGGING_IN:this.loginState==A.LoginState.LOGGED_IN?c.ClientState.LOGGED_IN:c.ClientState.CONNECTED:void 0}setSwfColor(){c.LogManager.get().writeMessage(c.LogCategory.CLIENT,"NOT SUPPORTED",c.LogLevel.ERROR,"setSwfColor deprecated, and not supported!")}_traceName(){return"Client"}checkConnection(){if(!this._connected)throw new Error("NOT_CONNECTED_TO_VOXIMPLANT")}_resolvePromise(e,t){const n=this._promises[e];n&&(n.resolve(t),delete this._promises[e])}_rejectPromise(e,t){const n=this._promises[e];n&&(n.reject(t),delete this._promises[e])}setLogLevelAll(e){const t=c.LogManager.get();Object.keys(c.LogCategory).forEach(n=>{t.setLogLevel(c.LogCategory[n],e)})}setConnectionData(e,t){e&&(this._config.gateway=e),t&&(this._config.connectionId=t)}isInsertableStreamsSupported(){var e,t;return(null===(t=null===(e=this.config())||void 0===e?void 0:e.experiments)||void 0===t?void 0:t.encodedInsertableStreams)&&window.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams}isMediaTrackInsertableStreamSupported(){var e,t;return(null===(t=null===(e=this.config())||void 0===e?void 0:e.experiments)||void 0===t?void 0:t.mediaTrackInsertableStreams)&&window.MediaStreamTrackProcessor&&window.MediaStreamTrackGenerator}limitAudioCodecs(e){return this.limitACodecs=e,this.logger.info(`limitAudioCodecs(): Trying to limit audio codecs to \n${JSON.stringify(e)}`),new Promise(async(t,n)=>{let r,i;const o=()=>{null==r||r.getTracks().forEach(e=>e.stop()),null==i||i.close()};try{if(r=await w.StreamManager.getUserMedia({audio:!0,video:!1}),i=new RTCPeerConnection,i){await i.addTransceiver(r.getAudioTracks()[0]);const a=await i.createOffer().catch(()=>n("limitAudioCodecs(): cannot get local offer")),s=O.SDPMuggle.reduceCodecs(a,{audio:e});return this.logger.info(`limitAudioCodecs(): codecs limitation is resolved with result ${s.isAudio} \n${s.sdp.sdp}`),o(),t(s.isAudio)}return this.logger.info("limitAudioCodecs(): Cannot create a test peer connection"),o(),n("limitAudioCodecs(): Cannot create a test peer connection, audio codecs will be fully reduced")}catch(e){return this.logger.info(`limitAudioCodecs(): ${e.message}`),o(),n("limitAudioCodecs(): Media access denied, audio codecs will be fully reduced")}})}limitVideoCodecs(e){return this.limitVCodecs=e,this.logger.info(`limitVideoCodecs(): Trying to limit video codecs to \n${JSON.stringify(e)}`),new Promise(async(t,n)=>{let r,i;const o=()=>{null==r||r.getTracks().forEach(e=>e.stop()),null==i||i.close()};try{if(r=await w.StreamManager.getUserMedia({audio:!0,video:!0}),i=new RTCPeerConnection,i){await i.addTransceiver(r.getAudioTracks()[0]),await i.addTransceiver(r.getVideoTracks()[0]);const a=await i.createOffer().catch(()=>n("limitVideoCodecs(): cannot get local offer")),s=O.SDPMuggle.reduceCodecs(a,{video:e});return this.logger.info(`limitVideoCodecs(): codecs limitation is resolved with result ${s.isVideo} \n${s.sdp.sdp}`),o(),t(s.isVideo)}return this.logger.info("limitVideoCodecs(): Cannot create a test peer connection"),o(),n("limitVideoCodecs(): Cannot create a test peer connection, video codecs will be fully reduced")}catch(e){return this.logger.info(`limitVideoCodecs(): ${e.message}`),o(),n("limitVideoCodecs(): Media access denied, video codecs will be fully reduced")}})}}r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"playProgressTone",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"stopProgressTone",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"onIncomingCall",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"init",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"call",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"callConference",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"joinAsSharing",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"joinAsViewer",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"connect",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"disconnect",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setOperatorACDStatus",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setOperatorSQMessagingStatus",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"getOperatorACDStatus",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"getOperatorSQMessagingStatus",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"login",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"loginWithCode",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"loginWithToken",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"tokenRefresh",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"requestOneTimeLoginKey",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"loginWithOneTimeKey",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"connected",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"showLocalVideo",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setLocalVideoPosition",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setLocalVideoSize",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setVideoSettings",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setVideoBandwidth",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"playToneScript",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"stopPlayback",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"volume",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"audioSources",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"videoSources",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"audioOutputs",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"useAudioSource",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"useVideoSource",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"useAudioOutput",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"attachRecordingDevice",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"detachRecordingDevice",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setCallActive",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"sendVideo",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"isRTCsupported",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"transferCall",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setLogLevel",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"onSignalingConnected",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"onSignalingClosed",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"onSignalingConnectionFailed",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"onMediaConnectionFailed",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"getCall",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"removeCall",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"addEventListener",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"removeEventListener",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"on",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"off",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"checkConnection",null),r([c.LogManager.d_trace(c.LogCategory.CLIENT)],I.prototype,"setLogLevelAll",null),t.Client=I},9553:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ConferenceEndpointManager=void 0;const i=n(3992),o=n(308),a=n(6278),s=n(9002),l=n(9001),c=n(1901),u=n(6980),d=n(1316);class g{constructor(e){this.call=e,this.currentState={},this.mutex=new i.TaskMutex,u.VideoStatusMachineMediator.subscribeOnEndpointEvents(e),(0,c.registerEndpointStreamsUpdatedHandler)(e)}updateState(){const e={};this.call.getEndpoints().forEach(t=>{e[t.id]={audio:[],video:[]},t.mediaRenderers.forEach(n=>{if("audio"===n.kind&&n.enabled)return void(e[t.id].audio=[...e[t.id].audio,...n.mids]);const r=u.VideoStatusMachineMediator.retrieveVSMByMediaRenderer(n);d.MediaRenderResolver.isVideoMR(n)&&"disabledByUser"!==(null==r?void 0:r.value)&&(e[t.id].video=[...e[t.id].video,...n.mids])})});const t=this.diffStates(e);if(t.dirty){this.currentState=e,this.call.getEndpoints().forEach(e=>{e.mediaRenderers.forEach(n=>{n.mids.forEach(r=>{d.MediaRenderResolver.isVideoMR(n)&&u.VideoStatusMachineMediator.retrieveVSMByEndpoint(e)||(t.mrEnabled.includes(r)&&e.dispatchEvent({name:l.EndpointEvents.MediaRenderEnabled,endpoint:e,call:this.call,mediaRenderer:n}),t.mrDisabled.includes(r)&&e.dispatchEvent({name:l.EndpointEvents.MediaRenderDisabled,endpoint:e,call:this.call,mediaRenderer:n}))})})});const n=o.CallManager.get().getConfSignaling(this.call);n&&n.runFunction(a.ConfSignalingRemoteFunctions.MANAGE_ENDPOINTS,e)}}updateRenderSize(){const e={};this.call.getEndpoints().forEach(t=>{const n={};t.mediaRenderers.forEach(e=>{if("audio"!==e.kind&&e.videoSize&&e.videoSize.width&&e.videoSize.height){const t=[e.videoSize.width,e.videoSize.height];e.mids.forEach(e=>n[e]=t)}}),Object.keys(n).length&&(e[t.id]=n)});const t=o.CallManager.get().getConfSignaling(this.call);t&&t.runFunction(a.ConfSignalingRemoteFunctions.REQUEST_VIDEO_SIZE,e)}setCurrentState(e){throw Error("Not implemented")}diffStates(e){const t=["added","default"];let n=!1,r=[],i=[],o=[],a=[],s=[],l={};for(let r in this.currentState)this.currentState.hasOwnProperty(r)&&!t.includes(r)&&(e[r]?["audio","video"].forEach(t=>{this.currentState[r][t]&&this.currentState[r][t].includes("default")?(s.push(r),n=!0):e[r][t]&&e[r][t].includes("default")?(a.push(r),n=!0):(this.currentState[r][t]&&this.currentState[r][t].forEach(i=>{e[r][t]&&e[r][t].includes(i)||(o.push(i),n=!0)}),e[r][t]&&e[r][t].forEach(e=>{this.currentState[r][t]&&this.currentState[r][t].includes(e)||(i.push(e),n=!0)}))}):(n=!0,l[r]=e[r]));for(let i in e)e.hasOwnProperty(i)&&!t.includes(i)&&(this.currentState[i]||(n=!0,r.push(i)));return{dirty:n,removed:r,mrEnabled:i,mrDisabled:o,allEnabled:a,allDisabled:s}}}r([(0,s.debounceDecorator)(400,!1)],g.prototype,"updateState",null),r([(0,s.debounceDecorator)(400,!1)],g.prototype,"updateRenderSize",null),r([(0,i.queueDecorator)()],g.prototype,"setCurrentState",null),t.ConferenceEndpointManager=g},4298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConferenceEndpointResolver=void 0;const r=n(308);t.ConferenceEndpointResolver=class{constructor(e){this.call=e}get endpointManager(){return r.CallManager.get().getEndpointManager(this.call)}resolveById(e){var t;const n=null===(t=this.endpointManager)||void 0===t?void 0:t.getEndpoints();return null==n?void 0:n.find(t=>t.id===e)}resolveByMid(e){var t;const n=null===(t=this.endpointManager)||void 0===t?void 0:t.getEndpointInfo();if(!n)return;const[r]=Object.entries(n.endpoints).find(([t,n])=>{const{mids:r={}}=n;return e in r})||[];return r?this.resolveById(r):void 0}}},1901:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerEndpointStreamsUpdatedHandler=t.EndpointStreamsUpdatedHandler=void 0;const r=n(1150),i=n(4298),o=n(6980),a=new WeakMap;class s{constructor(e){this.endpointResolver=e,this.logger=r.LogManager.get().createLogger(r.LogCategory.VSM,"EndpointStreamsUpdatedHandler")}static getInstanceBy(e){return a.get(e)}handle(e){const{hidden:t={},appeared:n={}}=e,r=[...Object.entries(t),...Object.entries(n)];for(const[e,t]of r){const n=this.endpointResolver.resolveByMid(e),r=t?"ENDPOINT_STREAM_HIDDEN":"ENDPOINT_STREAM_APPEARED";if(!n){this.logger.info(`Endpoint with mid ${e} has not found`);continue}const i=o.VideoStatusMachineMediator.retrieveVSMByEndpoint(n);i?i.transition(r):this.logger.warning(`Associated VSM with endpoint ${n.id} has not found`)}}}t.EndpointStreamsUpdatedHandler=s,t.registerEndpointStreamsUpdatedHandler=e=>{const t=new i.ConferenceEndpointResolver(e),n=new s(t);return a.set(e,n),n}},9124:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVideoStatusMachine=void 0;const r=n(6185),i=n(6143),o=n(1150),a=o.LogManager.get().createLogger(o.LogCategory.VSM,"VideoStatusMachine");t.createVideoStatusMachine=e=>{const t=(0,r.obs)("enabled"),n={log:(...t)=>a.info(`[VSM of ${e.id}] ${t.join("")}`),warn:(...t)=>a.warning(`[VSM of ${e.id}] ${t.join("")}`),error:(...t)=>a.error(`[VSM of ${e.id}] ${t.join("")}`)};return[(0,i.createStatelessFSM)(t,{enabled:{DISABLE_VIDEO:"disabledByUser",ENDPOINT_STREAM_HIDDEN:"disabledByServer"},disabledByUser:{ENABLE_VIDEO:"enabled"},disabledByServer:{ENDPOINT_STREAM_APPEARED:"enabled"}},null,n),t]}},6980:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoStatusMachineMediator=void 0;const r=n(2282),i=n(9001),o=n(9124),a=n(1316),s=n(308),l=n(1150),c=n(1450),u=new WeakMap,d=new WeakMap,g=new WeakMap,p=new WeakMap,f={disabledByUser:c.MediaRenderDisablingReason.Manual,disabledByServer:c.MediaRenderDisablingReason.Automatic};class h{constructor(){}static associateVSMWith(e){const[t,n]=(0,o.createVideoStatusMachine)(e);return u.set(e,t),g.set(t,e),n.watch(t=>{this.handleVideoStatusUpdate(e,t)}),this.logger.info(`New VSM has been associated with endpoint ${e.id}`),t}static retrieveVSMByEndpoint(e){return u.get(e)}static retrieveVSMByMediaRenderer(e){return d.get(e)}static removeVSMAssociationOf(e){u.delete(e)}static subscribeOnEndpointEvents(e){e.on(r.CallEvents.EndpointAdded,({endpoint:t})=>{const n=this.associateVSMWith(t);p.set(t,e.id()),t.on(i.EndpointEvents.RemoteMediaAdded,({mediaRenderer:e})=>{a.MediaRenderResolver.isVideoMR(e)&&d.set(e,n)}),t.on(i.EndpointEvents.RemoteMediaRemoved,({mediaRenderer:e})=>{a.MediaRenderResolver.isVideoMR(e)&&d.delete(e)})}),e.on(r.CallEvents.EndpointRemoved,({endpoint:e})=>{this.removeVSMAssociationOf(e)})}static makeTransition(e,t){var n;const r=null===(n=g.get(e))||void 0===n?void 0:n.id;this.logger.info(`Start transition ${t} for a VSM of the endpoint ${r}`);const i=e.transition(t);return i||(this.logger.info("The transition has failed"),this.onTransitionFail(e)),i}static dispatchMediaRenderEvent(e,t,n){const r="enabled"===t?i.EndpointEvents.MediaRenderEnabled:i.EndpointEvents.MediaRenderDisabled,o=a.MediaRenderResolver.retrieveVideoMR(e.mediaRenderers);if(!o)return this.logger.info(`Has not associated a media renderer. Dispatching ${r} has aborted`),!1;const l=p.get(e);if(!l)return this.logger.info(`Has not associated a call id with endpoint ${e.id}. Dispatching ${r} has aborted`),!1;const c=s.CallManager.get().findCall(l,"");if(!c)return this.logger.info(`Cannot find a call with id ${l}. Dispatching ${r} has aborted`),!1;const u={name:r,call:c,endpoint:e,mediaRenderer:o};return"disabled"===t&&n&&(u.reason=f[n]),e.dispatchEvent(u),this.logger.info(`The ${r} event has been dispatched ${n?"with reason "+n:""}`),!0}static handleVideoStatusUpdate(e,t){this.logger.info(`Video status of endpoint ${e.id} to ${t}`),"enabled"===t&&this.dispatchMediaRenderEvent(e,"enabled"),"disabledByServer"!==t&&"disabledByUser"!==t||this.dispatchMediaRenderEvent(e,"disabled",t)}static onTransitionFail(e){if("enabled"!==e.value){const t=g.get(e);if(!t)return this.logger.warning("An endpoint has not found by VSM"),!1;this.dispatchMediaRenderEvent(t,"disabled",e.value)}}}t.VideoStatusMachineMediator=h,h.logger=l.LogManager.get().createLogger(l.LogCategory.VSM,"VideoStatusMachineMediator")},3385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0;class n{}t.Constants=n,n.DIRECT_CALL_HEADER="X-DirectCall",n.VIAMEDIA_CALL_HEADER="X-ViaMedia",n.CALLSTATSIOID_HEADER="X-CallstatsIOID",n.CALL_DATA_HEADER="VI-CallData",n.ZINGAYA_IM_MIME_TYPE="application/zingaya-im",n.P2P_SPD_FRAG_MIME_TYPE="voximplant/sdpfrag",n.VI_HOLD_EMUL="vi/holdemul",n.VI_SPD_OFFER_MIME_TYPE="vi/sdpoffer",n.VI_SPD_ANSWER_MIME_TYPE="vi/sdpanswer",n.VI_CONF_PARTICIPANT_INFO_ADDED="vi/conf-info-added",n.VI_CONF_PARTICIPANT_INFO_REMOVED="vi/conf-info-removed",n.VI_CONF_PARTICIPANT_INFO_UPDATED="vi/conf-info-updated",n.VI_CONF_PARTICIPANT_BATCH="vi/conf-batch"},9002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounceDecorator=void 0;const r=n(1150);t.debounceDecorator=function(e=400,t=!1){let n;return(i,o,a)=>({value:function(...i){n&&t&&r.LogManager.get().writeMessage(r.LogCategory.UTILS,"Debounce",r.LogLevel.WARNING,"Function has been debounced."),clearTimeout(n),n=setTimeout(()=>{n=null,a.value.apply(this,i)},e)}})}},3576:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.EventTarget=void 0;const i=n(1150),o=n(6577),a=n(9367);class s{sysOn(e,t,n){this._ETonTo("system",e,t,n)}sysOff(e,t){this._EToffTo("system",e,t)}on(e,t,n){this._ETonTo("user",e,t,n)}off(e,t){this._EToffTo("user",e,t)}_ETonTo(e,t,n,r){void 0===this.eventListeners&&(this.eventListeners={});let i=this.eventListeners;void 0===i[t]&&(i[t]=[]);const o={listener:n,options:r,_triggered:!1,_namespace:e};r&&r.capture?i[t].unshift(o):i[t].push(o)}_EToffTo(e,t,n){const r=this.eventListeners;if(void 0!==r&&void 0!==r[t])if("function"==typeof n){for(let i=0;i<r[t].length;i++)if(r[t][i].listener==n&&r[t][i]._namespace===e){r[t].splice(i,1);break}}else r[t]=r[t].filter(t=>t._namespace!==e)}logStats(e,t){i.LogManager.get().writeMessage(i.LogCategory.UTILS,"[event]",i.LogLevel.INFO,`${e} ${JSON.stringify((0,o.getShortStreamStats)(t))}`)}dispatchEvent(e){var t,n,r,o,a;const s=null===(r=null===(n=null===(t=null==this?void 0:this.eventListeners)||void 0===t?void 0:t[null==e?void 0:e.name])||void 0===n?void 0:n.filter)||void 0===r?void 0:r.call(n,e=>"user"===(null==e?void 0:e._namespace));if("CallStatsReceived"===e.name?this.logStats(e.name,e.stats):i.LogManager.get().writeMessage(i.LogCategory.UTILS,"[event]",i.LogLevel.INFO,`${null==e?void 0:e.name}${(null===(o=e.name)||void 0===o?void 0:o.includes("QualityIssue"))?" "+e.level:""}, listeners: ${null!==(a=null==s?void 0:s.length)&&void 0!==a?a:0}`),void 0!==this.eventListeners&&void 0!==this.eventListeners[e.name])for(let t=0;t<this.eventListeners[e.name].length;t++)try{if(!(this.eventListeners[e.name][t].options&&this.eventListeners[e.name][t].options.once&&this.eventListeners[e.name][t]._triggered||"system"!==this.eventListeners[e.name][t]._namespace&&"user"!==this.eventListeners[e.name][t]._namespace&&("default"!==this.eventListeners[e.name][t]._namespace||s.length))&&(this.eventListeners[e.name][t]._triggered=!0,!1===this.eventListeners[e.name][t].listener(e)))return}catch(e){console.error(e)}}removeEventListener(e,t){this.off(e,t)}addEventListener(e,t,n){this.on(e,t,n)}addDefaultEventListener(e,t){this._ETonTo("default",e,t,{})}removeDefaultEventListener(e){this._EToffTo("default",e)}_traceName(){return"EventTarget"}}r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"sysOn",null),r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"sysOff",null),r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"on",null),r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"off",null),r([(0,a.throttleDecorator)(5e3)],s.prototype,"logStats",null),r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"removeEventListener",null),r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"addEventListener",null),r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"addDefaultEventListener",null),r([i.LogManager.d_trace(i.LogCategory.EVENTTARGET)],s.prototype,"removeDefaultEventListener",null),t.EventTarget=s},141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0,function(e){e[e.SDKReady="SDKReady"]="SDKReady",e[e.ConnectionEstablished="ConnectionEstablished"]="ConnectionEstablished",e[e.ConnectionFailed="ConnectionFailed"]="ConnectionFailed",e[e.ConnectionClosed="ConnectionClosed"]="ConnectionClosed",e[e.Reconnecting="Reconnecting"]="Reconnecting",e[e.Reconnected="Reconnected"]="Reconnected",e[e.AuthResult="AuthResult"]="AuthResult",e[e.RefreshTokenResult="RefreshTokenResult"]="RefreshTokenResult",e[e.PlaybackFinished="PlaybackFinished"]="PlaybackFinished",e[e.MicAccessResult="MicAccessResult"]="MicAccessResult",e[e.IncomingCall="IncomingCall"]="IncomingCall",e[e.SourcesInfoUpdated="SourcesInfoUpdated"]="SourcesInfoUpdated",e[e.NetStatsReceived="NetStatsReceived"]="NetStatsReceived",e[e.SIPRegistrationSuccessful="SIPRegistrationSuccessful"]="SIPRegistrationSuccessful",e[e.SIPRegistrationFailed="SIPRegistrationFailed"]="SIPRegistrationFailed",e[e.ACDStatusUpdated="ACDStatusUpdated"]="ACDStatusUpdated",e[e.SQMessagingStatusUpdated="SQMessagingStatusUpdated"]="SQMessagingStatusUpdated",e[e.ACDError="ACDError"]="ACDError",e[e.SQError="SQError"]="SQError",e[e.PlaybackError="PlaybackError"]="PlaybackError"}(t.Events||(t.Events={}))},209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.str=e||n.getNewGUIDString()}toString(){return this.str}static getNewGUIDString(){let e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}_traceName(){return"GUID"}}t.default=n},7272:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hardware=void 0;const r=n(4855);var i;!function(e){let t,n;!function(e){e[e.DevicesUpdated="DevicesUpdated"]="DevicesUpdated",e[e.MediaRendererAdded="MediaRendererAdded"]="MediaRendererAdded",e[e.MediaRendererUpdated="MediaRendererUpdated"]="MediaRendererUpdated",e[e.MediaRendererRemoved="MediaRendererRemoved"]="MediaRendererRemoved",e[e.BeforeMediaRendererRemoved="BeforeMediaRendererRemoved"]="BeforeMediaRendererRemoved"}(t=e.HardwareEvents||(e.HardwareEvents={})),function(e){e[e.VIDEO_QUALITY_HIGH="video_quality_high"]="VIDEO_QUALITY_HIGH",e[e.VIDEO_QUALITY_LOW="video_quality_low"]="VIDEO_QUALITY_LOW",e[e.VIDEO_QUALITY_MEDIUM="video_quality_medium"]="VIDEO_QUALITY_MEDIUM",e[e.VIDEO_SIZE_QQVGA="video_size_qqvga"]="VIDEO_SIZE_QQVGA",e[e.VIDEO_SIZE_QCIF="video_size_qcif"]="VIDEO_SIZE_QCIF",e[e.VIDEO_SIZE_QVGA="video_size_qvga"]="VIDEO_SIZE_QVGA",e[e.VIDEO_SIZE_CIF="video_size_cif"]="VIDEO_SIZE_CIF",e[e.VIDEO_SIZE_nHD="video_size_nhd"]="VIDEO_SIZE_nHD",e[e.VIDEO_SIZE_VGA="video_size_vga"]="VIDEO_SIZE_VGA",e[e.VIDEO_SIZE_SVGA="video_size_svga"]="VIDEO_SIZE_SVGA",e[e.VIDEO_SIZE_HD="video_size_hd"]="VIDEO_SIZE_HD",e[e.VIDEO_SIZE_UXGA="video_size_uxga"]="VIDEO_SIZE_UXGA",e[e.VIDEO_SIZE_FHD="video_size_fhd"]="VIDEO_SIZE_FHD",e[e.VIDEO_SIZE_UHD="video_size_uhd"]="VIDEO_SIZE_UHD"}(n=e.VideoQuality||(e.VideoQuality={}));class i extends r.AudioDeviceManager{}e.AudioDeviceManager=i;class o extends r.CameraManager{}e.CameraManager=o;class a extends r.StreamManager{}e.StreamManager=a}(i=t.Hardware||(t.Hardware={})),t.default=i},2709:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioDeviceManager=void 0;const i=n(1150),o=n(4007),a=n(9699),s=n(787),l=n(2957),c=n(3869),u=["inputId","noiseSuppression","echoCancellation","disableAudio"];class d{constructor(){if(void 0!==d.instance)throw new Error("Error - use StreamManager.get()");navigator&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?this._supportedConstraints=navigator.mediaDevices.getSupportedConstraints():this._supportedConstraints={},this.__defaultParams={echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0},this._lastAudioInputDevices=[],this._lastAudioOutputDevices=[],this._callParams={},this.logger=i.LogManager.get().createLogger(i.LogCategory.USERMEDIA,this._traceName())}getAudioContext(){if(this.audioContext)return this.audioContext;if(void 0!==window.AudioContext||void 0!==window.webkitAudioContext){window.AudioContext=window.AudioContext||window.webkitAudioContext;try{return this.audioContext=new AudioContext,this.audioContext}catch(e){return this.audioContext=null,null}}}prepareAudioContext(){this.getAudioContext()}static get(){return void 0===d.instance&&(d.instance=new d),d.instance}getInputDevices(){return navigator.mediaDevices.enumerateDevices().then(e=>(this.logger.info(`Got input devices: ${JSON.stringify(e)}`),this._lastAudioInputDevices=e.map(e=>{if("audio"===e.kind||"audioinput"===e.kind)return{id:e.deviceId,name:e.label,group:e.groupId}}).filter(e=>void 0!==e),this._lastAudioInputDevices))}getOutputDevices(){return navigator.mediaDevices.enumerateDevices().then(e=>(this.logger.info(`Got output devices: ${JSON.stringify(e)}`),this._lastAudioOutputDevices=e.map(e=>{if("audiooutput"===e.kind)return{id:e.deviceId,name:e.label,group:e.groupId}}).filter(e=>void 0!==e),this._lastAudioOutputDevices))}getDefaultAudioSettings(){return this.__defaultParams}setDefaultAudioSettings(e){this.logger.info(`Set next params for default audio settings: ${JSON.stringify(e)}`),this.__defaultParams=Object.assign(Object.assign({},this.__defaultParams),e),this.logger.info(`Current default audio settings: ${JSON.stringify(this.__defaultParams)}`)}async setCallAudioSettings(e,t){if(this.logger.info(`Setting call ${e.id()} audio settings: ${JSON.stringify(t)}`),!e.active())return Promise.reject((0,s.dispatchUpdatedEvent)(e,!1,a.CallFailedUpdateReasons.mediaOnHold));if("echoCancellation"in t&&"safari"===c.default.getWSVendor()&&(this.logger.warning("Can't change `echoCancellation` in Safari during the call"),delete t.echoCancellation),this._callParams[e.id()]===t)return;const n=this._callParams[e.id()];let r=u.some(e=>e in t&&n[e]!==t[e]);r||"default"!==t.inputId||(r=!0);const i=n.outputId!==t.outputId;if(this.logger.info(`Must update renderers: ${i}, must update source: ${r}`),this._callParams[e.id()]=Object.assign(Object.assign({},this._callParams[e.id()]),t),r)try{await o.StreamManager.get().updateStreamSettings(e),this.logger.info("Audio settings have been set successfully.")}catch(t){throw this.logger.warning(`Failed to update call ${e.id()} stream: ${l.Utils.stringifyError(t)}`),Error(t)}i&&void 0!==t.outputId&&await Promise.all(e.getEndpoints().map(e=>e.mediaRenderers.filter(({kind:e})=>"audio"===e).map(e=>e.useAudioOutput(t.outputId))))}getCallAudioSettings(e){return this._callParams[e.id()]}getCallConstraints(e){return this._callParams[e]?this._getAudioConstraints(this._callParams[e]):(this._callParams[e]=this.__defaultParams,this._getAudioConstraints(this.__defaultParams))}_getAudioConstraints(e){if(e.disableAudio)return!1;e.strict;const t={};return e.inputId&&(t.deviceId={exact:e.inputId}),"boolean"==typeof e.echoCancellation&&this._supportedConstraints.echoCancellation&&(t.echoCancellation=e.echoCancellation),"boolean"==typeof e.noiseSuppression&&this._supportedConstraints.noiseSuppression&&(t.noiseSuppression=e.noiseSuppression),"boolean"==typeof e.autoGainControl&&this._supportedConstraints.autoGainControl&&(t.autoGainControl=e.autoGainControl),e.advanced&&(t.advanced=e.advanced),t.echoCancellationType="system",!Object.keys(t)||t}_traceName(){return"AudioDeviceManager"}}r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"getInputDevices",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"getOutputDevices",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"getDefaultAudioSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"setDefaultAudioSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"setCallAudioSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"getCallAudioSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"getCallConstraints",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],d.prototype,"_getAudioConstraints",null),t.AudioDeviceManager=d},2334:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraManager=void 0;const i=n(1150),o=n(4007),a=n(7272),s=n(3869),l=n(9699),c=n(787);class u{constructor(){if(void 0!==u.instance)throw new Error("Error - use StreamManager.get()");navigator&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?this._supportedConstraints=navigator.mediaDevices.getSupportedConstraints():this._supportedConstraints={},this._callParams={},this._lastCameraDevices=[],this.__defaultParams={},this.logger=i.LogManager.get().createLogger(i.LogCategory.USERMEDIA,this._traceName())}static get(){return void 0===u.instance&&(u.instance=new u),u.instance}async setDefaultVideoSettings(e){const t=this._validateCameraParams(e);this.logger.info(`Setting  default video settings, params: ${JSON.stringify(e)}, valid params: ${JSON.stringify(t)}`),this.__defaultParams=t,await a.Hardware.StreamManager.get().updateLocalVideo()}getDefaultVideoSettings(){return this.__defaultParams}setCallVideoSettings(e,t){const n=this._validateCameraParams(t);return this.logger.info(`Setting call ${e.id()} video settings, params: ${JSON.stringify(t)}, valid params: ${JSON.stringify(n)}`),e.active()?(this._callParams[e.id()]=n,new Promise((t,n)=>{o.StreamManager.get().updateStreamSettings(e).then(()=>{this.logger.info("Video settings have been set successfully."),t()}).catch(t=>{this.logger.warning(`Failed to set call ${e.id()} video settings: ${t}`),n(t)})})):Promise.reject((0,c.dispatchUpdatedEvent)(e,!1,l.CallFailedUpdateReasons.mediaOnHold))}getCallVideoSettings(e){return this._callParams[e.id()]}getCallConstraints(e){return"__local__"===e?(this._callParams[e]=this.__defaultParams,this._getVideoConstraints(this.__defaultParams)):this._callParams[e]?this._getVideoConstraints(this._callParams[e]):(this._callParams[e]=this.__defaultParams,this._getVideoConstraints(this.__defaultParams))}getInputDevices(){return navigator.mediaDevices.enumerateDevices().then(e=>(this.logger.info(`Got input devices: ${JSON.stringify(e)}`),this._lastCameraDevices=e.map(e=>{if("video"===e.kind||"videoinput"===e.kind)return{id:e.deviceId,name:e.label,group:e.groupId}}).filter(e=>void 0!==e),this._lastCameraDevices))}_getVideoConstraints(e){const t={};return e.cameraId?t.deviceId={exact:e.cameraId}:void 0!==e.facingMode&&(!1===e.facingMode?t.facingMode="environment":t.facingMode="user"),e.frameHeight&&(t.height={},e.strict?t.height.min=e.frameHeight:t.height.ideal=e.frameHeight),e.frameWidth&&(t.width={},e.strict?t.width.min=e.frameWidth:t.width.ideal=e.frameWidth),e.frameRate&&e.frameRate>0&&this._supportedConstraints.frameRate&&(t.frameRate=e.frameRate+""),e.aspectRatio&&e.aspectRatio>0&&this._supportedConstraints.aspectRatio&&(t.aspectRatio={exact:e.aspectRatio+""}),!Object.keys(t)||t}_validateCameraParams(e){if(e.videoQuality){(e.frameHeight||e.frameWidth)&&this.logger.warning('"videoQuality" parameter detected. The "frameHeight" and the "frameWidth" params will be ignored');const t=this._videoQualityToSize(e.videoQuality);e.frameWidth=t.w,e.frameHeight=t.h}return s.default.isIphone()&&(delete e.videoQuality,delete e.frameWidth,delete e.frameHeight,delete e.frameRate),e}_videoQualityToSize(e){switch(e){case a.Hardware.VideoQuality.VIDEO_QUALITY_HIGH:return{w:1280,h:720};case a.Hardware.VideoQuality.VIDEO_QUALITY_MEDIUM:return{w:640,h:480};case a.Hardware.VideoQuality.VIDEO_QUALITY_LOW:return{w:320,h:240};case a.Hardware.VideoQuality.VIDEO_SIZE_QQVGA:return{w:160,h:120};case a.Hardware.VideoQuality.VIDEO_SIZE_QCIF:return{w:176,h:144};case a.Hardware.VideoQuality.VIDEO_SIZE_QVGA:return{w:320,h:240};case a.Hardware.VideoQuality.VIDEO_SIZE_CIF:return{w:352,h:288};case a.Hardware.VideoQuality.VIDEO_SIZE_nHD:return{w:640,h:360};case a.Hardware.VideoQuality.VIDEO_SIZE_VGA:return{w:640,h:480};case a.Hardware.VideoQuality.VIDEO_SIZE_SVGA:return{w:800,h:600};case a.Hardware.VideoQuality.VIDEO_SIZE_HD:return{w:1280,h:720};case a.Hardware.VideoQuality.VIDEO_SIZE_UXGA:return{w:1600,h:1200};case a.Hardware.VideoQuality.VIDEO_SIZE_FHD:return{w:1920,h:1080};case a.Hardware.VideoQuality.VIDEO_SIZE_UHD:return{w:3840,h:2160};default:return{w:320,h:240}}}static legacyParamConverter(e){const t={videoQuality:a.Hardware.VideoQuality.VIDEO_QUALITY_MEDIUM};return e.width&&("string"==typeof e.width||"number"==typeof e.width?(delete t.videoQuality,t.frameWidth=e.width):"string"==typeof e.width.exact||"number"==typeof e.width.exact?(delete t.videoQuality,t.frameWidth=e.width.exact,t.strict=!0):"string"==typeof e.width.min||"number"==typeof e.width.min?(delete t.videoQuality,t.frameWidth=e.width.min):"string"==typeof e.width.max||"number"==typeof e.width.max?(delete t.videoQuality,t.frameWidth=e.width.max):"string"!=typeof e.width.ideal&&"number"!=typeof e.width.ideal||(delete t.videoQuality,t.frameWidth=e.width.ideal)),e.height&&("string"==typeof e.height||"number"==typeof e.height?(delete t.videoQuality,t.frameHeight=e.height):"string"==typeof e.height.exact||"number"==typeof e.height.exact?(delete t.videoQuality,t.frameHeight=e.height.exact,t.strict=!0):"string"==typeof e.height.min||"number"==typeof e.height.min?(delete t.videoQuality,t.frameHeight=e.height.min):"string"==typeof e.height.max||"number"==typeof e.height.max?(delete t.videoQuality,t.frameHeight=e.height.max):"string"!=typeof e.height.ideal&&"number"!=typeof e.height.ideal||(delete t.videoQuality,t.frameHeight=e.height.ideal)),t}testResolutions(e){const t=[a.Hardware.VideoQuality.VIDEO_SIZE_QQVGA,a.Hardware.VideoQuality.VIDEO_SIZE_QCIF,a.Hardware.VideoQuality.VIDEO_SIZE_QVGA,a.Hardware.VideoQuality.VIDEO_SIZE_CIF,a.Hardware.VideoQuality.VIDEO_SIZE_nHD,a.Hardware.VideoQuality.VIDEO_SIZE_VGA,a.Hardware.VideoQuality.VIDEO_SIZE_SVGA,a.Hardware.VideoQuality.VIDEO_SIZE_HD,a.Hardware.VideoQuality.VIDEO_SIZE_UXGA,a.Hardware.VideoQuality.VIDEO_SIZE_FHD,a.Hardware.VideoQuality.VIDEO_SIZE_UHD];return this._lastResolutionTestResult?new Promise((e,t)=>{e(this._lastResolutionTestResult)}):this._testResolutions(t,{},e)}_testResolutions(e,t,n){if(e.length){let r=e.shift(),i={strict:!0};const s=this._videoQualityToSize(r);i.frameWidth=s.w,i.frameHeight=s.h,n&&(i.cameraId=n);let l={video:this._getVideoConstraints(i)};return o.StreamManager.getUserMedia(l).then(i=>(this.logger.info("_testResolutions(): Media access granted"),i.getTracks().forEach(e=>e.stop()),t[a.Hardware.VideoQuality[r]]=!0,this._testResolutions(e,t,n)),i=>(this.logger.error(`_testResolutions(): Media access denied: ${i?i.message||i.name||i:"unknown"}`),t[a.Hardware.VideoQuality[r]]=!1,this._testResolutions(e,t,n)))}return this._lastResolutionTestResult=t,t}loadResolutionTestResult(e){return!![a.Hardware.VideoQuality.VIDEO_SIZE_QQVGA,a.Hardware.VideoQuality.VIDEO_SIZE_QCIF,a.Hardware.VideoQuality.VIDEO_SIZE_QVGA,a.Hardware.VideoQuality.VIDEO_SIZE_CIF,a.Hardware.VideoQuality.VIDEO_SIZE_nHD,a.Hardware.VideoQuality.VIDEO_SIZE_VGA,a.Hardware.VideoQuality.VIDEO_SIZE_SVGA,a.Hardware.VideoQuality.VIDEO_SIZE_HD,a.Hardware.VideoQuality.VIDEO_SIZE_UXGA,a.Hardware.VideoQuality.VIDEO_SIZE_FHD,a.Hardware.VideoQuality.VIDEO_SIZE_UHD].every(t=>void 0!==e[a.Hardware.VideoQuality[t]])&&(this._lastResolutionTestResult=e,!0)}_traceName(){return"CameraManager"}}r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"setDefaultVideoSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"getDefaultVideoSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"setCallVideoSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"getCallVideoSettings",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"getCallConstraints",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"getInputDevices",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"_getVideoConstraints",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u.prototype,"_validateCameraParams",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],u,"legacyParamConverter",null),t.CameraManager=u},4007:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;const i=n(1150),o=n(7272),a=n(3576),s=n(2334),l=n(3869),c=n(141),u=n(125),d=n(2709),g=n(7222),p=n(308),f=n(8237),h=n(787),m=n(4610),_=n(9001);class v extends a.EventTarget{constructor(){if(super(),this.isLocalVideoRequested=!1,this.localVideoPromises=[],this._dedicatedMirrorStream=null,void 0!==v.instance)throw new Error("Error - use StreamManager.get()");this._callStreams={},this._localMediaRenderers=[],this._sharingStreams={},this.logger=i.LogManager.get().createLogger(i.LogCategory.HARDWARE,this._traceName())}static get(){return void 0===v.instance&&(v.instance=new v),v.instance}async getCallStream(e,t=!1){const n=void 0===e?"__default":e.id();if(this._callStreams[n]&&!t)return this._callStreams[n];{const t=this._composeConstraints(e);if(this.logger.info(`[constraints]: ${JSON.stringify(t)}`),!t.audio&&!t.video&&"__default"!==n)return null;try{const r=await v.getUserMedia(t);this.logger.info("Media access granted"),this._callStreams[n]=r,r.getTracks().forEach(e=>{e.onended=this.onCallEnded,e.onmute=this.onCallEnded});const i=e.state();return i===m.CallState.STOPPING||i===m.CallState.ENDED?(this.logger.info(`Media Stream will be stopped, because call in ${i} state`),r):(u.Client.getInstance().dispatchEvent({name:c.Events.MicAccessResult,result:!0,stream:r}),r)}catch(r){let i=null;this.logger.warning(`Could not get media stream the first time. Error name: ${r.name}, error reason: ${r.message}`);try{"NotFoundError"===(null==r?void 0:r.name)&&(i=await this._handleNotFoundError(e,t)),"NotReadableError"===(null==r?void 0:r.name)&&(i=await this._handleNotReadableError(e,t))}catch(e){throw this.logger.error(`Media access denied: ${(null==e?void 0:e.message)||(null==e?void 0:e.name)||e||"unknown"}`),u.Client.getInstance().dispatchEvent({name:c.Events.MicAccessResult,result:!1,stream:null}),e}if(!i)throw new Error("Cannot get stream");return this.logger.info("Media access granted"),this._callStreams[n]=i,i.getTracks().forEach(e=>{e.onended=this.onCallEnded,e.onmute=this.onCallEnded}),u.Client.getInstance().dispatchEvent({name:c.Events.MicAccessResult,result:Boolean(i),stream:i,fallback:!0}),i}}}async _handleNotFoundError(e,t){let n={audio:!0};return this.logger.info(`[NotFoundError backup constraints]: ${JSON.stringify(t)}`),void 0!==e&&(e.settings.videoDirections.sendVideo=!1,n=this._composeConstraints(e)),await v.getUserMedia(n)}async _handleNotReadableError(e,t){var n,r;const i=void 0===e?"__default":e.id();this.logger.info(`[NotReadableError constraints]: ${JSON.stringify(t)}`);const o=this._callStreams[i];o&&o.getTracks().forEach(e=>e.stop());try{return await v.getUserMedia(t)}catch(t){this.logger.warning(`Could not handle NotReadableError. Error name: ${t.name}, error reason: ${t.message}`);const i={video:Boolean(null===(r=null===(n=null==e?void 0:e.settings)||void 0===n?void 0:n.videoDirections)||void 0===r?void 0:r.sendVideo),audio:!0};return this.logger.info(`[NotReadableError fallback constraints]: ${JSON.stringify(i)}`),await v.getUserMedia(i)}}_updateCallStream(e){return this.remCallStream(e),this.getCallStream(e)}updateCallStream(e){return this.logger.info(`Updating call ${e.id()} stream`),new Promise((t,n)=>{const r=this._callStreams[e.id()],i=()=>{setTimeout(()=>this.updateLocalVideo(),500),e.peerConnection.restoreMute();const t=()=>{r.getTracks().forEach(t=>{e.peerConnection.getTransceivers().some(e=>e.sender.track&&e.sender.track.id===t.id)||l.default.isIphone()||t.stop()})};setTimeout(t,500),setTimeout(t,2e3),setTimeout(t,5e3)},o=()=>{i(),t()};this.getCallStream(e,!0).then(t=>{const i=r.getTracks(),a=t.getTracks(),s=i.map(e=>e.kind).sort(),l=a.map(e=>e.kind).sort();return f.CallPromiseResolver.add(e,{resolve:o,reject:n,dispatchEvent:h.dispatchUpdatedEvent.bind(null,e)}),i.length===a.length&&s.every((e,t)=>e===l[t])?e.peerConnection.updateCustomMedia(t):(e.peerConnection.fastRemoveCustomMedia(r),this._remCallStream(r),e.peerConnection.addCustomMedia(t))}).catch(n)})}async updateStreamSettings(e){this.logger.info(`Updating call ${e.id()} stream settings`);try{const t=await this.getCallStream(e,!0);await e.peerConnection.updateMediaTracks(t),await this.updateLocalVideo()}catch(e){throw this.logger.error(`updateStreamSettings error: ${e.message}`),e}}remCallStream(e){const t=void 0===e?"__default":e.id();this._callStreams[t]&&(this._remCallStream(this._callStreams[t]),this._callStreams[t]=void 0,delete this._callStreams[t])}_remCallStream(e){e&&(l.default.isIphone()||e.getTracks().forEach(t=>{t.onended=void 0,t.onmute=void 0,t.stop(),e.removeTrack(t)}))}clear(){this._mirrorStream&&this._mirrorStream.getTracks().forEach(e=>{e.onended=void 0,e.onmute=void 0,e.stop()}),this._mirrorStream=void 0;for(let e in this._callStreams)if(this._callStreams.hasOwnProperty(e)){const t=this._callStreams[e];t&&t.getTracks().forEach(e=>{e.onended=void 0,e.onmute=void 0,e.stop()})}this._callStreams={}}getLocalMediaRenderers(){return this._localMediaRenderers}showLocalVideo(e=!0){return this.logger.info("Call to show local video."),new Promise((t,n)=>{const r="voximplantlocalvideo";if(this.isLocalVideoRequested)return this.logger.warning("The local video is already displaying."),t(this._localMediaRenderers[0]);const i=this._getVideoFromCalls();if(this.isLocalVideoRequested=!0,i){const n=new g.MediaRenderer({stream:new MediaStream([i]),kind:"video",placeOnDom:e,isLocal:!0,deprecatedId:r,mids:["local"]});this._localMediaRenderers.push(n),this.logger.info("New localMediaRenderer for existing track has been added."),t(n),this.dispatchEvent({name:o.default.HardwareEvents.MediaRendererAdded,renderer:n})}else{const i=this.getDedicatedMirrorStream().then(n=>{this._dedicatedMirrorStream&&this.stopDedicatedMirrorStream(),this._dedicatedMirrorStream=n;const i=new g.MediaRenderer({stream:n,kind:"video",placeOnDom:e,isLocal:!0,deprecatedId:r,mids:["local"]});this._localMediaRenderers.push(i),this.logger.info("New localMediaRenderer has been added. New stream has been created."),t(i),this.dispatchEvent({name:o.default.HardwareEvents.MediaRendererAdded,renderer:i})}).catch(e=>{this.isLocalVideoRequested=!1,n(e)});this.localVideoPromises.push(i)}})}async getDedicatedMirrorStream(){try{return this.logger.info("Getting dedicated mirror stream."),await v.getUserMedia({video:s.CameraManager.get().getCallConstraints("__local__")})}catch(e){if("NotReadableError"===(null==e?void 0:e.name))return this.logger.info("Could not get mirror stream. Will do it again."),this.stopDedicatedMirrorStream(),await v.getUserMedia({video:s.CameraManager.get().getCallConstraints("__local__")});throw e}}stopDedicatedMirrorStream(){if(this._dedicatedMirrorStream){this._dedicatedMirrorStream.getTracks().forEach(e=>{e.onended=null,e.onmute=null,e.stop()});try{this._dedicatedMirrorStream.stop(),this.logger.info("Dedicated mirror stream has been stopped.")}catch(e){}this._dedicatedMirrorStream=null}}async updateLocalVideo(e){if(this._localMediaRenderers&&0===this._localMediaRenderers.length)return void this.logger.info("Local video was not updated because there is 0 local media renderers.");if(!this.isLocalVideoRequested)return void this.logger.info("Local video was not updated because it was not requested.");const t=this._getVideoFromCalls();if(this.logger.info(`Local video for rendererKind: ${e} will be updated. Track from call exist: ${Boolean(t)}`),t)this._localMediaRenderers[0].stream.getVideoTracks()[0].id!==t.id?(this._localMediaRenderers[0].replaceVideo(new MediaStream([t])),this.stopDedicatedMirrorStream(),this.dispatchEvent({name:o.default.HardwareEvents.MediaRendererUpdated,renderer:this._localMediaRenderers[0],type:e||this._localMediaRenderers[0].kind})):this.logger.info("Local media renderer contains different track from call.");else try{const t=await this.getDedicatedMirrorStream();this._dedicatedMirrorStream&&this.stopDedicatedMirrorStream(),this._dedicatedMirrorStream=t,this._localMediaRenderers[0]&&(this._localMediaRenderers[0].kind=e||"video",this._localMediaRenderers[0].replaceVideo(t),this.dispatchEvent({name:o.default.HardwareEvents.MediaRendererUpdated,renderer:this._localMediaRenderers[0],type:e||this._localMediaRenderers[0].kind}))}catch(e){this.logger.error(`Unable to update local video: ${e.message}`)}}async hideLocalVideo(){return this.isLocalVideoRequested?(await Promise.all(this.localVideoPromises),this.logger.info("Start hiding local video."),this.localVideoPromises=[],0===this._localMediaRenderers.length?(this.logger.info("There isn't local media renderer."),Promise.resolve()):(this.dispatchEvent({name:o.default.HardwareEvents.BeforeMediaRendererRemoved,renderer:this._localMediaRenderers[0]}),this.isLocalVideoRequested=!1,this._dedicatedMirrorStream&&this.stopDedicatedMirrorStream(),this._localMediaRenderers[0].clear(),this._localMediaRenderers[0].stream=null,this._localMediaRenderers.shift(),this.dispatchEvent({name:o.default.HardwareEvents.MediaRendererRemoved,renderer:this._localMediaRenderers[0]}),this.logger.info("Local video has been hidden."),Promise.resolve())):(this.logger.info("Nothing to hide. Local video was not requested."),Promise.resolve())}on(e,t,n){super.on(e,t)}off(e,t){super.off(e,t)}_newScreenSharing(e){return this.logger.info("Getting media for screen sharing."),new Promise((t,n)=>{l.default.getScreenMedia().then(n=>{var r;this.logger.info("Media access granted");const i={stream:n,renderer:null};n.getTracks().forEach(t=>{t.onended=()=>e.stopSharingScreen()});let o=null===(r=this._localMediaRenderers)||void 0===r?void 0:r[0];o&&(o.kind="sharing"),void 0===this._sharingStreams[e.id()]&&(this._sharingStreams[e.id()]=[]),this._sharingStreams[e.id()].push(i),t(i)}).catch(e=>{this.logger.error(`Media access denied: ${e?e.message||e.name||e:"unknown"}`),n(e)})})}_getScreenSharing(e){return void 0!==this._sharingStreams[e.id()]?this._sharingStreams[e.id()]:[]}_clearScreenSharing(e,t){return this.logger.info("Stopping sharing media stream."),new Promise(n=>{var r;this._sharingStreams[e.id()]=this._sharingStreams[e.id()].filter(e=>e.stream.id!==t.stream.id),t.renderer&&(this._localMediaRenderers=this._localMediaRenderers.filter(e=>e.id!==t.renderer.id),t.renderer.clear(),t.renderer=void 0),t.stream.getTracks().forEach(e=>{e.enabled=!1,e.onended=null,e.stop()}),"sharing"===(null===(r=this._localMediaRenderers[0])||void 0===r?void 0:r.kind)&&(this._localMediaRenderers[0].kind="video"),this.logger.info("Sharing media stream has been stopped."),e.dispatchEvent({name:_.CallEvents.SharingStopped,call:e,result:!0}),n()})}_getTracksKind(e){let t={};const n=this._callStreams[e.id()];void 0!==n&&n.getTracks().forEach(e=>t[e.id]=e.kind);const r=this._sharingStreams[e.id()];return void 0!==r&&r.forEach(e=>{e.stream.getTracks().forEach(e=>t[e.id]="sharing")}),t}_traceName(){return"StreamManager"}_getVideoFromCalls(){const e=p.CallManager.get(),t=[];for(const n in e.calls)if(e.calls.hasOwnProperty(n)){const r=e.calls[n];if(!r.active())break;const i={time:r.getCallDuration(),track:null};r.peerConnection&&r.peerConnection.getTransceivers().forEach(e=>{null===i.track&&-1!==e.direction.indexOf("send")&&e.sender.track&&"video"===e.sender.track.kind&&"live"===e.sender.track.readyState&&(i.track=e.sender.track)}),i.track&&t.push(i)}return t.length?(t.sort((e,t)=>e.time>t.time?1:e.time<t.time?-1:0),t[0].track):null}onCallEnded(){}_composeConstraints(e){const t=void 0===e?"__default":e.id(),n={};return"__default"!==t&&void 0!==e&&e.settings.videoDirections.sendVideo?n.video=s.CameraManager.get().getCallConstraints(t):n.video=!1,"__default"===t||e.settings.audioDirections.sendAudio?n.audio=d.AudioDeviceManager.get().getCallConstraints(t):n.audio=!1,n}static getUserMedia(e){return new Promise((t,n)=>{const r=navigator.mediaDevices.getUserMedia(e).then(e=>{v.umCache.push(e),t(e)}).catch(n);v.umCachePromises.push(r)})}static async clearUmCache(){await Promise.all(v.umCachePromises),v.umCachePromises=[],v.umCache=v.umCache.filter(e=>{const t=v.get()._dedicatedMirrorStream;return!(!t||e.id!==t.id)||(e.getTracks().forEach(e=>e.stop()),!1)})}}v.umCache=[],v.umCachePromises=[],r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"getCallStream",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_handleNotFoundError",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_handleNotReadableError",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_updateCallStream",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"updateCallStream",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"remCallStream",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_remCallStream",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"clear",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"getLocalMediaRenderers",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"showLocalVideo",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"hideLocalVideo",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"on",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"off",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_newScreenSharing",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_getScreenSharing",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_clearScreenSharing",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_getTracksKind",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"onCallEnded",null),r([i.LogManager.d_trace(i.LogCategory.HARDWARE)],v.prototype,"_composeConstraints",null),t.StreamManager=v},4855:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=t.CameraManager=t.AudioDeviceManager=void 0;var r=n(2709);Object.defineProperty(t,"AudioDeviceManager",{enumerable:!0,get:function(){return r.AudioDeviceManager}});var i=n(2334);Object.defineProperty(t,"CameraManager",{enumerable:!0,get:function(){return i.CameraManager}});var o=n(4007);Object.defineProperty(t,"StreamManager",{enumerable:!0,get:function(){return o.StreamManager}})},6230:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushService=void 0;const r=n(4106),i=n(209),o=n(245);class a{static updatePromiseResult(e){const t=this._pushPromises[e.params];t&&(clearTimeout(t.expire),e.msg?t.reject(e.msg):t.resolve(),delete this._pushPromises[e.params])}static register(e){return new Promise((t,n)=>{const a=(new i.default).toString();o.default.callRemoteFunction(r.RemoteFunction.registerPushToken,e,a)?this._pushPromises[a]={resolve:t,reject:n,expire:setTimeout(n,3e4)}:n()})}static unregister(e){return new Promise((t,n)=>{const a=(new i.default).toString();o.default.callRemoteFunction(r.RemoteFunction.unregisterPushToken,e,a)?this._pushPromises[a]={resolve:t,reject:n,expire:setTimeout(n,3e4)}:n()})}static incomingPush(e){return new Promise((t,n)=>{o.default.callRemoteFunction(r.RemoteFunction.pushFeedback,e)?t():n()})}_traceName(){return"PushService"}}t.PushService=a,a._pushPromises={}},1150:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogManager=t.Logger=t.ClientState=t.LogCategory=t.LogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.TRACE=4]="TRACE"}(n=t.LogLevel||(t.LogLevel={})),function(e){e[e.SIGNALING=0]="SIGNALING",e[e.RTC=1]="RTC",e[e.USERMEDIA=2]="USERMEDIA",e[e.CALL=3]="CALL",e[e.CALLEXP2P=4]="CALLEXP2P",e[e.CALLEXSERVER=5]="CALLEXSERVER",e[e.CALLMANAGER=6]="CALLMANAGER",e[e.CLIENT=7]="CLIENT",e[e.AUTHENTICATOR=8]="AUTHENTICATOR",e[e.PCFACTORY=9]="PCFACTORY",e[e.UTILS=10]="UTILS",e[e.ORTC=11]="ORTC",e[e.MESSAGING=12]="MESSAGING",e[e.REINVITEQ=13]="REINVITEQ",e[e.HARDWARE=14]="HARDWARE",e[e.ENDPOINT=15]="ENDPOINT",e[e.EVENTTARGET=16]="EVENTTARGET",e[e.VSM=17]="VSM"}(r=t.LogCategory||(t.LogCategory={})),function(e){e[e.DISCONNECTED="DISCONNECTED"]="DISCONNECTED",e[e.CONNECTING="CONNECTING"]="CONNECTING",e[e.CONNECTED="CONNECTED"]="CONNECTED",e[e.RECONNECTING="RECONNECTING"]="RECONNECTING",e[e.LOGGING_IN="LOGGING_IN"]="LOGGING_IN",e[e.LOGGED_IN="LOGGED_IN"]="LOGGED_IN"}(t.ClientState||(t.ClientState={}));class i{constructor(e,t,n){this.category=e,this.label=t,this.provider=n}log(e,t){this.provider.writeMessage(this.category,this.label,e,t)}error(e){this.log(n.ERROR,e)}warning(e){this.log(n.WARNING,e)}info(e){this.log(n.INFO,e)}trace(e){this.log(n.TRACE,e)}}t.Logger=i;class o{constructor(){this.timeOriginGap=0,this.isFirstPrint=!0,this.levels={},this.showTrace=!1,this._shadowLogging=!1}get shadowLogging(){return this._shadowLogging}set shadowLogging(e){this._shadowLogging||(this._shadowLog=[]),this._shadowLogging=e}static get(){return void 0===this.inst&&(this.inst=new o,this.inst.prettyPrint=!1),this.inst}static d_trace(e){return(t,r,i)=>({value:function(...a){const s="login"===r||"basicLogin"===r||"sendWSMessage"===r&&"login"===a[0],l="sendWSMessage"===r?2:1,c=t._traceName?`${t._traceName()}${this&&this.settings?` ${this.settings.id}`:this&&this.id&&"function"!=typeof this.id?` ${this.id}`:""}`:"";let u="";try{u=a.map((e,t)=>s&&t===l?'"********"':JSON.stringify(e)).join()}catch(e){u="circular structure"}return o.get().writeMessage(e,c,n.TRACE,`${String(r)}(${u})`),i.value.apply(this,a)}})}getSLog(){return this._shadowLog}clearSilentLog(){this._shadowLog=[]}setLoggerCallback(e){this._outerCallback=e}setPrettyPrint(e){this.prettyPrint=e}setLogLevel(e,t){t===n.TRACE?this.showTrace=!0:this.levels[r[e]]=t}writeMessage(e,t,i,a){i===n.TRACE?o.traceTick++:o.logTick++,this.timeOriginGap||(this.timeOriginGap=performance.now());const s="string"==typeof a?a:JSON.stringify(a),l=this.isFirstPrint?this.prettyPrint?(new Date).toUTCString():(new Date).toString():parseInt(""+(performance.now()-this.timeOriginGap)/1e3),c=i===n.TRACE?`VIWSTR ${o.traceTick}`:`VIWSLR ${o.logTick}`,u=`${c} ${l} ${n[i]} ${t}: ${s}`;if(i<=(void 0!==this.levels[r[e]]?this.levels[r[e]]:n.NONE)||i===n.TRACE&&this.showTrace){if(void 0!==console.debug&&void 0!==console.info&&void 0!==console.error&&void 0!==console.warn)if(this.prettyPrint){const e=`%c${c} ${l} [${n[i]}] %c${t}: %c${s}`,r={[n.ERROR]:"color:#fab005",[n.WARNING]:"color:#af2a2a",[n.INFO]:"color:#0ca678",[n.TRACE]:"color:#8f66ff"};i===n.ERROR?console.error(u):i===n.WARNING?console.warn(e,r[i],"color:#2375a2","color:#000"):i===n.INFO?console.info(e,r[i],"color:#2375a2","color:#000"):i===n.TRACE?console.debug(e,r[i],"color:#2375a2","color:#000"):console.log(e,r[i],"color:#2375a2","color:#000")}else i===n.ERROR?console.error(u):i===n.WARNING?console.warn(u):i===n.INFO?console.info(u):i===n.TRACE?console.debug(u):console.log(u);else console.log(u);this.isFirstPrint&&(this.isFirstPrint=!1)}this.shadowLogging&&(i!==n.TRACE||this.showTrace)&&this._shadowLog.push(u),"function"!=typeof this._outerCallback||i===n.TRACE&&!this.showTrace||this._outerCallback({formattedText:u,category:e,label:t,level:i,message:s})}createLogger(e,t){return new i(e,t,this)}_traceName(){return"Logger"}}t.LogManager=o,o.logTick=0,o.traceTick=0},164:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginState=void 0,function(e){e[e.LOGGED_OFF=0]="LOGGED_OFF",e[e.LOGGING_IN=1]="LOGGING_IN",e[e.LOGGED_IN=2]="LOGGED_IN"}(t.LoginState||(t.LoginState={}))},1450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaRenderDisablingReason=void 0,function(e){e.Automatic="automatic",e.Manual="manual"}(t.MediaRenderDisablingReason||(t.MediaRenderDisablingReason={}))},7222:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaRenderer=void 0;const i=n(3869),o=n(125),a=n(1150),s=n(2957),l=n(2282),c=n(141),u=n(7272),d=n(8597),g=n(6980);class p{constructor(e){this._playElemLock=0,this._encodedStreams=[],this._enabled=!0,this.isRemoving=!1,this._receiverTransform=s.Utils.getDefaultStreamTransformer();const{stream:t,kind:n,placeOnDom:r,isLocal:l,deprecatedId:c,transceivers:d,mids:g}=e;if(this.transceivers=d,this.stream=t,this.kind=n,this.mids=g,this.placeOnDom=r||!1,this.isLocal=l||!1,void 0===this.kind&&(this.kind=t.getVideoTracks().length?"video":"audio"),this._id=s.Utils.generateUUID(),this.logger=a.LogManager.get().createLogger(a.LogCategory.USERMEDIA,this._traceName()),this.stream.getTracks().forEach(e=>{e.onended=()=>{this.checkStreamActive(t)}}),this.stream.getTracks().length){if(this.element=document.getElementById(this.stream.getTracks()[0].id)||document.createElement("sharing"===this.kind?"video":this.kind),this.element.autoplay=!0,this.isLocal&&(this.element.muted=!0),this.element.setAttribute("playsinline",null),c?document.getElementById("voximplantlocalvideo")?this.element.id=this.stream.getTracks()[0].id:this.element.id="voximplantlocalvideo":this.element.id=this.stream.getTracks()[0].id,"audio"!==n)this.stream.getAudioTracks().length||(this.element.muted=!0);else{const e=u.default.AudioDeviceManager.get().getDefaultAudioSettings();e.outputId&&"function"==typeof this.element.setSinkId&&this.element.setSinkId("").then(()=>{this.element.setSinkId(e.outputId+"")}).catch(()=>{this.element.setSinkId(e.outputId+"")})}i.default.attachMedia(this),this.placeOnDom&&this.renderDefault()}o.Client.getInstance().isInsertableStreamsSupported()&&this.transceivers.length&&this.transceivers.forEach(e=>{const t=e.receiver.createEncodedStreams();this._encodedStreams.push(t)})}checkStreamActive(e){e.getTracks().every(e=>"ended"===e.readyState)&&setTimeout(()=>{this.stream.getTracks().every(e=>"ended"===e.readyState)&&this.clear()},100)}get id(){return this._id}renderDefault(){const e=o.Client.getInstance(),t=this.isLocal?e.config().localVideoContainerId:e.config().remoteVideoContainerId,n=document.getElementById(t);this.render(n)}get enabled(){const e=g.VideoStatusMachineMediator.retrieveVSMByMediaRenderer(this);return e?"enabled"===e.value:this._enabled}enable(){if(!this.transceivers.length)throw Error("Transceiver list is empty");this.makeVideoStatusTransition("enable"),this._enabled=!0,this.conferenceEpManagerUpdateState&&this.conferenceEpManagerUpdateState()}disable(){if(!this.transceivers.length)throw Error("Transceiver list is empty");this.makeVideoStatusTransition("disable"),this._enabled=!1,this.conferenceEpManagerUpdateState&&this.conferenceEpManagerUpdateState()}requestVideoSize(e,t){return this.transceivers.length?(this.videoSize={width:e,height:t},this.conferenceEpManagerUpdateRenderSize(),Promise.resolve()):Promise.reject()}render(e){if(this.logger.info(`render() id: ${this._id} to ${e?e.tagName.toLowerCase():"no_container"} #${e?e.id:"no_container"} class ${e?e.className:"no_container"}`),!(o.Client.getInstance().config()&&o.Client.getInstance().config().experiments&&o.Client.getInstance().config().experiments.preventRendering))if(e&&("video"===e.tagName.toLowerCase()&&"audio"!==this.kind||"audio"===e.tagName.toLowerCase()&&"audio"===this.kind))this.isElementCreated=!1,this.element=e,i.default.attachMedia(this),this.addListeners();else{this.isElementCreated=!0;const t=e||document.body;void 0!==this.element.parentElement&&null!==this.element.parentElement?this.element.parentElement&&this.element.parentElement.removeChild(this.element):this.element.parentNode&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),t.appendChild(this.element),this.addListeners()}}addListeners(){this.element.addEventListener("canplaythrough",this.onCanplaythrough.bind(this)),this.element.addEventListener("error",e=>this.logger.info(`An error occurred during the loading of an ${this.kind} for ${JSON.stringify(this.mids)}: ${JSON.stringify(e)}`)),this.element.addEventListener("abort",()=>this.logger.info(`The loading of an ${this.kind} for ${JSON.stringify(this.mids)} is aborted.`)),this.element.addEventListener("stalled",()=>{this.logger.info(`Failed to fetch data, but trying for ${this.kind} ${JSON.stringify(this.mids)}`)}),this.element.addEventListener("suspend",()=>{this.logger.info(`The media ${this.kind} for ${JSON.stringify(this.mids)} has been suspended.`)})}onCanplaythrough(){this.element&&(this.playElement(),this.element.onpause=this.playElement)}replaceVideo(e){e?(this.stream=e,this.element?i.default.attachMedia(this):this.logger.info("replaceVideo(): replacing video has failed: DOM element is undefined")):this.logger.error("replaceVideo(): replacing video has failed: a mediastream is not provided")}makeVideoStatusTransition(e){const t=g.VideoStatusMachineMediator.retrieveVSMByMediaRenderer(this);if(t){const n=`${e.toUpperCase()}_VIDEO`;if(!g.VideoStatusMachineMediator.makeTransition(t,n)){const n=t.value.replace(/([a-z])([A-Z])/g,"$1 $2").toLowerCase();throw Error(`Cannot ${e} the media renderer due to the one is already ${n}`)}}}clear(){this.isRemoving?this.logger.info(`MediaRendered ID: already removing ${this._id}. Ignored.`):(this.isRemoving=!0,this.logger.info(`MediaRendered ID: ${this._id}. Start clear routine.`),this.onBeforeDestroy&&this.onBeforeDestroy(),this.element&&(this.element.removeEventListener("canplaythrough",this.onCanplaythrough),i.default.detachMedia(this),this.isElementCreated&&(this.element.id="",void 0!==this.element.parentElement&&null!==this.element.parentElement?this.element.parentElement&&this.element.parentElement.removeChild(this.element):this.element.parentNode&&this.element.parentNode&&this.element.parentNode.removeChild(this.element))),this.onDestroy&&this.onDestroy())}setVolume(e){this.logger.info(`setVolume(${e})`),this.element&&(this.element.volume=e)}async useAudioOutput(e){if(this.logger.info(`useAudioOutput(${e}) on MediaRenderer ${this.kind}`),"audio"===this.kind)try{"function"==typeof this.element.setSinkId?await this.element.setSinkId(e):this.logger.warning("Set audio output is impossible. Browser does not support this option.")}catch(e){this.logger.error(`useAudioOutput(): error has occurred on MR with kind ${this.kind} ${s.Utils.stringifyError(e)}`)}else this.logger.info(`useAudioOutput(): media renderer with kind ${this.kind} has been skipped. Only audio media renderers support this function`)}_traceName(){return"MediaRenderer"}playElement(){this.element&&this.element.paused&&this.element.readyState>3&&(this.logger.info(`MediaRenderer ID:${this._id} for ${JSON.stringify(this.mids)} is trying to play`),this.element.play().catch(e=>{this.logger.warning(`Cannot start playing MediaRenderer ID:${this._id}. ${e.message}`),o.Client.getInstance().dispatchEvent({name:c.Events.PlaybackError,element:this.element,error:e})}))}pauseElement(){if(0===this._playElemLock||this._playElemLock>10)if(this.element instanceof HTMLVideoElement){let e=this.element.pause();void 0!==e&&e.catch(e=>{})}else this.element.pause();else this._playElemLock+=1,setTimeout(this.pauseElement,400)}notifyAboutCreation(e,t){t.wasAdded?(t.dispatchEvent({name:d.EndpointEvents.RemoteMediaAdded,call:e,endpoint:t,mediaRenderer:this}),e.dispatchEvent({name:l.CallEvents.MediaElementCreated,call:e,stream:this.stream,element:this.element,type:this.kind})):setTimeout(()=>this.notifyAboutCreation(e,t),400)}get receiverTransform(){return this._receiverTransform}set receiverTransform(e){this._receiverTransform=e,this._encodedStreams.forEach(e=>{e.readable.pipeThrough(this._receiverTransform).pipeTo(e.writable)})}}r([a.LogManager.d_trace(a.LogCategory.USERMEDIA)],p.prototype,"checkStreamActive",null),r([a.LogManager.d_trace(a.LogCategory.USERMEDIA)],p.prototype,"renderDefault",null),r([a.LogManager.d_trace(a.LogCategory.USERMEDIA)],p.prototype,"render",null),r([a.LogManager.d_trace(a.LogCategory.USERMEDIA)],p.prototype,"clear",null),r([a.LogManager.d_trace(a.LogCategory.USERMEDIA)],p.prototype,"setVolume",null),r([a.LogManager.d_trace(a.LogCategory.USERMEDIA)],p.prototype,"useAudioOutput",null),t.MediaRenderer=p},1316:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaRenderResolver=void 0;const n=["video","sharing"],r=["audio"];t.MediaRenderResolver=class{static isVideoMR(e){return n.includes(e.kind)}static isAudioMR(e){return r.includes(e.kind)}static retrieveVideoMR(e){return e.find(this.isVideoMR)}static retrieveAudioMR(e){return e.find(this.isAudioMR)}}},6054:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messaging=void 0;const r=n(7250),i=n(311),o=n(8635);var a;!function(e){e.getInstance=function(){return t.getInstance()};class t extends r.Messenger{}e.Messenger=t;class n extends i.Conversation{}e.Conversation=n;class a extends o.Message{}let s,l,c;e.Message=a,function(e){e.UNKNOWN="UNKNOWN",e.createConversation="createConversation",e.editConversation="editConversation",e.removeConversation="removeConversation",e.joinConversation="joinConversation",e.leaveConversation="leaveConversation",e.getConversation="getConversation",e.getConversations="getConversations",e.getPublicConversations="getPublicConversations",e.searchConversations="searchConversations",e.removeEmptyConversation="removeEmptyConversation",e.addParticipants="addParticipants",e.editParticipants="editParticipants",e.removeParticipants="removeParticipants",e.getUser="getUser",e.getUsers="getUsers",e.editUser="editUser",e.setStatus="setStatus",e.sendMessage="sendMessage",e.editMessage="editMessage",e.removeMessage="removeMessage",e.typingMessage="typingMessage",e.isRead="isRead",e.subscribe="subscribe",e.unsubscribe="unsubscribe",e.manageNotification="manageNotification",e.getSubscriptionList="getSubscriptionList",e.createBot="createBot",e.removeBot="removeBot",e.retransmitEvents="retransmitEvents"}(s=e.MessengerAction||(e.MessengerAction={})),function(e){e.CreateConversation="CreateConversation",e.EditConversation="EditConversation",e.RemoveConversation="RemoveConversation",e.GetConversation="GetConversation",e.GetPublicConversations="GetPublicConversations",e.SendMessage="SendMessage",e.EditMessage="EditMessage",e.RemoveMessage="RemoveMessage",e.Typing="Typing",e.EditUser="EditUser",e.GetUser="GetUser",e.Error="Error",e.RetransmitEvents="RetransmitEvents",e.Read="Read",e.Subscribe="Subscribe",e.Unsubscribe="Unsubscribe",e.SetStatus="SetStatus",e.GetSubscriptionList="GetSubscriptionList",e.CreateBot="CreateBot",e.RemoveBot="RemoveBot"}(l=e.MessengerEvents||(e.MessengerEvents={})),function(e){e[e.Error_0=0]="Error_0",e[e.Error_1=1]="Error_1",e[e.Error_2=2]="Error_2",e[e.Error_3=3]="Error_3",e[e.Error_8=8]="Error_8",e[e.Error_10=10]="Error_10",e[e.Error_11=11]="Error_11",e[e.Error_12=12]="Error_12",e[e.Error_13=13]="Error_13",e[e.Error_15=15]="Error_15",e[e.Error_16=16]="Error_16",e[e.Error_18=18]="Error_18",e[e.Error_19=19]="Error_19",e[e.Error_21=21]="Error_21",e[e.Error_22=22]="Error_22",e[e.Error_23=23]="Error_23",e[e.Error_24=24]="Error_24",e[e.Error_25=25]="Error_25",e[e.Error_26=26]="Error_26",e[e.Error_28=28]="Error_28",e[e.Error_30=30]="Error_30",e[e.Error_32=32]="Error_32",e[e.Error_33=33]="Error_33",e[e.Error_34=34]="Error_34",e[e.Error_35=35]="Error_35",e[e.Error_36=36]="Error_36",e[e.Error_37=37]="Error_37",e[e.Error_38=38]="Error_38",e[e.Error_39=39]="Error_39",e[e.Error_40=40]="Error_40",e[e.Error_41=41]="Error_41",e[e.Error_42=42]="Error_42",e[e.Error_43=43]="Error_43",e[e.Error_500=500]="Error_500"}(c=e.MessengerError||(e.MessengerError={}))}(a=t.Messaging||(t.Messaging={})),t.default=a},311:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Conversation=void 0;const i=n(1150),o=n(7250),a=n(1855),s=n(8635),l=n(7050),c=n(8202),u=n(6968),d=n(6054);class g{constructor(e){this._backup={},this._uuid=e.uuid,this._participants=e.participants,this._title=e.title,this._direct=e.direct,this._publicJoin=e.publicJoin,this._uberConversation=e.uberConversation,this._customData=e.customData,this._createdAt=e.createdAt,this._lastUpdate=e.lastUpdate,this._lastSeq=Number(e.lastSeq)}get uuid(){return this._uuid}get title(){return this._title}set title(e){this._backup.title=this._title,this._title=e}get createdAt(){return this._createdAt}get lastUpdate(){return this._lastUpdate}get direct(){return this._direct}get uberConversation(){return this._uberConversation}get publicJoin(){return this._publicJoin}set publicJoin(e){this._backup.publicJoin=this._publicJoin,this._publicJoin=e}get participants(){return this._participants}get customData(){return this._customData}set customData(e){this._backup.customData=this._customData,this._customData=e}get lastSeq(){return this._lastSeq}updateSeq(e){"number"==typeof e&&e>this._lastSeq&&(this._lastSeq=e),this._lastUpdate=Date.now()/1e3|0}static _createFromBus(e,t){return new g({participants:e.participants&&Array.isArray(e.participants)?e.participants.map(e=>{const t=Number(e.flags)===u.MsgPermissions.all,n=Number(e.flags)>u.MsgPermissions.is_owner&&e.flags<u.MsgPermissions.all,r=Number(e.flags).toString(2).slice(-6).split("").reverse();return{userId:Number(e.user_id),lastRead:e.last_read,isOwner:t||n,canWrite:t||"1"===r[0],canEdit:t||"1"===r[1],canRemove:t||"1"===r[2],canManageParticipants:t||"1"===r[3],canEditAll:t||"1"===r[4],canRemoveAll:t||"1"===r[5]}}):[],title:e.title,uuid:e.uuid,direct:e.direct,publicJoin:e.enable_public_join,uberConversation:e.uber_conversation,createdAt:e.created_at,lastUpdate:e.last_update,lastSeq:t,customData:e.custom_data&&"object"==typeof e.custom_data?e.custom_data:void 0})}static createFromCache(e){return new g({uuid:e.uuid,title:e.title,participants:e.participants||[],direct:e.direct,publicJoin:e.publicJoin,uberConversation:e.uberConversation,createdAt:e.createdAt,lastUpdate:e.lastUpdate,customData:e.customData})}toCache(){return{uuid:this._uuid,title:this._title,participants:this._participants,direct:this._direct,publicJoin:this._publicJoin,uberConversation:this._uberConversation,createdAt:this._createdAt,lastUpdate:this._lastUpdate,customData:this._customData,lastSeq:this._lastSeq}}_getCreatePayload(){return{participants:this._prepareParticipants(this._participants).map(e=>Object.assign(e,{flags:e.flags?e.flags:7})),title:"string"==typeof this._title?this._title:"",direct:"boolean"==typeof this._direct&&this._direct,enable_public_join:"boolean"==typeof this._publicJoin&&this._publicJoin,uber_conversation:"boolean"==typeof this._uberConversation?this._uberConversation:void 0,custom_data:"object"==typeof this._customData?this._customData:{}}}_getEditPayload(){if(void 0===this._uuid)throw Error("You should get conversation UUID with MessengetAction.getConversation() action!");return{uuid:this._uuid,title:"string"==typeof this._title?this._title:"",enable_public_join:"boolean"==typeof this._publicJoin&&this._publicJoin,custom_data:"object"==typeof this._customData?this._customData:{}}}_getUserPermissions(e){const t=(e.isOwner?"1000000000":"")+[e.canRemoveAll,e.canEditAll,e.canManageParticipants,e.canRemove,e.canEdit,e.canWrite].map(e=>e?1:0).join("");return parseInt(t,2)}_prepareParticipants(e){return e.map(e=>({user_id:e.userId,flags:this._getUserPermissions(e),last_read:e.lastRead}))}_revertChanges(){Object.keys(this._backup).forEach(e=>{this[e]=this._backup[e]}),this._backup={}}update(){return a.default.get().editConversation(this)}setTitle(e){return"string"!=typeof e?o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.editConversation):(this._backup.title=this._title,this._title=e,a.default.get().editConversation(this))}setPublicJoin(e){return"boolean"!=typeof e?o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.editConversation):(this._backup.publicJoin=this._publicJoin,this._publicJoin=e,a.default.get().editConversation(this))}setCustomData(e){return!e||Array.isArray(e)||"object"!=typeof e?o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.editConversation):(this._backup.customData=this._customData,this._customData=e,a.default.get().editConversation(this))}addParticipants(e){return Array.isArray(e)&&0!=e.length?new Promise((t,n)=>{const r=l.MsgSignaling.get().sendWsMessage(c.MsgAction.addParticipants,{uuid:this._uuid,participants:this._prepareParticipants(e)});o.Messenger.getInstance()._registerPromise(r,t,n)}):o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.addParticipants)}editParticipants(e){return Array.isArray(e)&&0!=e.length?new Promise((t,n)=>{const r=l.MsgSignaling.get().sendWsMessage(c.MsgAction.editParticipants,{uuid:this._uuid,participants:this._prepareParticipants(e)});o.Messenger.getInstance()._registerPromise(r,t,n)}):o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.editParticipants)}removeParticipants(e){return Array.isArray(e)&&0!=e.length?new Promise((t,n)=>{const r=l.MsgSignaling.get().sendWsMessage(c.MsgAction.removeParticipants,{uuid:this._uuid,participants:e.filter(e=>void 0!==e.userId).map(e=>e.userId)});o.Messenger.getInstance()._registerPromise(r,t,n)}):o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.removeParticipants)}sendMessage(e,t){return"string"!=typeof e?o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.sendMessage):new s.Message(e,t).sendTo(this)}typing(){return this._debounceLock?Promise.resolve(!1):(setTimeout(()=>{this._debounceLock=!1},1e4),this._debounceLock=!0,new Promise((e,t)=>{const n=l.MsgSignaling.get().sendWsMessage(c.MsgAction.typingMessage,{conversation:this._uuid});o.Messenger.getInstance()._registerPromise(n,e,t)}))}markAsRead(e){return new Promise((t,n)=>{const r=l.MsgSignaling.get().sendWsMessage(c.MsgAction.isRead,{conversation:this._uuid,seq:e});o.Messenger.getInstance()._registerPromise(r,t,n)})}retransmitEvents(e,t,n){return"number"!=typeof t||"number"!=typeof e?o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.retransmitEvents):new Promise((r,i)=>{let a,s,u;Promise.all(Array(t-e+1).fill(0).map((t,n)=>n+e).map(e=>new Promise((t,n)=>{const r=n=>{n.events&&n.events[0]&&Number(n.events[0].seq)===e&&n.requestUuid===a&&(clearTimeout(l),o.Messenger.getInstance().off(d.default.MessengerEvents.RetransmitEvents,r),o.Messenger.getInstance().off(d.default.MessengerEvents.Error,i),s||(s=n.initiator),u||(u=n.messengerAction),t(n.events[0]))},i=t=>{t.messengerAction==d.default.MessengerAction.retransmitEvents&&t.events&&t.events[0]&&Number(t.events[0].seq)===e&&(clearTimeout(l),o.Messenger.getInstance().off(d.default.MessengerEvents.RetransmitEvents,r),o.Messenger.getInstance().off(d.default.MessengerEvents.Error,i),n(t))},l=setTimeout(()=>{o.Messenger.getInstance().off(d.default.MessengerEvents.RetransmitEvents,r),o.Messenger.getInstance().off(d.default.MessengerEvents.Error,i),o.Messenger.getInstance().reject(d.default.MessengerError.Error_0,d.default.MessengerAction.retransmitEvents).catch(n)},o.Messenger.rejectTimeout);o.Messenger.getInstance().on(d.default.MessengerEvents.RetransmitEvents,r),o.Messenger.getInstance().on(d.default.MessengerEvents.Error,i)}))).then(e=>r({initiator:s,messengerAction:u,events:e,requestUuid:a})).catch(i),a=l.MsgSignaling.get().sendWsMessage(c.MsgAction.retransmitEvents,{conversation:this._uuid,events_from:0|e,events_to:0|t,count:n})})}_traceName(){return"Conversation"}}r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"updateSeq",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"toCache",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"_getCreatePayload",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"_getEditPayload",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"_prepareParticipants",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"_revertChanges",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"update",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"addParticipants",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"editParticipants",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"removeParticipants",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"typing",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"markAsRead",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g.prototype,"retransmitEvents",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g,"_createFromBus",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],g,"createFromCache",null),t.Conversation=g},1855:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});const i=n(7050),o=n(7250),a=n(311),s=n(8635),l=n(1150),c=n(6054),u=n(249),d=n(6623),g=n(8202);class p{constructor(){if(p.instance)throw new Error(d.MESSAGING_ERR_2);this.signalling=i.MsgSignaling.get(),this.signalling.addEventListener(u.MsgEvent.onCreateConversation,(e,t)=>{this.resolveEvent(e,c.default.MessengerEvents.CreateConversation,t)}),this.signalling.addEventListener(u.MsgEvent.onEditConversation,(e,t)=>{this.resolveEvent(e,c.default.MessengerEvents.EditConversation,t)}),this.signalling.addEventListener(u.MsgEvent.onRemoveConversation,(e,t)=>{o.Messenger.getInstance()._dispatchEvent(c.default.MessengerEvents.RemoveConversation,{uuid:e.object.uuid,seq:e.seq,messengerAction:c.default.MessengerAction[e.on_incoming_event],initiator:Number(e.initiator),timestamp:"number"==typeof e.timestamp?1e3*e.timestamp:void 0,requestUuid:t},t)}),this.signalling.addEventListener(u.MsgEvent.onGetConversation,(e,t)=>{this.resolveEvent(e,c.default.MessengerEvents.GetConversation,t)}),this.signalling.addEventListener(u.MsgEvent.onGetPublicConversations,(e,t)=>{o.Messenger.getInstance()._dispatchEvent(c.default.MessengerEvents.GetPublicConversations,{conversations:e.object.uuid,initiator:Number(e.initiator),messengerAction:c.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)}),this.signalling.addEventListener(u.MsgEvent.onSendMessage,(e,t)=>{this.resolveMessageEvent(e,c.default.MessengerEvents.SendMessage,t)}),this.signalling.addEventListener(u.MsgEvent.onEditMessage,(e,t)=>{this.resolveMessageEvent(e,c.default.MessengerEvents.EditMessage,t)}),this.signalling.addEventListener(u.MsgEvent.onRemoveMessage,(e,t)=>{this.resolveMessageEvent(e,c.default.MessengerEvents.RemoveMessage,t)}),this.signalling.addEventListener(u.MsgEvent.isRead,(e,t)=>{o.Messenger.getInstance()._dispatchEvent(c.default.MessengerEvents.Read,{conversation:e.object.conversation,seq:e.object.seq,initiator:Number(e.initiator),messengerAction:c.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)}),this.signalling.addEventListener(u.MsgEvent.onTyping,(e,t)=>{o.Messenger.getInstance()._dispatchEvent(c.default.MessengerEvents.Typing,{conversation:e.object.conversation,initiator:Number(e.initiator),messengerAction:c.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)}),this.signalling.addEventListener(u.MsgEvent.onRetransmitEvents,(e,t)=>{o.Messenger.getInstance()._dispatchEvent(c.default.MessengerEvents.RetransmitEvents,{events:[e.object&&e.object.event?-1==e.object.event.indexOf("Message")&&e.object.payload?{conversation:a.Conversation._createFromBus(e.object.payload.object,e.object.payload.seq),initiator:Number(e.object.payload.initiator),seq:e.object.payload.seq,messengerAction:c.default.MessengerAction[e.object.payload.on_incoming_event],timestamp:"number"==typeof e.object.payload.timestamp?1e3*e.object.payload.timestamp:void 0}:{message:s.Message._createFromBus(e.object.payload.object,Number(e.object.payload.initiator)),initiator:Number(e.object.payload.initiator),seq:e.object.payload.seq,timestamp:"number"==typeof e.object.payload.timestamp?1e3*e.object.payload.timestamp:void 0,messengerAction:c.default.MessengerAction[e.object.payload.on_incoming_event]}:void 0],initiator:Number(e.initiator),messengerAction:c.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)})}static get(){return p.instance=p.instance||new p,p.instance}resolveEvent(e,t,n){const r=a.Conversation._createFromBus(e.object,e.seq);void 0!==r&&r.updateSeq(e.seq),o.Messenger.getInstance()._dispatchEvent(t,{conversation:r,initiator:Number(e.initiator),seq:e.seq,messengerAction:c.default.MessengerAction[e.on_incoming_event],timestamp:"number"==typeof e.timestamp?1e3*e.timestamp:void 0,requestUuid:n},n)}resolveMessageEvent(e,t,n){const r=s.Message._createFromBus(e.object,Number(e.initiator));o.Messenger.getInstance()._dispatchEvent(t,{message:r,initiator:Number(e.initiator),seq:e.seq,messengerAction:c.default.MessengerAction[e.on_incoming_event],timestamp:"number"==typeof e.timestamp?1e3*e.timestamp:void 0},n)}static deserialize(e){return a.Conversation.createFromCache(e)}static serialize(e){return e.toCache()}createConversation(e,t,n,r,i,s){return new Promise((l,c)=>{const u=this.signalling.sendWsMessage(g.MsgAction.createConversation,new a.Conversation({participants:e,title:t,direct:n,publicJoin:r,customData:s,uberConversation:i})._getCreatePayload());o.Messenger.getInstance()._registerPromise(u,l,c)})}editConversation(e){return new Promise((t,n)=>{let r;const i=e=>{e.requestUuid===r&&(clearTimeout(s),o.Messenger.getInstance().off(c.default.MessengerEvents.EditConversation,i),o.Messenger.getInstance().off(c.default.MessengerEvents.Error,a),t(e))},a=t=>{t.requestUuid===r&&(clearTimeout(s),o.Messenger.getInstance().off(c.default.MessengerEvents.EditConversation,i),o.Messenger.getInstance().off(c.default.MessengerEvents.Error,a),e._revertChanges(),n(t))},s=setTimeout(()=>{o.Messenger.getInstance().off(c.default.MessengerEvents.EditConversation,i),o.Messenger.getInstance().off(c.default.MessengerEvents.Error,a),o.Messenger.getInstance().reject(c.default.MessengerError.Error_0,c.default.MessengerAction.editConversation).catch(n)},o.Messenger.rejectTimeout);o.Messenger.getInstance().on(c.default.MessengerEvents.EditConversation,i),o.Messenger.getInstance().on(c.default.MessengerEvents.Error,a),r=this.signalling.sendWsMessage(g.MsgAction.editConversation,e._getEditPayload())})}getConversation(e){return new Promise((t,n)=>{const r=this.signalling.sendWsMessage(g.MsgAction.getConversation,{uuid:e});o.Messenger.getInstance()._registerPromise(r,t,n)})}getConversations(e){if(!Array.isArray(e))return o.Messenger.getInstance().reject(c.default.MessengerError.Error_0,c.default.MessengerAction.getConversations);let t;const n=Promise.all(e.map(e=>new Promise((n,r)=>{const i=r=>{r.requestUuid===t&&r.conversation.uuid===e&&(clearTimeout(s),o.Messenger.getInstance().off(c.default.MessengerEvents.GetConversation,i),o.Messenger.getInstance().off(c.default.MessengerEvents.Error,a),n(r))},a=e=>{e.requestUuid===t&&(clearTimeout(s),o.Messenger.getInstance().off(c.default.MessengerEvents.GetConversation,i),o.Messenger.getInstance().off(c.default.MessengerEvents.Error,a),r(e))},s=setTimeout(()=>{o.Messenger.getInstance().off(c.default.MessengerEvents.GetConversation,i),o.Messenger.getInstance().off(c.default.MessengerEvents.Error,a),o.Messenger.getInstance().reject(c.default.MessengerError.Error_0,c.default.MessengerAction.getConversation).catch(r)},o.Messenger.rejectTimeout);o.Messenger.getInstance().on(c.default.MessengerEvents.GetConversation,i),o.Messenger.getInstance().on(c.default.MessengerEvents.Error,a)})));return t=this.signalling.sendWsMessage(g.MsgAction.getConversations,{uuid:e}),n}getPublicConversations(){return new Promise((e,t)=>{const n=this.signalling.sendWsMessage(g.MsgAction.getPublicConversations,{});o.Messenger.getInstance()._registerPromise(n,e,t)})}static extractUserName(e){if(-1===e.indexOf("@"))return e;{const t=e.split("@");return t[1]=t[1].split(".").splice(0,2).join("."),t.join("@")}}_traceName(){return"ConversationManager"}}r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p.prototype,"resolveEvent",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p.prototype,"resolveMessageEvent",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p.prototype,"createConversation",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p.prototype,"editConversation",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p.prototype,"getConversation",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p.prototype,"getConversations",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p.prototype,"getPublicConversations",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p,"get",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p,"deserialize",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p,"serialize",null),r([l.LogManager.d_trace(l.LogCategory.MESSAGING)],p,"extractUserName",null),t.default=p},8635:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;const i=n(1150),o=n(7050),a=n(8202),s=n(7250);class l{constructor(e,t){this._text=e,void 0!==t&&Array.isArray(t)&&t.every(e=>e&&"object"==typeof e)?this._payload=t:this._payload=[]}get uuid(){return this._uuid}get conversation(){return this._conversation}get text(){return this._text}set text(e){this._text=e}get payload(){return this._payload}set payload(e){this._payload=e}get sender(){return this._sender}static _createFromBus(e,t){let n=new l(e.text,e.payload);return n._uuid=e.uuid,n._conversation=e.conversation,n._sender=t,n}static createFromCache(e){let t=new l(e.text,e.payload);return t._uuid=e.uuid,t._conversation=e.conversation,t._sender=Number(e.sender),t}toCache(){return{uuid:this._uuid,text:this._text,payload:this._payload,conversation:this._conversation,sender:this._sender}}getPayload(){let e={text:this._text,conversation:this._conversation};return void 0!==this._payload&&Array.isArray(this._payload)&&this._payload.every(e=>"object"==typeof e)?e.payload=this._payload:e.payload=[],e}sendTo(e){return this._conversation=e.uuid,new Promise((e,t)=>{const n=o.MsgSignaling.get().sendWsMessage(a.MsgAction.sendMessage,this.getPayload());s.Messenger.getInstance()._registerPromise(n,e,t)})}update(){return new Promise((e,t)=>{const n=o.MsgSignaling.get().sendWsMessage(a.MsgAction.editMessage,Object.assign(this.getPayload(),{uuid:this._uuid}));s.Messenger.getInstance()._registerPromise(n,e,t)})}remove(){return new Promise((e,t)=>{const n=o.MsgSignaling.get().sendWsMessage(a.MsgAction.removeMessage,{uuid:this._uuid,conversation:this.conversation});s.Messenger.getInstance()._registerPromise(n,e,t)})}_traceName(){return"Message"}}r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],l.prototype,"toCache",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],l.prototype,"getPayload",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],l.prototype,"sendTo",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],l.prototype,"update",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],l.prototype,"remove",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],l,"_createFromBus",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],l,"createFromCache",null),t.Message=l},7250:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Messenger=void 0;const i=n(1150),o=n(7050),a=n(249),s=n(1855),l=n(311),c=n(8635),u=n(6054),d=n(3947),g=n(6623),p=n(8202),f={0:"Something went wrong. Please check the input or required parameters."};class h{constructor(){if(h.instance)throw new Error(g.MESSAGING_ERR_1);this.eventListeners={},this.awaitPromiseList={},this.cm=s.default.get(),this.signalling=o.MsgSignaling.get(),this.signalling.addEventListener(a.MsgEvent.onError,(e,t)=>{this._dispatchEvent(u.default.MessengerEvents.Error,{initiator:this.currentUserId,code:e.code,description:e.description,messengerAction:u.default.MessengerAction[e.on_incoming_event],timestamp:"number"==typeof e.timestamp?1e3*e.timestamp:void 0,requestUuid:t},t)}),this.signalling.addEventListener(a.MsgEvent.onEditUser,(e,t)=>{this._dispatchEvent(u.default.MessengerEvents.EditUser,{user:{userId:Number(e.object.user_id),userName:e.object.user_name,displayName:e.object.display_name,conversationsList:e.object.conversations_list,notificationEvents:e.object.notification_events?e.object.notification_events.map(this.msgEventToMessengerEvent):void 0,customData:e.object.custom_data,privateCustomData:e.object.private_custom_data},initiator:Number(e.initiator),messengerAction:u.default.MessengerAction[e.on_incoming_event],timestamp:"number"==typeof e.timestamp?1e3*e.timestamp:void 0,requestUuid:t},t)}),this.signalling.addEventListener(a.MsgEvent.onGetUser,(e,t)=>{this._dispatchEvent(u.default.MessengerEvents.GetUser,{user:{userId:Number(e.object.user_id),userName:e.object.user_name,displayName:e.object.display_name,conversationsList:e.object.conversations_list,notificationEvents:e.object.notification_events?e.object.notification_events.map(this.msgEventToMessengerEvent):void 0,customData:e.object.custom_data,privateCustomData:e.object.private_custom_data},initiator:Number(e.initiator),messengerAction:u.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)}),this.signalling.addEventListener(a.MsgEvent.onSetStatus,(e,t)=>{this._dispatchEvent(u.default.MessengerEvents.SetStatus,{online:e.object.online,initiator:Number(e.initiator),messengerAction:u.default.MessengerAction[e.on_incoming_event],timestamp:"number"==typeof e.timestamp?1e3*e.timestamp:void 0,requestUuid:t},t)}),this.signalling.addEventListener(a.MsgEvent.onSubscribe,(e,t)=>{this._dispatchEvent(u.default.MessengerEvents.Subscribe,{users:e.object.user_id,initiator:Number(e.initiator),messengerAction:u.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)}),this.signalling.addEventListener(a.MsgEvent.onUnsubscribe,(e,t)=>{this._dispatchEvent(u.default.MessengerEvents.Unsubscribe,{users:e.object.user_id,initiator:Number(e.initiator),messengerAction:u.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)}),this.signalling.addEventListener(a.MsgEvent.onGetSubscriptionList,(e,t)=>{this._dispatchEvent(u.default.MessengerEvents.GetSubscriptionList,{users:e.object.subscriptions,initiator:Number(e.initiator),messengerAction:u.default.MessengerAction[e.on_incoming_event],requestUuid:t},t)})}static getInstance(){return h.instance=h.instance||new h,h.instance}addEventListener(e,t){void 0===this.eventListeners[e]&&(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}removeEventListener(e,t){if(void 0!==this.eventListeners[e])if("function"==typeof t){for(let n=0;n<this.eventListeners[e].length;n++)if(this.eventListeners[e][n]===t){this.eventListeners[e].splice(n,1);break}}else this.eventListeners[e]=[]}on(e,t){this.addEventListener(e,t)}off(e,t){this.removeEventListener(e,t)}_dispatchEvent(e,t,n){void 0!==this.eventListeners[e]&&this.eventListeners[e].forEach(e=>{"function"==typeof e&&e(t)}),n&&void 0!==this.awaitPromiseList[n]&&(e===u.default.MessengerEvents.Error&&"function"==typeof this.awaitPromiseList[n].reject&&this.awaitPromiseList[n].reject(t),"function"==typeof this.awaitPromiseList[n].resolve&&this.awaitPromiseList[n].resolve(t),window.clearTimeout(this.awaitPromiseList[n].expire)),void 0!==this.eventListeners[e]&&0!=this.eventListeners[e].length||i.LogManager.get().writeMessage(i.LogCategory.MESSAGING,"",i.LogLevel.INFO,`The ${e} event dispatched, but no handler registered for this event type.`)}_registerPromise(e,t,n){this.awaitPromiseList[e]={resolve:t,reject:n,expire:window.setTimeout(n,h.rejectTimeout)}}getConversation(e){return this.cm.getConversation(e)}getConversations(e){if(!(Array.isArray(e)&&e.length>30))return this.cm.getConversations(e);i.LogManager.get().writeMessage(i.LogCategory.MESSAGING,"Rate limit",i.LogLevel.ERROR,"you can get maximum 30 conversation in a single getConversations call")}getPublicConversations(){return this.cm.getPublicConversations()}getRawConversations(e){return this.cm.getConversations(e)}createConversation(e,t,n,r,i,o){return this.cm.createConversation(e,t,n,r,i,o)}createConversationFromCache(e){return e&&"object"==typeof e?l.Conversation.createFromCache(e):null}joinConversation(e){return new Promise((t,n)=>{const r=this.signalling.sendWsMessage(p.MsgAction.joinConversation,{uuid:e});h.getInstance()._registerPromise(r,t,n)})}leaveConversation(e){return new Promise((t,n)=>{const r=this.signalling.sendWsMessage(p.MsgAction.leaveConversation,{uuid:e});h.getInstance()._registerPromise(r,t,n)})}getMe(){return s.default.extractUserName(d.Authenticator.get().username())}getMyId(){return this.currentUserId?Promise.resolve(this.currentUserId):this.getUser(this.getMe()).then(e=>e.user.userId)}getUser(e){return new Promise((t,n)=>{let r;const i=e=>{e.requestUuid===r&&(clearTimeout(a),this.off(u.default.MessengerEvents.GetUser,i),this.off(u.default.MessengerEvents.Error,o),e.user.userName===this.getMe()&&(this.currentUserId=Number(e.user.userId)),t(e))},o=e=>{e.requestUuid===r&&(clearTimeout(a),this.off(u.default.MessengerEvents.GetUser,i),this.off(u.default.MessengerEvents.Error,o),n(e))},a=setTimeout(()=>{h.getInstance().off(u.default.MessengerEvents.GetUser,i),h.getInstance().off(u.default.MessengerEvents.Error,o),h.getInstance().reject(u.default.MessengerError.Error_0,u.default.MessengerAction.getUser).catch(n)},h.rejectTimeout);this.on(u.default.MessengerEvents.GetUser,i),this.on(u.default.MessengerEvents.Error,o),r=this.signalling.sendWsMessage(p.MsgAction.getUser,{user_name:e})})}getUserById(e){return new Promise((t,n)=>{const r=this.signalling.sendWsMessage(p.MsgAction.getUser,{user_id:e});h.getInstance()._registerPromise(r,t,n)})}getUsers(e){if(!Array.isArray(e))return h.getInstance().reject(u.default.MessengerError.Error_0,u.default.MessengerAction.getUsers);let t;const n=Promise.all(e.map(e=>new Promise((n,r)=>{const i=r=>{r.requestUuid===t&&r.user.userName===e&&(clearTimeout(a),h.getInstance().off(u.default.MessengerEvents.GetUser,i),h.getInstance().off(u.default.MessengerEvents.Error,o),n(r))},o=e=>{e.requestUuid===t&&(clearTimeout(a),h.getInstance().off(u.default.MessengerEvents.GetUser,i),h.getInstance().off(u.default.MessengerEvents.Error,o),r(e))},a=setTimeout(()=>{h.getInstance().off(u.default.MessengerEvents.GetUser,i),h.getInstance().off(u.default.MessengerEvents.Error,o),h.getInstance().reject(u.default.MessengerError.Error_0,u.default.MessengerAction.getUsers).catch(r)},h.rejectTimeout);h.getInstance().on(u.default.MessengerEvents.GetUser,i),h.getInstance().on(u.default.MessengerEvents.Error,o)})));return t=this.signalling.sendWsMessage(p.MsgAction.getUsers,{users:e.map(e=>({user_name:e}))}),n}getUsersById(e){if(!Array.isArray(e))return h.getInstance().reject(u.default.MessengerError.Error_0,u.default.MessengerAction.getUsers);let t;const n=Promise.all(e.map(e=>new Promise((n,r)=>{const i=r=>{r.requestUuid===t&&r.user.userId===e&&(clearTimeout(a),h.getInstance().off(u.default.MessengerEvents.GetUser,i),h.getInstance().off(u.default.MessengerEvents.Error,o),n(r))},o=e=>{e.requestUuid===t&&(clearTimeout(a),h.getInstance().off(u.default.MessengerEvents.GetUser,i),h.getInstance().off(u.default.MessengerEvents.Error,o),r(e))},a=setTimeout(()=>{h.getInstance().off(u.default.MessengerEvents.GetUser,i),h.getInstance().off(u.default.MessengerEvents.Error,o),h.getInstance().reject(u.default.MessengerError.Error_0,u.default.MessengerAction.getUsers).catch(r)},h.rejectTimeout);h.getInstance().on(u.default.MessengerEvents.GetUser,i),h.getInstance().on(u.default.MessengerEvents.Error,o)})));return t=this.signalling.sendWsMessage(p.MsgAction.getUsers,{users:e.map(e=>({user_id:e}))}),n}editUser(e,t){let n={};return e&&(n.custom_data=e),t&&(n.private_custom_data=t),new Promise((e,t)=>{const r=this.signalling.sendWsMessage(p.MsgAction.editUser,n);h.getInstance()._registerPromise(r,e,t)})}setStatus(e){return new Promise((t,n)=>{const r=this.signalling.sendWsMessage(p.MsgAction.setStatus,{online:e});h.getInstance()._registerPromise(r,t,n)})}subscribe(e){return new Promise((t,n)=>{const r=this.signalling.sendWsMessage(p.MsgAction.subscribe,{user_id:e});h.getInstance()._registerPromise(r,t,n)})}unsubscribe(e,t){return new Promise((n,r)=>{const i=this.signalling.sendWsMessage(p.MsgAction.unsubscribe,{user_id:e,all:t});h.getInstance()._registerPromise(i,n,r)})}getSubscriptionList(){return new Promise((e,t)=>{const n=this.signalling.sendWsMessage(p.MsgAction.getSubscriptionList,{});h.getInstance()._registerPromise(n,e,t)})}manageNotification(e){return new Promise((t,n)=>{const r=this.signalling.sendWsMessage(p.MsgAction.manageNotification,{notifications:e.map(e=>e===u.default.MessengerEvents.CreateConversation?a.MsgEvent.onCreateConversation:e===u.default.MessengerEvents.SendMessage?a.MsgEvent.onSendMessage:e===u.default.MessengerEvents.EditMessage?a.MsgEvent.onEditMessage:void 0)});h.getInstance()._registerPromise(r,t,n)})}createMessageFromCache(e){return e&&"object"==typeof e?c.Message.createFromCache(e):null}reject(e,t){const n={code:e,description:f[e],initiator:this.currentUserId,messengerAction:t};return this._dispatchEvent(u.default.MessengerEvents.Error,n),Promise.reject(n)}msgEventToMessengerEvent(e){return e===a.MsgEvent.onCreateConversation?u.default.MessengerEvents.CreateConversation:e===a.MsgEvent.onSendMessage?u.default.MessengerEvents.SendMessage:e===a.MsgEvent.onEditMessage?u.default.MessengerEvents.EditMessage:e}_traceName(){return"Messenger"}}h.rejectTimeout=2e4,r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"addEventListener",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"removeEventListener",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"on",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"off",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"_dispatchEvent",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"_registerPromise",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getConversation",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getConversations",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getPublicConversations",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getRawConversations",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"createConversation",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"createConversationFromCache",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"joinConversation",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"leaveConversation",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getMe",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getMyId",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getUser",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getUserById",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getUsers",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getUsersById",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"editUser",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"setStatus",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"subscribe",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"unsubscribe",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"getSubscriptionList",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"manageNotification",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h.prototype,"createMessageFromCache",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],h,"getInstance",null),t.Messenger=h},6623:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGING_ERR_2=t.MESSAGING_ERR_1=void 0,t.MESSAGING_ERR_1="Error - use Client.getIM()",t.MESSAGING_ERR_2="Error - use ConversationManager.get()"},6968:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgPermissions=t.MsgService=void 0,n(249),function(e){e[e.Chat="chat"]="Chat"}(t.MsgService||(t.MsgService={})),function(e){e[e.none=0]="none",e[e.can_write=1]="can_write",e[e.can_edit=2]="can_edit",e[e.can_remove=4]="can_remove",e[e.can_manage_participants=8]="can_manage_participants",e[e.can_edit_all=16]="can_edit_all",e[e.can_remove_all=32]="can_remove_all",e[e.is_owner=32768]="is_owner",e[e.all=65535]="all"}(t.MsgPermissions||(t.MsgPermissions={}))},84:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.PCFactory=void 0;const i=n(6746),o=n(1150),a=n(308),s=n(4610),l=n(3869),c=n(4106),u=n(575),d=n(125),g=n(7272),p=n(8879),f=n(245),h=n(3902);class m{constructor(){this.iceConfig=null,this._peerConnections={},this.waitingPeerConnections={},this.logger=o.LogManager.get().createLogger(o.LogCategory.RTC,this._traceName()),this._requireMedia=!0,"firefox"===l.default.getWSVendor()&&(m.hasTransceivers=!0),f.default.setRPCHandler(u.RemoteEvent.createPC,(e,t)=>{this.rpcHandlerCreatePC(e,t)}),f.default.setRPCHandler(u.RemoteEvent.destroyPC,e=>{this.rpcHandlerDestroyPC(e)}),f.default.addHandler(this)}get peerConnections(){return this._peerConnections}get requireMedia(){return this._requireMedia}set requireMedia(e){this._requireMedia=e}static get(){return null===this.inst&&(this.inst=new m),this.inst}static sdpOffersVideo(e){return{receiveVideo:-1!==e.indexOf("m=video"),sendVideo:!0}}setupDirectPC(e,t,n,r){let i=new h.TransreceiverPC(e,t,n);const o=a.CallManager.get().calls[e];if(i)return i.setHoldKey(r),d.Client.getInstance().config(),g.default.StreamManager.get().getCallStream(o).then(t=>(null!==t&&i.fastAddCustomMedia(t),this._peerConnections[e]=i,i.getLocalOffer())).catch(e=>{throw i.close(),this.logger.error("Could not get stream during setupPC"),e});a.CallManager.get().handleConnectionFailed(o.id(),1001,"",{})}incomeDirectPC(e,t,n,r,o){let s=new h.TransreceiverPC(e,i.PeerConnectionMode.P2P,t,o);return s.setHoldKey(r),s._setRemoteDescription(n).then(()=>{if(a.CallManager.get().calls[e])return this._peerConnections[e]=s,s;s.close()})}getPeerConnect(e){return this._peerConnections[e]}onSignalingConnected(){}onSignalingClosed(){this.logger.info("Closing all peer connections because signaling connection has closed"),this.waitingPeerConnections={};for(let e in this._peerConnections)this._peerConnections[e].close();this._peerConnections={}}onSignalingConnectionFailed(e){}onMediaConnectionFailed(){}closeAll(){for(let e in this._peerConnections)this._peerConnections[e].close();this._peerConnections={}}setBandwidthParams(e){this._bandwidthParams=e}addBandwidthParams(e){return this._bandwidthParams&&(e.sdp=e.sdp.replace(/(a=mid:video.*\r\n)/g,"$1b=AS:"+this._bandwidthParams+"\r\n")),e}rpcHandlerCreatePC(e,t){this.logger.info(`rpcHandlerCreatePC(), received SDP: \n${t.replace("<br>","\n\r")}`),t=p.SDPMuggle.addSetupAttribute(t);const n=m.sdpOffersVideo(t),r=i.PeerConnectionMode.CLIENT_SERVER_V1;f.default.callRemoteFunction(c.RemoteFunction.muteLocal,e,!1);const o=new h.TransreceiverPC(e,r,n);this._peerConnections[e]=o;let l=a.CallManager.get().calls[e];g.default.StreamManager.get().getCallStream(l).then(n=>{"__default"===e&&(t=t.replace("a=sendrecv","a=recvonly")),o.fastAddCustomMedia(n),o.processRemoteOffer(t).then(t=>{void 0===l||l.checkCallMode(s.CallMode.SERVER)?f.default.callRemoteFunction(c.RemoteFunction.confirmPC,e,t):f.default.callRemoteFunction(c.RemoteFunction.acceptCall,[e,a.CallManager.cleanHeaders(l.headers()),t]),"__default"!==e&&void 0!==a.CallManager.get().calls[e]&&(a.CallManager.get().calls[e].peerConnection=o)})}).catch(e=>{void 0!==l?a.CallManager.get().handleConnectionFailed(l.id(),403,"Media access denied",{}):f.default.onConnectionFailedRPC()})}rpcHandlerDestroyPC(e){this._peerConnections[e]&&("__default"===e?setTimeout(()=>{this._peerConnections[e].close(),delete this._peerConnections[e]},200):(this._peerConnections[e].close(),delete this._peerConnections[e])),delete this.waitingPeerConnections[e]}_traceName(){return"PCFactory"}}m.inst=null,m.hasTransceivers=!1,r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"setupDirectPC",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"incomeDirectPC",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"getPeerConnect",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"onSignalingConnected",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"onSignalingClosed",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"onSignalingConnectionFailed",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"onMediaConnectionFailed",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"closeAll",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"setBandwidthParams",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"addBandwidthParams",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"rpcHandlerCreatePC",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m.prototype,"rpcHandlerDestroyPC",null),r([o.LogManager.d_trace(o.LogCategory.PCFACTORY)],m,"sdpOffersVideo",null),t.PCFactory=m},6746:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.PeerConnection=t.PeerConnectionMode=t.PeerConnectionState=void 0;const i=n(1150),o=n(308),a=n(3385),s=n(4106),l=n(4265),c=n(125),u=n(7272),d=n(8707),g=n(4610),p=n(245),f=n(2282);var h,m;!function(e){e[e.IDLE=0]="IDLE",e[e.REMOTEOFFER=1]="REMOTEOFFER",e[e.LOCALOFFER=2]="LOCALOFFER",e[e.ESTABLISHING=3]="ESTABLISHING",e[e.ESTABLISHED=4]="ESTABLISHED",e[e.CLOSED=5]="CLOSED"}(h=t.PeerConnectionState||(t.PeerConnectionState={})),function(e){e[e.CLIENT_SERVER_V1=0]="CLIENT_SERVER_V1",e[e.P2P=1]="P2P",e[e.CONFERENCE=2]="CONFERENCE"}(m=t.PeerConnectionMode||(t.PeerConnectionMode={}));class _{constructor(e,t,n){this.id=e,this.mode=t,this.videoEnabled=n,this.onHold=!1,this.muteMicState=!1,this.SEND_CANDIDATE_DELAY=1e3,this.mediaRepository=[],this.candidateList=[],this.localCandidateTimer=-1,this.logger=i.LogManager.get().createLogger(i.LogCategory.RTC,`${this._traceName()} ${e}`),this.logger.info("PC created"),this.state=h.IDLE,this.pendingCandidates=[],"_default"!==e&&o.CallManager.get().calls[e]&&(this.reInviteQ=new l.ReInviteQ(o.CallManager.get().calls[e],this._canReInvite))}get remoteStreams(){return this._remoteStreams}getId(){return this.id}getState(){return this.state}processRemoteAnswer(e,t){return this.state=h.ESTABLISHING,this._processRemoteAnswer(e,t)}getLocalOffer(){return this.state===h.IDLE||this.state===h.ESTABLISHED||h.LOCALOFFER?(this.logger.info("getLocalOffer()"),this.state=h.LOCALOFFER,this._getLocalOffer()):(this.logger.error("getLocalOffer() in state "+h[this.state]),new Promise((e,t)=>{t("Invalid state")}))}getLocalAnswer(){return this._getLocalAnswer()}processRemoteOffer(e){return this.state===h.IDLE||this.state===h.ESTABLISHED?(this.state=h.ESTABLISHING,this._processRemoteOffer(e)):(this.logger.error("processRemoteOffer() in state "+h[this.state]),new Promise((e,t)=>{t("Invalid state")}))}close(){this.logger.info("close()"),this._close()}addRemoteCandidate(e,t){return this.logger.info(`addRemoteCandidate(${e}, ${t})`),this._addRemoteCandidate(e,t)}handleReinvite(e,t,n){return this._handleReinvite(e,t,n)}handleRemoteOffer(e,t,n){return this._handleRemoteOffer(e,t,n)}addCandidateToSend(e,t){this.pendingCandidates.push([t,e]),this.canSendCandidates&&this.startCandidateSendTimer()}canStartSendingCandidates(){this.canSendCandidates=!0,this.startCandidateSendTimer()}sendDTMF(e){this._sendDTMF(e,500,50)}setVideoEnabled(e){const t=this.videoEnabled.receiveVideo;this.videoEnabled=e,t!=e.receiveVideo&&this._hold(this.onHold)}setVideoFlags(e){this.videoEnabled=e}getDirections(){return this._getDirections()}setHoldKey(e){this.onHold=e}getMidKinds(){if(this._call){const e={},t=this.getTransceivers(),n=u.default.StreamManager.get()._getScreenSharing(this._call)||[];let r=[];return n.forEach(e=>{r=[...r,...e.stream.getTracks().map(e=>e.id)]}),t.forEach(t=>{t.sender&&t.sender.track&&t.sender.track.kind&&("video"===t.sender.track.kind&&r.length&&~r.indexOf(t.sender.track.id)?e[t.mid]="sharing":e[t.mid]=t.sender.track.kind)}),e}return{}}getTrackKind(e){if(this._call){const t=u.default.StreamManager.get()._getTracksKind(this._call),n=this.getTransceivers(),r=d.default.parse(e);let i=[];for(const e in t)if(t.hasOwnProperty(e)){const t=n.find(t=>!(t.stopped||"stopped"===t.direction||"stopped"===t.currentDirection)&&t.sender&&t.sender.track&&t.sender.track.id===e);if(t){const n=r.media.find(e=>e.attr.some(e=>"mid"===e.name&&e.value===t.mid));if(n){const t=n.attr.find(e=>"msid"===e.name);if(t){const n=t.value.split(" ");if(n.length>1){const t=n[1];t!=e&&i.push({from:e,to:t})}}}}}let o=Object.assign({},t);return i.forEach(e=>{const t=o[e.from];delete o[e.from],o[e.to]=t}),o}return{}}sendMedia(e,t){return new Promise((e,t)=>{this.onHold?t({result:!1,call:this._call}):this.reInviteQ.add({fx:()=>{c.Client.getInstance().config(),u.default.StreamManager.get().updateCallStream(this._call)},reject:t,resolve:t=>{this.restoreMute(),e(t)}})})}hold(e){return new Promise((t,n)=>{this.onHold===e&&t({call:this._call,name:f.CallEvents.Updated,result:!0}),this.reInviteQ.add({fx:()=>{this._hold(e)},reject:n,resolve:e=>{this.restoreMute(),t(e)}})})}hdnFRS(){return new Promise((e,t)=>{this.onHold?t({result:!1,call:this._call}):this.reInviteQ.add({fx:()=>{this._hdnFRS()},reject:t,resolve:t=>{this.restoreMute(),e(t)}})})}getMicrophoneState(){return this.muteMicState}muteMicrophone(e){this.muteMicState!==e?(this.muteMicState=e,this.onHold?this.logger.warning(`Cannot change the microphone state to ${e}: the call is on hold.`):this.getTransceivers().forEach(e=>{var t,n;const r=e.sender&&e.sender.track?e.sender.track.kind:null;"audio"===r&&"live"===e.sender.track.readyState?(this.logger.warning(`Change track ${e.mid} with kind ${r}.`),e.sender.track.enabled=!this.muteMicState):this.logger.warning(`Skip track ${e.mid} with kind ${r} in the ${null===(n=null===(t=e.sender)||void 0===t?void 0:t.track)||void 0===n?void 0:n.readyState} state.`)})):this.logger.warning(`Cannot change the microphone state to ${e}: already in the state.`)}restoreMute(){this._call.settings.active&&this._call.settings.state!==g.CallState.ENDED&&(this.logger.info(`restore audio enabled state to: ${!this.muteMicState}`),this._call.restoreRMute(),this.getTransceivers().forEach(e=>{var t;"audio"===(e.sender&&e.sender.track?e.sender.track.kind:null)&&"live"===(null===(t=e.sender.track)||void 0===t?void 0:t.readyState)&&(e.sender.track.enabled=!this.muteMicState)}))}restoreVideoSending(){}addCustomMedia(e){return new Promise((t,n)=>{this.reInviteQ.add({fx:()=>{this._addCustomMedia(e)},reject:n,resolve:e=>{this.restoreMute(),t()}})})}fastAddCustomMedia(e){this._addCustomMedia(e)}fastRemoveCustomMedia(e){this._removeCustomMedia(e)}removeCustomMedia(e){return new Promise((t,n)=>{this.reInviteQ.add({fx:()=>{this._removeCustomMedia(e)},reject:n,resolve:e=>{this.restoreMute(),t()}})})}updateMediaTracks(e){this.updateMediaTracks(e)}updateCustomMedia(e){this._updateCustomMedia(e)}replaceSharingToVideo(e,t){return this._replaceSharingToVideo(e,t)}setEncodingsParams(e,t){this._setEncodingsParams(e,t)}_traceName(){return"PeerConnection"}setState(e){this.logger.info("Transmitting from "+h[this.state]+" to "+h[e]),this.state=e}sendLocalCandidateToPeer(e,t){this._call=o.CallManager.get().calls[this.id],this.mode===m.CLIENT_SERVER_V1?p.default.callRemoteFunction(s.RemoteFunction.addCandidate,this.id,e,t):(this.candidateList.push([t,e]),this.localCandidateTimer<=0&&(this.localCandidateTimer=window.setTimeout(()=>{window.clearTimeout(this.localCandidateTimer),this.localCandidateTimer=-1,o.CallManager.get().calls[this.id]&&o.CallManager.get().calls[this.id].sendInfo(a.Constants.P2P_SPD_FRAG_MIME_TYPE,JSON.stringify(this.candidateList),{}),this.candidateList=[]},200)))}startCandidateSendTimer(){null!==this.candidateSendTimer&&void 0!==this.candidateSendTimer||(this.candidateSendTimer=setTimeout(()=>{this.candidateSendTimer=null,this.pendingCandidates.length>0&&o.CallManager.get().calls[this.id]&&o.CallManager.get().calls[this.id].sendInfo(a.Constants.P2P_SPD_FRAG_MIME_TYPE,JSON.stringify(this.pendingCandidates),{}),this.pendingCandidates=[]},this.SEND_CANDIDATE_DELAY))}}r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"getState",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"processRemoteAnswer",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"getLocalOffer",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"getLocalAnswer",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"processRemoteOffer",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"close",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"addRemoteCandidate",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"handleReinvite",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"handleRemoteOffer",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"addCandidateToSend",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"canStartSendingCandidates",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"sendDTMF",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"setVideoEnabled",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"setVideoFlags",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"setHoldKey",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"getTrackKind",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"sendMedia",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"hold",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"hdnFRS",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"muteMicrophone",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"restoreMute",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"restoreVideoSending",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"addCustomMedia",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"fastAddCustomMedia",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"fastRemoveCustomMedia",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"removeCustomMedia",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"updateMediaTracks",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"updateCustomMedia",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"replaceSharingToVideo",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"setEncodingsParams",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"setState",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"sendLocalCandidateToPeer",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],_.prototype,"startCandidateSendTimer",null),t.PeerConnection=_},4265:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ReInviteQ=void 0;const i=n(2282),o=n(1150);class a{constructor(e,t){this._pcStatus=t,this._q=[],e.on(i.CallEvents.Updated,e=>{if(o.LogManager.get().writeMessage(o.LogCategory.REINVITEQ,"CallEvent",o.LogLevel.TRACE,`Updated with result ${e.result}`),a._currentReinvite){const t=a._currentReinvite;e.result?t.resolve(e):t.reject(e),a._currentReinvite=void 0}this.runNext()}),e.on(i.CallEvents.PendingUpdate,e=>{o.LogManager.get().writeMessage(o.LogCategory.REINVITEQ,"CallEvent",o.LogLevel.TRACE,"IncomingUpdate. Local RI=="+typeof a._currentReinvite),a._currentReinvite&&(e.result?a._currentReinvite.resolve(e):a._currentReinvite.reject(e),a._currentReinvite=void 0)}),e.on(i.CallEvents.UpdateFailed,e=>{o.LogManager.get().writeMessage(o.LogCategory.REINVITEQ,"CallEvent",o.LogLevel.TRACE,"UpdateFailed"),a._currentReinvite&&(a._currentReinvite.reject(),a._currentReinvite=void 0)})}runNext(){void 0===a._currentReinvite&&this._q.length>0&&this._pcStatus()&&(a._currentReinvite=this._q.splice(0,1)[0],a._currentReinvite.fx())}add(e){this._q.push(e),this.runNext()}clear(){this._q.forEach(e=>{e.reject()})}_traceName(){return"ReInviteQ"}}r([o.LogManager.d_trace(o.LogCategory.REINVITEQ)],a.prototype,"runNext",null),r([o.LogManager.d_trace(o.LogCategory.REINVITEQ)],a.prototype,"add",null),r([o.LogManager.d_trace(o.LogCategory.REINVITEQ)],a.prototype,"clear",null),t.ReInviteQ=a},6127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodecSorter=void 0;const r=n(8707);class i{constructor(e){this.originalSDP=e}getUserCodecList(){void 0===this.originalCodecList&&(this.originalCodecList=r.default.parse(this.originalSDP));let e={sections:[]};return e.sections=this.originalCodecList.media.filter(e=>"video"===e.descr.media||"audio"===e.descr.media).map((e,t,n)=>{let r=/(rtx|red|ulpfec)/,i=e.attr.filter(e=>"rtpmap"===e.name&&!e.value.find(e=>e.value.match(r)));return{kind:e.descr.media,codec:i}}),e}setUserCodecList(e){void 0===this.originalCodecList&&(this.originalCodecList=r.default.parse(this.originalSDP));for(let t=0;t<e.sections.length;t++)if(e.sections[t].kind===this.originalCodecList.media[t].descr.media){let n=i.resortSection(e.sections[t].codec,this.originalCodecList.media[t].attr,this.originalCodecList.media[t].descr.media);this.originalCodecList.media[t].attr=n.codecs,this.originalCodecList.media[t].descr.fmt=n.order,this.originalCodecList.media[t].descr.fmtCount=n.order.length}}static resortSection(e,t,n){let r=[],i=[],o=[],a=[];t.forEach(e=>"rtpmap"===e.name?o.push(e):"ssrc"===e.name?i.push(e):void r.push(e));let s=e.map(e=>{let t=e.value.find(e=>"rtpmap"===e.name).value,n=o.find(e=>e.value.find(e=>!!~e.value.indexOf(t)));if(n)return a.push(t.split(" ")[0]),n}).filter(Boolean);if("video"===n.toLowerCase()){let e=[],t=[],n=o.filter(e=>e.value.find(e=>!!~e.value.indexOf("rtx"))),a=o.filter(e=>e.value.find(e=>e.value.match(/(red|ulpfec)/)));return s=s.concat(a),s.forEach(r=>{e.push(r),t.push(r.value.find(e=>"rtpmap"===e.name).value.split(" ")[0]);let i=this.matchRtx(r,n);i&&(e.push(i),t.push(i.value.find(e=>"rtpmap"===e.name).value.split(" ")[0]))}),{codecs:[...r,...e,...i],order:t}}return{codecs:[...r,...s,...i],order:a}}static matchRtx(e,t){let n=e.value.find(e=>"rtpmap"===e.name).value.split(" ")[0],r=t.find(e=>e.value.find(e=>!!~e.value.indexOf(`apt=${n}`)));return r}getSDP(){return this.originalCodecList.toString()}_traceName(){return"CodecSorter"}}t.CodecSorter=i},3421:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.CodecSorterHelpers=void 0;const i=n(1150);class o{static H264Sorter(e){return new Promise(t=>{for(let t=0;t<e.sections.length;t++)"video"==e.sections[t].kind.toLowerCase()&&e.sections[t].codec.sort((e,t)=>{let n=e.value.findIndex(e=>"rtpmap"===e.name),r=t.value.findIndex(e=>"rtpmap"===e.name);return-1!=e.value[n].value.toLowerCase().indexOf("h264")&&-1==e.value[n].value.toLowerCase().indexOf("uc")?-1:-1!=t.value[r].value.toLowerCase().indexOf("h264")&&-1==t.value[r].value.toLowerCase().indexOf("uc")?1:0});t(e)})}static H264ConfSorter(e,t){return new Promise(t?t=>{for(let t=0;t<e.sections.length;t++)if("video"==e.sections[t].kind.toLowerCase()){let n=e.sections[t].codec.filter(e=>{let t=e.value.findIndex(e=>"rtpmap"===e.name);return-1!=e.value[t].value.toLowerCase().indexOf("h264")&&-1==e.value[t].value.toLowerCase().indexOf("uc")});n.length&&(e.sections[t].codec=n)}t(e)}:t=>{for(let t=0;t<e.sections.length;t++)"video"==e.sections[t].kind.toLowerCase()&&(e.sections[t].codec.sort((e,t)=>{let n=e.value.findIndex(e=>"rtpmap"===e.name),r=t.value.findIndex(e=>"rtpmap"===e.name);return-1!=e.value[n].value.toLowerCase().indexOf("h264")&&-1==e.value[n].value.toLowerCase().indexOf("uc")?-1:-1!=t.value[r].value.toLowerCase().indexOf("h264")&&-1==t.value[r].value.toLowerCase().indexOf("uc")?1:0}),e.sections[t].codec.sort((e,t)=>{e.value.findIndex(e=>"rtpmap"===e.name),t.value.findIndex(e=>"rtpmap"===e.name);let n=e.value.findIndex(e=>"fmtp"===e.name),r=t.value.findIndex(e=>"fmtp"===e.name);return e.value[n]&&t.value[r]?-1!==e.value[n].value.toLowerCase().indexOf("profile-level-id=42e01f")&&-1!==e.value[n].value.toLowerCase().indexOf("packetization-mode=1")?-1:-1!==t.value[r].value.toLowerCase().indexOf("profile-level-id=42e01f")&&-1!==e.value[n].value.toLowerCase().indexOf("packetization-mode=1")?1:0:0}));t(e)})}_traceName(){return"CodecSorterHelpers"}}r([i.LogManager.d_trace(i.LogCategory.RTC)],o,"H264Sorter",null),r([i.LogManager.d_trace(i.LogCategory.RTC)],o,"H264ConfSorter",null),t.CodecSorterHelpers=o},8707:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.attrCount=0,this.bandwCount=0,this.mediaCount=0,this.dummyLines=[]}static parse(e){const t=new n;return n.splitLines(e).forEach((e,r)=>{switch(e.trim().charAt(0)){case"a":const i=n.parseAttr(e,r);if(i)if(t.mediaCount){if(!(t.media[t.mediaCount-1].attrCount<260))throw new Error("Error adding media attribute, attribute is ignored");t.addMediaAttribute(i,t.mediaCount-1)}else{if(!(t.attrCount<260))throw new Error("Error adding media attribute, attribute is ignored");t.addSessionAttribute(i)}break;case"o":t.origin=n.parseOrigin(e,r);break;case"s":t.name=n.parseGenericLine(e,r);break;case"c":const o=n.parseConnectionInfo(e,r);t.mediaCount?t.media[t.mediaCount-1].conn=o:t.conn=o;break;case"t":t.time=n.parseTime(e,r);break;case"m":const a=n.parseMedia(e,r);if(void 0===t.media&&(t.media=[]),!(t.mediaCount<256))throw new Error("Error adding media, media is ignored");t.media[t.mediaCount]=a,t.mediaCount++;break;case"v":n.parseVersion(e,r);break;case"b":const s=n.parseBandwidthInfo(e,r);if(t.mediaCount){if(!(t.media[t.mediaCount-1].bandwCount<8))throw new Error("Error adding session bandwidth info, info is ignored");t.media[t.mediaCount-1].bandw.push(s),t.media[t.mediaCount-1].bandwCount++}else{if(!(t.bandwCount<8))throw new Error("Error adding session bandwidth info, info is ignored");void 0===t.bandw&&(t.bandw=[]),t.bandw[t.bandwCount]=s,t.bandwCount++}break;default:t.dummyLines.push(n.parseGenericLine(e,r))}}),t}static parseAttr(e,t){0!==e.indexOf("a=")&&n.scannerError(e,t);const r=n.chopLine(e).split(":");return{name:r[0],value:r.slice(1).join(":")}}static splitLines(e){return e.split(/(\r\n|\r|\n)/).filter(e=>e.length>0).filter(RegExp.prototype.test.bind(/^([a-z])=(.*)/))}static parseGenericLine(e,t){return 1!==e.indexOf("=")&&n.scannerError(e,t),e.substr(2)}static parseOrigin(e,t){0!==e.indexOf("o=")&&n.scannerError(e,t);const r=n.chopLine(e).split(/[\s\t]+/);return{user:r[0],id:r[1],version:r[2],netType:r[3],addrType:r[4],addr:r[5]}}static parseVersion(e,t){0!==e.indexOf("v=0")&&n.scannerError(e,t)}static parseTime(e,t){0!==e.indexOf("t=")&&n.scannerError(e,t);const r=n.chopLine(e).split(/[\s\t]+/);return{start:parseInt(r[0]),stop:parseInt(r[1])}}static parseConnectionInfo(e,t){0!==e.indexOf("c=")&&n.scannerError(e,t);const r=n.chopLine(e).split(/[\s\t]+/);return{netType:r[0],addrType:r[1],addr:r[2]}}static parseBandwidthInfo(e,t){0!==e.indexOf("b=")&&n.scannerError(e,t);const r=n.chopLine(e).split(/[:]+/);return{modifier:r[0],value:parseInt(r[1])}}static scannerError(e,t){throw new Error(`Error parsing sdp in line ${t}: "${e}" is not valid sdp line`)}static chopLine(e){return e.substr(2)}static parseMedia(e,t){0!==e.indexOf("m=")&&n.scannerError(e,t);const r=n.chopLine(e).split(/[\s\t]+/),i=r[1].split("/");return{descr:{media:r[0],port:parseInt(i[0]),portCount:parseInt(i[1]||"0"),transport:r[2],fmtCount:r.length-3,fmt:r.slice(3)},attrCount:0,bandwCount:0,attr:[],bandw:[]}}addSessionAttribute(e){void 0===this.attr&&(this.attr=[]),this.attr.push(e),this.attrCount++}addMediaAttribute(e,t){void 0===this.media[t].attr&&(this.media[t].attr=[]);let n=e.value.split(" ")[0];~["rtcp","ice-ufrag","ice-pwd","ice-options","fingerprint","setup"].indexOf(e.name)?this.addAttr(t,e,"ice"):~["rtpmap","rtcp-fb","fmtp"].indexOf(e.name)?this.addAttr(t,e,"rtpmap",n):~["extmap"].indexOf(e.name)?this.addAttr(t,e,"extmap"):~["ssrc"].indexOf(e.name)?this.addAttr(t,e,"ssrc"):this.media[t].attr.push(e),this.media[t].attrCount++}addAttr(e,t,n,r){let i=this.media[e].attr.findIndex(e=>r?e.name===n&&e.value[0].value.split(" ")[0]===r:e.name===n);-1!==i?this.media[e].attr[i].value.push(t):this.media[e].attr.push({name:n,value:[t]})}toString(){const e=[];e.push("v=0"),e.push(`o=${this.origin.user} ${this.origin.id} ${this.origin.version} ${this.origin.netType} ${this.origin.addrType} ${this.origin.addr}`),e.push(`s=${this.name}`),this.conn&&e.push(n.printConnectionInfo(this.conn));for(let t=0;t<this.bandwCount;t++)e.push(n.printBandwidthInfo(this.bandw[t]));e.push(`t=${this.time.start} ${this.time.stop}`);for(let t=0;t<this.attrCount;t++)e.push(n.printAttrInfo(this.attr[t]));for(let t=0;t<this.mediaCount;t++){const r=this.media[t];let i=`m=${r.descr.media} ${r.descr.port}${r.descr.portCount?"/"+r.descr.portCount:""} ${r.descr.transport}`;for(let e=0;e<r.descr.fmtCount;e++)i+=" "+r.descr.fmt[e];e.push(i),r.conn&&e.push(n.printConnectionInfo(r.conn));for(let t=0;t<r.bandwCount;t++)e.push(n.printBandwidthInfo(r.bandw[t]));const o=["sendrecv","sendonly","recvonly","inactive"],a=r.attr.find(e=>!!~o.indexOf(e.name));a&&e.push(n.printAttrInfo(a));const s=r.attr.find(e=>"ice"===e.name);s&&s.value.forEach(t=>{e.push(n.printAttrInfo(t))});let l=r.attr.filter(e=>"ice"!==e.name&&!~o.indexOf(e.name));for(let t=0;t<l.length;t++)Array.isArray(l[t].value)?l[t].value.forEach(t=>{e.push(n.printAttrInfo(t))}):e.push(n.printAttrInfo(l[t]))}return e.join("\r\n")+"\r\n"}static printConnectionInfo(e){return`c=${e.netType} ${e.addrType} ${e.addr}`}static printBandwidthInfo(e){return`b=${e.modifier}:${e.value}`}static printAttrInfo(e){return`a=${e.name}${e.value?":"+e.value:""}`}}t.default=n,n.SDP_EINSDP="Wrong sdp lines"},8879:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDPMuggle=void 0;const r=n(125),i=n(1206),o=n(8707);class a{static getSDPLines(e){return e.split(/(\r\n|\r|\n)/).filter(a.validLine)}static createSDPFrom(e,t){return new RTCSessionDescription({sdp:e.join("\r\n")+"\r\n",type:t})}static detectDirections(e){let t=[],n=e.split(/(\r\n|\r|\n)/).filter(a.validLine),r="";return n.forEach(e=>{if(0===e.indexOf("m=")){let t=e.substr(2);r=t.split(" ")[0]}""===r||"a=sendrecv"!==e&&"a=sendonly"!==e&&"a=recvonly"!==e&&"a=inactive"!==e||(t.push({type:r,direction:e.substr(2)}),r="")}),t}static checkIsVimsSectionExistsIn(e){return e.includes("VIMS")}static removeTelephoneEvents(e){if(-1!==e.sdp.indexOf("a=rtpmap:127 telephone-event/8000")){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine),n=-1;for(let e=0;e<t.length;e++){if(-1!==t[e].indexOf("m=audio")){let n=t[e];"string"==typeof n&&(t[e]=n.replace(" 127",""))}-1!==t[e].indexOf("a=rtpmap:127 telephone-event/8000")&&(n=e)}return t.splice(n,1),new RTCSessionDescription({sdp:t.join("\r\n")+"\r\n",type:e.type})}return e}static removeDoubleOpus(e){if(-1!==e.sdp.indexOf("a=rtpmap:109 opus")&&-1!==e.sdp.indexOf("a=rtpmap:111 opus")){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine),n=-1;for(let e=0;e<t.length;e++){if(-1!==t[e].indexOf("m=audio")){let n=t[e];"string"==typeof n&&(t[e]=n.replace(" 109",""))}-1!==t[e].indexOf("a=rtpmap:109 opus")&&(n=e)}return t.splice(n,1),new RTCSessionDescription({sdp:t.join("\r\n")+"\r\n",type:e.type})}return e}static removeDoublePT(e){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine),n=[];for(let e=0;e<t.length;e++){let r=t[e];0===r.indexOf("m=video")&&(n=r.split(" "),t[e]=n.filter((e,t)=>{if(0===t)return!0;for(let r=t-1;r>=2;r--)if(n[r]===e)return!1;return!0}).join(" "))}return new RTCSessionDescription({sdp:t.join("\r\n")+"\r\n",type:e.type})}static getSdpCodecs(e){return e.match(/a=rtpmap:\d+/g)}static removeDoubleCodecsInactiveSections(e){let t=e.sdp.split("m=");for(let e=0;e<t.length;e+=1){if(-1===t[e].indexOf("a=inactive"))continue;const n=a.getSdpCodecs(t[e]);n&&n.filter((e,t)=>n.indexOf(e)!==t).forEach(n=>{const r=new RegExp(`${n} .+\r\n`);t[e]=t[e].replace(r,"")})}return new RTCSessionDescription({sdp:t.join("m="),type:e.type})}static removeTransportCC(e){if(-1!==e.sdp.indexOf("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine),n=[];return t.forEach((e,t)=>{-1!==e.indexOf("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&n.unshift(t)}),n.forEach(e=>t.splice(e,1)),new RTCSessionDescription({sdp:t.join("\r\n")+"\r\n",type:e.type})}return e}static removeTIAS(e){if(-1!==e.sdp.indexOf("b=TIAS:13888000")||-1!==e.sdp.indexOf("b=AS:13888")){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine),n=[];t.forEach((e,t)=>{-1===e.indexOf("b=TIAS:13888000")&&-1===e.indexOf("b=AS:13888")||n.unshift(t)}),n.forEach(e=>t.splice(e,1)),e={type:e.type,sdp:t.join("\r\n")+"\r\n"}}return e}static fixVideoRecieve(e,t){if(-1!==e.sdp.indexOf("m=video")&&!t){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine),n=null;return t=t.map((e,t)=>(null===n?-1!==e.indexOf("m=video")&&(n=t):"a=sendrecv"===e?e="a=sendonly":"a=recvonly"===e&&(e="a=inactive"),e)),new RTCSessionDescription({sdp:t.join("\r\n")+"\r\n",type:e.type})}return e}static addSetupAttribute(e){return-1==e.indexOf("a=setup:")&&(e+="a=setup:actpass\r\n"),e}static findTrackByMid(e,t){let n=e.split(/(\r\n|\r|\n)/).filter(a.validLine),r=-1;for(let e=0;e<n.length&&(-1===n[e].indexOf("a=mid:")||-1===r);e++)if(-1!==n[e].indexOf(`a=mid:${t}`)&&(r=e),-1!==n[e].indexOf("msid:")&&-1!==r)return n[e].split(" ").slice(-1).pop();return""}static addXAS(e){if(r.Client.getInstance().config().experiments.xas&&r.Client.getInstance().config().experiments.xas){let t=e.sdp;const n=r.Client.getInstance().config().experiments.xas;return void 0!==n.as&&-1!==n.as&&(t=t.replace(/(a=mid:video.*\r\n)/g,"$1b=AS:"+n.as+"\r\n")),void 0!==n.tias&&-1!==n.tias&&(t=t.replace(/(a=mid:video.*\r\n)/g,"$1b=TIAS:"+n.as+"\r\n")),new RTCSessionDescription({sdp:t,type:e.type})}return e}static fixFFMIDBug(e){if(-1==e.sdp.indexOf("a=mid")){const t=e.sdp.replace(/(m=audio.*\r\n)/g,"$1a=mid:0\r\n");return new RTCSessionDescription({sdp:t,type:e.type})}return e}static fixFMTP(e){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine),n=[];return t=t.filter(t=>{if(0==t.indexOf("a=fmtp")){let r=t.split(" ")[1],i=r.replace("apt=","");return-1!==e.sdp.indexOf(`a=rtpmap:${i}`)||(n.push(r[0].replace("a=fmtp:","")),!1)}return!0}).filter(e=>-1===e.indexOf("a=rtpmap:")||-1===n.indexOf(e.split(" ")[0].replace("a=rtpmap:",""))).map(e=>-1!==e.indexOf("m=")?e.split(" ").filter(e=>-1===n.indexOf(e)).join(" "):e),{sdp:t.join("\r\n")+"\r\n",type:e.type}}static trimMediaAttr(e){let t=e.sdp.split(/(\r\n|\r|\n)/).filter(a.validLine);return t=t.map(e=>(e.includes("a=fmtp")&&(e=e.split(";").map(e=>e.trim()).join(";")),e)),new RTCSessionDescription({sdp:t.join("\r\n")+"\r\n",type:e.type})}static fixSetupSection(e){return!i.getParser(window.navigator.userAgent).satisfies({chrome:">94.00.0"})||navigator.userAgent.match(/BitrixDesktop/i)?e:this.getSDPLines(e).map(e=>e.includes("a=setup:")?e.replace(/:.+$/,":active"):e).join("\r\n")+"\r\n"}static forcePassiveSetupSection(e){if(!i.getParser(window.navigator.userAgent).satisfies({chrome:">94.00.0"})||navigator.userAgent.match(/BitrixDesktop/i))return e;const t=this.getSDPLines(e.sdp).map(e=>e.includes("a=setup:")?e.replace(/:.+$/,":passive"):e);return Object.assign(Object.assign({},e),{sdp:t.join("\r\n")+"\r\n"})}static reduceCodecs(e,t){let n=o.default.parse(e.sdp),r=!1,i=!1;return n.media.forEach((e,o)=>{var s,l;if(!e.attr.find(e=>"inactive"===e.name)){let c=[],u=[],d=[],g=[];if(e.attr.forEach(e=>"rtpmap"===e.name?d.push(e):"ssrc"===e.name?u.push(e):void c.push(e)),"audio"===e.descr.media){if(!(null===(s=t.audio)||void 0===s?void 0:s.length))return;let e=a.reduceAudioCodecs(d,t.audio);g.push(...e.reducedCodecs),i=e.isAudio}else if("video"===e.descr.media){if(!(null===(l=t.video)||void 0===l?void 0:l.length))return;let e=a.reduceVideoCodecs(d,t.video);g.push(...e.reducedCodecs),r=e.isVideo}g.length?(n.media[o].attr=[...c,...g,...u],n.media[o].descr.fmtCount=g.length,n.media[o].descr.fmt=g.map(e=>e.value[0].value.split(" ")[0]),n.media[o].attrCount=n.media[o].attr.length):(delete n.media[o],n.mediaCount--)}}),{sdp:{type:e.type,sdp:n.toString()},isVideo:r,isAudio:i}}static recoverVideoFmts(e,t){var n,r;null==t||t.info(`SDPMuggle.recoverVideoFmts(): parsing SDP\n${e}`);const i=o.default.parse(e),a=null===(n=i.media)||void 0===n?void 0:n[1];if(!a)return null==t||t.info("SDPMuggle.recoverVideoFmts(): video description is undefined"),e;const s=(null===(r=a.attr)||void 0===r?void 0:r.filter(({name:e})=>"rtpmap"===e))||[];if(a.descr.fmtCount===(null==s?void 0:s.length))return null==t||t.info("SDPMuggle.recorverVideoFmts(): fmts count and rtpmaps count are equal"),e;const l=s.map(({value:e})=>{var t;const n=e[0],[r]=(null===(t=null==n?void 0:n.value)||void 0===t?void 0:t.split(" "))||[];return r}),c=((e,t)=>{const n=new Set(e);for(const e of t)n.delete(e);return Array.from(n.values())})(l,a.descr.fmt);null==t||t.info(`SDPMuggle.recorverVideoFmts(): fmts are missed ${c}`),a.descr.fmt.push(...c),a.descr.fmtCount=a.descr.fmt.length;const u=i.toString();return null==t||t.info(`SDPMuggle.recorverVideoFmts(): SDP is recovered\n${u}`),u}static reduceVideoCodecs(e,t){const n=[];let r=!1;const i=e.filter(e=>e.value.find(e=>!!~e.value.indexOf("rtx")));return e.forEach(e=>{var o;const a=e.value.find(e=>"rtpmap"===e.name).value,s=t.filter(e=>!!~a.indexOf(e.name));if(s.length){const t=null===(o=e.value.find(e=>"fmtp"===e.name))||void 0===o?void 0:o.value;s.forEach(o=>{let a=Object.keys(o.params||{}).length;for(const e in o.params)~t.indexOf(`${e}=${o.params[e]}`)&&a--;if(0===a&&(o.optional||r||(r=!0),n.push(e),i.length)){let t=((e,t)=>{const n=e.value.find(e=>"rtpmap"===e.name).value.split(" ")[0];return t.find(e=>e.value.find(e=>!!~e.value.indexOf(`apt=${n}`)))})(e,i);t&&n.push(t)}})}}),{reducedCodecs:n,isVideo:r}}static reduceAudioCodecs(e,t){const n=[];let r=!1;return e.forEach(e=>{var i;const o=e.value.find(e=>"rtpmap"===e.name).value,a=t.filter(e=>!!~o.indexOf(e.name));if(a.length){const t=null===(i=e.value.find(e=>"fmtp"===e.name))||void 0===i?void 0:i.value;a.forEach(i=>{let o=Object.keys(i.params||{}).length;for(const e in i.params)~t.indexOf(`${e}=${i.params[e]}`)&&o--;0===o&&(i.optional||r||(r=!0),n.push(e))})}}),{reducedCodecs:n,isAudio:r}}_traceName(){return"SDPMuggle"}}t.SDPMuggle=a,a.validLine=RegExp.prototype.test.bind(/^([a-z])=(.*)/)},3902:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.TransreceiverPC=t.RTCSdpType=void 0;const i=n(6746),o=n(3869),a=n(84),s=n(1150),l=n(9551),c=n(308),u=n(4106),d=n(6127),g=n(2282),p=n(8879),f=n(125),h=n(4265),m=n(7272),_=n(2957),v=n(245);var y=m.default.StreamManager;const C=n(6665),E=n(8552),b=n(8237);var S,T,D;!function(e){e[e.offer="offer"]="offer",e[e.answer="answer"]="answer",e[e.pranswer="pranswer"]="pranswer",e[e.rollback="rollback"]="rollback"}(S=t.RTCSdpType||(t.RTCSdpType={})),function(e){e[e.controlling="controlling"]="controlling",e[e.controlled="controlled"]="controlled"}(T||(T={})),function(e){e.alreadyInProgress="alreadyInProgress"}(D||(D={}));class w extends i.PeerConnection{constructor(e,t,n,r){super(e,t,n),this.candidatePool=[],this.candidateQueueMap=new Map([["local",[]],["remote",[]]]),this.iceTimer=null,this.needTransportRestart=!0,this.ICE_TIMEOUT=2e4,this._needIceRestart=!1,this.streamCache=[],this._canReInvite=()=>"connected"===this.impl.iceConnectionState||"completed"===this.impl.iceConnectionState,this._TransceiverEncoderMap=new WeakMap;let i=a.PCFactory.get().iceConfig;null==i&&(i={gatherPolicy:"all",iceServers:[]}),r&&(i.iceServers=r),i.bundlePolicy="balanced",this._createImpl(i)}_getLocalOfferRegular(){return this.iceRole=T.controlling,new Promise((e,t)=>{let n={};this._call&&(o.default.isIphone()||!this._call.settings.isConference&&!this._call.settings.isAudio)&&(n=this.getReceiveOptions()),this.resetEncodings().then(()=>(this.logger.info("_getLocalOfferRegular(), start create local SDP"),this.impl.createOffer(n))).then(e=>{this.logger.info(`_getLocalOfferRegular(), created local SDP: \n${e.sdp}`);let t={type:e.type,sdp:e.sdp};return t=a.PCFactory.get().addBandwidthParams(t),t=p.SDPMuggle.removeDoublePT(t),t=this._reduceCodecs(t),t=p.SDPMuggle.trimMediaAttr(t),this.codecRearrange(t)}).then(e=>(this.srcLocalSDP=e.sdp,this.logger.info(`_getLocalOfferRegular(), set local SDP: \n${e.sdp}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"getLocalOffer",sdp:e}),this.impl.setLocalDescription(e))).then(()=>{e(this.impl.localDescription)}).catch(e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"_getLocalOfferRegular",sdp:this.impl.localDescription,description:`offer_reject: ${e.message}`}),t(e)})})}updateHoldState(){this.impl.getTransceivers().forEach(e=>{e.sender.track&&("audio"===e.sender.track.kind?e.sender.track.enabled=!this.onHold&&!this.muteMicState:e.sender.track.enabled=!this.onHold)})}_processRemoteAnswer(e,t){if(0===t.length&&this._call)return this.logger.error("Empty SDP from server. Call will be terminated."),void this._call.hangup({"X-WebRTCError":"no sdp"});if("stable"===this.impl.signalingState)return;let n={sdp:t,type:S.answer};return this.srcRemoteSDP=t,n=p.SDPMuggle.removeTIAS(n),n=p.SDPMuggle.trimMediaAttr(n),this.logger.info(`_processRemoteAnswer(), set remote SDP: \n${n.sdp}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"processRemoteAnswer",sdp:n}),this.impl.setRemoteDescription(n).then(()=>this.impl.getTransceivers().forEach(this.stopInactiveTransceiver.bind(this))).then(e=>{this._needIceRestart&&(this._call.settings.isDirect&&this._call.settings.incoming||this._runReinvite(!0))}).catch(e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"_processRemoteAnswer",sdp:this.impl.localDescription,description:`answer_reject: ${e.message}`})})}_getLocalOffer(){return"firefox"===o.default.getWSVendor()&&this.impl.remoteDescription&&this.impl.remoteDescription.sdp&&-1===this.impl.remoteDescription.sdp.indexOf("VIMS")?this._getLocalOfferFF():this._getLocalOfferRegular()}_getLocalOfferFF(){return this.iceRole=T.controlling,new Promise((e,t)=>{let n={};!this._call||!o.default.isIphone()&&this._call.settings.isConference||(n=this.getReceiveOptions()),this.resetEncodings().then(()=>this.impl.createOffer(n)).then(e=>{this.logger.info(`_getLocalOfferFF(), created local SDP: \n${e.sdp}`);let t={type:e.type,sdp:e.sdp};return t=a.PCFactory.get().addBandwidthParams(t),t=p.SDPMuggle.removeDoublePT(t),t=this._reduceCodecs(t),t=p.SDPMuggle.trimMediaAttr(t),this.codecRearrange(t)}).then(t=>{this.srcLocalSDP=t.sdp,this._pendingOffer=t,e(t)}).catch(e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"_getLocalOfferFF",sdp:this._pendingOffer,description:`offer_reject: ${e.message}`}),t(e)})})}_getLocalAnswer(){return this.iceRole=T.controlled,new Promise((e,t)=>{let n={mandatory:{}};!this._call||!o.default.isIphone()&&this._call.settings.isConference||(n={mandatory:this.getReceiveOptions()}),this.resetEncodings().then(()=>this.impl.createAnswer(n)).then(e=>{this.logger.info(`_getLocalAnswer(), created local SDP: \n${e.sdp}`);let t={type:e.type,sdp:e.sdp};return t=a.PCFactory.get().addBandwidthParams(t),t=p.SDPMuggle.removeDoublePT(t),t=p.SDPMuggle.fixVideoRecieve(t,this._call.settings.videoDirections.receiveVideo),t=this._reduceCodecs(t),t=p.SDPMuggle.trimMediaAttr(t),this._call&&this._call.settings.incoming&&(t=p.SDPMuggle.forcePassiveSetupSection(t)),this.codecRearrange(t)}).then(e=>(this.srcLocalSDP=e.sdp,this.logger.info(`_getLocalAnswer(), set local SDP: \n${e.sdp}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"getLocalAnswer",sdp:e}),this.impl.setLocalDescription(Object.assign(Object.assign({},e),{type:"answer"})))).then(()=>{e({type:S.answer,sdp:this.impl.localDescription.sdp})}).catch(e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"_getLocalAnswer",sdp:this.impl.localDescription,description:`answer_reject: ${e.message}`}),t(e)})})}_processRemoteOffer(e){return 0===e.length&&this._call?(this.logger.error("Empty SDP from server. Call will be terminated."),void this._call.hangup({"X-WebRTCError":"no sdp"})):(this.iceRole=T.controlled,new Promise((t,n)=>{let r=new RTCSessionDescription({sdp:e,type:S.offer});this.srcRemoteSDP=e,r=p.SDPMuggle.removeTIAS(r),r=p.SDPMuggle.fixFFMIDBug(r),r=p.SDPMuggle.trimMediaAttr(r),this.logger.info(`_processRemoteOffer(), set remote SDP: \n${r.sdp}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"processRemoteOffer",sdp:r}),this.resetEncodings().then(()=>this.impl.setRemoteDescription(r)).then(()=>{let e={mandatory:{}};return!this._call||!o.default.isIphone()&&this._call.settings.isConference||(e={mandatory:this.getReceiveOptions()}),this.impl.createAnswer(e)}).then(e=>(this.logger.info(`_processRemoteOffer(), created local SDP: \n${e.sdp}`),e=p.SDPMuggle.removeDoublePT(e),e=this._reduceCodecs(e),e=p.SDPMuggle.trimMediaAttr(e),this.codecRearrange(e))).then(e=>(this.srcLocalSDP=e.sdp,this.logger.info(`_processRemoteOffer(), set local SDP: \n${e.sdp}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"processRemoteOffer",sdp:e}),this.impl.setLocalDescription(e))).then(()=>{t(this.impl.localDescription.sdp)}).catch(e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"_processRemoteOffer",sdp:this.impl.localDescription,description:`answer_reject: ${e.message}`}),n(e)})}))}_setRemoteDescription(e){if(0===e.length&&this._call)return this.logger.error("Empty SDP from server. Call will be terminated."),void this._call.hangup({"X-WebRTCError":"no sdp"});let t=new RTCSessionDescription({sdp:e,type:S.offer});return t=p.SDPMuggle.removeTIAS(t),t=p.SDPMuggle.trimMediaAttr(t),this.srcRemoteSDP=e,this.logger.info(`_setRemoteDescription(), set remote SDP: \n${t.sdp}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"setRemoteDescription",sdp:t}),this.impl.setRemoteDescription(t)}_handleRemoteOffer(e,t,n=!1){return this.renegotiationInProgress=!0,0===t.length&&this._call?(this.logger.error("Empty SDP from server. Call will be terminated."),void this._call.hangup({"X-WebRTCError":"no sdp"})):new Promise((r,i)=>{const a=new RTCSessionDescription({sdp:t,type:"offer"});"safari"!==o.default.getWSVendor()&&"stable"!==this.impl.signalingState?(this.logger.info(`signalingState: ${this.impl.signalingState}, local description is set with 'rollback' type`),this.resetEncodings().then(()=>Promise.all([this.impl.setLocalDescription({type:"rollback"}),this.impl.setRemoteDescription(a)])).then(()=>this.impl.createAnswer()).then(t=>{let n={sdp:t.sdp,type:t.type};n=p.SDPMuggle.removeDoubleOpus(n),n=p.SDPMuggle.removeDoublePT(n),n=p.SDPMuggle.fixVideoRecieve(n,this.videoEnabled.receiveVideo),n=p.SDPMuggle.trimMediaAttr(n),n=this._reduceCodecs(n),this.impl.setLocalDescription(n).then(()=>{this.renegotiationInProgress=!1,this.updateHoldState();const t={mids:this.getMidKinds()};v.default.callRemoteFunction(u.RemoteFunction.acceptReInvite,this._call.id(),e,n.sdp,t),this._call&&this._call.dispatchEvent({name:g.CallEvents.Updated,result:!0,call:this._call}),r()})}).catch(r=>{n?console.error(r):setTimeout(()=>{this._handleRemoteOffer(e,t,!0)},300)})):(this.logger.info(`signalingState: ${this.impl.signalingState}, local description is set without 'rollback' type`),this.resetEncodings().then(()=>this.impl.setRemoteDescription(a)).then(()=>this.impl.createAnswer()).then(t=>{let n={sdp:t.sdp,type:t.type};n=this._reduceCodecs(n),n=p.SDPMuggle.trimMediaAttr(n),this.impl.setLocalDescription(n).then(()=>{const t={mids:this.getMidKinds()};this.impl.getTransceivers().forEach(this.stopInactiveTransceiver.bind(this)),v.default.callRemoteFunction(u.RemoteFunction.acceptReInvite,this._call.id(),e,n.sdp,t),this.renegotiationInProgress=!1,this._call&&this._call.dispatchEvent({name:g.CallEvents.Updated,result:!0,call:this._call}),this.updateHoldState(),r()})}).catch(e=>this.logger.error(e)))})}_handleReinvite(e,t){if(0===t.length&&this._call){const e="Empty SDP from server. Call will be terminated.";return this.logger.error(e),b.CallPromiseResolver.reject(this._call,e),this._call.hangup({"X-WebRTCError":"no sdp"}),Promise.reject(e)}return new Promise((e,n)=>{const r=e=>{const t=`answer_reject: ${e.message}`;this._call&&(this._call.dispatchEvent({name:"SDP",origin:"_handleReinvite",sdp:this.impl.localDescription,description:t}),b.CallPromiseResolver.reject(this._call,t)),n(e)};if(this.banReinviteAnswer){const e="Reinvite answer is banned";return b.CallPromiseResolver.reject(this._call,e),n(new Error(e))}if(!1===this.renegotiationInProgress)return b.CallPromiseResolver.resolve(this._call),e();if(!0===this.renegotiationInProgress){let n={sdp:t,type:S.answer};this.renegotiationInProgress=!1,this.srcRemoteSDP=t,n=p.SDPMuggle.removeTIAS(n),n=p.SDPMuggle.trimMediaAttr(n),this.impl.setRemoteDescription(n).then(()=>{this._call&&b.CallPromiseResolver.resolve(this._call),this.updateHoldState(),this.impl.getTransceivers().forEach(this.stopInactiveTransceiver.bind(this)),this.cleanStreamCache(),e()}).catch(e=>{this.renegotiationInProgress=!1,r(e),this.logger.error(JSON.stringify(e)),this.stopStreamsFromCache()}),clearTimeout(this.renegotiationTimer)}else{const e="Unreachable code for handling reinvite has reached";b.CallPromiseResolver.reject(this._call,e),n(new Error(e))}})}_close(){clearInterval(this.rtcCollectingCycle),this.impl.onnegotiationneeded=null,f.Client.getInstance().config(),(0,E.unregisterPeerConnection)(this.impl),this.impl.close(),this._localStream=null,this._remoteStreams=null,this.logger.info("Peer Connection has been closed.")}_addRemoteCandidate(e,t){return new Promise((n,r)=>{try{const r=new RTCIceCandidate({candidate:e.substring(2),sdpMLineIndex:t});this.candidatePool.push(r),this._addIceCandidateToQueue(r,"remote").then(n)}catch(e){n()}})}async _addIceCandidatesFromQueue(){if(this.logger.info(`Adding ICE candidates from pool in state ${this.impl.signalingState}`),"stable"!==this.impl.signalingState)return;const e="remote",t=this.candidateQueueMap.get(e);this.candidateQueueMap.set(e,[]),this.logger.info(`Adding ICE candidates ${t.length?t:"[]"}`),t.forEach(e=>{this.impl.addIceCandidate(e)})}async _addIceCandidateToQueue(e,t){var n;if(this.logger.info(`Adding ${t} candidate ${e.candidate} in state ${this.impl.signalingState}`),"stable"===this.impl.signalingState)try{await this.impl.addIceCandidate(e)}catch(e){this.logger.error(`Error on adding ICE candidate: ${e}`)}else null===(n=this.candidateQueueMap.get(t))||void 0===n||n.push(e)}setConfiguration(e){this.impl&&setTimeout(()=>{if(this.srcRemoteSDP&&-1===this.srcRemoteSDP.indexOf("VIMS")||window.__VIIceServer__)if(this.impl&&this.impl.setConfiguration)this.impl.setConfiguration(e),this.renegotiationInProgress=!1,this._runReinvite(!0),setTimeout(()=>{this.candidatePool.forEach(e=>{this.impl.addIceCandidate(e).catch(()=>{})})},2e3);else if(this._pendingOffer){let t=[];this.impl.getTransceivers().map(e=>{e.sender.track&&t.push(e.sender.track)}),this._createImpl(e),t.forEach(e=>{this.impl.addTrack(e,new MediaStream([e]))}),this.impl.createOffer().then(e=>(this.logger.info(`setConfiguration(), created local SDP: \n${e.sdp}`),this._needIceRestart=!0,this.logger.info(`setConfiguration(), set local SDP: \n${this._pendingOffer.sdp}`),this.impl.setLocalDescription(this._pendingOffer))).then(()=>{this._pendingOffer=void 0}).catch(e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"setConfiguration",sdp:this.impl.localDescription,description:`answer_reject: ${e.message}`}),console.error(e)})}},800)}_sendDTMF(e,t,n){try{this.dtmfSender.insertDTMF(e,t,n)}catch(r){this.dtmfSender=new l.SignalingDTMFSender(this._call.id()),this.dtmfSender.insertDTMF(e,t,n)}}_hdnFRSPrep(){this.banReinviteAnswer=!0}_hdnFRS(){this.renegotiationInProgress=!1,this.onRenegotiation()}_traceName(){return"TransreceiverPC"}hasLocalAudio(){return this.impl.getLocalStreams().some(e=>!!e.getAudioTracks().length)}enableVideo(e){let t=[];this._call&&(t=m.default.StreamManager.get()._getScreenSharing(this._call)||[]);const n=[];t.forEach(e=>e.stream.getTracks().forEach(e=>n.push(e.id))),e?(this._call.settings.videoDirections.sendVideo=!0,m.default.StreamManager.get().getCallStream(this._call,!0).then(e=>{if(!e)throw new Error("Could not get call stream");this.addStreamToCache(e);let t=[];if(o.default.isIphone()||o.default.isIpad()){let n=e.getAudioTracks(),r=this._call.peerConnection.getTransceivers().find(e=>e.sender.track&&"audio"===e.sender.track.kind);t.push(this.__replaceTrack(r,n[0]))}let n=e.getVideoTracks();return n.length&&(this._call.settings.isConference?t.push(this._addVideoTransceiver(n[0],e,"video")):t.push(this._addNewVideoTransceiver(n[0],e,"video"))),Promise.all(t)}).then(e=>{const t=e.reduce((e,t)=>(t===D.alreadyInProgress&&(e=!0),e),!1);this.logger.info(`Renegotiation is already in progress: ${t}`),t?this.revertEnablingVideo():(m.default.StreamManager.get().updateLocalVideo(),this.updateSenderTrackTransformers())}).catch(e=>{this.revertEnablingVideo(),this.logger.error(`Error during enableVideo(true): ${e.message}`)})):(t.length&&t.forEach(e=>{m.default.StreamManager.get()._clearScreenSharing(this._call,e)}),this.impl.getTransceivers().forEach(e=>{e.stopped||"sendrecv"!==e.currentDirection&&"sendonly"!==e.currentDirection&&"inactive"!==e.currentDirection||!e.sender.track||"video"!==e.sender.track.kind||this.__replaceTrack(e,null).then(()=>("sendonly"!==e.currentDirection||this._call.settings.isConference?e.direction="recvonly":e.stop(),this._call.settings.videoDirections.sendVideo=!1,this.onRenegotiation())).catch(e=>{this.logger.warning("Wrong transceiver on replace")})}))}revertEnablingVideo(){0!==this.streamCache.length&&(this.logger.info("Revert enableVideo in progress"),this._call.settings.videoDirections.sendVideo=!1,this.impl.getTransceivers().forEach(e=>{null!==e.mid&&null!==e.currentDirection||!e.sender.track||"video"!==e.sender.track.kind||this.__replaceTrack(e,null).then(()=>{if(this.renegotiationInProgress)throw new Error("Renegotiation in progress, it is forbidden to revert transceivers. Please rejoin to call to avoid unexpected results.");return this.onRenegotiation()}).then(()=>{e.stop(),this.logger.info("New call transceiver has been stopped")}).catch(e=>{this.logger.error(e.message)}),this._call.settings.isConference&&null!==e.mid&&("sendrecv"===e.direction||"sendonly"===e.direction)&&e.sender.track&&"video"===e.sender.track.kind&&this.__replaceTrack(e,null).then(()=>{e.direction="recvonly",this.logger.info("Direction in conference transceiver has been changed to `recvonly`")}).catch(e=>{this.logger.warning(`Could not revet enabling video process after error. Reason: ${e.message}`)})}),this.stopStreamsFromCache(),this.logger.info("New streams have been stopped. Revert enableVideo finished"))}_addNewVideoTransceiver(e,t,n){return new Promise((r,i)=>{var o;const a=c.CallManager.get().getEndpointManager(this._call),s={direction:this._getDefaultDirection(),streams:[t]},l=e.getSettings();if(this.isSimulcast())s.sendEncodings=_.Utils.buildSimulcastLayers({trackSettings:l,trackType:n,profileName:null===(o=this._call)||void 0===o?void 0:o.settings.simulcastProfileName});else{const t=e.getSettings();s.sendEncodings=_.Utils.buildNotSimulcastLayers({trackSettings:t,trackType:n}),this.logger.info(`New encodings params have been applied for ${n} track: ${JSON.stringify(s.sendEncodings)}`)}let u=this.impl.addTransceiver(e,s);this.updateTransceiver(a,u),this.onRenegotiation().then(r).catch(i)})}_replaceSharingToVideo(e,t){return new Promise(n=>{var r;const i=this.getTransceivers().filter(e=>e.sender.track&&"video"===e.sender.track.kind);if(i&&i.length){if(this.isSimulcast()){const n=_.Utils.buildSimulcastLayers({trackSettings:e.getSettings(),trackType:t,profileName:null===(r=this._call)||void 0===r?void 0:r.settings.simulcastProfileName});this._setEncodingsParams(i[0],n)}else{const n=_.Utils.buildNotSimulcastLayers({trackSettings:e.getSettings(),trackType:t});this.logger.info(`New encodings params have been applied for ${t} track: ${JSON.stringify(n)}`),this._setEncodingsParams(i[0],n)}this.__replaceTrack(i[0],e).then(()=>{m.default.StreamManager.get().isLocalVideoRequested&&m.default.StreamManager.get().updateLocalVideo(),this._runReinvite(),n()})}else n()})}getTransceivers(){return this.impl.getTransceivers?this.impl.getTransceivers():[]}getRemoteDescription(){return this.impl.remoteDescription&&this.impl.remoteDescription.sdp?this.impl.remoteDescription.sdp:""}_addCustomMedia(e){var t;if(!e||"closed"===this.impl.signalingState)return;let n="video";m.default.StreamManager.get()._getScreenSharing(this._call).forEach(t=>{t.stream.id===e.id&&(n="sharing")});const r=c.CallManager.get().getEndpointManager(this._call),i=e.getAudioTracks(),a=this._getDefaultDirection();if(i.length)i.forEach(t=>{let n=this.getEmptyTransceiverForKind("audio");n?("inactive"!==n.direction&&"recvonly"!==n.direction||(n.direction=this._getDefaultDirection()),this.impl.addTrack(t,e),this.onRenegotiation()):(n=this.impl.addTransceiver(t,{direction:a,streams:[e]}),this.onRenegotiation()),this.updateTransceiver(r,n)});else if("sharing"!==n){const e=this.impl.addTransceiver("audio",{direction:"recvonly"});this.onRenegotiation(),this.updateTransceiver(r,e)}const s=e.getVideoTracks();if(s.length){const t=this.impl.getTransceivers().filter(e=>"video"===e.receiver.track.kind&&!("inactive"===e.direction||"stopped"===e.direction)&&"inactive"!==e.currentDirection&&!e.stopped);"sharing"!==n&&t.length?s.forEach(t=>{this._addVideoTransceiver(t,e,n)}):s.forEach(t=>{this._addNewVideoTransceiver(t,e,n)})}else{if(!this._call.settings.isConference&&this.impl.getTransceivers().filter(e=>"video"===e.receiver.track.kind).length)return;if(this._call.settings.isAudio)return;const i={direction:"recvonly",streams:[e]};this.isSimulcast()?i.sendEncodings=_.Utils.buildSimulcastLayers({trackSettings:null,trackType:n,profileName:null===(t=this._call)||void 0===t?void 0:t.settings.simulcastProfileName}):(i.sendEncodings=_.Utils.buildNotSimulcastLayers({trackSettings:null,trackType:n}),this.logger.info(`New encodings params have been applied for ${n} track: ${JSON.stringify(i.sendEncodings)}`));const o=this.impl.addTransceiver("video",i);this.onRenegotiation(),this.updateTransceiver(r,o)}if(!this.dtmfSender&&this._call){const e=o.default.getDTMFSender(this.impl,this._call.id());e&&(this.dtmfSender=e)}setTimeout(()=>{this.updateSenderTransformers(),this.updateSenderTrackTransformers()},2e3)}getEmptyTransceiverForKind(e){return this._call&&this._call.settings.isConference?this.impl.getTransceivers().find(t=>"safari"===o.default.getWSVendor()?!isNaN(Number(t.mid))&&"recvonly"===t.direction&&t.receiver.track.kind===e&&!t.sender.track:!(isNaN(Number(t.mid))||"recvonly"!==t.direction&&"inactive"!==t.direction||t.receiver.track.kind!==e||t.sender.track||t.stopped)):this.impl.getTransceivers().find(t=>t.receiver.track.kind===e&&!t.sender.track&&!t.stopped)}updateTransceiver(e,t){e.updateTransceiver(t)}_removeCustomMedia(e){if(!e)return;this.renegotiationInProgress=!0;const t=this.impl.getTransceivers();e.getTracks().forEach(e=>{let n;n=this._call.settings.isConference?t.find(t=>!isNaN(Number(t.mid))&&t.sender.track&&t.sender.track===e):t.find(t=>t.sender.track&&t.sender.track===e),n&&this.__replaceTrack(n,null).then(()=>{"sendonly"!==n.currentDirection||this._call.settings.isConference||n.stop(),this.renegotiationInProgress=!1,this._runReinvite()})})}async _updateCustomMedia(e){const t=await this.updateMediaTracks(e);t&&t.length&&(this.updateSenderTrackTransformers(),this._runReinvite())}async updateMediaTracks(e){if(!e||"closed"===this.impl.signalingState)return;const t=[];return e.getTracks().forEach(e=>{const n=this.impl.getTransceivers().find(t=>t.sender.track&&t.sender.track.kind===e.kind);n&&t.push(this.__replaceTrack(n,e))}),await Promise.all(t).then(e=>(this.restoreMute(),e))}_fixFFSoundBug(){"firefox"===o.default.getWSVendor()&&a.PCFactory.hasTransceivers&&setTimeout(()=>{this.impl.getSenders&&this.impl.getSenders().forEach(e=>{if(e.replaceTrack){const t=e.track;e.replaceTrack(t)}})},1e3)}getConfiguration(){return this.impl?this.impl.getConfiguration():null}_hold(e){this.onHold=e,this.impl.getTransceivers().forEach(t=>{t.stopped||"stopped"===t.direction||"stopped"===t.currentDirection||(t.direction=e?"sendonly":"sendrecv")}),this._runReinvite()}_getDirections(){let e={};return e.local=p.SDPMuggle.detectDirections(this.impl.localDescription.sdp),e.remote=p.SDPMuggle.detectDirections(this.impl.remoteDescription.sdp),e}_createImpl(e){if(f.Client.getInstance().config()&&f.Client.getInstance().config().experiments&&f.Client.getInstance().config().experiments.relayOnly&&(e=Object.assign(Object.assign({},e),{iceTransportPolicy:"relay"})),f.Client.getInstance().isInsertableStreamsSupported()&&(this.logger.warning("encodedInsertableStreams is enabled"),e=Object.assign(Object.assign({},e),{encodedInsertableStreams:!0})),this.mode===i.PeerConnectionMode.CONFERENCE&&"chrome"===o.default.getWSVendor()){const t={mandatory:{},optional:[]},n=RTCPeerConnection;this.impl=new n(e,t)}else this.impl=new RTCPeerConnection(e);this._call=c.CallManager.get().calls[this.id],(0,C.registerSource)(this.impl,e=>{if(this._call){const t={};this._call.getEndpoints().forEach(e=>{e.mediaRenderers.forEach(n=>{n.transceivers[0]&&n.transceivers[0].receiver&&n.transceivers[0].receiver.track&&(t[n.transceivers[0].receiver.track.id]={mr:n.id,ep:e.id})})});const n={};for(let r in e.inbound)t[r]?(n[t[r].mr]=e.inbound[r],n[t[r].mr].endpoint=t[r].ep):n[r]=e.inbound[r];e.inbound=n,this._call.dispatchEvent({name:g.CallEvents.CallStatsReceived,stats:e})}},null,this._call),this.impl.getTransceivers&&"firefox"===o.default.getWSVendor()&&(a.PCFactory.hasTransceivers=!0),this.impl.addEventListener("track",e=>this.onAddTrack(e)),this.impl.onicecandidate=e=>{this.onICECandidate(e.candidate)},this.renegotiationInProgress=!1,this.impl.onsignalingstatechange=e=>this.onSignalingStateChange(),this.impl.oniceconnectionstatechange=e=>this.onConnectionChange(),this.impl.onconnectionstatechange=e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"onconnectionstatechange",description:this.impl.connectionState})},this.impl.onicegatheringstatechange=e=>{this._call&&this._call.dispatchEvent({name:"SDP",origin:"onicegatheringstatechange",description:this.impl.iceGatheringState})},this.iceRole=T.controlling,this._remoteStreams=[],this.banReinviteAnswer=!1,void 0!==this._call?this.onHold=!this._call.active():this.onHold=!1,this.needTransportRestart=!1,"_default"!==this.id&&c.CallManager.get().calls[this.id]&&(this.reInviteQ=new h.ReInviteQ(c.CallManager.get().calls[this.id],this._canReInvite))}onSignalingStateChange(){this._call&&this._call.dispatchEvent({name:"SDP",origin:"onsignalingstatechange",description:this.impl.signalingState}),this.logger.info("Signal state changed to "+this.impl.signalingState+" for PC: "+this.id),"stable"===this.impl.signalingState&&(this.reInviteQ&&this.reInviteQ.runNext(),this._addIceCandidatesFromQueue())}onConnectionChange(){this.logger.info(`PCS: ${this.impl.connectionState} ${this.impl.iceConnectionState}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"oniceconnectionstatechange",description:this.impl.iceConnectionState}),"failed"!==this.impl.iceConnectionState&&"disconnected"!==this.impl.iceConnectionState||c.CallManager.get().icerestart(),"closed"===this.impl.connectionState&&this._call&&y.get().remCallStream(this._call),"completed"===this.impl.iceConnectionState&&void 0!==this._call&&(this._call.dispatchEvent({name:"ICECompleted",call:this._call}),clearTimeout(this.iceTimer)),"completed"!==this.impl.iceConnectionState&&"connected"!==this.impl.iceConnectionState||(this.iceTimer&&clearTimeout(this.iceTimer),this.iceTimer=null,this.reInviteQ&&this.reInviteQ.runNext())}async onRenegotiation(){if(this._call&&this._call.dispatchEvent({name:"SDP",origin:"negotiationneeded",description:"negotiationneeded"}),void 0===this.impl)throw new Error("PeerConnection is not configured");if("disconnected"===this.impl.connectionState||"failed"===this.impl.connectionState)throw this.logger.info("Renegotiation requested on closed PeerConnection"),new Error("Renegotiation requested on closed PeerConnection");if(null!==this.impl.localDescription){if("connected"!==this.impl.iceConnectionState&&"completed"!==this.impl.iceConnectionState)return this.logger.info("Renegotiation requested while ice state is "+this.impl.iceConnectionState+". Postponing"),void setTimeout(this.onRenegotiation,100);if(this.renegotiationInProgress)return this.logger.info("Renegotiation in progress. Queueing"),D.alreadyInProgress;this.logger.info("Renegotiation started"),await this._runReinvite()}else this.logger.info("Renegotiation needed, but no local SDP. Skipping")}getReceiveOptions(){return{offerToReceiveAudio:!this.onHold,offerToReceiveVideo:!this.onHold,voiceActivityDetection:!0}}onICECandidate(e){e&&""!==e.candidate?this.sendLocalCandidateToPeer("a="+e.candidate,e.sdpMLineIndex):this.logger.info("End of candidates")}onAddTrack(e){if(this._call){const t=c.CallManager.get().getEndpointManager(this._call);this._call.settings.isConference||"inactive"!==e.transceiver.direction||(e.transceiver.direction="recvonly"),this.updateTransceiver(t,e.transceiver)}}_runReinvite(e=!1){return new Promise((t,n)=>{if(!1===this.renegotiationInProgress){this.renegotiationInProgress=!0;let r={};!o.default.isIphone()&&(this._call.settings.isConference||this.impl.getTransceivers&&"firefox"===o.default.getWSVendor())||(r=this.getReceiveOptions()),e&&(r.iceRestart=!0),this.logger.trace(JSON.stringify(r)),this.updateHoldState(),this.resetEncodings().then(()=>this.impl.createOffer(r)).then(e=>(this.logger.info(`_runReinvite(), created local SDP: \n${e.sdp}`),this.codecRearrange(e))).then(e=>{let t={type:e.type,sdp:e.sdp};return t=a.PCFactory.get().addBandwidthParams(t),t=p.SDPMuggle.removeTelephoneEvents(t),t=p.SDPMuggle.removeDoubleOpus(t),t=p.SDPMuggle.removeDoublePT(t),t=p.SDPMuggle.trimMediaAttr(t),t=p.SDPMuggle.removeDoubleCodecsInactiveSections(t),t=this._reduceCodecs(t),t}).then(t=>(this.srcLocalSDP=t.sdp,this.impl.setLocalDescription(t).then(()=>{this.logger.info(`_handleReinvite(), set remote SDP: \n${t.sdp}`),this._call&&this._call.dispatchEvent({name:"SDP",origin:"handleReinviteInProgress",sdp:t.sdp});let n={mids:this.getMidKinds(),iceRestart:e};v.default.callRemoteFunction(u.RemoteFunction.reInvite,this._call.id(),{},t.sdp,n)}))).then(t).catch(e=>{if(this._call){const t=`offer_reject: Error when renegotiation start ${e.message}`;this._call.dispatchEvent({name:"SDP",origin:"_runReinvite",sdp:this.impl.localDescription,description:t}),b.CallPromiseResolver.reject(this._call,t)}this.renegotiationInProgress=!1,this.logger.error("Error when renegotiation start "+e.message),n(e)})}else{const e="Another renegotiation in progress";b.CallPromiseResolver.reject(this._call,e),this.logger.error(e),n(new Error(e))}})}codecRearrange(e){return new Promise((t,n)=>{let r=c.CallManager.get().calls[this.id];if(void 0!==r){let i=new d.CodecSorter(e.sdp),o=i.getUserCodecList();void 0!==r.rearangeCodecs?r.rearangeCodecs(o,r.settings.incoming).then(n=>{i.setUserCodecList(n),t({type:e.type,sdp:i.getSDP()})},e=>{this.logger.error(JSON.stringify(e)),this._call&&this._call.dispatchEvent({name:"SDP",origin:"codecRearrange",sdp:this.impl.localDescription,description:`reject: ${e.message}`}),n(e)}):(i.setUserCodecList(o),this.logger.info("No sdp codecs transformer registered"),t({type:e.type,sdp:i.getSDP()}))}else t(e)})}__replaceTrack(e,t){return new Promise((n,r)=>{const i=e.sender.track;o.default.isIpad()&&!t?(this.impl.removeTrack(e.sender),n()):e.sender.replaceTrack(t).then(()=>{!i||t&&i.id===t.id||o.default.isIphone()||o.default.isIpad()||(i.enabled=!1,i.onended=null,i.onmute=null,i.stop()),n()}).catch(t=>{this.logger.warning(`The attempt to replace track for ${e.mid} failed`),r()})})}_setEncodingsParams(e,t){if(this.isSimulcast()){let n=e.sender.getParameters();n&&n.encodings&&n.encodings.length>1&&n.encodings.forEach(e=>{let n=t.find(t=>t.rid===e.rid);(null==n?void 0:n.maxBitrate)&&(e.maxBitrate=n.maxBitrate),(null==n?void 0:n.maxFramerate)&&(e.maxFramerate=n.maxFramerate),(null==n?void 0:n.scaleResolutionDownBy)&&(e.scaleResolutionDownBy=n.scaleResolutionDownBy)}),e.sender.setParameters(n)}else{let n=e.sender.getParameters();n&&n.encodings&&n.encodings[0]&&t[0]&&(t[0].maxBitrate&&(n.encodings[0].maxBitrate=t[0].maxBitrate),t[0].maxFramerate&&(n.encodings[0].maxFramerate=t[0].maxFramerate),t[0].scaleResolutionDownBy&&(n.encodings[0].scaleResolutionDownBy=t[0].scaleResolutionDownBy)),e.sender.setParameters(n)}}_getDefaultDirection(){return this._call&&this._call.settings.isConference&&this._call.settings.simulcast?"sendonly":"sendrecv"}_addVideoTransceiver(e,t,n){return new Promise((r,i)=>{var o,a;const s=c.CallManager.get().getEndpointManager(this._call),l={direction:this._getDefaultDirection(),streams:[t]};let u=this.getEmptyTransceiverForKind("video");const d=e.getSettings();if(u){if("inactive"!==u.direction&&"recvonly"!==u.direction||(u.direction=this._getDefaultDirection()),this.isSimulcast()){const e=_.Utils.buildSimulcastLayers({trackSettings:d,trackType:n,profileName:null===(o=this._call)||void 0===o?void 0:o.settings.simulcastProfileName});this._setEncodingsParams(u,e)}this.onHold&&(u.direction="sendonly"),this.__replaceTrack(u,e).then(()=>(this.updateTransceiver(s,u),this.onRenegotiation())).then(r).catch(i)}else{if(this.isSimulcast())l.sendEncodings=_.Utils.buildSimulcastLayers({trackSettings:d,trackType:n,profileName:null===(a=this._call)||void 0===a?void 0:a.settings.simulcastProfileName});else{const t=e.getSettings();l.sendEncodings=_.Utils.buildNotSimulcastLayers({trackSettings:t,trackType:n}),this.logger.info(`New encodings params have been applied for ${n} track: ${JSON.stringify(l.sendEncodings)}`)}u=this.impl.addTransceiver(e,l),this.updateTransceiver(s,u),this.onRenegotiation().then(r).catch(i)}})}_reduceCodecs(e){const t=[{name:"H264",params:{"profile-level-id":"42e0"}},{name:"VP8"},{name:"red",optional:!0},{name:"ulpfec",optional:!0}],n=[{name:"telephone-event/8000"},{name:"opus"}],r=f.Client.getInstance().limitVCodecs||t,i=f.Client.getInstance().limitACodecs||n;if(f.Client.getInstance().limitVCodecs||f.Client.getInstance().limitACodecs){const t=p.SDPMuggle.reduceCodecs(e,{video:r,audio:i}).sdp;return this.logger.info(`_reduceCodecs(), SDP after codec has been reduced: \n${t.sdp}`),t}if(!this._call.settings.isConference)return e;const o=p.SDPMuggle.reduceCodecs(e,{audio:n,video:t}).sdp;return this.logger.info(`_reduceCodecs(), SDP after codec has been reduced: \n${o.sdp}`),o}isSimulcast(){return this._call&&!o.default.isIphone()&&this._call.settings.isConference&&this._call.settings.simulcast}updateSenderTransformers(){f.Client.getInstance().isInsertableStreamsSupported()&&this._call&&this.impl.getTransceivers().forEach(e=>{var t;if(null===(t=e.sender)||void 0===t?void 0:t.track){let t;this._TransceiverEncoderMap.has(e)?t=this._TransceiverEncoderMap.get(e):(t=e.sender.createEncodedStreams(),this._TransceiverEncoderMap.set(e,t));const n="audio"===e.sender.track.kind?this._call.audioSenderTransform:this._call.videoSenderTransform;t.readable.pipeThrough(n).pipeTo(t.writable)}})}updateSenderTrackTransformers(){if(!f.Client.getInstance().isMediaTrackInsertableStreamSupported()||!this._call)return;let e=[];e=m.default.StreamManager.get()._getScreenSharing(this._call)||[];const t=[];e.forEach(e=>e.stream.getTracks().forEach(e=>t.push(e.id))),this.impl.getTransceivers().forEach(async e=>{var n;if((null===(n=e.sender)||void 0===n?void 0:n.track)&&!t.includes(e.sender.track.id)){let t;const n=e.sender.track;"audio"===n.kind&&"function"==typeof this._call.audioMediaTrackTransform?t=await this._call.audioMediaTrackTransform(n):"video"===n.kind&&"function"==typeof this._call.videoMediaTrackTransform&&(t=await this._call.videoMediaTrackTransform(n)),t&&e.sender.replaceTrack(t)}})}manageLayers(e){const t=this.impl.getTransceivers().filter(e=>-1!==e.currentDirection.indexOf("send")).filter(e=>"video"===e.sender.track.kind);t.length&&this.isSimulcast()&&t.forEach(t=>{const n=t.sender.getParameters();n&&n.encodings&&n.encodings.length>1&&(n.encodings=n.encodings.map(t=>(t.rid&&t.maxBitrate&&(t.active=e.includes(t.rid)),t)));try{t.sender.setParameters(n)}catch(e){this.logger.error("Cannot update simulcast parameters")}})}async resetEncodings(){var e;const t=this.impl.getTransceivers();for(let n of t)if(!isNaN(Number(n.mid))&&"audio"!==(null===(e=n.receiver.track)||void 0===e?void 0:e.kind)&&"inactive"!==n.direction&&"stopped"!==n.direction&&!n.stopped&&(this.logger.info(`Reset simulcast layers for mid=${n.mid}`),"null"!==n.mid)){const e=n.sender.getParameters();e&&e.encodings&&(e.encodings=e.encodings.map(e=>(e.active=!0,e)),await n.sender.setParameters(e))}}stopInactiveTransceiver(e){"inactive"!==e.currentDirection||this._call.settings.isConference||(e.stop(),this.logger.info(`Transceiver ${e.mid} has been stopped.`))}addStreamToCache(e){this.streamCache.push(e)}cleanStreamCache(){this.streamCache=[]}stopStreamsFromCache(){this.streamCache.forEach(e=>{m.default.StreamManager.get()._remCallStream(e)}),this.cleanStreamCache()}}r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_getLocalOfferRegular",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"updateHoldState",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_processRemoteAnswer",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_getLocalOffer",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_getLocalOfferFF",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_getLocalAnswer",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_setRemoteDescription",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_handleReinvite",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_close",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_addRemoteCandidate",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"setConfiguration",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_sendDTMF",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_hdnFRSPrep",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_hdnFRS",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"hasLocalAudio",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"enableVideo",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"revertEnablingVideo",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_replaceSharingToVideo",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_addCustomMedia",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_removeCustomMedia",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_updateCustomMedia",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_fixFFSoundBug",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"getConfiguration",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_hold",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_createImpl",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"onSignalingStateChange",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"onConnectionChange",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"onRenegotiation",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"getReceiveOptions",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"onICECandidate",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"onAddTrack",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"codecRearrange",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_setEncodingsParams",null),r([s.LogManager.d_trace(s.LogCategory.RTC)],w.prototype,"_reduceCodecs",null),t.TransreceiverPC=w},6278:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfSignalingRemoteFunctions=t.ConfSignalingRemoteEvents=t.ConfSignaling=t.ConfSignalingState=void 0;const i=n(1150),o=n(2282),a=n(8597),s=n(1901);var l;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.CLOSED=2]="CLOSED"}(l=t.ConfSignalingState||(t.ConfSignalingState={}));class c{constructor(e){this.call=e,this.reconnectionAttempts=10,this.logger=i.LogManager.get().createLogger(i.LogCategory.SIGNALING,this._traceName()),this.currentState=l.CONNECTING,e.sysOn(o.CallEvents.Connected,t=>{const n=t=>{try{let r=JSON.parse(t.text);"vi/upgrade"===r.event&&(this.rand=r.rand,this.connectTo(r.url),e.sysOff(o.CallEvents.MessageReceived,n))}catch(e){this.logger.warning("Cannot parse JSON data: "+e.text)}};e.sysOn(o.CallEvents.MessageReceived,n),e.sendMessage("vi/upgrade")})}_traceName(){return"ConfSignaling"}connectTo(e){this.lastWSUrl=e,this.ws=new WebSocket(e),this.ws.onopen=e=>this.onWSConnected(),this.ws.onclose=e=>this.onWSClosed(e),this.ws.onerror=e=>this.onWSError(e),this.ws.onmessage=e=>this.onWSData(e.data)}onWSConnected(){this.connectingTimer=setTimeout(()=>{this.ws.close()},4e3),this.ws.send(this.rand)}onWSClosed(e){this.ws&&(this.ws.close(),this.ws=void 0),this.currentState=l.CLOSED,e.wasClean||this.reconnect()}reconnect(){this.reconnectionAttempts>0&&(this.reconnectionAttempts--,this.connectTo(this.lastWSUrl))}onWSError(e){this.ws.close(),this.ws=void 0,this.currentState=l.CLOSED,this.logger.warning("Error in onConfSignalingConnectionFailed callback: "+e)}onWSData(e){var t;let n;try{switch(n=JSON.parse(e),n.name){case"vad":this.call.getEndpoints().forEach(e=>{if(e.id===n.endpoint){let t=a.EndpointEvents.VoiceEnd;n.enabled&&(t=a.EndpointEvents.VoiceStart),e.dispatchEvent({name:t,call:this.call,endpoint:e})}});break;case"hello":clearInterval(this.connectingTimer),this.reconnectionAttempts=10,this.currentState=l.CONNECTED;break;case"endpointStreamsUpdated":this.logger.info(`Received endpointStreamsUpdated event with payload ${JSON.stringify(n.payload)}`),n.payload&&(null===(t=s.EndpointStreamsUpdatedHandler.getInstanceBy(this.call))||void 0===t||t.handle(n.payload));break;case"message":this.call.dispatchEvent({name:o.CallEvents.MessageReceived,call:this.call,text:n.payload});break;default:this.logger.info("Unknown command: "+n.name)}}catch(t){this.logger.warning("Cannot parse JSON data: "+e)}}runFunction(e,t){this.ws.send(JSON.stringify({name:e,payload:t}))}}r([i.LogManager.d_trace(i.LogCategory.SIGNALING)],c.prototype,"connectTo",null),r([i.LogManager.d_trace(i.LogCategory.SIGNALING)],c.prototype,"onWSConnected",null),r([i.LogManager.d_trace(i.LogCategory.SIGNALING)],c.prototype,"onWSClosed",null),r([i.LogManager.d_trace(i.LogCategory.SIGNALING)],c.prototype,"reconnect",null),r([i.LogManager.d_trace(i.LogCategory.SIGNALING)],c.prototype,"onWSError",null),r([i.LogManager.d_trace(i.LogCategory.SIGNALING)],c.prototype,"onWSData",null),t.ConfSignaling=c,function(e){e.VAD="vad",e.MUTE="mute",e.MANAGE_ENDPOINTS="manageEndpoints",e.MESSAGE="message",e.ENDPOINT_STREAMS_UPDATED="endpointStreamsUpdated"}(t.ConfSignalingRemoteEvents||(t.ConfSignalingRemoteEvents={})),function(e){e.MUTE="mute",e.MANAGE_ENDPOINTS="manageEndpoints",e.MESSAGE="message",e.REQUEST_VIDEO_SIZE="requestVideoSize"}(t.ConfSignalingRemoteFunctions||(t.ConfSignalingRemoteFunctions={}))},8202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgAction=void 0,function(e){e.UNKNOWN="UNKNOWN",e.createConversation="createConversation",e.editConversation="editConversation",e.removeConversation="removeConversation",e.joinConversation="joinConversation",e.leaveConversation="leaveConversation",e.getConversation="getConversation",e.getConversations="getConversations",e.getPublicConversations="getPublicConversations",e.searchConversations="searchConversations",e.removeEmptyConversation="removeEmptyConversation",e.addParticipants="addParticipants",e.editParticipants="editParticipants",e.removeParticipants="removeParticipants",e.getUser="getUser",e.getUsers="getUsers",e.editUser="editUser",e.setStatus="setStatus",e.sendMessage="sendMessage",e.editMessage="editMessage",e.removeMessage="removeMessage",e.typingMessage="typingMessage",e.isRead="isRead",e.subscribe="subscribe",e.unsubscribe="unsubscribe",e.manageNotification="manageNotification",e.getSubscriptionList="getSubscriptionList",e.createBot="createBot",e.removeBot="removeBot",e.retransmitEvents="retransmitEvents"}(t.MsgAction||(t.MsgAction={}))},249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgEvent=void 0,function(e){e.onError="onError",e.onCreateConversation="onCreateConversation",e.onEditConversation="onEditConversation",e.onRemoveConversation="onRemoveConversation",e.onGetConversation="onGetConversation",e.onGetPublicConversations="onGetPublicConversations",e.onGetUser="onGetUser",e.onEditUser="onEditUser",e.onSetStatus="onSetStatus",e.onSendMessage="onSendMessage",e.onEditMessage="onEditMessage",e.onRemoveMessage="onRemoveMessage",e.isRead="isRead",e.onTyping="onTyping",e.onSubscribe="onSubscribe",e.onUnsubscribe="onUnsubscribe",e.onGetSubscriptionList="onGetSubscriptionList",e.onCreateBot="onCreateBot",e.onRemoveBot="onRemoveBot",e.onRetransmitEvents="onRetransmitEvents"}(t.MsgEvent||(t.MsgEvent={}))},7050:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.MsgSignaling=void 0;const i=n(1150),o=n(249),a=n(3576),s=n(6968),l=n(209),c=n(245);class u extends a.EventTarget{constructor(){if(super(),u.instance)throw new Error("Error - use Client.getMessagingInstance()");this.query=[],setInterval(()=>{this.updateQuery()},220)}static get(){return u.instance=u.instance||new u,u.instance}capitalize(e){return e.toString()[0].toUpperCase()+e.toString().slice(1)}updateQuery(){if(this.query.length){const e=this.query.splice(0,1);c.default.sendRaw(e[0])}}addEventListener(e,t,n){super.addEventListener(e,t,n)}dispatchMsgEvent(e,t){var n,r;if(null===(n=this.eventListeners)||void 0===n?void 0:n[e]){const n=this.eventListeners[e];for(let e of n)null===(r=e.listener)||void 0===r||r.call(e,null==t?void 0:t.payload,null==t?void 0:t.request_uuid)}}handleWsData(e){if(-1==Object.values(o.MsgEvent).indexOf(e.event))throw new Error("Unknown messaging event "+e.event+" with payload "+JSON.stringify(e.payload));this.dispatchMsgEvent(e.event,e)}sendWsMessage(e,t){const n=["subscribe","unsubscribe","typingMessage","isRead","setStatus"].includes(e)?"CommonNamespace":"IncomingNamespace",r=(new l.default).toString(),i={service:s.MsgService.Chat,event:e,payload:Object.assign(t,{"@type":`type/vox.store.${n}.${{setStatus:"PresenceMessage",isRead:"StatusMessage",typingMessage:"TypingMessage",subscribe:"ManageSubscribes",unsubscribe:"ManageSubscribes",addParticipants:"ManageParticipants",editParticipants:"ManageParticipants",manageNotification:"ManageNotifications",getPublicConversations:"GetConversations",retransmitEvents:"RetransmitRequest"}[e]||this.capitalize(e)}`}),request_uuid:r};return this.query.push(i),r}_traceName(){return"MsgSignaling"}}r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],u.prototype,"handleWsData",null),r([i.LogManager.d_trace(i.LogCategory.MESSAGING)],u.prototype,"sendWsMessage",null),t.MsgSignaling=u},575:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteEvent=void 0,function(e){e[e.loginFailed="loginFailed"]="loginFailed",e[e.loginSuccessful="loginSuccessful"]="loginSuccessful",e[e.handleError="handleError"]="handleError",e[e.onPCStats="__onPCStats"]="onPCStats",e[e.handleIncomingConnection="handleIncomingConnection"]="handleIncomingConnection",e[e.handleConnectionConnected="handleConnectionConnected"]="handleConnectionConnected",e[e.handleConnectionDisconnected="handleConnectionDisconnected"]="handleConnectionDisconnected",e[e.handleRingOut="handleRingOut"]="handleRingOut",e[e.startEarlyMedia="startEarlyMedia"]="startEarlyMedia",e[e.stopRinging="stopRinging"]="stopRinging",e[e.handleConnectionFailed="handleConnectionFailed"]="handleConnectionFailed",e[e.handleSIPInfo="handleSIPInfo"]="handleSIPInfo",e[e.handleSipEvent="handleSipEvent"]="handleSipEvent",e[e.handleTransferStarted="handleTransferStarted"]="handleTransferStarted",e[e.handleTransferComplete="handleTransferComplete"]="handleTransferComplete",e[e.handleTransferFailed="handleTransferFailed"]="handleTransferFailed",e[e.handleReInvite="handleReInvite"]="handleReInvite",e[e.handleAcceptReinvite="handleAcceptReinvite"]="handleAcceptReinvite",e[e.handleRejectReinvite="handleRejectReinvite"]="handleRejectReinvite",e[e.createPC="__createPC"]="createPC",e[e.destroyPC="__destroyPC"]="destroyPC",e[e.connectionSuccessful="__connectionSuccessful"]="connectionSuccessful",e[e.connectionFailed="__connectionFailed"]="connectionFailed",e[e.createConnection="__createConnection"]="createConnection",e[e.pong="__pong"]="pong",e[e.increaseGain="increaseGain"]="increaseGain",e[e.handlePreFlightCheckResult="handlePreFlightCheckResult"]="handlePreFlightCheckResult",e[e.handleVoicemail="handleVoicemail"]="handleVoicemail",e[e.onCallRemoteFunctionError="onCallRemoteFunctionError"]="onCallRemoteFunctionError",e[e.refreshOauthTokenFailed="refreshOauthTokenFailed"]="refreshOauthTokenFailed",e[e.refreshOauthTokenSuccessful="refreshOauthTokenSuccessful"]="refreshOauthTokenSuccessful",e[e.registerPushTokenResult="registerPushTokenResult"]="registerPushTokenResult",e[e.unregisterPushTokenResult="unregisterPushTokenResult"]="unregisterPushTokenResult",e[e.sipRegisterSuccessful="sipRegisterSuccessful"]="sipRegisterSuccessful",e[e.sipRegisterFailed="sipRegisterFailed"]="sipRegisterFailed",e[e.onACDStatus="onACDStatus"]="onACDStatus",e[e.SQMessagingStatusUpdated="SQMessagingStatusUpdated"]="SQMessagingStatusUpdated",e[e.onSQStatusError="onSQStatusError"]="onSQStatusError",e[e.onICEConfig="onICEConfig"]="onICEConfig",e[e.onICEConfigFailed="onICEConfigFailed"]="onICEConfigFailed"}(t.RemoteEvent||(t.RemoteEvent={}))},4106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteFunction=void 0,function(e){e[e.ping="__ping"]="ping",e[e.login="login"]="login",e[e.loginGenerateOneTimeKey="loginGenerateOneTimeKey"]="loginGenerateOneTimeKey",e[e.loginStage2="loginStage2"]="loginStage2",e[e.setOperatorACDStatus="setOperatorACDStatus"]="setOperatorACDStatus",e[e.getOperatorACDStatus="getOperatorACDStatus"]="getOperatorACDStatus",e[e.setOperatorMessagingStatus="setOperatorMessagingStatus"]="setOperatorMessagingStatus",e[e.getOperatorMessagingStatus="getOperatorMessagingStatus"]="getOperatorMessagingStatus",e[e.setDesiredVideoBandwidth="setDesiredVideoBandwidth"]="setDesiredVideoBandwidth",e[e.rejectCall="rejectCall"]="rejectCall",e[e.disconnectCall="disconnectCall"]="disconnectCall",e[e.sendDTMF="sendDTMF"]="sendDTMF",e[e.sendSIPInfo="sendSIPInfo"]="sendSIPInfo",e[e.hold="hold"]="hold",e[e.unhold="unhold"]="unhold",e[e.acceptCall="acceptCall"]="acceptCall",e[e.createCall="createCall"]="createCall",e[e.callConference="callConference"]="callConference",e[e.transferCall="transferCall"]="transferCall",e[e.muteLocal="__muteLocal"]="muteLocal",e[e.reInvite="ReInvite"]="reInvite",e[e.acceptReInvite="AcceptReInvite"]="acceptReInvite",e[e.rejectReInvite="RejectReInvite"]="rejectReInvite",e[e.confirmPC="__confirmPC"]="confirmPC",e[e.addCandidate="__addCandidate"]="addCandidate",e[e.loginUsingOneTimeKey="loginUsingOneTimeKey"]="loginUsingOneTimeKey",e[e.refreshOauthToken="refreshOauthToken"]="refreshOauthToken",e[e.confirmIncomingConnection="confirmIncomingConnection"]="confirmIncomingConnection",e[e.zPromptFinished="promptFinished"]="zPromptFinished",e[e.zStartPreFlightCheck="__startPreFlightCheck"]="zStartPreFlightCheck",e[e.registerPushToken="registerPushToken"]="registerPushToken",e[e.unregisterPushToken="unregisterPushToken"]="unregisterPushToken",e[e.pushFeedback="pushFeedback"]="pushFeedback",e[e.refreshIceConfig="refreshIceConfig"]="refreshIceConfig"}(t.RemoteFunction||(t.RemoteFunction={}))},245:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoxSignalingState=void 0;const r=n(2262),i=n(7050),o=n(3576),a=n(125),s=n(141),l=n(308),c=[];let u=null;class d extends o.EventTarget{}const g=new d;function p(e,t){1===e&&2===t&&c.forEach(e=>e.onSignalingConnected()),3===t&&c.forEach(e=>e.onSignalingConnectionFailed("")),4===t&&a.Client.getInstance().dispatchEvent({name:s.Events.Reconnecting}),4===e&&2===t&&(a.Client.getInstance().dispatchEvent({name:s.Events.Reconnected}),l.CallManager.get().icerestart()),5===t&&c.forEach(e=>e.onSignalingClosed())}function f(e){e.service?i.MsgSignaling.get().handleWsData(e):g.eventListeners[e.name]&&g.eventListeners[e.name].forEach(t=>t.listener.apply(null,e.params))}const h={setRPCHandler:function(e,t){g.addEventListener(e,t)},removeRPCHandler:function(e,t){g.removeEventListener(e,t)},callRemoteFunction:function(e,...t){return u.send({name:e,params:t}),!0},addHandler:function(e){c.push(e)},onConnectionFailedRPC:function(){},currentState:function(){if(!u)return m.IDLE;switch(u.state){case 0:case 3:case 5:default:return m.IDLE;case 1:return m.CONNECTING;case 2:return m.CONNECTED;case 4:return m.RECONNECTING}},disconnect:async function(){u&&(await u.clear(),u=null)},connect:async function(e,t,n){if(!u||5===u.state||3===u.state)return u=new r.Connection(e,2,Array.isArray(t)?t:[t],n),u.outerMessageHandler=f,u.outerStateHandler=p,await u.connect(),2===u.state||(await u.clear(),u=null,!1)},sendRaw:function(e){return u.send(e)}};var m;!function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.WSCONNECTED=2]="WSCONNECTED",e[e.CONNECTED=3]="CONNECTED",e[e.CLOSING=4]="CLOSING",e[e.RECONNECTING=5]="RECONNECTING"}(m=t.VoxSignalingState||(t.VoxSignalingState={})),t.default=h},2262:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const o=n(4234),a=n(1783),s=n(5383),l=n(3658),c=n(2071),u=n(9367),d=n(1666),g=n(125),p=n(1150),f=n(5604),h=n(4106),m=n(575),_=n(7998),v=[h.RemoteFunction.ping,m.RemoteEvent.pong],y=["ack"];class C{constructor(e,t,n,r){this.logger=p.LogManager.get().createLogger(0,"SIG2"),this.selectBalancerUrlByNode=e=>{const t="https://balancer.voximplant.com/getNearestHost";return e&&[_.ConnectionNode.NODE_3,_.ConnectionNode.NODE_4,_.ConnectionNode.NODE_5,_.ConnectionNode.NODE_11].includes(e)?"https://balancer.root.voximplant.ru/getNearestHost":t},this.messageHandler=async(e,t)=>{try{const n=JSON.parse(e);if("msg"===n.type&&v.includes(n.payload.name)||y.includes(n.type)||this.logger.info((0,o.t)("INFO_CONN_MESSAGE",t.uuid,e)),!n.type)return void this.logger.error((0,o.t)("ERR_CONN_MESSAGE_FORMAT_TYPE","type"));switch(n.type){case"close":this.validateSeq(n.seq,t)&&await this.processClose(n);break;case"ack":await this.processAck(n);break;case"error":this.awaitingTransportHandler&&(this.destroyTransportSilent(this.awaitingTransportHandler.transport),this.awaitingTransportHandler.resolve(f.CONNECTION_CODE.SERVER_ERROR),this.awaitingTransportHandler=null);break;case"id":await this.setConnectionId(n),await this.sendData({type:"lastrx",seq:this.remoteClock});break;case"lastrx":await this.processLastRtx(n);break;case"msg":this.validateSeq(n.seq,t)&&await this.processMsg(n);break;default:this.logger.error((0,o.t)("ERR_CONN_MESSAGE_FORMAT_TYPE","type"))}}catch(e){this.logger.error((0,o.t)("ERR_CONN_MESSAGE_PARSING_ERR")),console.error(e)}},this.onTransportClose=async(e,t)=>{if(this.logger.info((0,o.t)("INFO_CONN_TRANSPORT_CLOSED",e.uuid,t.reason,t.code.toString())),e.onClose=null,e.messageHandler=null,!this.transportList.has(e))return;const n=Array.from(this.transportList).some(e=>1===e.state||0===e.state);this.transportList.delete(e),n||(this.connectionId?(this.logger.info((0,o.t)("INFO_CONN_RECONNECT_NEEDED")),2===this.state&&(this.setState(4),await this.reconnect()?this.setState(2):this.setState(5))):this.setState(3))},this.state=0,this.config={balancerUrl:this.selectBalancerUrlByNode(r),acdVersion:e,imVersion:t,servers:Array.from(n)},this.lastRxReceived=new Promise(e=>{this.lastRxResolver=e}),this.connectedMessageReceived=new Promise(e=>{this.connectedMessageResolver=e})}validateSeq(e,t){return e===this.remoteClock+1||(this.logger.warning((0,o.t)("INFO_CONN_BALANCER",e.toString(),this.remoteClock.toString(),t.uuid)),t.destroy(d.TransportCloseCodes.WRONG_SEQ,"Wrong seq"),!1)}async setConnectionId(e){this.logger.info((0,o.t)("INFO_CONN_CONNECTION_ID_SET",e.id)),this.connectionId=e.id,this.awaitingTransportHandler&&(this.awaitingTransportHandler.resolve(f.CONNECTION_CODE.CONNECTED),this.awaitingTransportHandler=null)}async processAck(e){const t=Array.from(this.messagePool.keys()).sort()[0];this.logger.trace((0,o.t)("TRACE_CONN_ACK_RECEIVED",e.seq.toString(),this.localClock.toString(),t.toString()));let n=0;for(let r=t;r<=e.seq;r++)this.messagePool.has(r)&&(this.messagePool.delete(r),n++);this.ackTimeout&&(clearTimeout(this.ackTimeout),this.ackTimeout=null),this.logger.trace((0,o.t)("TRACE_CONN_ACK_CLEARED",n.toString()))}async processLastRtx(e){0===e.seq&&this.lastRxResolver();const t=this.localClock-e.seq;let n=0;for(let t=e.seq;t<=this.localClock;t++){const e=this.messagePool.get(t);e&&(await this.sendData(e),n++)}this.logger.trace((0,o.t)("TRACE_CONN_RETRANSMIT",e.seq.toString(),this.localClock.toString(),t.toString(),n.toString()))}async processClose(e){await this.clearRoutine(!1)}async processMsg(e){this.remoteClock=e.seq,"__createConnection"===e.payload.name&&this.connectedMessageResolver(),this.outerMessageHandler&&this.outerMessageHandler(e.payload),this.sendACK()}transformMsgPayload(e){if(e.payload.service){const t=e.payload;return Object.assign({name:`${t.service}.${t.event}`},e.payload)}if(e.payload.name){const t=e.payload;return Object.assign({name:`GW.${t.name}`},(0,c.hydratePayload)(t.name,t.params))}return{name:"UnknownGWMessage",payload:e.payload}}sendACK(){this.sendData({type:"ack",seq:this.remoteClock}).catch(e=>{})}async send(e){if(1!==this.state&&2!==this.state&&4!==this.state)return void this.logger.warning((0,o.t)("WARN_CONN_WRONG_STATE","send message",g.Client.getInstance().getClientState().toString(),""+this.state));const t=++this.localClock,n={type:"msg",seq:t,payload:e};this.messagePool.set(t,n),this.ackTimeout||2!==this.state||(this.ackTimeout=setTimeout(()=>{this.transportList.forEach(e=>e.destroy(d.TransportCloseCodes.TIMEOUT)),clearTimeout(this.ackTimeout)},6e3)),await this.sendData(n)}async sendData(e){var t,n;const r=this.transportList.values();try{for(var a,s=i(r);!(a=await s.next()).done;){const t=a.value;"msg"===e.type&&v.includes(e.payload.name)||y.includes(e.type)||this.logger.info((0,o.t)("INFO_CONN_TO_MESSAGE",t.uuid,JSON.stringify(e))),await t.send(JSON.stringify(e))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&await n.call(s)}finally{if(t)throw t.error}}}async requestBalancer(){var e,t,r,i;let a="https://balancer.voximplant.com/getNearestHost";(null===(e=this.config)||void 0===e?void 0:e.balancerUrl)&&(0===(null===(t=this.config)||void 0===t?void 0:t.balancerUrl.indexOf("https://"))?a=null===(r=this.config)||void 0===r?void 0:r.balancerUrl:this.logger.warning((0,o.t)("WARN_CONN_WRONG_BALANCER_URL",null===(i=this.config)||void 0===i?void 0:i.balancerUrl))),this.logger.info((0,o.t)("INFO_CONN_BALANCER",a));try{const e=await n.g.fetch(a),t=await e.text();if(200!==e.status)throw new Error(`Response code: ${e.status}`);if(0===t.length)throw new Error("Response body is empty");return t.split(";")}catch(e){console.error(e),this.logger.error((0,o.t)("ERR_CONN_WRONG_BALANCER_RESPONSE",e.message,a))}return[]}makeConnectionURL(e){var t,r;let i="nodejs";const o=n.g.navigator;return(null==o?void 0:o.mozGetUserMedia)?i="firefox":(null==o?void 0:o.webkitGetUserMedia)?i="chrome":o&&(i="safari"),`wss://${e}/platform?version=5&client_version=4.7.6-2772&video=true&ccheck=false&client_platform=${i}&im_version=${(null===(t=this.config)||void 0===t?void 0:t.imVersion)||2}&acd_version=${(null===(r=this.config)||void 0===r?void 0:r.acdVersion)||1}${this.connectionId?"&id="+this.connectionId:""}&features=1`}async connect(){var e;if(this.logger.info((0,o.t)("INFO_CONN_START_CONNECTION")),this.state>0)return void this.logger.warning((0,o.t)("WARN_CONN_WRONG_STATE","connect",a.VIConnectionStateStrings[this.state],""+this.state));this.setState(1),this.localClock=0,this.remoteClock=0,this.messagePool=new Map,this.transportList=new Set;let t=null===(e=this.config)||void 0===e?void 0:e.servers;if(t&&t.length&&t[0]||(t=await this.requestBalancer()),0===t.length){const e=(0,o.t)("ERR_CONN_FAILED","No gateways to connect");throw this.logger.error(e),this.setState(3),new Error(e)}this.logger.info((0,o.t)("INFO_CONN_CONNECTION_POOL",t.join(", "))),await this.firstConnection(t)?(this.pingInterval&&clearInterval(this.pingInterval),this.pingInterval=setInterval(()=>this.doPing(),2e3),await Promise.all([this.lastRxReceived,this.connectedMessageReceived]),this.setState(2)):((0,o.t)("ERR_CONN_FAILED",(0,o.t)("ERR_CONN_CLOUD_IS_UNREACHABLE",t.join(", "))),this.setState(3))}doPing(){2===this.state&&this.send({name:"__ping"})}async reconnect(){this.logger.info((0,o.t)("INFO_CONN_RECONNECT","1"));let e=await this.connectToServer(this.currentServer);if(e===f.CONNECTION_CODE.CONNECTED)return!0;const t=async()=>await this.connectToServer(this.currentServer),n=(0,l.makePromiseTimeout)(t,200),r=(0,l.makePromiseTimeout)(t,1e3),i=(0,l.makePromiseTimeout)(t,5e3),a=[n,n,r,r,r,i,i,i,i];for(let t=0;t<a.length;t++)if(e!==f.CONNECTION_CODE.CONNECTED)switch(this.logger.info((0,o.t)("INFO_CONN_RECONNECT",(t+2).toString())),e=await a[t](this.currentServer),e){case f.CONNECTION_CODE.NOT_CONNECTED:this.logger.info((0,o.t)("INFO_CONN_RECONNECT_ATTEMPT_FAILED",(t+2).toString()));break;case f.CONNECTION_CODE.SERVER_ERROR:return this.logger.info("Reconnect attempt failed due server error"),!1}return e===f.CONNECTION_CODE.CONNECTED}async firstConnection(e){for(const t of e)if(this.logger.info((0,o.t)("INFO_CONN_CONNECT",t)),await this.connectToServer(t)===f.CONNECTION_CODE.CONNECTED)return this.logger.info((0,o.t)("INFO_CONN_CONNECT_SUCCESSFUL",t)),this.currentServer=t,!0;return!1}async connectToServer(e){const t=this.makeConnectionURL(e),n=new s.Transport;return await n.connect(t)?(this.transportList.add(n),this.logger.info((0,o.t)("INFO_CONN_TRANSPORT_CONNECTED",n.uuid)),n.messageHandler=this.messageHandler,n.onClose=this.onTransportClose,await new Promise(e=>{this.awaitingTransportHandler&&(this.destroyTransportSilent(this.awaitingTransportHandler.transport),this.awaitingTransportHandler.resolve(f.CONNECTION_CODE.NOT_CONNECTED)),this.awaitingTransportHandler={resolve:e,transport:n}})):(n.destroy(d.TransportCloseCodes.NOT_CONNECTED),1)}async clear(){await this.clearRoutine(!0)}async clearRoutine(e){if(0===this.state||3===this.state||5===this.state)return void this.logger.warning((0,o.t)("WARN_CONN_WRONG_STATE","disconnect",a.VIConnectionStateStrings[this.state],""+this.state));this.pingInterval&&clearInterval(this.pingInterval),this.logger.info((0,o.t)("INFO_CONN_CLEAR")),this.setState(5);const t={type:"close",seq:this.localClock++};this.transportList.forEach(n=>{2===n.state&&e&&n.send(JSON.stringify(t)),this.destroyTransportSilent(n)})}destroyTransportSilent(e){this.transportList.delete(e),e.onClose=null,e.messageHandler=null,e.destroy(d.TransportCloseCodes.CLIENT_ERROR,"Closing by connection"),this.logger.info((0,o.t)("INFO_CONN_TRANSPORT_DESTROY",e.uuid))}setState(e){const t=this.state;this.state=e,this.outerStateHandler&&this.outerStateHandler(t,e)}}r([(0,u.throttleDecorator)(5e3)],C.prototype,"sendACK",null),t.Connection=C},5604:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECTION_CODE=void 0,function(e){e[e.CONNECTED=0]="CONNECTED",e[e.NOT_CONNECTED=1]="NOT_CONNECTED",e[e.SERVER_ERROR=2]="SERVER_ERROR"}(n||(n={})),t.CONNECTION_CODE=n},1783:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIConnectionStateStrings=t.VIConnectionState=void 0;const n={disconnected:0,connecting:1,connected:2,failed:3,reconnecting:4,closed:5};t.VIConnectionState=n;const r=Object.keys(n);t.VIConnectionStateStrings=r},2071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dehydratePayload=t.hydratePayload=void 0;const n={loginFailed:["code","extra"],loginSuccessful:["displayName","params"],__onPCStats:["stats"],handleIncomingConnection:["id","headers","sdp","extra"],handleConnectionConnected:["id","headers","sdp","endpointData","scheme"],handleConnectionDisconnected:["id","headers","params"],handleRingOut:["id"],startEarlyMedia:["id","headers","sdp","scheme"],stopRinging:["id"],handleConnectionFailed:["id","code","reason","headers"],handleSIPInfo:["id","type","subType","body","headers"],handleSipEvent:["id"],handleTransferStarted:["id"],handleTransferComplete:["id"],handleTransferFailed:["id"],handleReInvite:["id","headers","sdp","scheme"],handleAcceptReinvite:["id","headers","sdp"],handleRejectReinvite:["id","headers","sdp"],__createPC:["id","sdp"],__destroyPC:["id"],__connectionSuccessful:["token"],__connectionFailed:[],__createConnection:["token"],__pong:[],increaseGain:[],handlePreFlightCheckResult:["a","b","c"],handleVoicemail:["event"],refreshOauthTokenFailed:["code"],refreshOauthTokenSuccessful:["oauth"],registerPushTokenResult:["result"],unregisterPushTokenResult:["result"],sipRegisterSuccessful:["id","sipUri"],sipRegisterFailed:["id","sipUri","status","reason"],onACDStatus:["id","status","uuid","description"],SQMessagingStatusUpdated:["id","status","uuid","description"],onSQStatusError:["id","uuid","code","description"],onICEConfig:["id","config"],onICEConfigFailed:["id"]},r={__ping:[],login:["username","password"],loginGenerateOneTimeKey:[],setOperatorACDStatus:[],getOperatorACDStatus:[],setOperatorMessagingStatus:[],getOperatorMessagingStatus:[],setDesiredVideoBandwidth:[],rejectCall:[],disconnectCall:[],sendDTMF:[],sendSIPInfo:[],hold:[],unhold:[],acceptCall:[],createCall:[],callConference:[],transferCall:[],__muteLocal:[],ReInvite:[],AcceptReInvite:[],RejectReInvite:[],__confirmPC:[],__addCandidate:[],loginUsingOneTimeKey:[],refreshOauthToken:[],promptFinished:[],registerPushToken:[],unregisterPushToken:[],pushFeedback:[]};t.hydratePayload=function(e,t){const r=n[e];if(!r)throw new Error(`Rule unknown for ${e}`);return t.reduce((e,t,n)=>(e[r[n]]=t,e),{})},t.dehydratePayload=function(e,t){const n=r[e];if(!n)throw new Error(`Rule unknown for ${e}`);return n.reduce((e,n)=>{const r=t[n]||null;return e.push(r),e},[])}},9367:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttleDecorator=void 0,t.throttleDecorator=function(e=200){let t,r;return(i,o,a)=>({value:function(...i){var o;t||(t=Date.now()),n.g.clearTimeout(r),t&&Date.now()-t>=e?(null===(o=a.value)||void 0===o||o.apply(this,i),t=Date.now()):r=n.g.setTimeout(()=>{var n;Date.now()-t>=e&&(null===(n=a.value)||void 0===n||n.apply(this,i),t=Date.now())},e-(Date.now()-t))}})}},5383:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const r=n(1666),i=n(2957);t.Transport=class{constructor(){this.state=0,this.uuid=i.Utils.generateUUID()}send(e){if(this.ws.readyState===WebSocket.CLOSED||this.ws.readyState===WebSocket.CLOSING)return this.state=4,this.parentOnClose("Client error",r.TransportCloseCodes.CLIENT_ERROR,!1),void this.ws.close(r.TransportCloseCodes.CLIENT_ERROR,"Client error");this.ws.send(e)}destroy(e,t){e!==r.TransportCloseCodes.NOT_CONNECTED?this.ws.close(e,t):this.state=4}async connect(e){return new Promise(t=>{this.state=1,this.ws=new WebSocket(e);const n=e=>{this.state=0,t(!1)};this.ws.addEventListener("open",()=>{this.state=2,this.ws.removeEventListener("error",n),this.ws.addEventListener("message",e=>{this.messageHandler&&this.messageHandler(e.data,this)}),this.ws.addEventListener("close",({reason:e,code:t,wasClean:n})=>{4!==this.state&&(this.state=4,this.parentOnClose(e,t,n))}),this.ws.addEventListener("error",e=>{this.state=4,this.parentOnClose("Client error",r.TransportCloseCodes.CLIENT_ERROR,!1),this.ws.close(r.TransportCloseCodes.CLIENT_ERROR,"Client error")}),t(!0)}),this.ws.addEventListener("error",n)})}parentOnClose(e,t,n){this.onClose&&this.onClose(this,{reason:e,code:t,wasClean:n})}}},1666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportCloseCodes=void 0,t.TransportCloseCodes={NOT_CONNECTED:-1,NORMAL:1e3,WRONG_SEQ:4001,SERVER_ERROR:4002,CLIENT_ERROR:4003,TIMEOUT:4004}},3658:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePromiseTimeout=void 0,t.makePromiseTimeout=function(e,t){return function(...n){return new Promise(r=>{setTimeout(async function(){const t=await e.apply(n);r(t)},t)})}}},4234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.t=void 0;const n=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{TEST_REPLACE:"This is a {1} {2} replace"}),{TRACE_CONN_ACK_RECEIVED:"ASK message: received ask {1}, local clock {2}, minimal stored clock {3}",TRACE_CONN_ACK_CLEARED:"ASK message: cleared {1} msg from the pool.",TRACE_CONN_RETRANSMIT:"LastRTX message: requested from {1} current {2} total requested {3} can be sent {4}"}),{INFO_CONN_START_CONNECTION:"Start connecting procedure",INFO_CONN_BALANCER:"Request balancer url {1}",INFO_CONN_TRANSPORT_CONNECTED:"Transport has been connected uuid:{1}",INFO_CONN_TRANSPORT_CLOSED:"Transport has been closed unexpectedly uuid:{1} reason:{2} code {3}",INFO_CONN_TRANSPORT_DESTROY:"Transport has been successful closed uuid:{1}",INFO_CONN_CONNECTION_POOL:"Connecting to Voximplant gateways: {1}",INFO_CONN_CONNECT:"Trying to connect with {1}",INFO_CONN_CONNECT_SUCCESSFUL:"Connection with {1} has been successful",INFO_CONN_RECONNECT_NEEDED:"Trying to restore connection",INFO_CONN_RECONNECT:"Attempt to reconnect #{1}",INFO_CONN_RECONNECT_ATTEMPT_FAILED:"Attempt #{1} failed. Timeout.",INFO_CONN_CLEAR:"Start disconnecting procedure.",INFO_CONN_MESSAGE:'New message from Transport uuid: {1}. "{2}"',INFO_CONN_TO_MESSAGE:'New message to Transport uuid: {1}. "{2}"',INFO_CONN_CONNECTION_ID_SET:"Set new connection id: {1}",INFO_TRANSPORT_CLOSED:"Transport {1} has been closed with code {2} reason: {3}"}),{WARN_CORE_WRONG_EVENT:"{1} internal event is unhandled. Looks like you forgot to connect some module. If you cannot solve this yourself, please contact our technical support at support@voximplant.com.",WARN_CONN_WRONG_BALANCER_URL:'The Balancer URL should be secure. "{1}" not starts with "https://"',WARN_CONN_WRONG_STATE:"You try to {1} in the wrong state {2}({3})",WARN_CONN_WRONG_SEQ:"Received seq={1}, last seq={2}. Transport {3} is terminated.",WARN_TRANSPORT_NO_HANDLER:"Transport {1} has no message handler. Message has been dropped.",WARN_TRANSPORT_NO_CLOSE_HANDLER:"Transport {1} has no close handler."}),{ERR_LOADING_MODULE:"Error loading module: ",ERR_MODULE_CONSTRUCTOR:"The modules field should be array",ERR_CORE_HANDLER_THROW:'Some module throw error while handle the "{1}" event. Error message is "{2}"',ERR_CORE_PRE_HANDLER_THROW:'Some module throw error while pre handle the "{1}" event. Error message is "{2}"',ERR_CORE_POST_HANDLER_THROW:'Some module throw error while post handle the "{1}" event. Error message is "{2}"',ERR_STATE_IS_READONLY:"SDK.state is read only.",ERR_CONFIG_IS_READONLY:"SDK.config is read only.",ERR_AlREADY_CONNECTED:'SDK already connected. Please use "async SDK.disconnect()" at first place.',ERR_NOT_CONNECTED_YET:'SDK not connected yet. Please use "async SDK.connect()" at first place.',ERR_CONN_WRONG_BALANCER_RESPONSE:'Wrong balancer response. "{1}" from "{2}"',ERR_CONN_FAILED:"Connection failed. Reason: {1}",ERR_CONN_CLOUD_IS_UNREACHABLE:"Voximplant cloud is unreachable. List of servers {1}",ERR_CONN_MESSAGE_PARSING_ERR:"Error while parsing message from Transport",ERR_CONN_MESSAGE_FORMAT_TYPE:'Error in message from Transport: "{1}" field not set.',ERR_CONN_CONNECTION_ID_ALREADY_SET:"Connection id already set and cannot be updated."}),{THROW_WRONG_ENVIRONMENT:"Wrong environment",THROW_WRONG_MODULES_CONSTRUCTOR:"Modules config should be an array or a function that returns array"});t.t=(e,...t)=>{const i=n[e];return i?r(i,...t):e};const r=(e,...t)=>e.replace(/{(\d+)}/g,function(e,n){return void 0!==t[n-1]?t[n-1]:e})},9007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSimulcastProfile=void 0,t.getSimulcastProfile=function(e){return"b24"===e.profileName?function({trackType:e,layerCount:t,minTrackSize:n}){return"video"===e?{framerateParams:[25,2===t?25:15,1===t?25:2===t?15:25],bitrateParams:[n>=1080?24e5:18e5,8e5,3e5],scaleDownParams:[1,1,1===t?1:n/320]}:{framerateParams:[30,2===t?30:10,1===t?30:1],scaleDownParams:[1,1,1]}}(e):function({trackType:e,layerCount:t,minTrackSize:n}){return"video"===e?{bitrateParams:[n>=1080?24e5:18e5,5e5,1e5],scaleDownParams:[1,n/360,n/280],framerateParams:[30,30,15]}:{framerateParams:[30,2===t?30:10,1===t?30:1],scaleDownParams:[1,1,1]}}(e)}},4893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectInterval=t.LOW_BATTERY_COLLECT_INTERVAL=t.DEFAULT_COLLECT_INTERVAL=t.MIN_COLLECT_INTERVAL=void 0;const r=n(308);t.MIN_COLLECT_INTERVAL=500,t.DEFAULT_COLLECT_INTERVAL=1e3,t.LOW_BATTERY_COLLECT_INTERVAL=1e4,t.getCollectInterval=async function(){const e=r.CallManager.get().rtcStatsCollectionInterval;try{if(navigator.getBattery)return(await navigator.getBattery()).level<=.3?Math.max(1e4,e):e}catch(e){}return e}},8552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterPeerConnection=t.registerSource=void 0;const r=n(4893),i=n(7141),o=n(2746),a=n(9258),s=n(171),l=n(5229),c=n(2182),u=n(1954),d=n(1150),g=n(308);let p=!1;const f=new Set,h=new WeakMap,m=new WeakMap;let _=!1,v=r.DEFAULT_COLLECT_INTERVAL,y=i.baseStatsStrategy;async function C(){(0,r.getCollectInterval)().then(e=>{v=e});for(const t of f.values())if("connected"===t.connectionState){const n=await t.getStats(),r=(e=n,(0,l.checkBlink)(e,p)?s.blinkStatsStrategy:(0,c.checkGecko)(e,p)?o.geckoStatsStrategy:(0,u.checkWebkit)(e,p)?a.webkitStatsStrategy:i.baseStatsStrategy);r.name!==y.name&&(d.LogManager.get().writeMessage(d.LogCategory.RTC,"Stat2",d.LogLevel.INFO,`Stats strategy changed from ${y.name} to ${r.name}`),y=r);const g=m.get(t),f=y.process(n,g);m.set(t,JSON.parse(JSON.stringify(f)));const _=h.get(t);_&&_(f)}var e;0!==f.size&&(_=!0,setTimeout(C,v))}function E(e){f.delete(e),d.LogManager.get().writeMessage(d.LogCategory.RTC,"Stat2",d.LogLevel.INFO,"Statics source has been removed "),0===f.size&&(d.LogManager.get().writeMessage(d.LogCategory.RTC,"Stat2",d.LogLevel.INFO,"Statics interval has been stopped"),_=!1)}t.unregisterPeerConnection=E,t.registerSource=function(e,t,n,r){d.LogManager.get().writeMessage(d.LogCategory.RTC,"Stat2",d.LogLevel.INFO,"Add a new statistic source"),n&&n.addEventListener("abort",function(){d.LogManager.get().writeMessage(d.LogCategory.RTC,"Stat2",d.LogLevel.INFO,"Abort statistic source"),E(e)}),h.set(e,t),function(e){f.add(e),d.LogManager.get().writeMessage(d.LogCategory.RTC,"Stat2",d.LogLevel.INFO,"Statics source has been added ");const t=g.CallManager.get().rtcStatsCollectionInterval;!_&&t>0&&(_=!0,setTimeout(C,v))}(e)}},6577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShortStreamStats=void 0;const n=(e,t,n)=>Object.entries(e).filter(([e,n])=>(Array.isArray(n)?n:[n]).find(e=>e.kind===t)).reduce((e,t)=>{const[r,i]=t;return r&&"undefined"!==r&&(e[r]=((e,t)=>(Array.isArray(e)?e:[e]).map(e=>Object.entries(e).reduce((e,n)=>{const[r,i]=n;return t.includes(r)&&(e[r]=i),e},{})))(i,n)),e},{});t.getShortStreamStats=e=>{const{outbound:t,inbound:r}=e,i=["packetsSent","packetsReceived","packetsLost","codec","bitrate","endpoint","rtt"],o=["packetsSent","packetsReceived","packetsLost","framesPerSecond","framesDropped","codec","bitrate","rid","width","height","rtt","endpoint"];return{timestamp:Date.now(),outbound:{audio:n(t,"audio",i),video:n(t,"video",o)},inbound:{audio:n(r,"audio",i),video:n(r,"video",o)}}}},6665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerSource=void 0;const r=n(8552);Object.defineProperty(t,"registerSource",{enumerable:!0,get:function(){return r.registerSource}})},7141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseStatsStrategy=void 0;t.baseStatsStrategy={process:function(e){return{connection:{timestamp:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,rtt:0,localPort:0,localProtocol:"udp",localType:"relay",remotePort:0,remoteProtocol:"tcp",remoteType:"relay"},inbound:{},outbound:{}}},name:"rfc"}},171:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blinkStatsStrategy=void 0;const r=n(3236),i={process:function(e,t){const[n,i]=r.utils.formatStats(e),o={},a={};let s={};return n.forEach(e=>{var n,l;switch(e.type){case"outbound-rtp":{if(!e.mediaSourceId)break;const o=i.get(e.remoteId),s=i.get(e.codecId),c=i.get(e.mediaSourceId),u=c.trackIdentifier,d=e.rid?null===(n=null==t?void 0:t.outbound[u])||void 0===n?void 0:n.find(t=>t.rid===e.rid):null===(l=null==t?void 0:t.outbound[u])||void 0===l?void 0:l[0];let g=0;d&&(g=r.utils.calculateBitrate(e.bytesSent,d.bytesSent,e.timestamp,d.timestamp));const p={bytesSent:e.bytesSent,packetsSent:e.packetsSent,rid:e.rid,jitter:0,rtt:0,totalRtt:0,packetsLost:0,loss:0,codec:s.mimeType,pt:s.payloadType,timestamp:e.timestamp,bitrate:g};switch(o&&(p.jitter=o.jitter,p.rtt=o.roundTripTime,p.totalRtt=o.totalRoundTripTime||o.roundTripTime,p.packetsLost=o.packetsLost,p.loss=o.packetsLost/(e.packetsSent+o.packetsLost)),e.kind){case"audio":{const e=c;p.kind="audio",p.audioLevel=e.audioLevel||0,p.totalAudioEnergy=e.totalAudioEnergy||0;break}case"video":{const t=c;p.kind="video",p.baseWidth=t.width,p.baseHeight=t.height,p.width=e.frameWidth||0,p.height=e.frameHeight||0,p.framesPerSecond=e.framesPerSecond||0,p.baseFramesPerSecond=t.framesPerSecond,p.qualityLimitationReason=e.qualityLimitationReason,p.qualityLimitationResolutionChanges=e.qualityLimitationResolutionChanges,p.firCount=e.firCount,p.pliCount=e.pliCount,p.nackCount=e.nackCount,p.qpSum=e.qpSum,p.framesEncoded=e.framesEncoded,p.keyFramesEncoded=e.keyFramesEncoded;break}}a[u]||(a[u]=[]),a[u].push(p);break}case"inbound-rtp":{const n=e.trackIdentifier,a=null==t?void 0:t.inbound[n],s=i.get(e.codecId);let l=0;switch(a&&(l=r.utils.calculateBitrate(e.bytesReceived,a.bytesReceived,e.timestamp,a.timestamp)),o[n]={timestamp:e.timestamp,kind:e.kind,bytesReceived:e.bytesReceived||0,packetsReceived:e.packetsReceived||0,packetsLost:e.packetsLost||0,loss:e.packetsLost/(e.packetsReceived+e.packetsLost),jitter:e.jitter||0,bitrate:l},(null==s?void 0:s.mimeType)&&(o[n].codec=null==s?void 0:s.mimeType),e.kind){case"audio":o[n]=Object.assign(Object.assign({},o[n]),{audioLevel:e.audioLevel||0,totalAudioEnergy:e.totalAudioEnergy||0,totalSamplesReceived:e.totalSamplesReceived||0,totalSamplesDuration:e.totalSamplesDuration||0,insertedSamplesForDeceleration:e.insertedSamplesForDeceleration||0,silentConcealedSamples:e.silentConcealedSamples||0});break;case"video":{let t=0;if(a&&a.framesReceived){const n=a.framesReceived||e.framesReceived;t=(e.framesReceived-n)/(e.timestamp-a.timestamp)*1e3|0}o[n]=Object.assign(Object.assign({},o[n]),{height:e.frameHeight||0,width:e.frameWidth||0,framesReceived:e.framesReceived||0,framesDecoded:e.framesDecoded||0,framesDropped:e.framesDropped||0,framesPerSecond:t});break}}break}case"candidate-pair":{if("succeeded"!==e.state||!e.nominated)return;const t=i.get(e.remoteCandidateId),n=i.get(e.localCandidateId);if(!t||!n)return;const r=t.candidateType,o=t.ip||t.address,a=t.protocol,l=t.port,c=n.candidateType,u=n.ip||n.address,d=n.protocol,g=n.port,p=e.totalRoundTripTime,f=e.currentRoundTripTime,{bytesSent:h,bytesReceived:m,availableOutgoingBitrate:_,timestamp:v}=e;s={timestamp:v,remoteType:r,remoteIp:o,remoteProtocol:a,remotePort:l,localType:c,localIp:u,localProtocol:d,localPort:g,bytesSent:h,bytesReceived:m,availableOutgoingBitrate:_,rtt:p,currentRtt:f};break}}}),{connection:s,outbound:a,inbound:o}},name:"blink"};t.blinkStatsStrategy=i},5229:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkBlink=void 0,t.checkBlink=function(e,t=!1){let n=!0,r=!1;return e.forEach(e=>{if(n){switch(e.type){case"peer-connection":r=!0;break;case"media-source":n="audio"===(i=e).kind?void 0!==i.audioLevel&&void 0!==i.totalAudioEnergy&&void 0!==i.totalSamplesDuration:"video"===i.kind&&void 0!==i.width&&void 0!==i.height&&void 0!==i.framesPerSecond;break;case"local-candidate":case"remote-candidate":n=function(e){return void 0!==e.address&&void 0!==e.isRemote||void 0!==e.ip&&void 0!==e.isRemote}(e);break;case"transport":n=function(e){return void 0!==e.packetsSent&&void 0!==e.packetsReceived}(e);break;case"inbound-rtp":n=function(e){return"audio"===e.kind||"video"===e.kind}(e);break;case"outbound-rtp":n=function(e){return"audio"===e.kind||"video"===e.kind&&void 0!==e.qualityLimitationReason}(e);break;case"track":n=function(e){return void 0!==e.kind}(e)}t&&console.error("After "+e.type,n)}var i}),r||(n=!1),t&&console.error("Blink detection result is:",n),n}},2182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkGecko=void 0,t.checkGecko=function(e,t=!1){let n=!0;return e.forEach(e=>{if(n){switch(e.type){case"candidate-pair":n=void 0!==(r=e).lastPacketReceivedTimestamp&&void 0!==r.lastPacketSentTimestamp;break;case"inbound-rtp":n=function(e){return"video"!==e.kind||void 0!==e.discardedPackets&&void 0!==e.framesDecoded}(e)}t&&console.error("After "+e.type,n)}var r}),t&&console.error("Gecko detection result is:",n),n}},1954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkWebkit=void 0,t.checkWebkit=function(e,t=!1){let n=!0,r=!1;return e.forEach(e=>{if(n){switch(e.type){case"peer-connection":r=!0;break;case"track":n=function(e){if(e.framesReceived){const t=e;return void 0!==t.freezeCount&&void 0!==t.pauseCount&&void 0!==t.sumOfSquaredFramesDuration&&void 0!==t.totalFramesDuration&&void 0!==t.totalFreezesDuration&&void 0!==t.totalPausesDuration}return!0}(e)}t&&console.error("After "+e.type,n)}}),r||(n=!1),n}},2746:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geckoStatsStrategy=void 0;const r=n(3236),i={process:function(e,t){const[n,i]=r.utils.formatStats(e),o={},a={};let s={};return n.forEach(e=>{var n,l;switch(e.type){case"outbound-rtp":{const o=e.ssrc,s=null===(n=null==t?void 0:t.outbound[o])||void 0===n?void 0:n[0],l=i.get(e.codecId);let c=0;s&&(c=r.utils.calculateBitrate(e.bytesSent,s.bytesSent,e.timestamp,s.timestamp));const u={kind:e.kind,bytesSent:e.bytesSent,packetsSent:e.packetsSent,timestamp:e.timestamp,bitrate:c};(null==l?void 0:l.mimeType)&&(u.codec=null==l?void 0:l.mimeType),"video"===e.kind&&(u.framesPerSecond=e.framesPerSecond,u.firCount=e.firCount,u.pliCount=e.pliCount,u.nackCount=e.nackCount),a[o]=[u];const d=i.get(e.remoteId);d&&(u.jitter=d.jitter,u.rtt=d.roundTripTime,u.totalRtt=d.totalRoundTripTime,u.packetsLost=d.packetsLost,u.loss=d.packetsLost/(e.packetsSent+d.packetsLost));break}case"inbound-rtp":{const n=e.trackIdentifier,a=null==t?void 0:t.inbound[n],s=i.get(e.codecId);let c=0;a&&(c=r.utils.calculateBitrate(e.bytesReceived,a.bytesReceived,e.timestamp,a.timestamp)),o[n]={timestamp:e.timestamp,kind:e.kind,bytesReceived:e.bytesReceived||0,packetsReceived:e.packetsReceived||0,packetsLost:e.packetsLost||0,loss:e.packetsLost/(e.packetsReceived+e.packetsLost),jitter:e.jitter||0,bitrate:c};const u=i.get(e.remoteId);u&&(o[n].rtt=u.roundTripTime,o[n].totalRtt=u.totalRoundTripTime),(null==s?void 0:s.mimeType)&&(o[n].codec=null==s?void 0:s.mimeType),"video"===e.kind&&(o[n]=Object.assign(Object.assign({},o[n]),{framesDecoded:e.framesDecoded||0,framesPerSecond:null!==(l=e.framesPerSecond)&&void 0!==l?l:0}));break}case"candidate-pair":{if("succeeded"!==e.state||!e.nominated)return;const t=i.get(e.remoteCandidateId),n=i.get(e.localCandidateId);if(!t||!n)return;const r=t.candidateType,o=t.ip||t.address,a=t.protocol,l=t.port,c=n.candidateType,u=n.ip||n.address,d=n.protocol,g=n.port,{bytesSent:p,bytesReceived:f,timestamp:h}=e;s={timestamp:h,remoteType:r,remoteIp:o,remoteProtocol:a,remotePort:l,localType:c,localIp:u,localProtocol:d,localPort:g,bytesSent:p,bytesReceived:f};break}}}),{connection:s,outbound:a,inbound:o}},name:"gecko"};t.geckoStatsStrategy=i},3236:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=void 0;const n={calculateBitrate:function(e,t,n,r){return(e-t)/(n-r)*8e3},formatStats:function(e){const t=e,n=new Map;return t.forEach(e=>n.set(e.id,e)),[t,n]}};t.utils=n},9258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webkitStatsStrategy=void 0;const r=n(3236),i={process:function(e,t){const[n,i]=r.utils.formatStats(e),o={},a={};let s={};return n.forEach(e=>{var n,l,c,u,d;switch(e.type){case"outbound-rtp":{const o=i.get(e.remoteId),s=i.get(e.codecId),u=i.get(e.trackId),d=null!==(n=null==u?void 0:u.trackIdentifier)&&void 0!==n?n:e.id;if(!d)return;const g=e.rid?null===(l=null==t?void 0:t.outbound[d])||void 0===l?void 0:l.find(t=>t.rid===e.rid):null===(c=null==t?void 0:t.outbound[d])||void 0===c?void 0:c[0];let p=0;g&&(p=r.utils.calculateBitrate(e.bytesSent,g.bytesSent,e.timestamp,g.timestamp));const f={bytesSent:e.bytesSent,packetsSent:e.packetsSent,rid:e.rid,jitter:0,rtt:0,totalRtt:0,packetsLost:0,loss:0,codec:s.mimeType,pt:s.payloadType,timestamp:e.timestamp,bitrate:p};if(o){f.jitter=o.jitter,f.rtt=o.roundTripTime,f.packetsLost=o.packetsLost;const t=o.packetsLost||0;f.loss=t/(e.packetsSent+t)}switch(e.kind){case"audio":f.kind="audio";break;case"video":f.kind="video",f.width=e.frameWidth||0,f.height=e.frameHeight||0,f.framesPerSecond=e.framesPerSecond||0,f.qualityLimitationReason=e.qualityLimitationReason,f.qualityLimitationResolutionChanges=e.qualityLimitationResolutionChanges,f.firCount=e.firCount,f.pliCount=e.pliCount,f.nackCount=e.nackCount,f.qpSum=e.qpSum,f.framesEncoded=e.framesEncoded,f.keyFramesEncoded=e.keyFramesEncoded}a[d]||(a[d]=[]),a[d].push(f);break}case"inbound-rtp":{const n=e.trackId,a=i.get(n),s=null!==(d=null!==(u=null==a?void 0:a.trackIdentifier)&&void 0!==u?u:e.trackIdentifier)&&void 0!==d?d:e.id;if(!s)return;const l=null==t?void 0:t.inbound[s],c=i.get(e.codecId);let g=0;switch(l&&(g=r.utils.calculateBitrate(e.bytesReceived,l.bytesReceived,e.timestamp,l.timestamp)),o[s]={timestamp:e.timestamp,kind:e.kind,bytesReceived:e.bytesReceived||0,packetsReceived:e.packetsReceived||0,packetsLost:e.packetsLost||0,loss:e.packetsLost/(e.packetsReceived+e.packetsLost),jitter:0,bitrate:g},(null==c?void 0:c.mimeType)&&(o[s].codec=null==c?void 0:c.mimeType),e.kind){case"audio":o[s]=Object.assign(Object.assign({},o[s]),{jitter:e.jitter,totalAudioEnergy:e.totalAudioEnergy||0,totalSamplesReceived:e.totalSamplesReceived||0,totalSamplesDuration:e.totalSamplesDuration||0,insertedSamplesForDeceleration:e.insertedSamplesForDeceleration||0,silentConcealedSamples:e.silentConcealedSamples||0});break;case"video":{let t=0;if(l&&l.framesReceived){const n=l.framesReceived||e.framesReceived;t=(e.framesReceived-n)/(e.timestamp-l.timestamp)*1e3|0}o[s]=Object.assign(Object.assign({},o[s]),{height:e.frameHeight||0,width:e.frameWidth||0,framesReceived:e.framesReceived||0,framesDecoded:e.framesDecoded||0,framesPerSecond:t});break}}break}case"candidate-pair":{if("succeeded"!==e.state||!e.nominated)return;const t=i.get(e.remoteCandidateId),n=i.get(e.localCandidateId);if(!t||!n)return;const r=t.candidateType,o=t.protocol,a=t.port,l=n.candidateType,c=n.protocol,u=n.port,d=e.totalRoundTripTime,g=e.currentRoundTripTime,{bytesSent:p,bytesReceived:f,availableOutgoingBitrate:h,timestamp:m}=e;s={timestamp:m,remoteType:r,remoteProtocol:o,remotePort:a,localType:l,localProtocol:c,localPort:u,bytesSent:p,bytesReceived:f,availableOutgoingBitrate:h,rtt:d,currentRtt:g};break}}}),{connection:s,outbound:a,inbound:o}},name:"webkit"};t.webkitStatsStrategy=i},7998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthResultCode=t.OperatorACDStatuses=t.QueueTypes=t.ConnectionNode=void 0,function(e){e.NODE_1="NODE_1",e.NODE_2="NODE_2",e.NODE_3="NODE_3",e.NODE_4="NODE_4",e.NODE_5="NODE_5",e.NODE_6="NODE_6",e.NODE_7="NODE_7",e.NODE_8="NODE_8",e.NODE_9="NODE_9",e.NODE_10="NODE_10",e.NODE_11="NODE_11"}(t.ConnectionNode||(t.ConnectionNode={})),function(e){e[e.ACD=1]="ACD",e[e.SmartQueue=2]="SmartQueue"}(t.QueueTypes||(t.QueueTypes={})),function(e){e[e.Banned="BANNED"]="Banned",e[e.Dialing="DIALING"]="Dialing",e[e.Offline="OFFLINE"]="Offline",e[e.Online="ONLINE"]="Online",e[e.Ready="READY"]="Ready",e[e.InService="IN_SERVICE"]="InService",e[e.AfterService="AFTER_SERVICE"]="AfterService",e[e.Timeout="TIMEOUT"]="Timeout",e[e.DND="DND"]="DND",e[e.CustomStatus_1="CUSTOM_1"]="CustomStatus_1",e[e.CustomStatus_2="CUSTOM_2"]="CustomStatus_2",e[e.CustomStatus_3="CUSTOM_3"]="CustomStatus_3",e[e.CustomStatus_4="CUSTOM_4"]="CustomStatus_4",e[e.CustomStatus_5="CUSTOM_5"]="CustomStatus_5",e[e.CustomStatus_6="CUSTOM_6"]="CustomStatus_6",e[e.CustomStatus_7="CUSTOM_7"]="CustomStatus_7",e[e.CustomStatus_8="CUSTOM_8"]="CustomStatus_8",e[e.CustomStatus_9="CUSTOM_9"]="CustomStatus_9",e[e.CustomStatus_10="CUSTOM_10"]="CustomStatus_10"}(t.OperatorACDStatuses||(t.OperatorACDStatuses={})),function(e){e[e.OneTimeKeyReceived=302]="OneTimeKeyReceived",e[e.InvalidPassword=401]="InvalidPassword",e[e.MAUAccessDenied=402]="MAUAccessDenied",e[e.AccountFrozen=403]="AccountFrozen",e[e.InvalidUsername=404]="InvalidUsername",e[e.ConnectionClosed=409]="ConnectionClosed",e[e.InternalError=500]="InternalError",e[e.TokenExpired=701]="TokenExpired"}(t.AuthResultCode||(t.AuthResultCode={}))},3992:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queueDecorator=t.TaskMutex=void 0,t.TaskMutex=class{constructor(){this.queue=[],this.locked=!1}acquire(){return this.locked?new Promise(e=>this.queue.push(e)):(this.locked=!0,Promise.resolve())}release(){if(this.queue.length)return this.queue.shift()();this.locked=!1}use(e){return this.acquire().then(()=>Promise.resolve().then(()=>e.descriptor.value.apply(e.instance,e.args)).then(e=>(this.release(),e)).catch(e=>{throw this.release(),e}))}},t.queueDecorator=function(){return(e,t,n)=>({value:function(...e){return this.mutex.use({args:e,descriptor:n,instance:this})}})}},2957:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const i=n(1150),o=n(125),a=n(3947),s=n(7272),l=n(6081),c=n(9007);class u{static cadScript(e){return e.split(";").map(function(e){if(0!==e.length){var t=e.match(/\([0-9\/\.,\*\+]*\)$/),n=e.substring(0,t.index),r=t.pop();if(t.length)throw new Error("cadence script should be of the form `%f(%f/%f[,%f/%f])`");if(n="*"===n?1/0:parseFloat(n),isNaN(n))throw new Error("cadence length should be of the form `%f`");return{duration:n,sections:r=r.slice(1,r.length-1).split(",").map(function(e){try{var t=e.split("/");if(t.length>3)throw new Error;return{on:(t=t.map(function(e,t){var n;if(2===t)return e.split("+").map(function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error;return t-1});if("*"==e&&(n=1/0),n=n||parseFloat(e),isNaN(n))throw new Error;return n}))[0],off:t[1],frequencies:t[2]}}catch(e){throw new Error("cadence segments should be of the form `%f/%f[%d[+%d]]`")}})}}})}static freqScript(e){return e.split(",").map(function(e){try{var t=e.split("@"),n=parseInt(t.shift()),r=parseFloat(t.shift());if(t.length)throw Error();return{frequency:n,decibels:r}}catch(e){throw new Error("freqScript pairs are expected to be of the form `%d@%f[,%d@%f]`")}})}static toneScript(e){var t=e.split(";");return{frequencies:this.freqScript(t.shift()),cadences:this.cadScript(t.join(";"))}}static playToneScript(e,t=!1){if(void 0!==window.AudioContext||void 0!==window.webkitAudioContext){var n=s.default.AudioDeviceManager.get().getAudioContext();if(null===n)return;var r=this.toneScript(e),i=[],o=0,a=function(e){for(var t=0;t<n.sampleRate*e;t++)i.push(0)},l=function(e,t){for(var o=0;o<n.sampleRate*t;o++){for(var a=0,s=0;s<e.length;s++)a+=Math.pow(10,r.frequencies[e[s]].decibels/20)*Math.sin((i.length+o)*(3.14159265359/n.sampleRate)*r.frequencies[e[s]].frequency),o<10&&(a*=o/10),o>n.sampleRate*t-10&&(a*=(n.sampleRate*t-o)/10);i.push(a)}},c=function(e,t){if(t!=1/0)var n=t;else n=t=20;if(0!==e.off&&e.off!=1/0)for(;n>0;)l(e.frequencies,e.on),n-=e.on,a(e.off),n-=e.off,n=parseInt(String(10*n))/10;else l(e.frequencies,t)},u=function(e){e.duration!=1/0?o+=e.duration:o+=20;for(var t=0;t<e.sections.length;t++)c(e.sections[t],e.duration)};this.source=n.createBufferSource();for(var d=0;d<r.cadences.length;d++)r.cadences[d].duration==1/0&&(this.source.loop=!0),u(r.cadences[d]);this.source.connect(n.destination);for(var g=n.createBuffer(1,o*n.sampleRate,n.sampleRate),p=g.getChannelData(0),f=0;f<o*n.sampleRate;f++)p[f]=i[f];i=null,this.source.buffer=g,!0===t&&(this.source.loop=!0),this.source.start(0)}}static stopPlayback(){return void 0!==this.source&&null!==this.source&&(this.source.stop(0),this.source=null,!0)}static getServers(e=!1){return fetch("https://balancer.voximplant.com/getNearestHost").then(e=>e.text())}static generateUUID(){let e=this._gri,t=this._ha;return t(e(32),8)+"-"+t(e(16),4)+"-"+t(16384|e(12),4)+"-"+t(32768|e(14),4)+"-"+t(e(48),12)}static _gri(e){return e<0?NaN:e<=30?0|Math.random()*(1<<e):e<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30):NaN}static _ha(e,t){let n=e.toString(16),r=t-n.length,i="0";for(;r>0;r>>>=1,i+=i)1&r&&(n=i+n);return n}static checkCA(){if(!o.Client.getInstance().connected())throw new Error(l.CallError.NOT_CONNECTED_TO_VOXIMPLANT.toString());if(!a.Authenticator.get().authorized())throw new Error(l.CallError.NOT_AUTHORIZED.toString())}static mixObjectToLeft(e,t){for(var n in e)void 0!==t[n]&&(e[n]=t[n]);return e}static strFormat(e,...t){return e.replace(/{(\d+)}/g,function(e,n){return void 0!==t[n]?t[n]:e})}_traceName(){return"Utils"}static buildSimulcastLayers({trackSettings:e,trackType:t,profileName:n}){e||(e={width:1920,height:1080});const r=e.width>e.height?e.height:e.width,i=u.getSimulcastLayerCount(r),o=(0,c.getSimulcastProfile)({profileName:n,trackType:t,layerCount:i,minTrackSize:r});return u.buildSimulcastBuilderByProfile(i,o)}static getSimulcastLayerCount(e){return e>=720?3:e>=480?2:1}static buildSimulcastBuilderByProfile(e,t){const n=["h","m","l"].slice(3-e),r=[];let i,o,a;t.bitrateParams&&(i=t.bitrateParams.slice(3-e),i[0]=t.bitrateParams[0]),t.scaleDownParams&&(o=t.scaleDownParams.slice(3-e),o[0]=t.scaleDownParams[0]),t.framerateParams&&(a=t.framerateParams.slice(3-e),a[0]=t.framerateParams[0]);for(let t=0;t<e;t++){const e={rid:n[t]};i&&(e.maxBitrate=i[t]),o&&(e.scaleResolutionDownBy=o[t]),a&&(e.maxFramerate=a[t]),r.push(e)}return r}static getDefaultStreamTransformer(){return window.RTCRtpSender&&RTCRtpSender.prototype.createEncodedStreams?new TransformStream({start(){},async transform(e,t){t.enqueue(e)},flush(){}}):void 0}static buildNotSimulcastLayers({trackSettings:e,trackType:t}){var n;e||(e={width:1920,height:1080});const r=null===(n=o.Client.getInstance().limitVCodecs)||void 0===n?void 0:n.filter(e=>"red"!==e.name&&"ulpfec"!==e.name),i=!(null==r?void 0:r.filter(e=>!("H264"===e.name&&"42e01f"===e.params["profile-level-id"])).length);let a=1;if("sharing"===t&&i){const t=e.height/720,n=e.width/1280;t>=n&&n>1&&(a=n),n<=t&&t>1&&(a=t)}const s=e.width>e.height?e.height:e.width;return[{maxBitrate:s>=1080?25e5:s>=720?15e5:5e5,maxFramerate:30,scaleResolutionDownBy:a}]}static stringifyError(e){const t=Object.getOwnPropertyNames(e);return t.length?JSON.stringify(e,t):JSON.stringify(e,["name","message"])}}u.source=null,u.floorTo=(e,t=1)=>Math.floor(e/t)*t,r([i.LogManager.d_trace(i.LogCategory.UTILS)],u,"cadScript",null),r([i.LogManager.d_trace(i.LogCategory.UTILS)],u,"freqScript",null),r([i.LogManager.d_trace(i.LogCategory.UTILS)],u,"toneScript",null),r([i.LogManager.d_trace(i.LogCategory.UTILS)],u,"playToneScript",null),r([i.LogManager.d_trace(i.LogCategory.UTILS)],u,"stopPlayback",null),r([i.LogManager.d_trace(i.LogCategory.UTILS)],u,"getServers",null),t.Utils=u},9001:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getMessenger=t.version=t.getInstance=t.CallState=t.MediaRenderDisablingReason=t.ClientState=t.LogLevel=t.LogCategory=t.AuthResultCode=t.ConnectionNode=t.QueueTypes=t.OperatorACDStatuses=t.EndpointEvents=t.Endpoint=t.CallEvents=t.Events=t.Messaging=void 0;const o=n(125),a=n(3947),s=n(6054);var l=n(6054);Object.defineProperty(t,"Messaging",{enumerable:!0,get:function(){return l.Messaging}});var c=n(141);Object.defineProperty(t,"Events",{enumerable:!0,get:function(){return c.Events}});var u=n(2282);Object.defineProperty(t,"CallEvents",{enumerable:!0,get:function(){return u.CallEvents}});var d=n(9144);Object.defineProperty(t,"Endpoint",{enumerable:!0,get:function(){return d.Endpoint}});var g=n(8597);Object.defineProperty(t,"EndpointEvents",{enumerable:!0,get:function(){return g.EndpointEvents}});var p=n(7998);Object.defineProperty(t,"OperatorACDStatuses",{enumerable:!0,get:function(){return p.OperatorACDStatuses}}),Object.defineProperty(t,"QueueTypes",{enumerable:!0,get:function(){return p.QueueTypes}}),Object.defineProperty(t,"ConnectionNode",{enumerable:!0,get:function(){return p.ConnectionNode}}),Object.defineProperty(t,"AuthResultCode",{enumerable:!0,get:function(){return p.AuthResultCode}});var f=n(1150);Object.defineProperty(t,"LogCategory",{enumerable:!0,get:function(){return f.LogCategory}}),Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return f.LogLevel}}),Object.defineProperty(t,"ClientState",{enumerable:!0,get:function(){return f.ClientState}}),i(n(7272),t);var h=n(1450);Object.defineProperty(t,"MediaRenderDisablingReason",{enumerable:!0,get:function(){return h.MediaRenderDisablingReason}});var m=n(4610);Object.defineProperty(t,"CallState",{enumerable:!0,get:function(){return m.CallState}}),t.getInstance=function(){return o.Client.getInstance()},t.version=o.Client.getInstance().version,t.getMessenger=function(){if(!a.Authenticator.get().authorized())throw new Error("NOT_AUTHORIZED");return s.default.Messenger.getInstance()}},4758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},e.hashAsciiStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},e._hex=function(t){var n,r,i,o,a=e.hexChars,s=e.hexOut;for(o=0;o<4;o+=1)for(r=8*o,n=t[o],i=0;i<8;i+=2)s[r+1+i]=a.charAt(15&n),n>>>=4,s[r+0+i]=a.charAt(15&n),n>>>=4;return s.join("")},e._md5cycle=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var n,r,i=this._buffer8,o=this._buffer32,a=this._bufferLength;for(r=0;r<t.length;r+=1){if((n=t.charCodeAt(r))<128)i[a++]=n;else if(n<2048)i[a++]=192+(n>>>6),i[a++]=63&n|128;else if(n<55296||n>56319)i[a++]=224+(n>>>12),i[a++]=n>>>6&63|128,i[a++]=63&n|128;else{if((n=1024*(n-55296)+(t.charCodeAt(++r)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");i[a++]=240+(n>>>18),i[a++]=n>>>12&63|128,i[a++]=n>>>6&63|128,i[a++]=63&n|128}a>=64&&(this._dataLength+=64,e._md5cycle(this._state,o),a-=64,o[0]=o[16])}return this._bufferLength=a,this},e.prototype.appendAsciiStr=function(t){for(var n,r=this._buffer8,i=this._buffer32,o=this._bufferLength,a=0;;){for(n=Math.min(t.length-a,64-o);n--;)r[o++]=t.charCodeAt(a++);if(o<64)break;this._dataLength+=64,e._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},e.prototype.appendByteArray=function(t){for(var n,r=this._buffer8,i=this._buffer32,o=this._bufferLength,a=0;;){for(n=Math.min(t.length-a,64-o);n--;)r[o++]=t[a++];if(o<64)break;this._dataLength+=64,e._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},e.prototype.getState=function(){var e=this,t=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[t[0],t[1],t[2],t[3]]}},e.prototype.setState=function(e){var t,n=e.buffer,r=e.state,i=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],t=0;t<n.length;t+=1)this._buffer8[t]=n.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var n,r=this._bufferLength,i=this._buffer8,o=this._buffer32,a=1+(r>>2);if(this._dataLength+=r,i[r]=128,i[r+1]=i[r+2]=i[r+3]=0,o.set(e.buffer32Identity.subarray(a),a),r>55&&(e._md5cycle(this._state,o),o.set(e.buffer32Identity)),(n=8*this._dataLength)<=4294967295)o[14]=n;else{var s=n.toString(16).match(/(.*?)(.{0,8})$/);if(null===s)return;var l=parseInt(s[2],16),c=parseInt(s[1],16)||0;o[14]=l,o[15]=c}return e._md5cycle(this._state,o),t?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}();t.Md5=n,"5d41402abc4b2a76b9719d911017c592"!==n.hashStr("hello")&&console.error("Md5 self test failed.")}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n(9001)})(),t.default=t.VoxImplant=n,e.exports&&(t=e.exports=t.default)}).call(this)},99082:function(e,t,n){var r={"./be.json":[85418,375],"./cs.json":[49821,949],"./da.json":[92649,12],"./de.json":[52777,645],"./el.json":[65975,442],"./en-US.json":[65791,753],"./es.json":[7688,790],"./fi.json":[67572,16],"./fr.json":[23430,221],"./id.json":[24244,766],"./it.json":[24684,453],"./ja.json":[8266,346],"./kk.json":[28882,831],"./nl-NL.json":[96960,560],"./nl.json":[3067,131],"./no.json":[52736,722],"./pl.json":[36715,111],"./pt-BR.json":[8439,796],"./pt.json":[72235,702],"./ro.json":[46362,24],"./ru-RU.json":[69486,441],"./sv.json":[27824,13],"./tr.json":[49213,738],"./uk.json":[69497,994],"./zh.json":[41534,579]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,19)})}i.keys=function(){return Object.keys(r)},i.id=99082,e.exports=i},10349:function(e,t,n){e.exports=n(27385)},98235:function(e,t,n){e.exports=n(81522)},19389:function(e,t,n){e.exports=n(32209)},48216:function(e,t,n){e.exports=n(14122)},51791:function(e,t,n){e.exports=n(69447)},35704:function(e,t,n){e.exports=n(81493)},54847:function(e,t,n){e.exports=n(86672)},67552:function(e,t,n){e.exports=n(60269)},3841:function(e,t,n){e.exports=n(76094)},57445:function(e,t,n){e.exports=n(73685)},88546:function(e,t,n){e.exports=n(27533)},39272:function(e,t,n){e.exports=n(74303)},92984:function(e,t,n){e.exports=n(55122)},24835:function(e,t,n){e.exports=n(10856)},25926:function(e,t,n){e.exports=n(31524)},52472:function(e,t,n){e.exports=n(86600)},48994:function(e,t,n){e.exports=n(9759)},64538:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},86765:function(e,t,n){var r=n(98235);e.exports=function(e){if(r(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},14869:function(e,t,n){var r=n(98235),i=n(64538);e.exports=function(e){if(r(e))return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7819:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},33119:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},55067:function(e,t,n){var r=n(48216),i=n(24835),o=n(64476),a=n(58612);function s(t,n,l){var c;a()?(e.exports=s=r(c=i).call(c),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=s=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(r(Function).apply(e,i));return n&&o(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports);return s.apply(null,arguments)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},92664:function(e,t,n){var r=n(57445);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(e,i.key,i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),r(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},61125:function(e,t,n){var r=n(57445);e.exports=function(e,t,n){return t in e?r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},23101:function(e,t,n){var r=n(67552),i=n(48216);function o(){var t;return e.exports=o=r?i(t=r).call(t):function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},44775:function(e,t,n){var r=n(25926),i=n(48216),o=n(88546),a=n(26848);function s(){var t;"undefined"!=typeof Reflect&&r?(e.exports=s=i(t=r).call(t),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=s=function(e,t,n){var r=a(e,t);if(r){var i=o(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports);return s.apply(this,arguments)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},55536:function(e,t,n){var r=n(92984),i=n(48216),o=n(39272);function a(t){var n;return e.exports=a=r?i(n=o).call(n):function(e){return e.__proto__||o(e)},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},84827:function(e,t,n){var r=n(3841),i=n(57445),o=n(64476);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=r(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i(e,"prototype",{writable:!1}),t&&o(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},17907:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},51617:function(e,t,n){var r=n(51791);e.exports=function(e){var t;return-1!==r(t=Function.toString.call(e)).call(t,"[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},58612:function(e,t,n){var r=n(24835);e.exports=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},53137:function(e,t,n){var r=n(52472),i=n(19389),o=n(10349);e.exports=function(e){if(void 0!==r&&null!=i(e)||null!=e["@@iterator"])return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4196:function(e,t,n){var r=n(52472),i=n(19389);e.exports=function(e,t){var n=null==e?null:void 0!==r&&i(e)||e["@@iterator"];if(null!=n){var o,a,s=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(s.push(o.value),!t||s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},56884:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},57636:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},85299:function(e,t,n){var r=n(20474).default,i=n(7819);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},64476:function(e,t,n){var r=n(92984),i=n(48216);function o(t,n){var a;return e.exports=o=r?i(a=r).call(a):function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,o(t,n)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},67375:function(e,t,n){var r=n(86765),i=n(4196),o=n(38899),a=n(56884);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},26848:function(e,t,n){var r=n(55536);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},15687:function(e,t,n){var r=n(14869),i=n(53137),o=n(38899),a=n(57636);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},20474:function(e,t,n){var r=n(52472),i=n(48994);function o(t){return e.exports=o="function"==typeof r&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},38899:function(e,t,n){var r=n(35704),i=n(10349),o=n(64538);e.exports=function(e,t){var n;if(e){if("string"==typeof e)return o(e,t);var a=r(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?i(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},51398:function(e,t,n){var r=n(54847),i=n(3841),o=n(55536),a=n(64476),s=n(51617),l=n(55067);function c(t){var n="function"==typeof r?new r:void 0;return e.exports=c=function(e){if(null===e||!s(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return l(e,arguments,o(this).constructor)}return t.prototype=i(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,c(t)}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},12316:function(e,t,n){"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))!a.call(e,l)&&l!==n&&r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(l,{ReducerType:()=>fe,SHOULD_AUTOBATCH:()=>j,TaskAbortError:()=>Ue,Tuple:()=>O,addListener:()=>at,asyncThunkCreator:()=>pe,autoBatchEnhancer:()=>V,buildCreateSlice:()=>me,clearAllListeners:()=>st,combineSlices:()=>Et,configureStore:()=>G,createAction:()=>E,createActionCreatorInvariantMiddleware:()=>D,createAsyncThunk:()=>ce,createDraftSafeSelector:()=>f,createDraftSafeSelectorCreator:()=>p,createDynamicMiddleware:()=>pt,createEntityAdapter:()=>Re,createImmutableStateInvariantMiddleware:()=>R,createListenerMiddleware:()=>ut,createNextState:()=>c.produce,createReducer:()=>z,createSelector:()=>u.createSelector,createSelectorCreator:()=>u.createSelectorCreator,createSerializableStateInvariantMiddleware:()=>N,createSlice:()=>ve,current:()=>c.current,findNonSerializableValue:()=>P,formatProdErrorMessage:()=>bt,freeze:()=>c.freeze,isActionCreator:()=>b,isAllOf:()=>K,isAnyOf:()=>q,isAsyncThunkAction:()=>ne,isDraft:()=>c.isDraft,isFluxStandardAction:()=>S,isFulfilled:()=>te,isImmutableDefault:()=>I,isPending:()=>Q,isPlain:()=>L,isRejected:()=>X,isRejectedWithValue:()=>ee,lruMemoize:()=>u.lruMemoize,miniSerializeError:()=>se,nanoid:()=>re,original:()=>c.original,prepareAutoBatched:()=>B,removeListener:()=>lt,unwrapResult:()=>ue,weakMapMemoize:()=>u.weakMapMemoize}),e.exports=(e=>s(r({},"__esModule",{value:!0}),e))(l),((e,t,n)=>{s(e,t,"default"),n&&s(n,t,"default")})(l,n(38543),e.exports);var c=n(53362),u=n(37482),d=n(53362),g=n(37482),p=(...e)=>{let t=(0,g.createSelectorCreator)(...e),n=Object.assign((...e)=>{let n=t(...e),r=(e,...t)=>n((0,d.isDraft)(e)?(0,d.current)(e):e,...t);return Object.assign(r,n),r},{withTypes:()=>n});return n},f=p(g.weakMapMemoize),h=n(38543),m=n(38543),_=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?m.compose:m.compose.apply(null,arguments)},v=(typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,n(81573)),y=n(38543),C=e=>e&&"function"==typeof e.match;function E(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(bt(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>(0,y.isAction)(t)&&t.type===e,n}function b(e){return"function"==typeof e&&"type"in e&&C(e)}function S(e){return(0,y.isAction)(e)&&Object.keys(e).every(T)}function T(e){return["type","payload","error","meta"].indexOf(e)>-1}function D(e={}){return()=>e=>t=>e(t)}var w=n(53362),O=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function A(e){return(0,w.isDraftable)(e)?(0,w.produce)(e,()=>{}):e}function M(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function I(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function R(e={}){return()=>e=>t=>e(t)}var k=n(38543);function L(e){let t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||(0,k.isPlainObject)(e)}function P(e,t="",n=L,r,i=[],o){let a;if(!n(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e||o?.has(e))return!1;let s=null!=r?r(e):Object.entries(e),l=i.length>0;for(let[e,c]of s){let s=t?t+"."+e:e;if(!l||!i.some(e=>e instanceof RegExp?e.test(s):s===e)){if(!n(c))return{keyPath:s,value:c};if("object"==typeof c&&(a=P(c,s,n,r,i,o),a))return a}}return o&&x(e)&&o.add(e),!1}function x(e){if(!Object.isFrozen(e))return!1;for(let t of Object.values(e))if("object"==typeof t&&null!==t&&!x(t))return!1;return!0}function N(e={}){return()=>e=>t=>e(t)}var F=()=>function(e){let{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{},o=new O;return t&&(function(e){return"boolean"==typeof e}(t)?o.push(v.thunk):o.push((0,v.withExtraArgument)(t.extraArgument))),o},j="RTK_autoBatch",B=()=>e=>({payload:e,meta:{[j]:!0}}),U=e=>t=>{setTimeout(t,e)},V=(e={type:"raf"})=>t=>(...n)=>{let r=t(...n),i=!0,o=!1,a=!1,s=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:U(10):"callback"===e.type?e.queueNotification:U(e.timeout),c=()=>{a=!1,o&&(o=!1,s.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){let t=r.subscribe(()=>i&&e());return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{return i=!e?.meta?.[j],o=!i,o&&(a||(a=!0,l(c))),r.dispatch(e)}finally{i=!0}}})},W=e=>function(t){let{autoBatch:n=!0}=t??{},r=new O(e);return n&&r.push(V("object"==typeof n?n:void 0)),r};function G(e){let t,n,r=F(),{reducer:i,middleware:o,devTools:a=!0,preloadedState:s,enhancers:l}=e||{};if("function"==typeof i)t=i;else{if(!(0,h.isPlainObject)(i))throw new Error(bt(1));t=(0,h.combineReducers)(i)}n="function"==typeof o?o(r):r();let c=h.compose;a&&(c=_({trace:!1,..."object"==typeof a&&a}));let u=(0,h.applyMiddleware)(...n),d=W(u),g=c(..."function"==typeof l?l(d):d());return(0,h.createStore)(t,s,g)}var H=n(53362);function $(e){let t,n={},r=[],i={addCase(e,t){let r="string"==typeof e?e:e.type;if(!r)throw new Error(bt(28));if(r in n)throw new Error(bt(29));return n[r]=t,i},addMatcher(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase(e){return t=e,i}};return e(i),[n,r,t]}function z(e,t){let n,[r,i,o]=$(t);if(function(e){return"function"==typeof e}(e))n=()=>A(e());else{let t=A(e);n=()=>t}function a(e=n(),t){let a=[r[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===a.filter(e=>!!e).length&&(a=[o]),a.reduce((e,n)=>{if(n){if((0,H.isDraft)(e)){let r=n(e,t);return void 0===r?e:r}if((0,H.isDraftable)(e))return(0,H.produce)(e,e=>n(e,t));{let r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return a.getInitialState=n,a}var Z=(e,t)=>C(e)?e.match(t):e(t);function q(...e){return t=>e.some(e=>Z(e,t))}function K(...e){return t=>e.every(e=>Z(e,t))}function Y(e,t){if(!e||!e.meta)return!1;let n="string"==typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function J(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Q(...e){return 0===e.length?e=>Y(e,["pending"]):J(e)?q(...e.map(e=>e.pending)):Q()(e[0])}function X(...e){return 0===e.length?e=>Y(e,["rejected"]):J(e)?q(...e.map(e=>e.rejected)):X()(e[0])}function ee(...e){let t=e=>e&&e.meta&&e.meta.rejectedWithValue;return 0===e.length||J(e)?K(X(...e),t):ee()(e[0])}function te(...e){return 0===e.length?e=>Y(e,["fulfilled"]):J(e)?q(...e.map(e=>e.fulfilled)):te()(e[0])}function ne(...e){return 0===e.length?e=>Y(e,["pending","fulfilled","rejected"]):J(e)?q(...e.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):ne()(e[0])}var re=(e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ie=["name","message","stack","code"],oe=class{constructor(e,t){this.payload=e,this.meta=t}_type},ae=class{constructor(e,t){this.payload=e,this.meta=t}_type},se=e=>{if("object"==typeof e&&null!==e){let t={};for(let n of ie)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},le="External signal was aborted",ce=(()=>{function e(e,t,n){let r=E(e+"/fulfilled",(e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}})),i=E(e+"/pending",(e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}})),o=E(e+"/rejected",(e,t,r,i,o)=>({payload:i,error:(n&&n.serializeError||se)(e||"Rejected"),meta:{...o||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}}));return Object.assign(function(e,{signal:a}={}){return(s,l,c)=>{let u,d,g=n?.idGenerator?n.idGenerator(e):re(),p=new AbortController;function f(e){d=e,p.abort()}a&&(a.aborted?f(le):a.addEventListener("abort",()=>f(le),{once:!0}));let h=async function(){let a;try{let o=n?.condition?.(e,{getState:l,extra:c});if(function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}(o)&&(o=await o),!1===o||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let h=new Promise((e,t)=>{u=()=>{t({name:"AbortError",message:d||"Aborted"})},p.signal.addEventListener("abort",u)});s(i(g,e,n?.getPendingMeta?.({requestId:g,arg:e},{getState:l,extra:c}))),a=await Promise.race([h,Promise.resolve(t(e,{dispatch:s,getState:l,extra:c,requestId:g,signal:p.signal,abort:f,rejectWithValue:(e,t)=>new oe(e,t),fulfillWithValue:(e,t)=>new ae(e,t)})).then(t=>{if(t instanceof oe)throw t;return t instanceof ae?r(t.payload,g,e,t.meta):r(t,g,e)})])}catch(t){a=t instanceof oe?o(null,g,e,t.payload,t.meta):o(t,g,e)}finally{u&&p.signal.removeEventListener("abort",u)}return n&&!n.dispatchConditionRejection&&o.match(a)&&a.meta.condition||s(a),a}();return Object.assign(h,{abort:f,requestId:g,arg:e,unwrap(){return h.then(ue)}})}},{pending:i,rejected:o,fulfilled:r,settled:q(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function ue(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var de,ge=Symbol.for("rtk-slice-createasyncthunk"),pe={[ge]:ce},fe=((de=fe||{}).reducer="reducer",de.reducerWithPrepare="reducerWithPrepare",de.asyncThunk="asyncThunk",de);function he(e,t){return`${e}/${t}`}function me({creators:e}={}){let t=e?.asyncThunk?.[ge];return function(e){let{name:n,reducerPath:r=n}=e;if(!n)throw new Error(bt(11));let i=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:e}}()):e.reducers)||{},o=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){let n="string"==typeof e?e:e.type;if(!n)throw new Error(bt(12));if(n in a.sliceCaseReducersByType)throw new Error(bt(13));return a.sliceCaseReducersByType[n]=t,s},addMatcher(e,t){return a.sliceMatchers.push({matcher:e,reducer:t}),s},exposeAction(e,t){return a.actionCreators[e]=t,s},exposeCaseReducer(e,t){return a.sliceCaseReducersByName[e]=t,s}};function l(){let[t={},n=[],r]="function"==typeof e.extraReducers?$(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return z(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}o.forEach(r=>{let o=i[r],a={reducerName:r,type:he(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},r,i){let o,a;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(bt(17));o=r.reducer,a=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?E(e,a):E(e))}(a,o,s):function({type:e,reducerName:t},n,r,i){if(!i)throw new Error(bt(18));let{payloadCreator:o,fulfilled:a,pending:s,rejected:l,settled:c,options:u}=n,d=i(e,o,u);r.exposeAction(t,d),a&&r.addCase(d.fulfilled,a),s&&r.addCase(d.pending,s),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(t,{fulfilled:a||ye,pending:s||ye,rejected:l||ye,settled:c||ye})}(a,o,s,t)});let c,u=e=>e,d=new Map;function g(e,t){return c||(c=l()),c(e,t)}function p(){return c||(c=l()),c.getInitialState()}function f(t,n=!1){function r(e){let r=e[t];return typeof r>"u"&&n&&(r=p()),r}function i(t=u){let r=M(d,n,()=>new WeakMap);return M(r,t,()=>{let r={};for(let[i,o]of Object.entries(e.selectors??{}))r[i]=_e(o,t,p,n);return r})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}let h={name:n,reducer:g,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:p,...f(r),injectInto(e,{reducerPath:t,...n}={}){let i=t??r;return e.inject({reducerPath:i,reducer:g},n),{...h,...f(i,!0)}}};return h}}function _e(e,t,n,r){function i(i,...o){let a=t(i);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var ve=me();function ye(){}var Ce=n(53362),Ee=Ce.isDraft;function be(e){let t=Se((t,n)=>e(n));return function(e){return t(e,void 0)}}function Se(e){return function(t,n){let r=t=>{!function(e){return S(e)}(n)?e(n,t):e(n.payload,t)};return Ee(t)?(r(t),t):(0,Ce.produce)(t,r)}}var Te=n(53362);function De(e,t){return t(e)}function we(e){return Array.isArray(e)||(e=Object.values(e)),e}function Oe(e){return(0,Te.isDraft)(e)?(0,Te.current)(e):e}function Ae(e,t,n){e=we(e);let r=Oe(n.ids),i=new Set(r),o=[],a=[];for(let n of e){let e=De(n,t);i.has(e)?a.push({id:e,changes:n}):o.push(n)}return[o,a,r]}function Me(e){function t(t,n){let r=De(t,e);r in n.entities||(n.ids.push(r),n.entities[r]=t)}function n(e,n){e=we(e);for(let r of e)t(r,n)}function r(t,n){let r=De(t,e);r in n.entities||n.ids.push(r),n.entities[r]=t}function i(e,t){let n=!1;e.forEach(e=>{e in t.entities&&(delete t.entities[e],n=!0)}),n&&(t.ids=t.ids.filter(e=>e in t.entities))}function o(t,n){let r={},i={};t.forEach(e=>{e.id in n.entities&&(i[e.id]={id:e.id,changes:{...i[e.id]?.changes,...e.changes}})}),(t=Object.values(i)).length>0&&t.filter(t=>function(t,n,r){let i=r.entities[n.id];if(void 0===i)return!1;let o=Object.assign({},i,n.changes),a=De(o,e),s=a!==n.id;return s&&(t[n.id]=a,delete r.entities[n.id]),r.entities[a]=o,s}(r,t,n)).length>0&&(n.ids=Object.values(n.entities).map(t=>De(t,e)))}function a(t,r){let[i,a]=Ae(t,e,r);o(a,r),n(i,r)}return{removeAll:be(function(e){Object.assign(e,{ids:[],entities:{}})}),addOne:Se(t),addMany:Se(n),setOne:Se(r),setMany:Se(function(e,t){e=we(e);for(let n of e)r(n,t)}),setAll:Se(function(e,t){e=we(e),t.ids=[],t.entities={},n(e,t)}),updateOne:Se(function(e,t){return o([e],t)}),updateMany:Se(o),upsertOne:Se(function(e,t){return a([e],t)}),upsertMany:Se(a),removeOne:Se(function(e,t){return i([e],t)}),removeMany:Se(i)}}function Ie(e,t,n){let r=function(e,t,n){let r=0,i=e.length;for(;r<i;){let o=r+i>>>1;n(t,e[o])>=0?r=o+1:i=o}return r}(e,t,n);return e.splice(r,0,t),e}function Re(e={}){let{selectId:t,sortComparer:n}={sortComparer:!1,selectId:e=>e.id,...e},r=n?function(e,t){let{removeOne:n,removeMany:r,removeAll:i}=Me(e);function o(t,n,r){t=we(t);let i=new Set(r??Oe(n.ids)),o=t.filter(t=>!i.has(De(t,e)));0!==o.length&&c(n,o)}function a(t,n){if(0!==(t=we(t)).length){for(let r of t)delete n.entities[e(r)];c(n,t)}}function s(t,n){let r=!1,i=!1;for(let o of t){let t=n.entities[o.id];if(!t)continue;r=!0,Object.assign(t,o.changes);let a=e(t);if(o.id!==a){i=!0,delete n.entities[o.id];let e=n.ids.indexOf(o.id);n.ids[e]=a,n.entities[a]=t}}r&&c(n,[],r,i)}function l(t,n){let[r,i,a]=Ae(t,e,n);i.length&&s(i,n),r.length&&o(r,n,a)}let c=(n,r,i,o)=>{let a=Oe(n.entities),s=Oe(n.ids),l=n.entities,c=s;o&&(c=new Set(s));let u=[];for(let e of c){let t=a[e];t&&u.push(t)}let d=0===u.length;for(let n of r)l[e(n)]=n,d||Ie(u,n,t);d?u=r.slice().sort(t):i&&u.sort(t);let g=u.map(e);(function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})(s,g)||(n.ids=g)};return{removeOne:n,removeMany:r,removeAll:i,addOne:Se(function(e,t){return o([e],t)}),updateOne:Se(function(e,t){return s([e],t)}),upsertOne:Se(function(e,t){return l([e],t)}),setOne:Se(function(e,t){return a([e],t)}),setMany:Se(a),setAll:Se(function(e,t){e=we(e),t.entities={},t.ids=[],o(e,t,[])}),addMany:Se(o),updateMany:Se(s),upsertMany:Se(l)}}(t,n):Me(t),i=function(e){return{getInitialState:function(t={},n){let r=Object.assign({ids:[],entities:{}},t);return n?e.setAll(r,n):r}}}(r),o={getSelectors:function(e,t={}){let{createSelector:n=f}=t,r=e=>e.ids,i=e=>e.entities,o=n(r,i,(e,t)=>e.map(e=>t[e])),a=(e,t)=>t,s=(e,t)=>e[t],l=n(r,e=>e.length);if(!e)return{selectIds:r,selectEntities:i,selectAll:o,selectTotal:l,selectById:n(i,a,s)};let c=n(e,i);return{selectIds:n(e,r),selectEntities:c,selectAll:n(e,o),selectTotal:n(e,l),selectById:n(c,a,s)}}};return{selectId:t,sortComparer:n,...i,...o,...r}}var ke=n(38543),Le="listener",Pe="completed",xe="cancelled",Ne=`task-${xe}`,Fe=`task-${Pe}`,je=`${Le}-${xe}`,Be=`${Le}-${Pe}`,Ue=class{constructor(e){this.code=e,this.message=`task ${xe} (reason: ${e})`}name="TaskAbortError";message},Ve=(e,t)=>{if("function"!=typeof e)throw new TypeError(bt(32))},We=()=>{},Ge=(e,t=We)=>(e.catch(t),e),He=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),$e=(e,t)=>{let n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ze=e=>{if(e.aborted){let{reason:t}=e;throw new Ue(t)}};function Ze(e,t){let n=We;return new Promise((r,i)=>{let o=()=>i(new Ue(e.reason));e.aborted?o():(n=He(e,o),t.finally(()=>n()).then(r,i))}).finally(()=>{n=We})}var qe=e=>t=>Ge(Ze(e,t).then(t=>(ze(e),t))),Ke=e=>{let t=qe(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:Ye}=Object,Je={},Qe="listenerMiddleware",Xe=(e,t)=>(n,r)=>{Ve(n);let i=new AbortController;(t=>{He(e,()=>$e(t,e.reason))})(i);let o=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(e){return{status:e instanceof Ue?"cancelled":"rejected",error:e}}finally{t?.()}})(async()=>{ze(e),ze(i.signal);let t=await n({pause:qe(i.signal),delay:Ke(i.signal),signal:i.signal});return ze(i.signal),t},()=>$e(i,Fe));return r?.autoJoin&&t.push(o.catch(We)),{result:qe(e)(o),cancel(){$e(i,Ne)}}},et=(e,t)=>(n,r)=>Ge((async(n,r)=>{ze(t);let i=()=>{},o=[new Promise((t,r)=>{let o=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});i=()=>{o(),r()}})];null!=r&&o.push(new Promise(e=>setTimeout(e,r,null)));try{let e=await Ze(t,Promise.race(o));return ze(t),e}finally{i()}})(n,r)),tt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=E(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(bt(21));return Ve(o),{predicate:i,type:t,effect:o}},nt=Ye(e=>{let{type:t,predicate:n,effect:r}=tt(e);return{id:re(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(bt(22))}}},{withTypes:()=>nt}),rt=(e,t)=>{let{type:n,effect:r,predicate:i}=tt(t);return Array.from(e.values()).find(e=>("string"==typeof n?e.type===n:e.predicate===i)&&e.effect===r)},it=e=>{e.pending.forEach(e=>{$e(e,je)})},ot=(e,t,n)=>{try{e(t,n)}catch(e){setTimeout(()=>{throw e},0)}},at=Ye(E(`${Qe}/add`),{withTypes:()=>at}),st=E(`${Qe}/removeAll`),lt=Ye(E(`${Qe}/remove`),{withTypes:()=>lt}),ct=(...e)=>{console.error(`${Qe}/error`,...e)},ut=(e={})=>{let t=new Map,{extra:n,onError:r=ct}=e;Ve(r);let i=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),t?.cancelActive&&it(e)}))(rt(t,e)??nt(e));Ye(i,{withTypes:()=>i});let o=e=>{let n=rt(t,e);return n&&(n.unsubscribe(),e.cancelActive&&it(n)),!!n};Ye(o,{withTypes:()=>o});let a=async(e,o,a,s)=>{let l=new AbortController,c=et(i,l.signal),u=[];try{e.pending.add(l),await Promise.resolve(e.effect(o,Ye({},a,{getOriginalState:s,condition:(e,t)=>c(e,t).then(Boolean),take:c,delay:Ke(l.signal),pause:qe(l.signal),extra:n,signal:l.signal,fork:Xe(l.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==l&&($e(e,je),n.delete(e))})},cancel:()=>{$e(l,je),e.pending.delete(l)},throwIfCancelled:()=>{ze(l.signal)}})))}catch(e){e instanceof Ue||ot(r,e,{raisedBy:"effect"})}finally{await Promise.all(u),$e(l,Be),e.pending.delete(l)}},s=(e=>()=>{e.forEach(it),e.clear()})(t);return{middleware:e=>n=>l=>{if(!(0,ke.isAction)(l))return n(l);if(at.match(l))return i(l.payload);if(st.match(l))return void s();if(lt.match(l))return o(l.payload);let c,u=e.getState(),d=()=>{if(u===Je)throw new Error(bt(23));return u};try{if(c=n(l),t.size>0){let n=e.getState(),i=Array.from(t.values());for(let t of i){let i=!1;try{i=t.predicate(l,n,u)}catch(e){i=!1,ot(r,e,{raisedBy:"predicate"})}i&&a(t,l,e,d)}}}finally{u=Je}return c},startListening:i,stopListening:o,clearListeners:s}},dt=n(38543),gt=e=>({middleware:e,applied:new Map}),pt=()=>{let e=re(),t=new Map,n=Object.assign(E("dynamicMiddleware/add",(...t)=>({payload:t,meta:{instanceId:e}})),{withTypes:()=>n}),r=Object.assign(function(...e){e.forEach(e=>{M(t,e,gt)})},{withTypes:()=>r}),i=K(n,(e=>t=>t?.meta?.instanceId===e)(e));return{middleware:e=>n=>o=>i(o)?(r(...o.payload),e.dispatch):(e=>{let n=Array.from(t.values()).map(t=>M(t.applied,e,t.middleware));return(0,dt.compose)(...n)})(e)(n)(o),addMiddleware:r,withMiddleware:n,instanceId:e}},ft=n(38543),ht=e=>e.flatMap(e=>(e=>"reducerPath"in e&&"string"==typeof e.reducerPath)(e)?[[e.reducerPath,e.reducer]]:Object.entries(e)),mt=Symbol.for("rtk-state-proxy-original"),_t=new WeakMap,vt=(e,t)=>M(_t,e,()=>new Proxy(e,{get:(e,n,r)=>{if(n===mt)return e;let i=Reflect.get(e,n,r);if(typeof i>"u"){let e=t[n.toString()];if(e){let t=e(void 0,{type:re()});if(typeof t>"u")throw new Error(bt(24));return t}}return i}})),yt=e=>{if(!(e=>!!e&&!!e[mt])(e))throw new Error(bt(25));return e[mt]},Ct=(e={})=>e;function Et(...e){let t=Object.fromEntries(ht(e)),n=()=>Object.keys(t).length?(0,ft.combineReducers)(t):Ct,r=n();function i(e,t){return r(e,t)}i.withLazyLoadedSlices=()=>i;let o=Object.assign(function(e,n){return function(r,...i){return e(vt(n?n(r,...i):r,t),...i)}},{original:yt});return Object.assign(i,{inject:(e,o={})=>{let{reducerPath:a,reducer:s}=e,l=t[a];return!o.overrideExisting&&l&&l!==s||(t[a]=s,r=n()),i},selector:o})}function bt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}},1091:function(e,t,n){"use strict";var r=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))!l.call(e,s)&&s!==n&&i(e,s,{get:()=>t[s],enumerable:!(r=o(t,s))||r.enumerable});return e},u={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(u,{Provider:()=>se,ReactReduxContext:()=>ne,batch:()=>ve,connect:()=>ae,createDispatchHook:()=>ge,createSelectorHook:()=>me,createStoreHook:()=>ue,shallowEqual:()=>V,useDispatch:()=>pe,useSelector:()=>_e,useStore:()=>de}),e.exports=(e=>c(i({},"__esModule",{value:!0}),e))(u);var d=((e,t,n)=>(n=null!=e?r(s(e)):{},c(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)))(n(98661)),g=d.version.startsWith("19"),p=Symbol.for(g?"react.transitional.element":"react.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),y=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),D=C,w=S;function O(e){return function(e){if("object"==typeof e&&null!==e){let{$$typeof:t}=e;switch(t){case p:switch(e=e.type){case h:case _:case m:case E:case b:return e;default:switch(e=e&&e.$$typeof){case y:case C:case T:case S:case v:return e;default:return t}}case f:return t}}}(e)===S}function A(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:a}){let s,l,c,u,d,g=!1;function p(g,p){let f=!o(p,l),h=!i(g,s,p,l);return s=g,l=p,f&&h?(c=e(s,l),t.dependsOnOwnProps&&(u=t(r,l)),d=n(c,u,l),d):f?(e.dependsOnOwnProps&&(c=e(s,l)),t.dependsOnOwnProps&&(u=t(r,l)),d=n(c,u,l),d):h?function(){let t=e(s,l),r=!a(t,c);return c=t,r&&(d=n(c,u,l)),d}():d}return function(i,o){return g?p(i,o):function(i,o){return s=i,l=o,c=e(s,l),u=t(r,l),d=n(c,u,l),g=!0,d}(i,o)}}function M(e){return function(t){let n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function I(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function R(e,t){return function(t,{displayName:n}){let r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=I(e);let i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=I(i),i=r(t,n)),i},r}}function k(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function L(e,t,n){return{...n,...e,...t}}function P(e){e()}var x={notify(){},get:()=>[]};function N(e,t){let n,r=x,i=0,o=!1;function a(){c.onStateChange&&c.onStateChange()}function s(){i++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){P(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0,i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||null===e||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=x)}let c={addNestedSub:function(e){s();let t=r.subscribe(e),n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return c}var F=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j=typeof navigator<"u"&&"ReactNative"===navigator.product,B=F||j?d.useLayoutEffect:d.useEffect;function U(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function V(e,t){if(U(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!U(e[n[r]],t[n[r]]))return!1;return!0}var W={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},G={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},H={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$={[D]:{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},[w]:H};function z(e){return O(e)?H:$[e.$$typeof]||W}var Z=Object.defineProperty,q=Object.getOwnPropertyNames,K=Object.getOwnPropertySymbols,Y=Object.getOwnPropertyDescriptor,J=Object.getPrototypeOf,Q=Object.prototype;function X(e,t){if("string"!=typeof t){if(Q){let n=J(t);n&&n!==Q&&X(e,n)}let n=q(t);K&&(n=n.concat(K(t)));let r=z(e),i=z(t);for(let o=0;o<n.length;++o){let a=n[o];if(!(G[a]||i&&i[a]||r&&r[a])){let n=Y(t,a);try{Z(e,a,n)}catch{}}}}return e}var ee=Symbol.for("react-redux-context"),te=typeof globalThis<"u"?globalThis:{};var ne=function(){if(!d.createContext)return{};let e=te[ee]??=new Map,t=e.get(d.createContext);return t||(t=d.createContext(null),e.set(d.createContext,t)),t}(),re=[null,null];function ie(e,t,n,r,i,o){e.current=r,n.current=!1,i.current&&(i.current=null,o())}function oe(e,t){return e===t}var ae=function(e,t,n,{pure:r,areStatesEqual:i=oe,areOwnPropsEqual:o=V,areStatePropsEqual:a=V,areMergedPropsEqual:s=V,forwardRef:l=!1,context:c=ne}={}){let u=c,g=function(e){return e?"function"==typeof e?R(e):k(e,"mapStateToProps"):M(()=>({}))}(e),p=function(e){return e&&"object"==typeof e?M(t=>function(e,t){let n={};for(let r in e){let i=e[r];"function"==typeof i&&(n[r]=(...e)=>t(i(...e)))}return n}(e,t)):e?"function"==typeof e?R(e):k(e,"mapDispatchToProps"):M(e=>({dispatch:e}))}(t),f=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:n,areMergedPropsEqual:r}){let i,o=!1;return function(t,n,a){let s=e(t,n,a);return o?r(s,i)||(i=s):(o=!0,i=s),i}}}(e):k(e,"mergeProps"):()=>L}(n),h=!!e;return e=>{let t=e.displayName||e.name||"Component",n=`Connect(${t})`,r={shouldHandleStateChanges:h,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:g,initMapDispatchToProps:p,initMergeProps:f,areStatesEqual:i,areStatePropsEqual:a,areOwnPropsEqual:o,areMergedPropsEqual:s};function c(t){let[n,i,o]=d.useMemo(()=>{let{reactReduxForwardedRef:e,...n}=t;return[t.context,e,n]},[t]),a=d.useMemo(()=>u,[n,u]),s=d.useContext(a),l=!!t.store&&!!t.store.getState&&!!t.store.dispatch,c=!!s&&!!s.store,g=l?t.store:s.store,p=c?s.getServerState:g.getState,f=d.useMemo(()=>function(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){return A(t(e,i),n(e,i),r(e,i),e,i)}(g.dispatch,r),[g]),[m,_]=d.useMemo(()=>{if(!h)return re;let e=N(g,l?void 0:s.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[g,l,s]),v=d.useMemo(()=>l?s:{...s,subscription:m},[l,s,m]),y=d.useRef(void 0),C=d.useRef(o),E=d.useRef(void 0),b=d.useRef(!1),S=d.useRef(!1),T=d.useRef(void 0);B(()=>(S.current=!0,()=>{S.current=!1}),[]);let D,w=d.useMemo(()=>()=>E.current&&o===C.current?E.current:f(g.getState(),o),[g,o]),O=d.useMemo(()=>e=>m?function(e,t,n,r,i,o,a,s,l,c,u){if(!e)return()=>{};let d=!1,g=null,p=()=>{if(d||!s.current)return;let e,n,p=t.getState();try{e=r(p,i.current)}catch(e){n=e,g=e}n||(g=null),e===o.current?a.current||c():(o.current=e,l.current=e,a.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,g)throw g}}(h,g,m,f,C,y,b,S,E,_,e):()=>{},[m]);!function(e,t,n){B(()=>e(...t),n)}(ie,[C,y,b,o,E,_]);try{D=d.useSyncExternalStore(O,w,p?()=>f(p(),o):w)}catch(e){throw T.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${T.current.stack}\n\n`),e}B(()=>{T.current=void 0,E.current=void 0,y.current=D});let M=d.useMemo(()=>d.createElement(e,{...D,ref:i}),[i,e,D]);return d.useMemo(()=>h?d.createElement(a.Provider,{value:v},M):M,[a,M,v])}let m=d.memo(c);if(m.WrappedComponent=e,m.displayName=c.displayName=n,l){let t=d.forwardRef(function(e,t){return d.createElement(m,{...e,reactReduxForwardedRef:t})});return t.displayName=n,t.WrappedComponent=e,X(t,e)}return X(m,e)}};var se=function(e){let{children:t,context:n,serverState:r,store:i}=e,o=d.useMemo(()=>{let e=N(i);return{store:i,subscription:e,getServerState:r?()=>r:void 0}},[i,r]),a=d.useMemo(()=>i.getState(),[i]);return B(()=>{let{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,a]),d.createElement((n||ne).Provider,{value:o},t)};function le(e=ne){return function(){return d.useContext(e)}}var ce=le();function ue(e=ne){let t=e===ne?ce:le(e),n=()=>{let{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var de=ue();function ge(e=ne){let t=e===ne?de:ue(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var pe=ge(),fe=n(31103),he=(e,t)=>e===t;function me(e=ne){let t=e===ne?ce:le(e),n=(e,n={})=>{let{equalityFn:r=he}="function"==typeof n?{equalityFn:n}:n,i=t(),{store:o,subscription:a,getServerState:s}=i,l=(d.useRef(!0),d.useCallback({[e.name](t){return e(t)}}[e.name],[e])),c=(0,fe.useSyncExternalStoreWithSelector)(a.addNestedSub,o.getState,s||o.getState,l,r);return d.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var _e=me(),ve=P},81573:function(e){"use strict";var t,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,a={};function s(e){return({dispatch:t,getState:n})=>r=>i=>"function"==typeof i?i(t,n,e):r(i)}((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(a,{thunk:()=>l,withExtraArgument:()=>c}),e.exports=(t=a,((e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))o.call(e,l)||l===a||n(e,l,{get:()=>t[l],enumerable:!(s=r(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),t));var l=s(),c=s},38543:function(e){"use strict";var t,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,a={};function s(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(a,{__DO_NOT_USE__ActionTypes:()=>u,applyMiddleware:()=>v,bindActionCreators:()=>m,combineReducers:()=>f,compose:()=>_,createStore:()=>g,isAction:()=>y,isPlainObject:()=>d,legacy_createStore:()=>p}),e.exports=(t=a,((e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))o.call(e,l)||l===a||n(e,l,{get:()=>t[l],enumerable:!(s=r(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),t));var l=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),c=()=>Math.random().toString(36).substring(7).split("").join("."),u={INIT:`@@redux/INIT${c()}`,REPLACE:`@@redux/REPLACE${c()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${c()}`};function d(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function g(e,t,n){if("function"!=typeof e)throw new Error(s(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(g)(e,t)}let r=e,i=t,o=new Map,a=o,c=0,p=!1;function f(){a===o&&(a=new Map,o.forEach((e,t)=>{a.set(t,e)}))}function h(){if(p)throw new Error(s(3));return i}function m(e){if("function"!=typeof e)throw new Error(s(4));if(p)throw new Error(s(5));let t=!0;f();const n=c++;return a.set(n,e),function(){if(t){if(p)throw new Error(s(6));t=!1,f(),a.delete(n),o=null}}}function _(e){if(!d(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if("string"!=typeof e.type)throw new Error(s(17));if(p)throw new Error(s(9));try{p=!0,i=r(i,e)}finally{p=!1}return(o=a).forEach(e=>{e()}),e}_({type:u.INIT});return{dispatch:_,subscribe:m,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error(s(10));r=e,_({type:u.REPLACE})},[l]:function(){const e=m;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(s(11));function n(){const e=t;e.next&&e.next(h())}n();return{unsubscribe:e(n)}},[l](){return this}}}}}function p(e,t,n){return g(e,t,n)}function f(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:u.INIT}))throw new Error(s(12));if(void 0===n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))})}(n)}catch(e){i=e}return function(e={},t){if(i)throw i;let o=!1;const a={};for(let i=0;i<r.length;i++){const l=r[i],c=n[l],u=e[l],d=c(u,t);if(void 0===d){t&&t.type;throw new Error(s(14))}a[l]=d,o=o||d!==u}return o=o||r.length!==Object.keys(e).length,o?a:e}}function h(e,t){return function(...n){return t(e.apply(this,n))}}function m(e,t){if("function"==typeof e)return h(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));const n={};for(const r in e){const i=e[r];"function"==typeof i&&(n[r]=h(i,t))}return n}function _(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function v(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(s(15))};const a={getState:i.getState,dispatch:(e,...t)=>o(e,...t)},l=e.map(e=>e(a));return o=_(...l)(i.dispatch),{...i,dispatch:o}}}function y(e){return d(e)&&"type"in e&&"string"==typeof e.type}},37482:function(e){"use strict";var t,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(a,{createSelector:()=>G,createSelectorCreator:()=>W,createStructuredSelector:()=>H,lruMemoize:()=>x,referenceEqualityCheck:()=>L,setGlobalDevModeChecks:()=>l,unstable_autotrackMemoize:()=>N,weakMapMemoize:()=>V}),e.exports=(t=a,((e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))o.call(e,l)||l===a||n(e,l,{get:()=>t[l],enumerable:!(s=r(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),t));var s={inputStabilityCheck:"once",identityFunctionCheck:"once"},l=e=>{Object.assign(s,e)},c=Symbol("NOT_FOUND");function u(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var d=e=>Array.isArray(e)?e:[e];function g(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const n=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var p=0,f=null,h=class{revision=p;_value;_lastValue;_isEqual=m;constructor(e,t=m){this._value=this._lastValue=e,this._isEqual=t}get value(){return f?.add(this),this._value}set value(e){this.value!==e&&(this._value=e,this.revision=++p)}};function m(e,t){return e===t}var _=class{_cachedValue;_cachedRevision=-1;_deps=[];hits=0;fn;constructor(e){this.fn=e}clear(){this._cachedValue=void 0,this._cachedRevision=-1,this._deps=[],this.hits=0}get value(){if(this.revision>this._cachedRevision){const{fn:e}=this,t=new Set,n=f;f=t,this._cachedValue=e(),f=n,this.hits++,this._deps=Array.from(t),this._cachedRevision=this.revision}return f?.add(this),this._cachedValue}get revision(){return Math.max(...this._deps.map(e=>e.revision),0)}};function v(e){return e instanceof h||console.warn("Not a valid cell! ",e),e.value}var y=(e,t)=>!1;function C(){return function(e,t=m){return new h(e,t)}(null,y)}function E(e,t){!function(e,t){if(!(e instanceof h))throw new TypeError("setValue must be passed a tracked store created with `createStorage`.");e.value=e._lastValue=t}(e,t)}var b=e=>{let t=e.collectionTag;null===t&&(t=e.collectionTag=C()),v(t)},S=e=>{const t=e.collectionTag;null!==t&&E(t,null)},T=(Symbol(),0),D=Object.getPrototypeOf({}),w=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy(this,O);tag=C();tags={};children={};collectionTag=null;id=T++},O={get(e,t){return function(){const{value:n}=e,r=Reflect.get(n,t);if("symbol"==typeof t)return r;if(t in D)return r;if("object"==typeof r&&null!==r){let n=e.children[t];return void 0===n&&(n=e.children[t]=I(r)),n.tag&&v(n.tag),n.proxy}{let n=e.tags[t];return void 0===n&&(n=e.tags[t]=C(),n.value=r),v(n),r}}()},ownKeys(e){return b(e),Reflect.ownKeys(e.value)},getOwnPropertyDescriptor(e,t){return Reflect.getOwnPropertyDescriptor(e.value,t)},has(e,t){return Reflect.has(e.value,t)}},A=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy([this],M);tag=C();tags={};children={};collectionTag=null;id=T++},M={get([e],t){return"length"===t&&b(e),O.get(e,t)},ownKeys([e]){return O.ownKeys(e)},getOwnPropertyDescriptor([e],t){return O.getOwnPropertyDescriptor(e,t)},has([e],t){return O.has(e,t)}};function I(e){return Array.isArray(e)?new A(e):new w(e)}function R(e,t){const{value:n,tags:r,children:i}=e;if(e.value=t,Array.isArray(n)&&Array.isArray(t)&&n.length!==t.length)S(e);else if(n!==t){let r=0,i=0,o=!1;for(const e in n)r++;for(const e in t)if(i++,!(e in n)){o=!0;break}(o||r!==i)&&S(e)}for(const i in r){const o=n[i],a=t[i];o!==a&&(S(e),E(r[i],a)),"object"==typeof a&&null!==a&&delete r[i]}for(const e in i){const n=i[e],r=t[e];n.value!==r&&("object"==typeof r&&null!==r?R(n,r):(k(n),delete i[e]))}}function k(e){e.tag&&E(e.tag,null),S(e);for(const t in e.tags)E(e.tags[t],null);for(const t in e.children)k(e.children[t])}var L=(e,t)=>e===t;function P(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;const{length:r}=t;for(let i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}function x(e,t){const n="object"==typeof t?t:{equalityCheck:t},{equalityCheck:r=L,maxSize:i=1,resultEqualityCheck:o}=n,a=P(r);let s=0;const l=i<=1?function(e){let t;return{get(n){return t&&e(t.key,n)?t.value:c},put(e,n){t={key:e,value:n}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}(a):function(e,t){let n=[];function r(e){const r=n.findIndex(n=>t(e,n.key));if(r>-1){const e=n[r];return r>0&&(n.splice(r,1),n.unshift(e)),e.value}return c}return{get:r,put:function(t,i){r(t)===c&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(i,a);function u(){let t=l.get(arguments);if(t===c){if(t=e.apply(null,arguments),s++,o){const e=l.getEntries().find(e=>o(e.value,t));e&&(t=e.value,0!==s&&s--)}l.put(arguments,t)}return t}return u.clearCache=()=>{l.clear(),u.resetResultsCount()},u.resultsCount=()=>s,u.resetResultsCount=()=>{s=0},u}function N(e){const t=I([]);let n=null;const r=P(L),i=(u(o=()=>e.apply(null,t.proxy),"the first parameter to `createCache` must be a function"),new _(o));var o;function a(){return r(n,arguments)||(R(t,arguments),n=arguments),i.value}return a.clearCache=()=>i.clear(),a}var F="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},j=0,B=1;function U(){return{s:j,v:void 0,o:null,p:null}}function V(e,t={}){let n=U();const{resultEqualityCheck:r}=t;let i,o=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=U(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=U(),e.set(n,t)):t=r}}const s=t;let l;if(t.s===B)l=t.v;else if(l=e.apply(null,arguments),o++,r){const e=i?.deref?.()??i;null!=e&&r(e,l)&&(l=e,0!==o&&o--);i="object"==typeof l&&null!==l||"function"==typeof l?new F(l):l}return s.s=B,s.v=l,l}return a.clearCache=()=>{n=U(),a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function W(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,i=0,o={},a=e.pop();"object"==typeof a&&(o=a,a=e.pop()),u(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const s={...n,...o},{memoize:l,memoizeOptions:c=[],argsMemoize:p=V,argsMemoizeOptions:f=[],devModeChecks:h={}}=s,m=d(c),_=d(f),v=g(e),y=l(function(){return r++,a.apply(null,arguments)},...m);const C=p(function(){i++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(v,arguments);return t=y.apply(null,e),t},..._);return Object.assign(C,{resultFunc:a,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:l,argsMemoize:p})};return Object.assign(r,{withTypes:()=>r}),r}var G=W(V),H=Object.assign((e,t=G)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map(t=>e[t]),(...e)=>e.reduce((e,t,r)=>(e[n[r]]=t,e),{}))},{withTypes:()=>H})},2305:function(e,t,n){"use strict";n.d(t,{X:function(){return l}});var r=n(87536),i=function(e,t,n){if(e&&"reportValidity"in e){var i=(0,r.U2)(n,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},o=function(e,t){var n=function(n){var r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?i(r.ref,n,e):r.refs&&r.refs.forEach(function(t){return i(t,n,e)})};for(var r in t.fields)n(r)},a=function(e,t){t.shouldUseNativeValidation&&o(e,t);var n={};for(var i in e){var a=(0,r.U2)(t.fields,i),l=Object.assign(e[i]||{},{ref:a&&a.ref});if(s(t.names||Object.keys(e),i)){var c=Object.assign({},(0,r.U2)(n,i));(0,r.t8)(c,"root",l),(0,r.t8)(n,i,c)}else(0,r.t8)(n,i,l)}return n},s=function(e,t){return e.some(function(e){return e.startsWith(t+".")})};function l(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(i,s,l){try{return Promise.resolve(function(r,a){try{var c=(t.context,Promise.resolve(e["sync"===n.mode?"validateSync":"validate"](i,Object.assign({abortEarly:!1},t,{context:s}))).then(function(e){return l.shouldUseNativeValidation&&o({},l),{values:n.raw?i:e,errors:{}}}))}catch(e){return a(e)}return c&&c.then?c.then(void 0,a):c}(0,function(e){if(!e.inner)throw e;return{values:{},errors:a((t=e,n=!l.shouldUseNativeValidation&&"all"===l.criteriaMode,(t.inner||[]).reduce(function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var i=e[t.path].types,o=i&&i[t.type];e[t.path]=(0,r.KN)(t.path,n,e,t.type,o?[].concat(o,t.message):t.message)}return e},{})),l)};var t,n}))}catch(e){return Promise.reject(e)}}}},8327:function(e,t,n){"use strict";n.d(t,{oM:function(){return f}});var r=n(52628),i=n(19119),o=n(65849);i.kO,"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function a(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(_(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>(0,o.LG)(t)&&t.type===e,n}Symbol.species;function s(e){return(0,r.o$)(e)?(0,r.Uy)(e,()=>{}):e}function l(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function c(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(_(28));if(r in t)throw new Error(_(29));return t[r]=n,i},addMatcher(e,t){return n.push({matcher:e,reducer:t}),i},addDefaultCase(e){return r=e,i}};return e(i),[t,n,r]}var u=Symbol.for("rtk-slice-createasyncthunk");function d(e,t){return`${e}/${t}`}function g({creators:e}={}){const t=e?.asyncThunk?.[u];return function(e){const{name:n,reducerPath:i=n}=e;if(!n)throw new Error(_(11));const o=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:e}}()):e.reducers)||{},u=Object.keys(o),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(_(12));if(n in g.sliceCaseReducersByType)throw new Error(_(13));return g.sliceCaseReducersByType[n]=t,f},addMatcher(e,t){return g.sliceMatchers.push({matcher:e,reducer:t}),f},exposeAction(e,t){return g.actionCreators[e]=t,f},exposeCaseReducer(e,t){return g.sliceCaseReducersByName[e]=t,f}};function m(){const[t={},n=[],i]="function"==typeof e.extraReducers?c(e.extraReducers):[e.extraReducers],o={...t,...g.sliceCaseReducersByType};return function(e,t){let n,[i,o,a]=c(t);if("function"==typeof e)n=()=>s(e());else{const t=s(e);n=()=>t}function l(e=n(),t){let s=[i[t.type],...o.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===s.filter(e=>!!e).length&&(s=[a]),s.reduce((e,n)=>{if(n){if((0,r.mv)(e)){const r=n(e,t);return void 0===r?e:r}if((0,r.o$)(e))return(0,r.Uy)(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return l.getInitialState=n,l}(e.initialState,e=>{for(let t in o)e.addCase(t,o[t]);for(let t of g.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);i&&e.addDefaultCase(i)})}u.forEach(r=>{const i=o[r],s={reducerName:r,type:d(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function({type:e,reducerName:t,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(_(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?a(e,s):a(e))}(s,i,f):function({type:e,reducerName:t},n,r,i){if(!i)throw new Error(_(18));const{payloadCreator:o,fulfilled:a,pending:s,rejected:l,settled:c,options:u}=n,d=i(e,o,u);r.exposeAction(t,d),a&&r.addCase(d.fulfilled,a);s&&r.addCase(d.pending,s);l&&r.addCase(d.rejected,l);c&&r.addMatcher(d.settled,c);r.exposeCaseReducer(t,{fulfilled:a||h,pending:s||h,rejected:l||h,settled:c||h})}(s,i,f,t)});const v=e=>e,y=new Map;let C;function E(e,t){return C||(C=m()),C(e,t)}function b(){return C||(C=m()),C.getInitialState()}function S(t,n=!1){function r(e){let r=e[t];return void 0===r&&n&&(r=b()),r}function i(t=v){const r=l(y,n,()=>new WeakMap);return l(r,t,()=>{const r={};for(const[i,o]of Object.entries(e.selectors??{}))r[i]=p(o,t,b,n);return r})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const T={name:n,reducer:E,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:b,...S(i),injectInto(e,{reducerPath:t,...n}={}){const r=t??i;return e.inject({reducerPath:r,reducer:E},n),{...T,...S(r,!0)}}};return T}}function p(e,t,n,r){function i(i,...o){let a=t(i);return void 0===a&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var f=g();function h(){}r.mv;var{assign:m}=Object;Symbol.for("rtk-state-proxy-original");function _(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}},52628:function(e,t,n){"use strict";n.d(t,{Uy:function(){return z},Vk:function(){return G},mv:function(){return l},o$:function(){return c}});var r=Symbol.for("immer-nothing"),i=Symbol.for("immer-draftable"),o=Symbol.for("immer-state");function a(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var s=Object.getPrototypeOf;function l(e){return!!e&&!!e[o]}function c(e){return!!e&&(d(e)||Array.isArray(e)||!!e[i]||!!e.constructor?.[i]||m(e)||_(e))}var u=Object.prototype.constructor.toString();function d(e){if(!e||"object"!=typeof e)return!1;const t=s(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===u}function g(e,t){0===p(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function p(e){const t=e[o];return t?t.type_:Array.isArray(e)?1:m(e)?2:_(e)?3:0}function f(e,t){return 2===p(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function h(e,t,n){const r=p(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function m(e){return e instanceof Map}function _(e){return e instanceof Set}function v(e){return e.copy_||e.base_}function y(e,t){if(m(e))return new Map(e);if(_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=d(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[o];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(s(e),t)}{const t=s(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function C(e,t=!1){return b(e)||l(e)||!c(e)||(p(e)>1&&(e.set=e.add=e.clear=e.delete=E),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>C(t,!0))),e}function E(){a(2)}function b(e){return Object.isFrozen(e)}var S,T={};function D(e){const t=T[e];return t||a(0),t}function w(){return S}function O(e,t){t&&(D("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function A(e){M(e),e.drafts_.forEach(R),e.drafts_=null}function M(e){e===S&&(S=e.parent_)}function I(e){return S={drafts_:[],parent_:S,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function R(e){const t=e[o];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function k(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[o].modified_&&(A(t),a(4)),c(e)&&(e=L(t,e),t.parent_||x(t,e)),t.patches_&&D("Patches").generateReplacementPatches_(n[o].base_,e,t.patches_,t.inversePatches_)):e=L(t,n,[]),A(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==r?e:void 0}function L(e,t,n){if(b(t))return t;const r=t[o];if(!r)return g(t,(i,o)=>P(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return x(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),g(i,(i,a)=>P(e,r,t,i,a,n,o)),x(e,t,!1),n&&e.patches_&&D("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function P(e,t,n,r,i,o,a){if(l(i)){const a=L(e,i,o&&t&&3!==t.type_&&!f(t.assigned_,r)?o.concat(r):void 0);if(h(n,r,a),!l(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(c(i)&&!b(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;L(e,i),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||x(e,i)}}function x(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&C(t,n)}var N={get(e,t){if(t===o)return e;const n=v(e);if(!f(n,t))return function(e,t,n){const r=B(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!c(r)?r:r===j(e.base_,t)?(V(e),e.copy_[t]=W(r,e)):r},has(e,t){return t in v(e)},ownKeys(e){return Reflect.ownKeys(v(e))},set(e,t,n){const r=B(v(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=j(v(e),t),s=r?.[o];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((i=n)===(a=r)?0!==i||1/i==1/a:i!=i&&a!=a)&&(void 0!==n||f(e.base_,t)))return!0;V(e),U(e)}var i,a;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return void 0!==j(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,V(e),U(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){a(11)},getPrototypeOf(e){return s(e.base_)},setPrototypeOf(){a(12)}},F={};function j(e,t){const n=e[o];return(n?v(n):e)[t]}function B(e,t){if(!(t in e))return;let n=s(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=s(n)}}function U(e){e.modified_||(e.modified_=!0,e.parent_&&U(e.parent_))}function V(e){e.copy_||(e.copy_=y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}g(N,(e,t)=>{F[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),F.deleteProperty=function(e,t){return F.set.call(this,e,t,void 0)},F.set=function(e,t,n){return N.set.call(this,e[0],t,n,e[0])};function W(e,t){const n=m(e)?D("MapSet").proxyMap_(e,t):_(e)?D("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:w(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=N;n&&(i=[r],o=F);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:w()).drafts_.push(n),n}function G(e){return l(e)||a(10),H(e)}function H(e){if(!c(e)||b(e))return e;const t=e[o];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=y(e,t.scope_.immer_.useStrictShallowCopy_)}else n=y(e,!0);return g(n,(e,t)=>{h(n,e,H(t))}),t&&(t.finalized_=!1),n}var $=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}let i;if("function"!=typeof t&&a(6),void 0!==n&&"function"!=typeof n&&a(7),c(e)){const r=I(this),o=W(e,void 0);let a=!0;try{i=t(o),a=!1}finally{a?A(r):M(r)}return O(r,n),k(i,r)}if(!e||"object"!=typeof e){if(i=t(e),void 0===i&&(i=e),i===r&&(i=void 0),this.autoFreeze_&&C(i,!0),n){const t=[],r=[];D("Patches").generateReplacementPatches_(e,i,t,r),n(t,r)}return i}a(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){c(e)||a(8),l(e)&&(e=G(e));const t=I(this),n=W(e,void 0);return n[o].isManual_=!0,M(t),n}finishDraft(e,t){const n=e&&e[o];n&&n.isManual_||a(9);const{scope_:r}=n;return O(r,t),k(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=D("Patches").applyPatches_;return l(e)?r(e,t):this.produce(e,e=>r(e,t))}},z=$.produce;$.produceWithPatches.bind($),$.setAutoFreeze.bind($),$.setUseStrictShallowCopy.bind($),$.applyPatches.bind($),$.createDraft.bind($),$.finishDraft.bind($)},40066:function(e,t,n){"use strict";n.d(t,{Wz:function(){return L},go:function(){return c},lY:function(){return V},xk:function(){return u},xn:function(){return ee}});var r;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function i(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function o(e){return Boolean(e&&"function"==typeof e.then)}function a(e,t){return o(e)?Promise.resolve(e).then(t):t(e)}function s(e,t,n){function r(n){const r=t(n);throw e.emit(r),console.error(r),r}try{const e=n();return o(e)?e.catch(r):e}catch(e){r(e)}}function l(e){const t=(Array.isArray(e)?e:[e]).map(e=>`'${e}'`),n=t.slice(-2).join(" or ");return`Tolgee: You need to specify ${[...t.slice(0,-2),n].join(", ")} option`}function c(e){return"string"==typeof e?[e]:Array.isArray(e)?e:void 0}function u(e){return c(e)||[]}function d(e,t){return"object"!=typeof(n=t)||Array.isArray(n)||null===n?u(t):u(null==t?void 0:t[e]);var n}function g(e){return Array.from(new Set(e))}function p(e){return e?e.replace(/\/+$/,""):e}const f=(e,t)=>fetch(e,t);const h=(e=f)=>(t,n)=>{let r=(i=null==n?void 0:n.headers,Object.fromEntries(new Headers(i).entries()));var i;return r["x-api-key"]&&(r=Object.assign({"x-tolgee-sdk-type":"JS","x-tolgee-sdk-version":"prerelease"},r)),e(t,Object.assign(Object.assign({},n),{headers:r}))},m=(e,t)=>{let n=[];return{listen(e){const t=t=>{e(t)};return n.push(t),{unsubscribe(){n=n.filter(e=>t!==e)}}},emit(r){t()&&n.forEach(t=>t({type:e,value:r}))}}};function _(e){let t=[],n=[];function r(){if(0===n.length)return;const e=n;n=[],t.forEach(t=>{t(e)})}return Object.freeze({listen(e){const n=t=>{e(t)};return t.push(n),{unsubscribe(){t=t.filter(e=>n!==e)}}},emit(t,i){e()&&e()&&(n.push(t),i?setTimeout(r,0):r())}})}class v extends Error{constructor(e,t,n=!1){const{language:r,namespace:i}=e;super(`Tolgee: Failed to fetch record for "${r}"${i&&` and "${i}"`}`),this.cause=t,this.isDev=n,this.name="RecordFetchError",this.language=r,this.namespace=i}}class y extends Error{constructor(e,t){super(e),this.cause=t,this.name="LanguageDetectorError"}}class C extends Error{constructor(e,t){super(e),this.cause=t,this.name="LanguageStorageError"}}const E=e=>{const t=new Map;return Object.entries(e).forEach(([e,n])=>{null!=n&&("object"!=typeof n?t.set(e,n):E(n).forEach((n,r)=>{t.set(e+"."+r,n)}))}),t},b=e=>Object.fromEntries(E(e).entries()),S=e=>{const[t,...n]=e.split(":");return{language:t,namespace:n.join(":")||""}},T=({language:e,namespace:t})=>t?`${e}:${t}`:e;function D(e,t,n,r,i,a,s){const l=new Map,c=new Map;let d={},p=0;function f(t,n,r){const i=T(t);c.set(i,{data:b(n),version:r}),e.onCacheChange.emit(S(i))}async function h(r,i){let a;if(i)try{a=await n(r)}catch(t){const n=new v(r,t,!0);e.onError.emit(n),console.warn(n)}return a||(a=await async function(n){function r(t){const r=new v(n,t);throw e.onError.emit(r),console.error(r),r}const i=t(n);if(o(i)){const e=await i.catch(r);if(void 0!==e)return e}const a=d[T(n)];if("function"!=typeof a)return a;try{return await a()}catch(e){r(e)}}(r)),a}const m=Object.freeze({addStaticData(e){if(Array.isArray(e))for(const t of e){const e=T(t),n=c.get(e);n&&0!==n.version||f(t,b(t.data),0)}else e&&(d=Object.assign(Object.assign({},d),e),Object.entries(e).forEach(([e,t])=>{if("function"!=typeof t){const n=S(e),r=c.get(e);r&&0!==r.version||f(n,b(t),0)}}))},invalidate(){l.clear(),p+=1},addRecord(e,t){f(e,b(t),p)},exists(e,t=!1){const n=c.get(T(e));return n&&t?n.version===p:Boolean(n)},getRecord(e){const t=r(e),n=T(t),i=c.get(n);if(i)return Object.assign(Object.assign({},t),{cacheKey:n,data:i.data})},getAllRecords(){return Array.from(c.entries()).map(([e])=>m.getRecord(S(e)))},getTranslation(e,t){var n;return null===(n=c.get(T(e)))||void 0===n?void 0:n.data[t]},getTranslationNs(e,t,n){var r;for(const i of e)for(const e of t){const t=null===(r=c.get(T({language:e,namespace:i})))||void 0===r?void 0:r.data[n];if(null!=t)return[i]}return g(e)},getTranslationFallback(e,t,n){var r;for(const i of e)for(const e of t){const t=null===(r=c.get(T({language:e,namespace:i})))||void 0===r?void 0:r.data[n];if(null!=t)return t}},changeTranslation(t,n,r){var i;const o=null===(i=c.get(T(t)))||void 0===i?void 0:i.data;o&&(o[n]=r,e.onCacheChange.emit(Object.assign(Object.assign({},t),{key:n})))},isFetching(e){if(i())return!0;if(void 0===e)return l.size>0;const t=u(e);return Boolean(Array.from(l.keys()).find(e=>t.includes(S(e).namespace)))},isLoading(e,t){const n=u(t);if(i())return!0;const r=Array.from(l.keys());return Boolean(r.find(t=>{const r=S(t);return(!n.length||n.includes(r.namespace))&&!m.exists({namespace:r.namespace,language:e})}))},async loadRecords(e,t){const n=e.map(e=>{const n=r(e),i=T(n);if(null==t?void 0:t.useCache){if(m.exists(n,!0))return Object.assign(Object.assign({},n),{new:!1,cacheKey:i,data:m.getRecord(n).data})}const o=l.get(i);if(o)return Object.assign(Object.assign({},n),{new:!1,promise:o,cacheKey:i});const a=h(n,!(null==t?void 0:t.noDev))||Promise.resolve(void 0);return l.set(i,a),Object.assign(Object.assign({},n),{new:!0,promise:a,cacheKey:i})});a.notify(),s.notify();const i=n.map(e=>e.promise).filter(Boolean),o=await Promise.all(i);return n.forEach(e=>{var t;e.promise&&(e.data=b(null!==(t=o[0])&&void 0!==t?t:{}),o.shift());const n=l.get(e.cacheKey)!==e.promise;e.new&&!n&&(l.delete(e.cacheKey),e.data?m.addRecord(e,e.data):m.getRecord(e)||m.addRecord(e,{}))}),a.notify(),s.notify(),n.map(e=>{var t;return{language:e.language,namespace:e.namespace,data:null!==(t=e.data)&&void 0!==t?t:{},cacheKey:e.cacheKey}})}});return m}function w(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}const O="invalid",A={observerOptions:{tagAttributes:{textarea:["placeholder"],input:["value","placeholder"],img:["alt"],"*":["aria-label","title"]},restrictedElements:["script","style"],highlightKeys:["Alt"],highlightColor:"rgb(255, 0, 0)",highlightWidth:5,inputPrefix:"%-%tolgee:",inputSuffix:"%-%",passToParent:["option","optgroup"],fullKeyEncode:!1},observerType:"invisible",onFormatError:O,apiUrl:"https://app.tolgee.io",autoLoadRequiredData:!0,fetch:h(),onTranslationMissing:({key:e})=>e},M=(...e)=>{let t={};return e.forEach(e=>{t=Object.assign(Object.assign(Object.assign({},t),e),{observerOptions:Object.assign(Object.assign({},t.observerOptions),null==e?void 0:e.observerOptions)})}),t};function I(e,t){const n=M(A,null==t?void 0:t.initialOptions,e);return n.apiUrl=p(n.apiUrl),(null==e?void 0:e.fetch)&&(n.fetch=h(e.fetch)),{initialOptions:n,activeNamespaces:(null==t?void 0:t.activeNamespaces)||new Map,language:null==t?void 0:t.language,pendingLanguage:null==t?void 0:t.language,isInitialLoading:!1,isRunning:!1}}function R(e,t,n,r,i,o,l,c){const u={ui:void 0},d={formatters:[],finalFormatter:void 0,observer:void 0,devBackend:void 0,backends:[],ui:void 0,languageDetector:void 0,languageStorage:void 0},g=async({keysAndDefaults:e,target:t})=>{var n;const a=e.map(({key:e,ns:t,defaultValue:n})=>({key:e,defaultValue:n,fallbackNamespaces:r(t),namespace:i({key:e,ns:t})[0],translation:o({key:e,ns:t})}));null===(n=d.ui)||void 0===n||n.handleElementClick(a,t)},p=(e,t)=>{var n;return(null===(n=d.observer)||void 0===n?void 0:n.findPositions(e,t))||[]};function f(e){const t=o({key:e.key,ns:e.ns});return I.formatTranslation(Object.assign(Object.assign({},e),{translation:t,formatEnabled:!0}))}function h(){return{fetch:t().fetch}}function m(e){d.observer=null==e?void 0:e()}function _(){return Boolean(d.observer)}function v(e){e&&d.formatters.push(e)}function E(e){d.finalFormatter=e}function b(e){u.ui=e}function S(){return Boolean(u.ui)}function T(e){d.languageStorage=e}function D(e){d.languageDetector=e}function A(e){e&&d.backends.push(e)}function M(e){d.devBackend=e}const I=Object.freeze({addPlugin:function(e,t){t(e,Object.freeze({setFinalFormatter:E,addFormatter:v,setObserver:m,hasObserver:_,setUi:b,hasUi:S,setDevBackend:M,addBackend:A,setLanguageDetector:D,setLanguageStorage:T}))},findPositions:p,run(){var e,n;const{apiKey:r,apiUrl:i,projectId:o,observerOptions:a,tagNewKeys:s,filterTag:h}=t();d.ui=null===(e=u.ui)||void 0===e?void 0:e.call(u,{apiKey:r,apiUrl:i,projectId:o,highlight:I.highlight,changeTranslation:l,findPositions:p,onPermanentChange:e=>c.onPermanentChange.emit(e),tagNewKeys:s,filterTag:h}),null===(n=d.observer)||void 0===n||n.run({mouseHighlight:Boolean(d.ui),options:a,translate:f,onClick:g})},stop(){var e;d.ui=void 0,null===(e=d.observer)||void 0===e||e.stop()},getLanguageStorage(){return d.languageStorage},getInitialLanguage(){const e=n();return a(s(c.onError,e=>new C("Tolgee: Failed to load language",e),()=>{var e;return null===(e=d.languageStorage)||void 0===e?void 0:e.getLanguage(h())}),t=>e&&!e.includes(t)||!t?function(){if(!d.languageDetector)return;const e=n();return s(c.onError,e=>new y("Tolgee: Failed to detect language",e),()=>{var t;return null===(t=d.languageDetector)||void 0===t?void 0:t.getLanguage(Object.assign({availableLanguages:e},h()))})}():t)},setStoredLanguage(e){return s(c.onError,e=>new C("Tolgee: Failed to store language",e),()=>{var t;return null===(t=d.languageStorage)||void 0===t?void 0:t.setLanguage(e,h())})},getDevBackend(){return d.devBackend},getBackendRecord:async({language:e,namespace:t})=>{for(const n of d.backends){const r=await n.getRecord(Object.assign({language:e,namespace:t},h()));if(void 0!==r)return r}},getBackendDevRecord:async({language:e,namespace:n})=>{var r;const{apiKey:i,apiUrl:o,projectId:a,filterTag:s}=t();if(i&&o&&I.hasDevBackend())return null===(r=d.devBackend)||void 0===r?void 0:r.getRecord(Object.assign({apiKey:i,apiUrl:o,projectId:a,language:e,namespace:n,filterTag:s},h()))},getLanguageDetector(){return d.languageDetector},retranslate(){var e;null===(e=d.observer)||void 0===e||e.retranslate()},highlight:(e,t)=>{var n,r;return(null===(r=null===(n=d.observer)||void 0===n?void 0:n.highlight)||void 0===r?void 0:r.call(n,e,t))||{unhighlight(){}}},unwrap(e){var t;return d.observer?null===(t=d.observer)||void 0===t?void 0:t.unwrap(e):{text:e,keys:[]}},wrap(e){var t;return d.observer?null===(t=d.observer)||void 0===t?void 0:t.wrap(e):e.translation},hasDevBackend(){return Boolean(I.getDevBackend())},formatTranslation(n){var r,{formatEnabled:i}=n,o=w(n,["formatEnabled"]);const{key:a,translation:s,defaultValue:l,noWrap:c,params:u,ns:g,orEmpty:p}=o,f=null!=s?s:l;let h="";null==s&&(h=t().onTranslationMissing(o));let m=null!=f?f:p?"":h;const _=e(),v=i||!(null===(r=d.observer)||void 0===r?void 0:r.outputNotFormattable),y=e=>d.observer&&!c?d.observer.wrap({key:a,translation:e,defaultValue:l,params:u,ns:g}):e;m=y(m);try{if(f&&_&&v)for(const e of d.formatters)m=e.format({translation:m,language:_,params:u});d.finalFormatter&&f&&_&&v&&(m=d.finalFormatter.format({translation:m,language:_,params:u}))}catch(e){console.error(e);const n=("string"==typeof(C=e)?C:"string"==typeof(null==C?void 0:C.message)?C.message:void 0)||O,r=t().onFormatError,i=typeof r;m="string"===i?r:"function"===i?r(n,o):O,m=y(m)}var C;return m}});return I}const k=(e,t,n)=>{let r=e;return Object.freeze({init(e){r=e},notify(){const e=t();r!==e&&n(e),r=e}})};const L=(e,...t)=>{let n,r={};return"object"==typeof e?r=e:(r.key=e,"string"==typeof t[0]?(r.defaultValue=t[0],n=t[1]):"object"==typeof t[0]&&(n=t[0])),n&&(r=Object.assign(Object.assign({},function(e){var{ns:t,noWrap:n,orEmpty:r,params:i,language:o}=e,a=w(e,["ns","noWrap","orEmpty","params","language"]);const s={ns:t,noWrap:n,orEmpty:r,language:o};return Object.assign(Object.assign({},s),{params:Object.assign({},a)})}(n)),r)),r};function P({options:e}){const t=function(){let e=!0;function t(){return e}const n=Object.freeze({onPendingLanguageChange:m("pendingLanguage",t),onLanguageChange:m("language",t),onLoadingChange:m("loading",t),onFetchingChange:m("fetching",t),onInitialLoaded:m("initialLoad",t),onRunningChange:m("running",t),onCacheChange:m("cache",t),onPermanentChange:m("permanentChange",t),onError:m("error",t),onUpdate:_(t),setEmitterActive(t){e=t},on:(e,t)=>{switch(e){case"pendingLanguage":return n.onPendingLanguageChange.listen(t);case"language":return n.onLanguageChange.listen(t);case"loading":return n.onLoadingChange.listen(t);case"fetching":return n.onFetchingChange.listen(t);case"initialLoad":return n.onInitialLoaded.listen(t);case"running":return n.onRunningChange.listen(t);case"cache":return n.onCacheChange.listen(t);case"update":return n.onUpdate.listen(t);case"permanentChange":return n.onPermanentChange.listen(t);case"error":return n.onError.listen(t)}}});return n.onInitialLoaded.listen(e=>n.onUpdate.emit(e,!1)),n.onLanguageChange.listen(e=>n.onUpdate.emit(e,!1)),n.onCacheChange.listen(e=>n.onUpdate.emit(e,!0)),n}(),n=k(!1,()=>c.isFetching(),t.onFetchingChange.emit),r=k(!1,()=>M.isLoading(),t.onLoadingChange.emit),i=function(e,t,n){let r,i=I();const o=Object.freeze({init(e){i=I(e,i)},isRunning(){return i.isRunning},setRunning(e){i.isRunning!==e&&(i.isRunning=e,n.emit(e))},isInitialLoading(){return i.isInitialLoading},setInitialLoading(e){i.isInitialLoading=e},getLanguage(){return i.language||i.initialOptions.language},setLanguage(t){i.language!==t&&(i.language=t,e.emit(t))},getPendingLanguage(){return i.pendingLanguage||o.getLanguage()},setPendingLanguage(e){i.pendingLanguage!==e&&(i.pendingLanguage=e,t.emit(e))},getInitialOptions(){return Object.assign(Object.assign({},i.initialOptions),r)},addActiveNs(e){u(e).forEach(e=>{const t=i.activeNamespaces.get(e);void 0!==t?i.activeNamespaces.set(e,t+1):i.activeNamespaces.set(e,1)})},removeActiveNs(e){u(e).forEach(e=>{const t=i.activeNamespaces.get(e);void 0!==t&&t>1?i.activeNamespaces.set(e,t-1):i.activeNamespaces.delete(e)})},getRequiredNamespaces(){return g([o.getDefaultNs(),...i.initialOptions.ns||[],...u(i.initialOptions.fallbackNs),...i.activeNamespaces.keys()])},getFallbackLangs(e){const t=e||o.getLanguage();return t?g([t,...d(t,i.initialOptions.fallbackLanguage)]):[]},getFallbackNs(){return u(i.initialOptions.fallbackNs)},getNs(){var e,t;return(null===(e=i.initialOptions.ns)||void 0===e?void 0:e.length)?i.initialOptions.ns:[null!==(t=i.initialOptions.defaultNs)&&void 0!==t?t:""]},getDefaultNs(e){var t,n,r;return void 0===e?null!==(r=null!==(t=i.initialOptions.defaultNs)&&void 0!==t?t:null===(n=i.initialOptions.ns)||void 0===n?void 0:n[0])&&void 0!==r?r:"":e},getAvailableLanguages(){if(i.initialOptions.availableLanguages)return i.initialOptions.availableLanguages;if(i.initialOptions.staticData){const e=Object.keys(i.initialOptions.staticData).map(e=>S(e).language);return Array.from(new Set(e))}},getAvailableNs(){return i.initialOptions.availableNs},withDefaultNs(e){return{namespace:void 0===e.namespace?o.getDefaultNs():e.namespace,language:e.language}},overrideCredentials(e){r=e?Object.assign(Object.assign({},e),{apiUrl:p(e.apiUrl)}):void 0}});return o}(t.onLanguageChange,t.onPendingLanguageChange,t.onRunningChange),s=R(i.getLanguage,i.getInitialOptions,i.getAvailableLanguages,v,T,w,C,t),c=D(t,s.getBackendRecord,s.getBackendDevRecord,i.withDefaultNs,i.isInitialLoading,n,r);let f;function h(e){return i.getDefaultNs(e)}function v(e){return g([...u(h(e)),...i.getFallbackNs()])}function y(e){return g([...u(null!=e?e:h()),...i.getRequiredNamespaces()])}function C(e,t,n){const r=i.withDefaultNs(e),o=c.getTranslation(r,t);return c.changeTranslation(r,t,n),{revert(){c.changeTranslation(r,t,o)}}}function E(e){i.init(e),c.addStaticData(i.getInitialOptions().staticData)}function b(e,t){const n=i.getFallbackLangs(e),r=y(t),o=[];return n.forEach(e=>{r.forEach(t=>{o.push({language:e,namespace:t})})}),o}function T({key:e,ns:t}){const n=i.getFallbackLangs(),r=v(null!=t?t:void 0);return c.getTranslationNs(r,n,e)}function w({key:e,ns:t,language:n}){const r=v(null!=t?t:void 0),o=i.getFallbackLangs(n);return c.getTranslationFallback(r,o,e)}function O(){const e=a(A(),()=>{const e=b(t,n).filter(e=>!c.exists(e,!0));var t,n;if(e.length&&i.getInitialOptions().autoLoadRequiredData)return c.loadRecords(e,{useCache:!0})});if(o(e))return i.setInitialLoading(!0),n.notify(),r.notify(),Promise.resolve(e).then(()=>{i.setInitialLoading(!1),n.notify(),r.notify(),t.onInitialLoaded.emit()});t.onInitialLoaded.emit()}function A(){if(i.getLanguage())return;return a(s.getInitialLanguage(),e=>{const t=e||i.getInitialOptions().defaultLanguage;t&&i.setLanguage(t)})}e&&E(e),t.onUpdate.listen(()=>{i.isRunning()&&s.retranslate()});const M=Object.freeze(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),i),s),c),{init:E,getTranslation:w,changeTranslation:C,getTranslationNs:T,getDefaultAndFallbackNs:v,findPositions:s.findPositions,getRequiredDescriptors:b,async changeLanguage(e){i.getPendingLanguage()===e&&i.getLanguage()===e||(i.setPendingLanguage(e),i.isRunning()&&i.getInitialOptions().autoLoadRequiredData&&await c.loadRecords(b(e),{useCache:!0}),e===i.getPendingLanguage()&&(i.setLanguage(e),await s.setStoredLanguage(e)))},async addActiveNs(e,t){t||i.addActiveNs(e),i.isRunning()&&await c.loadRecords(b(void 0,e),{useCache:!0})},async loadRecord(e,t){var n;return null===(n=(await M.loadRecords([e],t))[0])||void 0===n?void 0:n.data},isLoading(e){return c.isLoading(i.getLanguage(),e)},isLoaded(e){const t=i.getLanguage();if(!t)return!1;const n=i.getFallbackLangs(t),r=y(e),o=[];return n.forEach(e=>{r.forEach(t=>{c.exists({language:e,namespace:t})||o.push({language:e,namespace:t})})}),0===o.length},t:(...e)=>{const t=L(...e),n=w(t);return s.formatTranslation(Object.assign(Object.assign({},t),{translation:n}))},isDev(){return Boolean(i.getInitialOptions().apiKey&&i.getInitialOptions().apiUrl)},async loadRequired(e){(null==e?void 0:e.language)||await A();const t=b(null==e?void 0:e.language);return M.loadRecords(t,e)},async loadMatrix(e){const t=function(e){let t=[],n=[];if(Array.isArray(e.languages))t=e.languages;else if("all"===e.languages){const e=M.getAvailableLanguages();if(!e)throw new Error(l("availableLanguages"));t=e}if(Array.isArray(e.namespaces))n=e.namespaces;else if("all"===e.namespaces){const e=M.getAvailableNs();if(!e)throw new Error(l("availableNs"));n=e}const r=[];return t.forEach(e=>{n.forEach(t=>{r.push({language:e,namespace:t})})}),r}(e);return M.loadRecords(t,e)},run(){return function(){if((s.getLanguageDetector()||s.getLanguageStorage())&&!i.getAvailableLanguages())throw new Error(l("availableLanguages"));if(!i.getLanguage()&&!i.getInitialOptions().defaultLanguage)throw new Error(l(["defaultLanguage","language"]))}(),i.isRunning()||(i.setRunning(!0),s.run(),f=O()),Promise.resolve(f)},stop(){i.isRunning()&&(s.stop(),i.setRunning(!1))}}));return M}const x=()=>{const e={plugins:[],options:{}},t=Object.freeze({use(n){return e.plugins.push(n),t},updateDefaults(n){return e.options=M(e.options,n),t},init(t){const n=function(e){const t=P({options:e});function n(e){const n=t.isRunning();n&&t.stop(),e(),t.isDev()&&t.invalidate(),n&&t.run()}t.isDev()&&t.invalidate();const r=Object.freeze({on:t.on,setEmitterActive:t.setEmitterActive,getLanguage:t.getLanguage,getPendingLanguage:t.getPendingLanguage,changeLanguage:t.changeLanguage,changeTranslation:t.changeTranslation,addActiveNs:t.addActiveNs,removeActiveNs:t.removeActiveNs,loadRequired:t.loadRequired,loadMatrix:t.loadMatrix,loadRecords:t.loadRecords,loadRecord:t.loadRecord,addStaticData:t.addStaticData,getRecord:t.getRecord,getAllRecords:t.getAllRecords,isLoaded:t.isLoaded,getRequiredDescriptors:t.getRequiredDescriptors,isInitialLoading:t.isInitialLoading,isLoading:t.isLoading,isFetching:t.isFetching,isRunning:t.isRunning,run:t.run,stop:t.stop,t:t.t,highlight:t.highlight,findPositions:t.findPositions,getInitialOptions:t.getInitialOptions,isDev:t.isDev,wrap:t.wrap,unwrap:t.unwrap,overrideCredentials(e){n(()=>t.overrideCredentials(e))},addPlugin(e){e&&n(()=>t.addPlugin(r,e))},updateOptions(e){e&&n(()=>t.init(e))}});return r}(M(e.options,t));return e.plugins.forEach(n.addPlugin),n}});return t};class N extends Error{constructor(e,t,n){let r,i="";0===e?r="Empty parameter":1===e?(r="Unexpected character",i="Did you forget to use FormatIcu to render ICU message syntax?"):r="Unexpected end",super(`Tolgee parser: ${r} at ${t} in "${n}"`+(i?"\n"+i:"")),this.code=e,this.index=t}}function F(e){return/\s/.test(e)}const j=new Set([2,1,0]),B=new Set(["{","}","'"]);function U(e,t){const[n,r]=function(e){let t=0,n="",r="",i="";const o=[],a=[];let s=0;function l(t){throw new N(t,s,e)}const c=()=>{o.push(n),n=""},u=()=>{/[0-9a-zA-Z_]/.test(i)||l(1),r+=i},d=()=>{""===r&&l(0),a.push(r),r=""};for(s=0;s<e.length;s++)switch(i=e[s],t){case 0:"'"===i?(n+=i,t=1):"{"===i?(c(),t=3):(n+=i,t=0);break;case 1:B.has(i)?(n=n.slice(0,-1)+i,t=2):(n+=i,t=0);break;case 2:"'"===i?t=0:(n+=i,t=2);break;case 3:"}"===i?(d(),t=0):F(i)?""!==r&&(d(),t=4):(u(),t=3);break;case 4:"}"==i?t=0:F(i)?t=4:l(1)}return j.has(t)||l(2),c(),[o,a]}(e),i=[n[0]];for(let o=1;o<n.length;o++){const a=null==t?void 0:t[r[o-1]];if(void 0===a)throw new Error(`Missing parameter "${r[o-1]}" in "${e}"`);i.push(String(a)),i.push(n[o])}return i.join("")}const V=()=>(e,t)=>(t.setFinalFormatter({format:({translation:e,params:t})=>U(e,t)}),e);String(Number.MAX_SAFE_INTEGER);var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},G={};!function(e){function t(e){for(var t=0,n=Math.min(65536,e.length+1),r=new Uint16Array(n),i=[],o=0;;){var a=t<e.length;if(!a||o>=n-1){var s=r.subarray(0,o);if(i.push(String.fromCharCode.apply(null,s)),!a)return i.join("");e=e.subarray(t),t=0,o=0}var l=e[t++];if(128&l){if(192==(224&l)){var c=63&e[t++];r[o++]=(31&l)<<6|c}else if(224==(240&l)){c=63&e[t++];var u=63&e[t++];r[o++]=(31&l)<<12|c<<6|u}else if(240==(248&l)){var d=(7&l)<<18|(c=63&e[t++])<<12|(u=63&e[t++])<<6|63&e[t++];d>65535&&(d-=65536,r[o++]=d>>>10&1023|55296,d=56320|1023&d),r[o++]=d}}else r[o++]=l}}var n="Failed to ",r=function(e,t,r){if(e)throw new Error("".concat(n).concat(t,": the '").concat(r,"' option is unsupported."))},i="function"==typeof Buffer&&Buffer.from,o=i?function(e){return Buffer.from(e)}:function(e){for(var t=0,n=e.length,r=0,i=Math.max(32,n+(n>>>1)+7),o=new Uint8Array(i>>>3<<3);t<n;){var a=e.charCodeAt(t++);if(a>=55296&&a<=56319){if(t<n){var s=e.charCodeAt(t);56320==(64512&s)&&(++t,a=((1023&a)<<10)+(1023&s)+65536)}if(a>=55296&&a<=56319)continue}if(r+4>o.length){i+=8,i=(i*=1+t/e.length*2)>>>3<<3;var l=new Uint8Array(i);l.set(o),o=l}if(4294967168&a){if(4294965248&a)if(4294901760&a){if(4292870144&a)continue;o[r++]=a>>>18&7|240,o[r++]=a>>>12&63|128,o[r++]=a>>>6&63|128}else o[r++]=a>>>12&15|224,o[r++]=a>>>6&63|128;else o[r++]=a>>>6&31|192;o[r++]=63&a|128}else o[r++]=a}return o.slice?o.slice(0,r):o.subarray(0,r)};function a(){this.encoding="utf-8"}a.prototype.encode=function(e,t){return r(t&&t.stream,"encode","stream"),o(e)};var s=!i&&"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL,l=["utf-8","utf8","unicode-1-1-utf-8"],c=t;i?c=function(e,t){return(e instanceof Buffer?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)).toString(t)}:s&&(c=function(e){try{return function(e){var t;try{var n=new Blob([e],{type:"text/plain;charset=UTF-8"});t=URL.createObjectURL(n);var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(),r.responseText}finally{t&&URL.revokeObjectURL(t)}}(e)}catch(n){return t(e)}});var u="construct 'TextDecoder'",d="".concat(n," ").concat(u,": the ");function g(e,t){if(r(t&&t.fatal,u,"fatal"),e=e||"utf-8",!(i?Buffer.isEncoding(e):-1!==l.indexOf(e.toLowerCase())))throw new RangeError("".concat(d," encoding label provided ('").concat(e,"') is invalid."));this.encoding=e,this.fatal=!1,this.ignoreBOM=!1}g.prototype.decode=function(e,t){var n;return r(t&&t.stream,"decode","stream"),n=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),c(n,this.encoding)},e.TextEncoder=e.TextEncoder||a,e.TextDecoder=e.TextDecoder||g}("undefined"!=typeof window?window:W);const H=i({__proto__:null,default:G},[G]);null==(r=console.assert)||r.call(console,H);const $=["",""];RegExp(`([${$.join("")}]{9})+`,"gu");function z({message:e,recievingMessage:t,data:n,attempts:r=1,timeout:i=300}){let o=!1;const a=()=>new Promise((r,o)=>{const a=function(e,t){const n=n=>{var r,i;e.includes(null==(r=n.data)?void 0:r.type)&&t(null==(i=n.data)?void 0:i.data)};return window.addEventListener("message",n,!1),{unsubscribe(){window.removeEventListener("message",n)}}}(t,function(e){clearTimeout(s),l(),r(e)});window.postMessage({type:e,data:n},window.origin);const s=setTimeout(function(){l(),o()},i);function l(){a.unsubscribe()}});return{cancel(){o=!0},promise:(async()=>{for(let e=0;e<r;e++){if(o)return new Promise(()=>{});try{return await a()}catch(e){continue}}if(!o)throw`Didn't recieve ${t.join(" or ")} in time.`;return new Promise(()=>{})})()}}let Z=null;function q(e){var t;return Z||(Z=(t=`https://cdn.jsdelivr.net/npm/@tolgee/web@${e}/dist/tolgee-in-context-tools.umd.min.js`,new Promise((e,n)=>{const r=document.createElement("script");r.src=t,r.addEventListener("load",()=>e()),r.addEventListener("error",e=>n(e.error)),document.head.appendChild(r)})).then(()=>window["@tolgee/in-context-tools"].InContextTools)),Z}const K="__tolgee_apiKey",Y="__tolgee_apiUrl";function J(){const e=sessionStorage.getItem(K)||void 0,t=sessionStorage.getItem(Y)||void 0;if(e&&t)return{apiKey:e,apiUrl:t}}function Q(){sessionStorage.removeItem(K),sessionStorage.removeItem(Y)}let X=()=>e=>e;(()=>{if("undefined"==typeof window)return!1;try{return"undefined"!=typeof sessionStorage&&sessionStorage}catch(e){return console.error("sessionStorage not available",e),!1}})()&&(X=()=>e=>{const t=function(){let e;return{update:async function(t){null==e||e();const{cancel:n,promise:r}=z({message:"TOLGEE_READY",recievingMessage:["TOLGEE_PLUGIN_READY","TOLGEE_PLUGIN_UPDATED"],data:t,attempts:4});return e=n,r}}}();e.on("running",({value:n})=>{var r;n&&(r=()=>{t.update({uiPresent:!0,uiVersion:void 0,mode:e.isDev()?"development":"production",config:{apiUrl:e.getInitialOptions().apiUrl||"",apiKey:e.getInitialOptions().apiKey||""}}).catch(Q)},"loading"!==document.readyState?Promise.resolve().then(()=>{r()}):document.addEventListener&&document.addEventListener("DOMContentLoaded",r))});return J()&&(async()=>{const e=await q("prerelease");return t=>{const n=J();return t.addPlugin(e({credentials:n})),t}})().then(t=>{e.addPlugin(t)}).catch(e=>{console.error("Tolgee: Failed to load in-context tools"),console.error(e)}),e});function ee(){return x().use(X())}},80369:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=e=>!e.match(/[\s()-.\/]/),i=(e,t,n)=>e.map((e,i)=>i>=t&&r(e)?n:e),o=(e,t)=>{let n="object"==typeof t?t.pattern:t,o="object"==typeof t?t.placeholder:void 0,a=n.replace(/\W/g,""),s=e.replace(/\W/g,""),l=n.split(""),c=0,u=0;for(;u<l.length;u++){if(c>=s.length){if(a.length===s.length)return l.join("");if(void 0!==o&&a.length>s.length)return i(l,u,o).join("");break}if(l[u]&&r(l[u])&&s[c].match(/[0-9]/))l[u]=s[c++];else if(l[u]&&r(l[u]))return void 0!==o?i(l,u,o).join(""):l.slice(0,u).join("")}return l.join("").substring(0,u)}},51e3:function(e,t,n){"use strict";n.d(t,{Av:function(){return s},Dg:function(){return c},KS:function(){return u},vt:function(){return l}});var r=e=>!e.match(/[\s()-.\/]/),i=(e,t,n)=>e.map((e,i)=>i>=t&&r(e)?n:e),o={7:["8"]},a={EE:[7,8],EG:[7,10],RS:[8,10],NZ:[10,12],BR:[10,12],BG:[8,12],MX:[10,12],DE:[10,12],AT:[10,12],KH:[10,12],CH:[9,12],IL:[8,12]},s=(e,t)=>{var n;let{phoneCode:r,countryCode:i,previousMatch:a,geoIPCountryCode:s,reverseSearch:l=!1}=t,c=i?e.find(e=>e.code===i):void 0,{result:u,phoneCode:d}=((e,t)=>{let{phoneCode:n}=t,{reverseSearch:r}=t,i=e.filter(e=>{var t;return e.phone_code===n||(null==(t=o[e.phone_code])?void 0:t.includes(n))});if(r&&n)for(;!i.length&&n.length>0;)n=n.substring(0,n.length-1),i=e.filter(e=>{var t;return e.phone_code===n||(null==(t=o[e.phone_code])?void 0:t.includes(n))});return{result:i,phoneCode:n}})(e,{phoneCode:r,reverseSearch:l});switch(!0){case"RU"===s&&2===u.length&&"KZ"===(null==(n=u[0])?void 0:n.code):return u[1]||c||a||e[0];case"1"===d:return u[3]||c||a||e[0];default:return u[0]||c||a||e[0]}},l=(e,t)=>`${e.length?"+":""}${t?((e,t)=>{let n="object"==typeof t?t.pattern:t,o="object"==typeof t?t.placeholder:void 0,a=n.replace(/\W/g,""),s=e.replace(/\W/g,""),l=n.split(""),c=0,u=0;for(;u<l.length;u++){if(c>=s.length){if(a.length===s.length)return l.join("");if(void 0!==o&&a.length>s.length)return i(l,u,o).join("");break}if(l[u]&&r(l[u])&&s[c].match(/[0-9]/))l[u]=s[c++];else if(l[u]&&r(l[u]))return void 0!==o?i(l,u,o).join(""):l.slice(0,u).join("")}return l.join("").substring(0,u)})(e,{pattern:`${t.phone_code} ${t.phone_format}`}):e}`,c=(e,t)=>{let n=e.trim().replace(/[^0-9]/g,""),r=l(n,t),i=n.substring(0,4);return 4===i.length&&"RU"===(null==t?void 0:t.code)&&n.startsWith("8")&&(n=`7${n.substring(1)}`,r=r.replace("+8","+7")),{cleanValue:n,phoneCodeSubstring:i,formattedValue:r}},u=(e,t,n)=>{let{code:r,phone_code:i,phone_format:o}=n,s=e.substring(i.length),l=`+${i} ${o}`.length,c=e.startsWith(i);if(r in a){let[e,t]=a[r];return c&&s.length>=e&&s.length<=t}return c&&t.length===l}},87536:function(e,t,n){"use strict";n.d(t,{KN:function(){return V},U2:function(){return m},bc:function(){return U},cI:function(){return Me},t8:function(){return C}});var r=n(98661),i=e=>"checkbox"===e.type,o=e=>e instanceof Date,a=e=>null==e;const s=e=>"object"==typeof e;var l=e=>!a(e)&&!Array.isArray(e)&&s(e)&&!o(e),c=e=>l(e)&&e.target?i(e.target)?e.target.checked:e.target.value:e,u=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),d=e=>{const t=e.constructor&&e.constructor.prototype;return l(t)&&t.hasOwnProperty("isPrototypeOf")},g="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function p(e){let t;const n=Array.isArray(e),r="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(g&&(e instanceof Blob||r)||!n&&!l(e))return e;if(t=n?[]:{},n||d(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=p(e[n]));else t=e}return t}var f=e=>Array.isArray(e)?e.filter(Boolean):[],h=e=>void 0===e,m=(e,t,n)=>{if(!t||!l(e))return n;const r=f(t.split(/[,[\].]+?/)).reduce((e,t)=>a(e)?e:e[t],e);return h(r)||r===e?h(e[t])?n:e[t]:r},_=e=>"boolean"==typeof e,v=e=>/^\w*$/.test(e),y=e=>f(e.replace(/["|']|\]/g,"").split(/\.|\[/)),C=(e,t,n)=>{let r=-1;const i=v(t)?[t]:y(t),o=i.length,a=o-1;for(;++r<o;){const t=i[r];let o=n;if(r!==a){const n=e[t];o=l(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=o,e=e[t]}return e};const E={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},b={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},S="max",T="min",D="maxLength",w="minLength",O="pattern",A="required",M="validate",I=r.default.createContext(null),R=()=>r.default.useContext(I);var k=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const i=o;return t._proxyFormState[i]!==b.all&&(t._proxyFormState[i]=!r||b.all),n&&(n[i]=!0),e[i]}});return i},L=e=>l(e)&&!Object.keys(e).length,P=(e,t,n,r)=>{n(e);const{name:i,...o}=e;return L(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(e=>t[e]===(!r||b.all))},x=e=>Array.isArray(e)?e:[e],N=(e,t,n)=>!e||!t||e===t||x(e).some(e=>e&&(n?e===t:e.startsWith(t)||t.startsWith(e)));function F(e){const t=r.default.useRef(e);t.current=e,r.default.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var j=e=>"string"==typeof e,B=(e,t,n,r,i)=>j(e)?(r&&t.watch.add(e),m(n,e,i)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),m(n,e))):(r&&(t.watchAll=!0),n);function U(e){const t=R(),{name:n,disabled:i,control:o=t.control,shouldUnregister:a}=e,s=u(o._names.array,n),l=function(e){const t=R(),{control:n=t.control,name:i,defaultValue:o,disabled:a,exact:s}=e||{},l=r.default.useRef(i);l.current=i,F({disabled:a,subject:n._subjects.values,next:e=>{N(l.current,e.name,s)&&u(p(B(l.current,n._names,e.values||n._formValues,!1,o)))}});const[c,u]=r.default.useState(n._getWatch(i,o));return r.default.useEffect(()=>n._removeUnmounted()),c}({control:o,name:n,defaultValue:m(o._formValues,n,m(o._defaultValues,n,e.defaultValue)),exact:!0}),d=function(e){const t=R(),{control:n=t.control,disabled:i,name:o,exact:a}=e||{},[s,l]=r.default.useState(n._formState),c=r.default.useRef(!0),u=r.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=r.default.useRef(o);return d.current=o,F({disabled:i,next:e=>c.current&&N(d.current,e.name,a)&&P(e,u.current,n._updateFormState)&&l({...n._formState,...e}),subject:n._subjects.state}),r.default.useEffect(()=>(c.current=!0,u.current.isValid&&n._updateValid(!0),()=>{c.current=!1}),[n]),r.default.useMemo(()=>k(s,n,u.current,!1),[s,n])}({control:o,name:n,exact:!0}),g=r.default.useRef(o.register(n,{...e.rules,value:l,..._(e.disabled)?{disabled:e.disabled}:{}})),f=r.default.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!m(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!m(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!m(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!m(d.validatingFields,n)},error:{enumerable:!0,get:()=>m(d.errors,n)}}),[d,n]),v=r.default.useMemo(()=>({name:n,value:l,..._(i)||d.disabled?{disabled:d.disabled||i}:{},onChange:e=>g.current.onChange({target:{value:c(e),name:n},type:E.CHANGE}),onBlur:()=>g.current.onBlur({target:{value:m(o._formValues,n),name:n},type:E.BLUR}),ref:e=>{const t=m(o._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}}),[n,o._formValues,i,d.disabled,l,o._fields]);return r.default.useEffect(()=>{const e=o._options.shouldUnregister||a,t=(e,t)=>{const n=m(o._fields,e);n&&n._f&&(n._f.mount=t)};if(t(n,!0),e){const e=p(m(o._options.defaultValues,n));C(o._defaultValues,n,e),h(m(o._formValues,n))&&C(o._formValues,n,e)}return!s&&o.register(n),()=>{(s?e&&!o._state.action:e)?o.unregister(n):t(n,!1)}},[n,o,s,a]),r.default.useEffect(()=>{o._updateDisabledField({disabled:i,fields:o._fields,name:n})},[i,n,o]),r.default.useMemo(()=>({field:v,formState:d,fieldState:f}),[v,d,f])}var V=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},W=e=>({isOnSubmit:!e||e===b.onSubmit,isOnBlur:e===b.onBlur,isOnChange:e===b.onChange,isOnAll:e===b.all,isOnTouch:e===b.onTouched}),G=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const H=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=m(e,i);if(n){const{_f:e,...o}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(H(o,t))break}else if(l(o)&&H(o,t))break}}};var $=(e,t,n)=>{const r=x(m(e,n));return C(r,"root",t[n]),C(e,n,r),e},z=e=>"file"===e.type,Z=e=>"function"==typeof e,q=e=>{if(!g)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},K=e=>j(e),Y=e=>"radio"===e.type,J=e=>e instanceof RegExp;const Q={value:!1,isValid:!1},X={value:!0,isValid:!0};var ee=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!h(e[0].attributes.value)?h(e[0].value)||""===e[0].value?X:{value:e[0].value,isValid:!0}:X:Q}return Q};const te={isValid:!1,value:null};var ne=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,te):te;function re(e,t,n="validate"){if(K(e)||Array.isArray(e)&&e.every(K)||_(e)&&!e)return{type:n,message:K(e)?e:"",ref:t}}var ie=e=>l(e)&&!J(e)?e:{value:e,message:""},oe=async(e,t,n,r,o,s)=>{const{ref:c,refs:u,required:d,maxLength:g,minLength:p,min:f,max:v,pattern:y,validate:C,name:E,valueAsNumber:b,mount:I}=e._f,R=m(n,E);if(!I||t.has(E))return{};const k=u?u[0]:c,P=e=>{o&&k.reportValidity&&(k.setCustomValidity(_(e)?"":e||""),k.reportValidity())},x={},N=Y(c),F=i(c),B=N||F,U=(b||z(c))&&h(c.value)&&h(R)||q(c)&&""===c.value||""===R||Array.isArray(R)&&!R.length,W=V.bind(null,E,r,x),G=(e,t,n,r=D,i=w)=>{const o=e?t:n;x[E]={type:e?r:i,message:o,ref:c,...W(e?r:i,o)}};if(s?!Array.isArray(R)||!R.length:d&&(!B&&(U||a(R))||_(R)&&!R||F&&!ee(u).isValid||N&&!ne(u).isValid)){const{value:e,message:t}=K(d)?{value:!!d,message:d}:ie(d);if(e&&(x[E]={type:A,message:t,ref:k,...W(A,t)},!r))return P(t),x}if(!(U||a(f)&&a(v))){let e,t;const n=ie(v),i=ie(f);if(a(R)||isNaN(R)){const r=c.valueAsDate||new Date(R),o=e=>new Date((new Date).toDateString()+" "+e),a="time"==c.type,s="week"==c.type;j(n.value)&&R&&(e=a?o(R)>o(n.value):s?R>n.value:r>new Date(n.value)),j(i.value)&&R&&(t=a?o(R)<o(i.value):s?R<i.value:r<new Date(i.value))}else{const r=c.valueAsNumber||(R?+R:R);a(n.value)||(e=r>n.value),a(i.value)||(t=r<i.value)}if((e||t)&&(G(!!e,n.message,i.message,S,T),!r))return P(x[E].message),x}if((g||p)&&!U&&(j(R)||s&&Array.isArray(R))){const e=ie(g),t=ie(p),n=!a(e.value)&&R.length>+e.value,i=!a(t.value)&&R.length<+t.value;if((n||i)&&(G(n,e.message,t.message),!r))return P(x[E].message),x}if(y&&!U&&j(R)){const{value:e,message:t}=ie(y);if(J(e)&&!R.match(e)&&(x[E]={type:O,message:t,ref:c,...W(O,t)},!r))return P(t),x}if(C)if(Z(C)){const e=re(await C(R,n),k);if(e&&(x[E]={...e,...W(M,e.message)},!r))return P(e.message),x}else if(l(C)){let e={};for(const t in C){if(!L(e)&&!r)break;const i=re(await C[t](R,n),k,t);i&&(e={...i,...W(t,i.message)},P(i.message),r&&(x[E]=e))}if(!L(e)&&(x[E]={ref:k,...e},!r))return x}return P(!0),x};function ae(e,t){const n=Array.isArray(t)?t:v(t)?[t]:y(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=h(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,o=n[i];return r&&delete r[o],0!==i&&(l(r)&&L(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!h(e[t]))return!1;return!0}(r))&&ae(e,n.slice(0,-1)),e}var se=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},le=e=>a(e)||!s(e);function ce(e,t){if(le(e)||le(t))return e===t;if(o(e)&&o(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(o(n)&&o(e)||l(n)&&l(e)||Array.isArray(n)&&Array.isArray(e)?!ce(n,e):n!==e)return!1}}return!0}var ue=e=>"select-multiple"===e.type,de=e=>Y(e)||i(e),ge=e=>q(e)&&e.isConnected,pe=e=>{for(const t in e)if(Z(e[t]))return!0;return!1};function fe(e,t={}){const n=Array.isArray(e);if(l(e)||n)for(const n in e)Array.isArray(e[n])||l(e[n])&&!pe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},fe(e[n],t[n])):a(e[n])||(t[n]=!0);return t}function he(e,t,n){const r=Array.isArray(e);if(l(e)||r)for(const r in e)Array.isArray(e[r])||l(e[r])&&!pe(e[r])?h(t)||le(n[r])?n[r]=Array.isArray(e[r])?fe(e[r],[]):{...fe(e[r])}:he(e[r],a(t)?{}:t[r],n[r]):n[r]=!ce(e[r],t[r]);return n}var me=(e,t)=>he(e,t,fe(t)),_e=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>h(e)?e:t?""===e?NaN:e?+e:e:n&&j(e)?new Date(e):r?r(e):e;function ve(e){const t=e.ref;return z(t)?t.files:Y(t)?ne(e.refs).value:ue(t)?[...t.selectedOptions].map(({value:e})=>e):i(t)?ee(e.refs).value:_e(h(t.value)?e.ref.value:t.value,e)}var ye=(e,t,n,r)=>{const i={};for(const n of e){const e=m(t,n);e&&C(i,n,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Ce=e=>h(e)?e:J(e)?e.source:l(e)?J(e.value)?e.value.source:e.value:e;const Ee="AsyncFunction";var be=e=>!!e&&!!e.validate&&!!(Z(e.validate)&&e.validate.constructor.name===Ee||l(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Ee)),Se=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Te(e,t,n){const r=m(e,n);if(r||v(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),o=m(t,r),a=m(e,r);if(o&&!Array.isArray(o)&&n!==r)return{name:n};if(a&&a.type)return{name:r,error:a};i.pop()}return{name:n}}var De=(e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e),we=(e,t)=>!f(m(e,t)).length&&ae(e,t);const Oe={mode:b.onSubmit,reValidateMode:b.onChange,shouldFocusError:!0};function Ae(e={}){let t,n={...Oe,...e},r={submitCount:0,isDirty:!1,isLoading:Z(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},s={},d=(l(n.defaultValues)||l(n.values))&&p(n.defaultValues||n.values)||{},v=n.shouldUnregister?{}:p(d),y={action:!1,mount:!1,watch:!1},S={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},T=0;const D={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},w={values:se(),array:se(),state:se()},O=W(n.mode),A=W(n.reValidateMode),M=n.criteriaMode===b.all,I=async e=>{if(!n.disabled&&(D.isValid||e)){const e=n.resolver?L((await F()).errors):await U(s,!0);e!==r.isValid&&w.state.next({isValid:e})}},R=(e,t)=>{n.disabled||!D.isValidating&&!D.validatingFields||((e||Array.from(S.mount)).forEach(e=>{e&&(t?C(r.validatingFields,e,t):ae(r.validatingFields,e))}),w.state.next({validatingFields:r.validatingFields,isValidating:!L(r.validatingFields)}))},k=(e,t,n,r)=>{const i=m(s,e);if(i){const o=m(v,e,h(n)?m(d,e):n);h(o)||r&&r.defaultChecked||t?C(v,e,t?o:ve(i._f)):Y(e,o),y.mount&&I()}},P=(e,t,i,o,a)=>{let l=!1,c=!1;const u={name:e};if(!n.disabled){const n=!!(m(s,e)&&m(s,e)._f&&m(s,e)._f.disabled);if(!i||o){D.isDirty&&(c=r.isDirty,r.isDirty=u.isDirty=V(),l=c!==u.isDirty);const i=n||ce(m(d,e),t);c=!(n||!m(r.dirtyFields,e)),i||n?ae(r.dirtyFields,e):C(r.dirtyFields,e,!0),u.dirtyFields=r.dirtyFields,l=l||D.dirtyFields&&c!==!i}if(i){const t=m(r.touchedFields,e);t||(C(r.touchedFields,e,i),u.touchedFields=r.touchedFields,l=l||D.touchedFields&&t!==i)}l&&a&&w.state.next(u)}return l?u:{}},N=(e,i,o,a)=>{const s=m(r.errors,e),l=D.isValid&&_(i)&&r.isValid!==i;var c;if(n.delayError&&o?(c=()=>((e,t)=>{C(r.errors,e,t),w.state.next({errors:r.errors})})(e,o),t=e=>{clearTimeout(T),T=setTimeout(c,e)},t(n.delayError)):(clearTimeout(T),t=null,o?C(r.errors,e,o):ae(r.errors,e)),(o?!ce(s,o):s)||!L(a)||l){const t={...a,...l&&_(i)?{isValid:i}:{},errors:r.errors,name:e};r={...r,...t},w.state.next(t)}},F=async e=>{R(e,!0);const t=await n.resolver(v,n.context,ye(e||S.mount,s,n.criteriaMode,n.shouldUseNativeValidation));return R(e),t},U=async(e,t,i={valid:!0})=>{for(const o in e){const a=e[o];if(a){const{_f:e,...s}=a;if(e){const s=S.array.has(e.name),l=a._f&&be(a._f);l&&D.validatingFields&&R([o],!0);const c=await oe(a,S.disabled,v,M,n.shouldUseNativeValidation&&!t,s);if(l&&D.validatingFields&&R([o]),c[e.name]&&(i.valid=!1,t))break;!t&&(m(c,e.name)?s?$(r.errors,c,e.name):C(r.errors,e.name,c[e.name]):ae(r.errors,e.name))}!L(s)&&await U(s,t,i)}}return i.valid},V=(e,t)=>!n.disabled&&(e&&t&&C(v,e,t),!ce(ne(),d)),K=(e,t,n)=>B(e,S,{...y.mount?v:h(t)?d:j(e)?{[e]:t}:t},n,t),Y=(e,t,n={})=>{const r=m(s,e);let o=t;if(r){const n=r._f;n&&(!n.disabled&&C(v,e,_e(t,n)),o=q(n.ref)&&a(t)?"":t,ue(n.ref)?[...n.ref.options].forEach(e=>e.selected=o.includes(e.value)):n.refs?i(n.ref)?n.refs.length>1?n.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find(t=>t===e.value):o===e.value)):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach(e=>e.checked=e.value===o):z(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||w.values.next({name:e,values:{...v}})))}(n.shouldDirty||n.shouldTouch)&&P(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&te(e)},J=(e,t,n)=>{for(const r in t){const i=t[r],a=`${e}.${r}`,c=m(s,a);(S.array.has(e)||l(i)||c&&!c._f)&&!o(i)?J(a,i,n):Y(a,i,n)}},Q=(e,t,n={})=>{const i=m(s,e),o=S.array.has(e),l=p(t);C(v,e,l),o?(w.array.next({name:e,values:{...v}}),(D.isDirty||D.dirtyFields)&&n.shouldDirty&&w.state.next({name:e,dirtyFields:me(d,v),isDirty:V(e,l)})):!i||i._f||a(l)?Y(e,l,n):J(e,l,n),G(e,S)&&w.state.next({...r}),w.values.next({name:y.mount?e:void 0,values:{...v}})},X=async e=>{y.mount=!0;const i=e.target;let a=i.name,l=!0;const u=m(s,a),d=e=>{l=Number.isNaN(e)||o(e)&&isNaN(e.getTime())||ce(e,m(v,a,e))};if(u){let o,g;const p=i.type?ve(u._f):c(e),f=e.type===E.BLUR||e.type===E.FOCUS_OUT,h=!Se(u._f)&&!n.resolver&&!m(r.errors,a)&&!u._f.deps||De(f,m(r.touchedFields,a),r.isSubmitted,A,O),_=G(a,S,f);C(v,a,p),f?(u._f.onBlur&&u._f.onBlur(e),t&&t(0)):u._f.onChange&&u._f.onChange(e);const y=P(a,p,f,!1),b=!L(y)||_;if(!f&&w.values.next({name:a,type:e.type,values:{...v}}),h)return D.isValid&&("onBlur"===n.mode&&f?I():f||I()),b&&w.state.next({name:a,..._?{}:y});if(!f&&_&&w.state.next({...r}),n.resolver){const{errors:e}=await F([a]);if(d(p),l){const t=Te(r.errors,s,a),n=Te(e,s,t.name||a);o=n.error,a=n.name,g=L(e)}}else R([a],!0),o=(await oe(u,S.disabled,v,M,n.shouldUseNativeValidation))[a],R([a]),d(p),l&&(o?g=!1:D.isValid&&(g=await U(s,!0)));l&&(u._f.deps&&te(u._f.deps),N(a,g,o,y))}},ee=(e,t)=>{if(m(r.errors,t)&&e.focus)return e.focus(),1},te=async(e,t={})=>{let i,o;const a=x(e);if(n.resolver){const t=await(async e=>{const{errors:t}=await F(e);if(e)for(const n of e){const e=m(t,n);e?C(r.errors,n,e):ae(r.errors,n)}else r.errors=t;return t})(h(e)?e:a);i=L(t),o=e?!a.some(e=>m(t,e)):i}else e?(o=(await Promise.all(a.map(async e=>{const t=m(s,e);return await U(t&&t._f?{[e]:t}:t)}))).every(Boolean),(o||r.isValid)&&I()):o=i=await U(s);return w.state.next({...!j(e)||D.isValid&&i!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:i}:{},errors:r.errors}),t.shouldFocus&&!o&&H(s,ee,e?a:S.mount),o},ne=e=>{const t={...y.mount?v:d};return h(e)?t:j(e)?m(t,e):e.map(e=>m(t,e))},re=(e,t)=>({invalid:!!m((t||r).errors,e),isDirty:!!m((t||r).dirtyFields,e),error:m((t||r).errors,e),isValidating:!!m(r.validatingFields,e),isTouched:!!m((t||r).touchedFields,e)}),ie=(e,t,n)=>{const i=(m(s,e,{_f:{}})._f||{}).ref,o=m(r.errors,e)||{},{ref:a,message:l,type:c,...u}=o;C(r.errors,e,{...u,...t,ref:i}),w.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&i&&i.focus&&i.focus()},le=(e,t={})=>{for(const i of e?x(e):S.mount)S.mount.delete(i),S.array.delete(i),t.keepValue||(ae(s,i),ae(v,i)),!t.keepError&&ae(r.errors,i),!t.keepDirty&&ae(r.dirtyFields,i),!t.keepTouched&&ae(r.touchedFields,i),!t.keepIsValidating&&ae(r.validatingFields,i),!n.shouldUnregister&&!t.keepDefaultValue&&ae(d,i);w.values.next({values:{...v}}),w.state.next({...r,...t.keepDirty?{isDirty:V()}:{}}),!t.keepIsValid&&I()},pe=({disabled:e,name:t,field:n,fields:r})=>{(_(e)&&y.mount||e||S.disabled.has(t))&&(e?S.disabled.add(t):S.disabled.delete(t),P(t,ve(n?n._f:m(r,t)._f),!1,!1,!0))},fe=(e,t={})=>{let r=m(s,e);const i=_(t.disabled)||_(n.disabled);return C(s,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),S.mount.add(e),r?pe({field:r,disabled:_(t.disabled)?t.disabled:n.disabled,name:e}):k(e,!0,t.value),{...i?{disabled:t.disabled||n.disabled}:{},...n.progressive?{required:!!t.required,min:Ce(t.min),max:Ce(t.max),minLength:Ce(t.minLength),maxLength:Ce(t.maxLength),pattern:Ce(t.pattern)}:{},name:e,onChange:X,onBlur:X,ref:i=>{if(i){fe(e,t),r=m(s,e);const n=h(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=de(n),a=r._f.refs||[];if(o?a.find(e=>e===n):n===r._f.ref)return;C(s,e,{_f:{...r._f,...o?{refs:[...a.filter(ge),n,...Array.isArray(m(d,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),k(e,!1,void 0,n)}else r=m(s,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!u(S.array,e)||!y.action)&&S.unMount.add(e)}}},he=()=>n.shouldFocusError&&H(s,ee,S.mount),Ee=(e,t)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let a=p(v);if(S.disabled.size)for(const e of S.disabled)C(a,e,void 0);if(w.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await F();r.errors=e,a=t}else await U(s);if(ae(r.errors,"root"),L(r.errors)){w.state.next({errors:{}});try{await e(a,i)}catch(e){o=e}}else t&&await t({...r.errors},i),he(),setTimeout(he);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:L(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},Ae=(e,t={})=>{const i=e?p(e):d,o=p(i),a=L(e),l=a?d:o;if(t.keepDefaultValues||(d=i),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...S.mount,...Object.keys(me(d,v))]);for(const t of Array.from(e))m(r.dirtyFields,t)?C(l,t,m(v,t)):Q(t,m(l,t))}else{if(g&&h(e))for(const e of S.mount){const t=m(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(q(e)){const t=e.closest("form");if(t){t.reset();break}}}}s={}}v=n.shouldUnregister?t.keepDefaultValues?p(d):{}:p(l),w.array.next({values:{...l}}),w.values.next({values:{...l}})}S={mount:t.keepDirtyValues?S.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!D.isValid||!!t.keepIsValid||!!t.keepDirtyValues,y.watch=!!n.shouldUnregister,w.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!a&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||ce(e,d))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:a?{}:t.keepDirtyValues?t.keepDefaultValues&&v?me(d,v):r.dirtyFields:t.keepDefaultValues&&e?me(d,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},Me=(e,t)=>Ae(Z(e)?e(v):e,t);return{control:{register:fe,unregister:le,getFieldState:re,handleSubmit:Ee,setError:ie,_executeSchema:F,_getWatch:K,_getDirty:V,_updateValid:I,_removeUnmounted:()=>{for(const e of S.unMount){const t=m(s,e);t&&(t._f.refs?t._f.refs.every(e=>!ge(e)):!ge(t._f.ref))&&le(e)}S.unMount=new Set},_updateFieldArray:(e,t=[],i,o,a=!0,l=!0)=>{if(o&&i&&!n.disabled){if(y.action=!0,l&&Array.isArray(m(s,e))){const t=i(m(s,e),o.argA,o.argB);a&&C(s,e,t)}if(l&&Array.isArray(m(r.errors,e))){const t=i(m(r.errors,e),o.argA,o.argB);a&&C(r.errors,e,t),we(r.errors,e)}if(D.touchedFields&&l&&Array.isArray(m(r.touchedFields,e))){const t=i(m(r.touchedFields,e),o.argA,o.argB);a&&C(r.touchedFields,e,t)}D.dirtyFields&&(r.dirtyFields=me(d,v)),w.state.next({name:e,isDirty:V(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else C(v,e,t)},_updateDisabledField:pe,_getFieldArray:e=>f(m(y.mount?v:d,e,n.shouldUnregister?m(d,e,[]):[])),_reset:Ae,_resetDefaultValues:()=>Z(n.defaultValues)&&n.defaultValues().then(e=>{Me(e,n.resetOptions),w.state.next({isLoading:!1})}),_updateFormState:e=>{r={...r,...e}},_disableForm:e=>{_(e)&&(w.state.next({disabled:e}),H(s,(t,n)=>{const r=m(s,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:w,_proxyFormState:D,_setErrors:e=>{r.errors=e,w.state.next({errors:r.errors,isValid:!1})},get _fields(){return s},get _formValues(){return v},get _state(){return y},set _state(e){y=e},get _defaultValues(){return d},get _names(){return S},set _names(e){S=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:te,register:fe,handleSubmit:Ee,watch:(e,t)=>Z(e)?w.values.subscribe({next:n=>e(K(void 0,t),n)}):K(e,t,!0),setValue:Q,getValues:ne,reset:Me,resetField:(e,t={})=>{m(s,e)&&(h(t.defaultValue)?Q(e,p(m(d,e))):(Q(e,t.defaultValue),C(d,e,p(t.defaultValue))),t.keepTouched||ae(r.touchedFields,e),t.keepDirty||(ae(r.dirtyFields,e),r.isDirty=t.defaultValue?V(e,p(m(d,e))):V()),t.keepError||(ae(r.errors,e),D.isValid&&I()),w.state.next({...r}))},clearErrors:e=>{e&&x(e).forEach(e=>ae(r.errors,e)),w.state.next({errors:e?r.errors:{}})},unregister:le,setError:ie,setFocus:(e,t={})=>{const n=m(s,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&Z(e.select)&&e.select())}},getFieldState:re}}function Me(e={}){const t=r.default.useRef(void 0),n=r.default.useRef(void 0),[i,o]=r.default.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Ae(e),formState:i});const a=t.current.control;return a._options=e,F({subject:a._subjects.state,next:e=>{P(e,a._proxyFormState,a._updateFormState,!0)&&o({...a._formState})}}),r.default.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),r.default.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==i.isDirty&&a._subjects.state.next({isDirty:e})}},[a,i.isDirty]),r.default.useEffect(()=>{e.values&&!ce(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,o(e=>({...e}))):a._resetDefaultValues()},[e.values,a]),r.default.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),r.default.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),r.default.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=k(i,a),t.current}},18357:function(e,t,n){"use strict";n.d(t,{YD:function(){return p},df:function(){return g}});var r=n(98661),i=Object.defineProperty,o=(e,t,n)=>((e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),a=new Map,s=new WeakMap,l=0,c=void 0;function u(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(n=e.root,n?(s.has(n)||(l+=1,s.set(n,l.toString())),s.get(n)):"0"):e[t]}`;var n}).toString()}function d(e,t,n={},r=c){if(void 0===window.IntersectionObserver&&void 0!==r){const i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:i,observer:o,elements:s}=function(e){const t=u(e);let n=a.get(t);if(!n){const r=new Map;let i;const o=new IntersectionObserver(t=>{t.forEach(t=>{var n;const o=t.isIntersecting&&i.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(n=r.get(t.target))||n.forEach(e=>{e(o,t)})})},e);i=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:r},a.set(t,n)}return n}(n),l=s.get(e)||[];return s.has(e)||s.set(e,l),l.push(t),o.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(s.delete(e),o.unobserve(e)),0===s.size&&(o.disconnect(),a.delete(i))}}var g=class extends r.Component{constructor(e){super(e),o(this,"node",null),o(this,"_unobserveCb",null),o(this,"handleNode",e=>{this.node&&(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()}),o(this,"handleChange",(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),function(e){return"function"!=typeof e.children}(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)}),this.state={inView:!!e.initialInView,entry:void 0}}componentDidMount(){this.unobserve(),this.observeNode()}componentDidUpdate(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve()}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:i,fallbackInView:o}=this.props;this._unobserveCb=d(this.node,this.handleChange,{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:i},o)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){const{children:e}=this.props;if("function"==typeof e){const{inView:t,entry:n}=this.state;return e({inView:t,entry:n,ref:this.handleNode})}const{as:t,triggerOnce:n,threshold:i,root:o,rootMargin:a,onChange:s,skip:l,trackVisibility:c,delay:u,initialInView:d,fallbackInView:g,...p}=this.props;return r.createElement(t||"div",{ref:this.handleNode,...p},e)}};function p({threshold:e,delay:t,trackVisibility:n,rootMargin:i,root:o,triggerOnce:a,skip:s,initialInView:l,fallbackInView:c,onChange:u}={}){var g;const[p,f]=r.useState(null),h=r.useRef(),[m,_]=r.useState({inView:!!l,entry:void 0});h.current=u,r.useEffect(()=>{if(s||!p)return;let r;return r=d(p,(e,t)=>{_({inView:e,entry:t}),h.current&&h.current(e,t),t.isIntersecting&&a&&r&&(r(),r=void 0)},{root:o,rootMargin:i,threshold:e,trackVisibility:n,delay:t},c),()=>{r&&r()}},[Array.isArray(e)?e.toString():e,p,o,i,a,s,n,c,t]);const v=null==(g=m.entry)?void 0:g.target,y=r.useRef();p||!v||a||s||y.current===v||(y.current=v,_({inView:!!l,entry:void 0}));const C=[f,m.inView,m.entry];return C.ref=C[0],C.inView=C[1],C.entry=C[2],C}},45007:function(e,t,n){"use strict";n.d(t,{I0:function(){return S},v9:function(){return w},wU:function(){return g},zt:function(){return _}});var r=n(98661),i=n(31103);function o(e){e()}var a={notify(){},get:()=>[]};function s(e,t){let n,r=a,i=0,s=!1;function l(){d.onStateChange&&d.onStateChange()}function c(){i++,n||(n=t?t.addNestedSub(l):e.subscribe(l),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){o(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function u(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=a)}const d={addNestedSub:function(e){c();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),u())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:l,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,c())},tryUnsubscribe:function(){s&&(s=!1,u())},getListeners:()=>r};return d}var l=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),c=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),u=(()=>l||c?r.useLayoutEffect:r.useEffect)();function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function g(e,t){if(d(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!d(e[n[r]],t[n[r]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var p=Symbol.for("react-redux-context"),f="undefined"!=typeof globalThis?globalThis:{};function h(){if(!r.createContext)return{};const e=f[p]??=new Map;let t=e.get(r.createContext);return t||(t=r.createContext(null),e.set(r.createContext,t)),t}var m=h();var _=function(e){const{children:t,context:n,serverState:i,store:o}=e,a=r.useMemo(()=>{const e=s(o);return{store:o,subscription:e,getServerState:i?()=>i:void 0}},[o,i]),l=r.useMemo(()=>o.getState(),[o]);u(()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==o.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,l]);const c=n||m;return r.createElement(c.Provider,{value:a},t)};function v(e=m){return function(){return r.useContext(e)}}var y=v();function C(e=m){const t=e===m?y:v(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var E=C();function b(e=m){const t=e===m?E:C(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var S=b(),T=(e,t)=>e===t;function D(e=m){const t=e===m?y:v(e),n=(e,n={})=>{const{equalityFn:o=T}="function"==typeof n?{equalityFn:n}:n;const a=t(),{store:s,subscription:l,getServerState:c}=a,u=(r.useRef(!0),r.useCallback({[e.name](t){return e(t)}}[e.name],[e])),d=(0,i.useSyncExternalStoreWithSelector)(l.addNestedSub,s.getState,c||s.getState,u,o);return r.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var w=D()},65849:function(e,t,n){"use strict";function r(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}n.d(t,{DE:function(){return a},LG:function(){return l},qC:function(){return s}});function i(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function o(e,t){return function(...n){return t(e.apply(this,n))}}function a(e,t){if("function"==typeof e)return o(e,t);if("object"!=typeof e||null===e)throw new Error(r(16));const n={};for(const r in e){const i=e[r];"function"==typeof i&&(n[r]=o(i,t))}return n}function s(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function l(e){return i(e)&&"type"in e&&"string"==typeof e.type}},19119:function(e,t,n){"use strict";n.d(t,{P1:function(){return g},kO:function(){return u},wN:function(){return d}});function r(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var i=e=>Array.isArray(e)?e:[e];function o(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const n=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var a="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},s=0,l=1;function c(){return{s:s,v:void 0,o:null,p:null}}function u(e,t={}){let n=c();const{resultEqualityCheck:r}=t;let i,o=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=c(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=c(),e.set(n,t)):t=r}}const u=t;let d;if(t.s===l)d=t.v;else if(d=e.apply(null,arguments),o++,r){const e=i?.deref?.()??i;null!=e&&r(e,d)&&(d=e,0!==o&&o--);i="object"==typeof d&&null!==d||"function"==typeof d?new a(d):d}return u.s=l,u.v=d,d}return s.clearCache=()=>{n=c(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function d(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,a=(...e)=>{let t,a=0,s=0,l={},c=e.pop();"object"==typeof c&&(l=c,c=e.pop()),r(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...l},{memoize:g,memoizeOptions:p=[],argsMemoize:f=u,argsMemoizeOptions:h=[],devModeChecks:m={}}=d,_=i(p),v=i(h),y=o(e),C=g(function(){return a++,c.apply(null,arguments)},..._);const E=f(function(){s++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return t=C.apply(null,e),t},...v);return Object.assign(E,{resultFunc:c,memoizedResultFunc:C,dependencies:y,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>t,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:f})};return Object.assign(a,{withTypes:()=>a}),a}var g=d(u),p=Object.assign((e,t=g)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map(t=>e[t]),(...e)=>e.reduce((e,t,r)=>(e[n[r]]=t,e),{}))},{withTypes:()=>p})}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return a[e].call(n.exports,n,n.exports,l),n.exports}l.m=a,l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},l.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);l.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(function(e){o[e]=function(){return n[e]}});return o.default=function(){return n},l.d(i,o),i},l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=function(e){return Promise.all(Object.keys(l.f).reduce(function(t,n){return l.f[n](e,t),t},[]))},l.u=function(e){return"js/fa15b64/"+({12:"locale-da-json",13:"locale-sv-json",16:"locale-fi-json",24:"locale-ro-json",111:"locale-pl-json",131:"locale-nl-json",206:"QRCode",221:"locale-fr-json",308:"devtools",346:"locale-ja-json",375:"locale-be-json",414:"Callback",428:"OmniMenu",437:"DebugPanel",441:"locale-ru-RU-json",442:"locale-el-json",453:"locale-it-json",535:"chatcontainer",560:"locale-nl-NL-json",579:"locale-zh-json",594:"CampaignPopup",645:"locale-de-json",702:"locale-pt-json",722:"locale-no-json",738:"locale-tr-json",753:"locale-en-US-json",766:"locale-id-json",772:"webRTCCall",790:"locale-es-json",796:"locale-pt-BR-json",829:"cobrowse",831:"locale-kk-json",949:"locale-cs-json",994:"locale-uk-json"}[e]||e)+".js"},l.miniCssF=function(e){return"css/fa15b64/"+{414:"Callback",428:"OmniMenu",437:"DebugPanel",535:"chatcontainer",594:"CampaignPopup",772:"webRTCCall"}[e]+".widget.css"},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},r="widget_react:",l.l=function(e,t,i,o){if(n[e])n[e].push(t);else{var a,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+i){a=d;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,l.nc&&a.setAttribute("nonce",l.nc),a.setAttribute("data-webpack",r+i),a.src=e),n[e]=[t];var g=function(t,r){a.onerror=a.onload=null,clearTimeout(p);var i=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(function(e){return e(r)}),t)return t(r)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=g.bind(null,a.onerror),a.onload=g.bind(null,a.onload),s&&document.head.appendChild(a)}},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/public",i=function(e){return new Promise(function(t,n){var r=l.miniCssF(e),i=l.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var a;if((i=(a=o[r]).getAttribute("data-href"))===e||i===t)return a}}(r,i))return t();!function(e,t,n,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(o){if(i.onerror=i.onload=null,"load"===o.type)n();else{var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=s,i.parentNode.removeChild(i),r(l)}},i.href=t,function(e){window.parent.jivo_cspNonce&&e.setAttribute("nonce",window.parent.jivo_cspNonce);var t=window.parent.document.getElementsByTagName("head")[0];if(!t)throw new Error("Error inserting css:",e.href,"Reason: no head");{const n=t.querySelector(`[href*="${e.href.split("/css")[1]}"]`);n&&t.removeChild(n),t.appendChild(e)}}(i)}(e,i,t,n)})},o={296:0},l.f.miniCss=function(e,t){o[e]?t.push(o[e]):0!==o[e]&&{414:1,428:1,437:1,535:1,594:1,772:1}[e]&&t.push(o[e]=i(e).then(function(){o[e]=0},function(t){throw delete o[e],t}))},function(){var e={296:0};l.f.j=function(t,n){var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(function(n,i){r=e[t]=[n,i]});n.push(r[2]=i);var o=l.p+l.u(t),a=new Error;l.l(o,function(n){if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}},"chunk-"+t,t)}};var t=function(t,n){var r,i,o=n[0],a=n[1],s=n[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(r in a)l.o(a,r)&&(l.m[r]=a[r]);if(s)s(l)}for(t&&t(n);c<o.length;c++)i=o[c],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkwidget_react=self.webpackChunkwidget_react||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";var e=l(13321),t=l(33180),n=l(90061),r=l(44145),i=l(16026),o=l(45948),a=l(7919);(0,e.initPreactDevtools)(),(0,n.setLogsEnabled)((0,r.getFeatures)().logs);const s=new a.Application;!(i.EnvironmentManager.isWidgetConstructor()||i.EnvironmentManager.isContactFormPreview()||o.isPopupConstructor)&&((0,r.getClient)().clientId&&(0,r.getApp)().chatStarted&&!(0,r.getApp)().maintenance&&!(0,r.getFeatures)().recaptcha)||t.cssLoader.subscribe(()=>{s.start()},()=>{s.stop()})}()}();</script></head><body><iframe src="https://code.jivo.ru/social.min.html?mode=checkvk&amp;vk_app_id=5299720&amp;vk_joint_id=46589309&amp;vk_key=6e756c6c3d7a725547387856564f64&amp;logs=0#rand=530,lang=ru_RU,geo=RU" class="iframe-social" title="JivoSocial"></iframe><jdiv style="position: absolute; top: -9999px; width: 0px; height: 0px; padding: 0px; overflow: hidden;"><jdiv id="jv-autoresize" style="line-height: 20px; text-decoration: none; letter-spacing: normal; font-size: 15px; font-family: Arial, Arial, sans-serif; font-style: normal; font-weight: 400; text-transform: none; text-align: left; direction: ltr; word-spacing: 0px; font-size-adjust: none; padding-left: 16px; padding-right: 58px; width: 336px; box-sizing: border-box; white-space: pre-wrap; overflow-wrap: break-word; padding-top: 18px; display: block;"> </jdiv></jdiv></body></html>